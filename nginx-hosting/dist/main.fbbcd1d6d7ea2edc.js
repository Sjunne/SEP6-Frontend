var jie=Object.defineProperty,Gie=Object.defineProperties,$ie=Object.getOwnPropertyDescriptors,d3=Object.getOwnPropertySymbols,Wie=Object.prototype.hasOwnProperty,zie=Object.prototype.propertyIsEnumerable,h3=(wt,He,W)=>He in wt?jie(wt,He,{enumerable:!0,configurable:!0,writable:!0,value:W}):wt[He]=W,f3=(wt,He)=>{for(var W in He||(He={}))Wie.call(He,W)&&h3(wt,W,He[W]);if(d3)for(var W of d3(He))zie.call(He,W)&&h3(wt,W,He[W]);return wt},p3=(wt,He)=>Gie(wt,$ie(He));(self.webpackChunkSEP6_Frontend=self.webpackChunkSEP6_Frontend||[]).push([[179],{2011:(wt,He,W)=>{"use strict";W.d(He,{Dh:()=>Te,GT:()=>Re,cc:()=>Qe,hO:()=>mt,on:()=>ne,pX:()=>Se,xv:()=>Be});var o=W(5e3),P=W(127),j=W(5813);wt=W.hmd(wt);const we=["ngOnDestroy"],Se=(We,ut,ft,ze={})=>new Proxy(We,{get:(Ze,Ue)=>ft.runOutsideAngular(()=>{var _t;if(We[Ue])return(null===(_t=null==ze?void 0:ze.spy)||void 0===_t?void 0:_t.get)&&ze.spy.get(Ue,We[Ue]),We[Ue];if(we.indexOf(Ue)>-1)return()=>{};const ye=ut.toPromise().then(Me=>{const te=Me&&Me[Ue];return"function"==typeof te?te.bind(Me):te&&te.then?te.then(ge=>ft.run(()=>ge)):ft.run(()=>te)});return new Proxy(()=>{},{get:(Me,te)=>ye[te],apply:(Me,te,ge)=>ye.then(De=>{var Ae;const it=De&&De(...ge);return(null===(Ae=null==ze?void 0:ze.spy)||void 0===Ae?void 0:Ae.apply)&&ze.spy.apply(Ue,ge,it),it})})})}),Re=(We,ut)=>{ut.forEach(ft=>{Object.getOwnPropertyNames(ft.prototype||ft).forEach(ze=>{Object.defineProperty(We.prototype,ze,Object.getOwnPropertyDescriptor(ft.prototype||ft,ze))})})};class ve{constructor(ut){return ut}}const Te=new o.OlP("angularfire2.app.options"),Be=new o.OlP("angularfire2.app.name");function ne(We,ut,ft){const Ze="object"==typeof ft&&ft||{};Ze.name=Ze.name||"string"==typeof ft&&ft||"[DEFAULT]";const _t=P.Z.apps.filter(ye=>ye&&ye.name===Ze.name)[0]||ut.runOutsideAngular(()=>P.Z.initializeApp(We,Ze));try{JSON.stringify(We)!==JSON.stringify(_t.options)&&ee("error",`${_t.name} Firebase App already initialized with different options${wt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ye){}return new ve(_t)}const ee=(We,...ut)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[We](...ut)},be={provide:ve,useFactory:ne,deps:[Te,o.R0b,[new o.FiY,Be]]};let mt=(()=>{class We{constructor(ft){P.Z.registerVersion("angularfire",j.q4.full,"core"),P.Z.registerVersion("angularfire",j.q4.full,"app-compat"),P.Z.registerVersion("angular",o.q4F.full,ft.toString())}static initializeApp(ft,ze){return{ngModule:We,providers:[{provide:Te,useValue:ft},{provide:Be,useValue:ze}]}}}return We.\u0275fac=function(ft){return new(ft||We)(o.LFG(o.Lbi))},We.\u0275mod=o.oAB({type:We}),We.\u0275inj=o.cJS({providers:[be]}),We})();function Qe(We,ut,ft,ze,Ze){const[,Ue,_t]=globalThis.\u0275AngularfireInstanceCache.find(ye=>ye[0]===We)||[];if(Ue)return function at(We,ut){try{return We.toString()===ut.toString()}catch(ft){return We===ut}}(Ze,_t)||(Oe("error",`${ut} was already initialized on the ${ft} Firebase App with different settings.${lt?" You may need to reload as Firebase is not HMR aware.":""}`),Oe("warn",{is:Ze,was:_t})),Ue;{const ye=ze();return globalThis.\u0275AngularfireInstanceCache.push([We,ye,Ze]),ye}}const lt=!!wt.hot,Oe=(We,...ut)=>{(0,o.X6Q)()&&"undefined"!=typeof console&&console[We](...ut)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(wt,He,W)=>{"use strict";W.d(He,{q4:()=>Gs,iC:()=>Ya,fc:()=>Br,HU:()=>Qc,vb:()=>Hu,JM:()=>Rg});var o=W(5e3),P=W(5867),j=W(5861),we=W(9681),Se=W(2090),Re=W(4859),ve=W(1877),Te=W(8766);const Be="@firebase/installations",be="w:0.5.9",mt="FIS_v2",ut=new Se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ft(R){return R instanceof Se.ZR&&R.code.includes("request-failed")}function ze({projectId:R}){return`https://firebaseinstallations.googleapis.com/v1/projects/${R}/installations`}function Ze(R){return{token:R.token,requestStatus:2,expiresIn:De(R.expiresIn),creationTime:Date.now()}}function Ue(R,O){return _t.apply(this,arguments)}function _t(){return(_t=(0,j.Z)(function*(R,O){const Q=(yield O.json()).error;return ut.create("request-failed",{requestName:R,serverCode:Q.code,serverMessage:Q.message,serverStatus:Q.status})})).apply(this,arguments)}function ye({apiKey:R}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R})}function Me(R,{refreshToken:O}){const V=ye(R);return V.append("Authorization",function Ae(R){return`${mt} ${R}`}(O)),V}function te(R){return ge.apply(this,arguments)}function ge(){return(ge=(0,j.Z)(function*(R){const O=yield R();return O.status>=500&&O.status<600?R():O})).apply(this,arguments)}function De(R){return Number(R.replace("s","000"))}function it(R,O){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,j.Z)(function*({appConfig:R,heartbeatServiceProvider:O},{fid:V}){const Q=ze(R),he=ye(R),Ee=O.getImmediate({optional:!0});if(Ee){const Yt=yield Ee.getHeartbeatsHeader();Yt&&he.append("x-firebase-client",Yt)}const ct={method:"POST",headers:he,body:JSON.stringify({fid:V,authVersion:mt,appId:R.appId,sdkVersion:be})},Jt=yield te(()=>fetch(Q,ct));if(Jt.ok){const Yt=yield Jt.json();return{fid:Yt.fid||V,registrationStatus:2,refreshToken:Yt.refreshToken,authToken:Ze(Yt.authToken)}}throw yield Ue("Create Installation",Jt)})).apply(this,arguments)}function Vt(R){return new Promise(O=>{setTimeout(O,R)})}const Ki=/^[cdef][\w-]{21}$/;function Lt(){try{const R=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(R),R[0]=112+R[0]%16;const V=function Qi(R){return function tn(R){return btoa(String.fromCharCode(...R)).replace(/\+/g,"-").replace(/\//g,"_")}(R).substr(0,22)}(R);return Ki.test(V)?V:""}catch(R){return""}}function Gn(R){return`${R.appName}!${R.appId}`}const Cr=new Map;function Ln(R,O){const V=Gn(R);hi(V,O),function es(R,O){const V=function yi(){return!ts&&"BroadcastChannel"in self&&(ts=new BroadcastChannel("[Firebase] FID Change"),ts.onmessage=R=>{hi(R.data.key,R.data.fid)}),ts}();V&&V.postMessage({key:R,fid:O}),function Ns(){0===Cr.size&&ts&&(ts.close(),ts=null)}()}(V,O)}function hi(R,O){const V=Cr.get(R);if(V)for(const Q of V)Q(O)}let ts=null;const xi="firebase-installations-store";let Oo=null;function Bt(){return Oo||(Oo=(0,Te.X3)("firebase-installations-database",1,{upgrade:(R,O)=>{0===O&&R.createObjectStore(xi)}})),Oo}function ns(R,O){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,j.Z)(function*(R,O){const V=Gn(R),he=(yield Bt()).transaction(xi,"readwrite"),Ee=he.objectStore(xi),Fe=yield Ee.get(V);return yield Ee.put(O,V),yield he.done,(!Fe||Fe.fid!==O.fid)&&Ln(R,O.fid),O})).apply(this,arguments)}function Mn(R){return bi.apply(this,arguments)}function bi(){return(bi=(0,j.Z)(function*(R){const O=Gn(R),Q=(yield Bt()).transaction(xi,"readwrite");yield Q.objectStore(xi).delete(O),yield Q.done})).apply(this,arguments)}function Hi(R,O){return Or.apply(this,arguments)}function Or(){return(Or=(0,j.Z)(function*(R,O){const V=Gn(R),he=(yield Bt()).transaction(xi,"readwrite"),Ee=he.objectStore(xi),Fe=yield Ee.get(V),ct=O(Fe);return void 0===ct?yield Ee.delete(V):yield Ee.put(ct,V),yield he.done,ct&&(!Fe||Fe.fid!==ct.fid)&&Ln(R,ct.fid),ct})).apply(this,arguments)}function Ai(R){return ji.apply(this,arguments)}function ji(){return(ji=(0,j.Z)(function*(R){let O;const V=yield Hi(R.appConfig,Q=>{const he=sa(Q),Ee=gn(R,he);return O=Ee.registrationPromise,Ee.installationEntry});return""===V.fid?{installationEntry:yield O}:{installationEntry:V,registrationPromise:O}})).apply(this,arguments)}function sa(R){return no(R||{fid:Lt(),registrationStatus:0})}function gn(R,O){if(0===O.registrationStatus){if(!navigator.onLine)return{installationEntry:O,registrationPromise:Promise.reject(ut.create("app-offline"))};const V={fid:O.fid,registrationStatus:1,registrationTime:Date.now()},Q=function Ut(R,O){return Nt.apply(this,arguments)}(R,V);return{installationEntry:V,registrationPromise:Q}}return 1===O.registrationStatus?{installationEntry:O,registrationPromise:ps(R)}:{installationEntry:O}}function Nt(){return(Nt=(0,j.Z)(function*(R,O){try{const V=yield it(R,O);return ns(R.appConfig,V)}catch(V){throw ft(V)&&409===V.customData.serverCode?yield Mn(R.appConfig):yield ns(R.appConfig,{fid:O.fid,registrationStatus:0}),V}})).apply(this,arguments)}function ps(R){return gs.apply(this,arguments)}function gs(){return(gs=(0,j.Z)(function*(R){let O=yield Cn(R.appConfig);for(;1===O.registrationStatus;)yield Vt(100),O=yield Cn(R.appConfig);if(0===O.registrationStatus){const{installationEntry:V,registrationPromise:Q}=yield Ai(R);return Q||V}return O})).apply(this,arguments)}function Cn(R){return Hi(R,O=>{if(!O)throw ut.create("installation-not-found");return no(O)})}function no(R){return function Pi(R){return 1===R.registrationStatus&&R.registrationTime+1e4<Date.now()}(R)?{fid:R.fid,registrationStatus:0}:R}function Qn(R,O){return X.apply(this,arguments)}function X(){return(X=(0,j.Z)(function*({appConfig:R,heartbeatServiceProvider:O},V){const Q=se(R,V),he=Me(R,V),Ee=O.getImmediate({optional:!0});if(Ee){const Yt=yield Ee.getHeartbeatsHeader();Yt&&he.append("x-firebase-client",Yt)}const ct={method:"POST",headers:he,body:JSON.stringify({installation:{sdkVersion:be,appId:R.appId}})},Jt=yield te(()=>fetch(Q,ct));if(Jt.ok)return Ze(yield Jt.json());throw yield Ue("Generate Auth Token",Jt)})).apply(this,arguments)}function se(R,{fid:O}){return`${ze(R)}/${O}/authTokens:generate`}function le(R){return je.apply(this,arguments)}function je(){return(je=(0,j.Z)(function*(R,O=!1){let V;const Q=yield Hi(R.appConfig,Ee=>{if(!mn(Ee))throw ut.create("not-registered");const Fe=Ee.authToken;if(!O&&ni(Fe))return Ee;if(1===Fe.requestStatus)return V=ie(R,O),Ee;{if(!navigator.onLine)throw ut.create("app-offline");const ct=fr(Ee);return V=It(R,ct),ct}});return V?yield V:Q.authToken})).apply(this,arguments)}function ie(R,O){return pe.apply(this,arguments)}function pe(){return(pe=(0,j.Z)(function*(R,O){let V=yield rt(R.appConfig);for(;1===V.authToken.requestStatus;)yield Vt(100),V=yield rt(R.appConfig);const Q=V.authToken;return 0===Q.requestStatus?le(R,O):Q})).apply(this,arguments)}function rt(R){return Hi(R,O=>{if(!mn(O))throw ut.create("not-registered");return function Ie(R){return 1===R.requestStatus&&R.requestTime+1e4<Date.now()}(O.authToken)?Object.assign(Object.assign({},O),{authToken:{requestStatus:0}}):O})}function It(R,O){return qt.apply(this,arguments)}function qt(){return(qt=(0,j.Z)(function*(R,O){try{const V=yield Qn(R,O),Q=Object.assign(Object.assign({},O),{authToken:V});return yield ns(R.appConfig,Q),V}catch(V){if(!ft(V)||401!==V.customData.serverCode&&404!==V.customData.serverCode){const Q=Object.assign(Object.assign({},O),{authToken:{requestStatus:0}});yield ns(R.appConfig,Q)}else yield Mn(R.appConfig);throw V}})).apply(this,arguments)}function mn(R){return void 0!==R&&2===R.registrationStatus}function ni(R){return 2===R.requestStatus&&!function Qt(R){const O=Date.now();return O<R.creationTime||R.creationTime+R.expiresIn<O+36e5}(R)}function fr(R){const O={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},R),{authToken:O})}function oe(){return(oe=(0,j.Z)(function*(R){const O=R,{installationEntry:V,registrationPromise:Q}=yield Ai(O);return Q?Q.catch(console.error):le(O).catch(console.error),V.fid})).apply(this,arguments)}function vt(){return(vt=(0,j.Z)(function*(R,O=!1){const V=R;return yield Gt(V),(yield le(V,O)).token})).apply(this,arguments)}function Gt(R){return dn.apply(this,arguments)}function dn(){return(dn=(0,j.Z)(function*(R){const{registrationPromise:O}=yield Ai(R);O&&(yield O)})).apply(this,arguments)}function Fc(R){return ut.create("missing-app-config-values",{valueName:R})}const Fs="installations",wn=R=>{const O=R.getProvider("app").getImmediate(),V=function Nr(R){if(!R||!R.options)throw Fc("App Configuration");if(!R.name)throw Fc("App Name");const O=["projectId","apiKey","appId"];for(const V of O)if(!R.options[V])throw Fc(V);return{appName:R.name,projectId:R.options.projectId,apiKey:R.options.apiKey,appId:R.options.appId}}(O);return{app:O,appConfig:V,heartbeatServiceProvider:(0,we._getProvider)(O,"heartbeat"),_delete:()=>Promise.resolve()}},Ci=R=>{const O=R.getProvider("app").getImmediate(),V=(0,we._getProvider)(O,Fs).getImmediate();return{getId:()=>function ce(R){return oe.apply(this,arguments)}(V),getToken:he=>function Ye(R){return vt.apply(this,arguments)}(V,he)}};(function kr(){(0,we._registerComponent)(new Re.wA(Fs,wn,"PUBLIC")),(0,we._registerComponent)(new Re.wA("installations-internal",Ci,"PRIVATE"))})(),(0,we.registerVersion)(Be,"0.5.9"),(0,we.registerVersion)(Be,"0.5.9","esm2017");const oa="@firebase/remote-config",Gi=new Se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ua{constructor(O,V,Q,he){this.client=O,this.storage=V,this.storageCache=Q,this.logger=he}isCachedDataFresh(O,V){if(!V)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Q=Date.now()-V,he=Q<=O;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Q}. Cache max age millis (minimumFetchIntervalMillis setting): ${O}. Is cache hit: ${he}.`),he}fetch(O){var V=this;return(0,j.Z)(function*(){const[Q,he]=yield Promise.all([V.storage.getLastSuccessfulFetchTimestampMillis(),V.storage.getLastSuccessfulFetchResponse()]);if(he&&V.isCachedDataFresh(O.cacheMaxAgeMillis,Q))return he;O.eTag=he&&he.eTag;const Ee=yield V.client.fetch(O),Fe=[V.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ee.status&&Fe.push(V.storage.setLastSuccessfulFetchResponse(Ee)),yield Promise.all(Fe),Ee})()}}function Kl(R=navigator){return R.languages&&R.languages[0]||R.language}class Xi{constructor(O,V,Q,he,Ee,Fe){this.firebaseInstallations=O,this.sdkVersion=V,this.namespace=Q,this.projectId=he,this.apiKey=Ee,this.appId=Fe}fetch(O){var V=this;return(0,j.Z)(function*(){const[Q,he]=yield Promise.all([V.firebaseInstallations.getId(),V.firebaseInstallations.getToken()]),Fe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${V.projectId}/namespaces/${V.namespace}:fetch?key=${V.apiKey}`,ct={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":O.eTag||"*"},Jt={sdk_version:V.sdkVersion,app_instance_id:Q,app_instance_id_token:he,app_id:V.appId,language_code:Kl()},Yt={method:"POST",headers:ct,body:JSON.stringify(Jt)},Rn=fetch(Fe,Yt),Xt=new Promise((as,zs)=>{O.signal.addEventListener(()=>{const Do=new Error("The operation was aborted.");Do.name="AbortError",zs(Do)})});let Ss;try{yield Promise.race([Rn,Xt]),Ss=yield Rn}catch(as){let zs="fetch-client-network";throw"AbortError"===as.name&&(zs="fetch-timeout"),Gi.create(zs,{originalErrorMessage:as.message})}let Pn=Ss.status;const To=Ss.headers.get("ETag")||void 0;let Ws,sr;if(200===Ss.status){let as;try{as=yield Ss.json()}catch(zs){throw Gi.create("fetch-client-parse",{originalErrorMessage:zs.message})}Ws=as.entries,sr=as.state}if("INSTANCE_STATE_UNSPECIFIED"===sr?Pn=500:"NO_CHANGE"===sr?Pn=304:("NO_TEMPLATE"===sr||"EMPTY_CONFIG"===sr)&&(Ws={}),304!==Pn&&200!==Pn)throw Gi.create("fetch-status",{httpStatus:Pn});return{status:Pn,eTag:To,config:Ws}})()}}class No{constructor(O,V){this.client=O,this.storage=V}fetch(O){var V=this;return(0,j.Z)(function*(){const Q=(yield V.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return V.attemptFetch(O,Q)})()}attemptFetch(O,{throttleEndTimeMillis:V,backoffCount:Q}){var he=this;return(0,j.Z)(function*(){yield function dl(R,O){return new Promise((V,Q)=>{const he=Math.max(O-Date.now(),0),Ee=setTimeout(V,he);R.addEventListener(()=>{clearTimeout(Ee),Q(Gi.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}(O.signal,V);try{const Ee=yield he.client.fetch(O);return yield he.storage.deleteThrottleMetadata(),Ee}catch(Ee){if(!function Gf(R){if(!(R instanceof Se.ZR&&R.customData))return!1;const O=Number(R.customData.httpStatus);return 429===O||500===O||503===O||504===O}(Ee))throw Ee;const Fe={throttleEndTimeMillis:Date.now()+(0,Se.$s)(Q),backoffCount:Q+1};return yield he.storage.setThrottleMetadata(Fe),he.attemptFetch(O,Fe)}})()}}class $f{constructor(O,V,Q,he,Ee){this.app=O,this._client=V,this._storageCache=Q,this._storage=he,this._logger=Ee,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ql(R,O){const V=R.target.error||void 0;return Gi.create(O,{originalErrorMessage:V&&V.message})}const hl="app_namespace_store";class bd{constructor(O,V,Q,he=function Dg(){return new Promise((R,O)=>{try{const V=indexedDB.open("firebase_remote_config",1);V.onerror=Q=>{O(Ql(Q,"storage-open"))},V.onsuccess=Q=>{R(Q.target.result)},V.onupgradeneeded=Q=>{0===Q.oldVersion&&Q.target.result.createObjectStore(hl,{keyPath:"compositeKey"})}}catch(V){O(Gi.create("storage-open",{originalErrorMessage:V}))}})}()){this.appId=O,this.appName=V,this.namespace=Q,this.openDbPromise=he}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(O){return this.set("last_fetch_status",O)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(O){return this.set("last_successful_fetch_timestamp_millis",O)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(O){return this.set("last_successful_fetch_response",O)}getActiveConfig(){return this.get("active_config")}setActiveConfig(O){return this.set("active_config",O)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(O){return this.set("active_config_etag",O)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(O){return this.set("throttle_metadata",O)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(O){var V=this;return(0,j.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((he,Ee)=>{const ct=Q.transaction([hl],"readonly").objectStore(hl),Jt=V.createCompositeKey(O);try{const Yt=ct.get(Jt);Yt.onerror=Rn=>{Ee(Ql(Rn,"storage-get"))},Yt.onsuccess=Rn=>{const Xt=Rn.target.result;he(Xt?Xt.value:void 0)}}catch(Yt){Ee(Gi.create("storage-get",{originalErrorMessage:Yt&&Yt.message}))}})})()}set(O,V){var Q=this;return(0,j.Z)(function*(){const he=yield Q.openDbPromise;return new Promise((Ee,Fe)=>{const Jt=he.transaction([hl],"readwrite").objectStore(hl),Yt=Q.createCompositeKey(O);try{const Rn=Jt.put({compositeKey:Yt,value:V});Rn.onerror=Xt=>{Fe(Ql(Xt,"storage-set"))},Rn.onsuccess=()=>{Ee()}}catch(Rn){Fe(Gi.create("storage-set",{originalErrorMessage:Rn&&Rn.message}))}})})()}delete(O){var V=this;return(0,j.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((he,Ee)=>{const ct=Q.transaction([hl],"readwrite").objectStore(hl),Jt=V.createCompositeKey(O);try{const Yt=ct.delete(Jt);Yt.onerror=Rn=>{Ee(Ql(Rn,"storage-delete"))},Yt.onsuccess=()=>{he()}}catch(Yt){Ee(Gi.create("storage-delete",{originalErrorMessage:Yt&&Yt.message}))}})})()}createCompositeKey(O){return[this.appId,this.appName,this.namespace,O].join()}}class Jl{constructor(O){this.storage=O}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var O=this;return(0,j.Z)(function*(){const V=O.storage.getLastFetchStatus(),Q=O.storage.getLastSuccessfulFetchTimestampMillis(),he=O.storage.getActiveConfig(),Ee=yield V;Ee&&(O.lastFetchStatus=Ee);const Fe=yield Q;Fe&&(O.lastSuccessfulFetchTimestampMillis=Fe);const ct=yield he;ct&&(O.activeConfig=ct)})()}setLastFetchStatus(O){return this.lastFetchStatus=O,this.storage.setLastFetchStatus(O)}setLastSuccessfulFetchTimestampMillis(O){return this.lastSuccessfulFetchTimestampMillis=O,this.storage.setLastSuccessfulFetchTimestampMillis(O)}setActiveConfig(O){return this.activeConfig=O,this.storage.setActiveConfig(O)}}function zf(){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,j.Z)(function*(){if(!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(R){return!1}})).apply(this,arguments)}!function Sg(){(0,we._registerComponent)(new Re.wA("remote-config",function R(O,{instanceIdentifier:V}){const Q=O.getProvider("app").getImmediate(),he=O.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Gi.create("registration-window");if(!(0,Se.hl)())throw Gi.create("indexed-db-unavailable");const{projectId:Ee,apiKey:Fe,appId:ct}=Q.options;if(!Ee)throw Gi.create("registration-project-id");if(!Fe)throw Gi.create("registration-api-key");if(!ct)throw Gi.create("registration-app-id");const Jt=new bd(ct,Q.name,V=V||"firebase"),Yt=new Jl(Jt),Rn=new ve.Yd(oa);Rn.logLevel=ve.in.ERROR;const Xt=new Xi(he,we.SDK_VERSION,V,Ee,Fe,ct),Ss=new No(Xt,Jt),Pn=new ua(Ss,Jt,Yt,Rn),To=new $f(Q,Pn,Yt,Jt,Rn);return function Jn(R){const O=(0,Se.m9)(R);O._initializePromise||(O._initializePromise=O._storageCache.loadFromStorage().then(()=>{O._isInitializationComplete=!0}))}(To),To},"PUBLIC").setMultipleInstances(!0)),(0,we.registerVersion)(oa,"0.3.8"),(0,we.registerVersion)(oa,"0.3.8","esm2017")}();const Ua="/firebase-messaging-sw.js",io="/firebase-cloud-messaging-push-scope",Xl="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oi="google.c.a.c_id",wi="google.c.a.c_l",Ig="google.c.a.ts",Wn="google.c.a.e";var ha=(()=>{return(R=ha||(ha={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",ha;var R})();function mo(R){const O=new Uint8Array(R);return btoa(String.fromCharCode(...O)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Sh(R){const V=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Q=atob(V),he=new Uint8Array(Q.length);for(let Ee=0;Ee<Q.length;++Ee)he[Ee]=Q.charCodeAt(Ee);return he}const wr="fcm_token_details_db",Er="fcm_token_object_Store";function Cd(R){return Va.apply(this,arguments)}function Va(){return Va=(0,j.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ee=>Ee.name).includes(wr))return null;let O=null;return(yield(0,Te.X3)(wr,5,{upgrade:(Q=(0,j.Z)(function*(he,Ee,Fe,ct){var Jt;if(Ee<2||!he.objectStoreNames.contains(Er))return;const Yt=ct.objectStore(Er),Rn=yield Yt.index("fcmSenderId").get(R);if(yield Yt.clear(),Rn)if(2===Ee){const Xt=Rn;if(!Xt.auth||!Xt.p256dh||!Xt.endpoint)return;O={token:Xt.fcmToken,createTime:null!==(Jt=Xt.createTime)&&void 0!==Jt?Jt:Date.now(),subscriptionOptions:{auth:Xt.auth,p256dh:Xt.p256dh,endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:"string"==typeof Xt.vapidKey?Xt.vapidKey:mo(Xt.vapidKey)}}}else if(3===Ee){const Xt=Rn;O={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:mo(Xt.auth),p256dh:mo(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:mo(Xt.vapidKey)}}}else if(4===Ee){const Xt=Rn;O={token:Xt.fcmToken,createTime:Xt.createTime,subscriptionOptions:{auth:mo(Xt.auth),p256dh:mo(Xt.p256dh),endpoint:Xt.endpoint,swScope:Xt.swScope,vapidKey:mo(Xt.vapidKey)}}}}),function(Ee,Fe,ct,Jt){return Q.apply(this,arguments)})})).close(),yield(0,Te.Lj)(wr),yield(0,Te.Lj)("fcm_vapid_details_db"),yield(0,Te.Lj)("undefined"),Vc(O)?O:null;var Q}),Va.apply(this,arguments)}function Vc(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:O}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof O.auth&&O.auth.length>0&&"string"==typeof O.p256dh&&O.p256dh.length>0&&"string"==typeof O.endpoint&&O.endpoint.length>0&&"string"==typeof O.swScope&&O.swScope.length>0&&"string"==typeof O.vapidKey&&O.vapidKey.length>0}const ko="firebase-messaging-store";let Ou=null;function fi(){return Ou||(Ou=(0,Te.X3)("firebase-messaging-database",1,{upgrade:(R,O)=>{0===O&&R.createObjectStore(ko)}})),Ou}function tc(R){return fa.apply(this,arguments)}function fa(){return(fa=(0,j.Z)(function*(R){const O=Pr(R),Q=yield(yield fi()).transaction(ko).objectStore(ko).get(O);if(Q)return Q;{const he=yield Cd(R.appConfig.senderId);if(he)return yield ai(R,he),he}})).apply(this,arguments)}function ai(R,O){return $r.apply(this,arguments)}function $r(){return($r=(0,j.Z)(function*(R,O){const V=Pr(R),he=(yield fi()).transaction(ko,"readwrite");return yield he.objectStore(ko).put(O,V),yield he.done,O})).apply(this,arguments)}function Hc(R){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,j.Z)(function*(R){const O=Pr(R),Q=(yield fi()).transaction(ko,"readwrite");yield Q.objectStore(ko).delete(O),yield Q.done})).apply(this,arguments)}function Pr({appConfig:R}){return R.appId}const pi=new Se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ro(R,O){return pr.apply(this,arguments)}function pr(){return(pr=(0,j.Z)(function*(R,O){const V=yield Ha(R),Q=$c(O),he={method:"POST",headers:V,body:JSON.stringify(Q)};let Ee;try{Ee=yield(yield fetch(Po(R.appConfig),he)).json()}catch(Fe){throw pi.create("token-subscribe-failed",{errorInfo:Fe})}if(Ee.error)throw pi.create("token-subscribe-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw pi.create("token-subscribe-no-token");return Ee.token})).apply(this,arguments)}function li(R,O){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,j.Z)(function*(R,O){const V=yield Ha(R),Q=$c(O.subscriptionOptions),he={method:"PATCH",headers:V,body:JSON.stringify(Q)};let Ee;try{Ee=yield(yield fetch(`${Po(R.appConfig)}/${O.token}`,he)).json()}catch(Fe){throw pi.create("token-update-failed",{errorInfo:Fe})}if(Ee.error)throw pi.create("token-update-failed",{errorInfo:Ee.error.message});if(!Ee.token)throw pi.create("token-update-no-token");return Ee.token})).apply(this,arguments)}function Gc(R,O){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,j.Z)(function*(R,O){const Q={method:"DELETE",headers:yield Ha(R)};try{const Ee=yield(yield fetch(`${Po(R.appConfig)}/${O}`,Q)).json();if(Ee.error)throw pi.create("token-unsubscribe-failed",{errorInfo:Ee.error.message})}catch(he){throw pi.create("token-unsubscribe-failed",{errorInfo:he})}})).apply(this,arguments)}function Po({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function Ha(R){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,j.Z)(function*({appConfig:R,installations:O}){const V=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${V}`})})).apply(this,arguments)}function $c({p256dh:R,auth:O,endpoint:V,vapidKey:Q}){const he={web:{endpoint:V,auth:O,p256dh:R}};return Q!==Xl&&(he.web.applicationPubKey=Q),he}const nc=6048e5;function Wc(R){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,j.Z)(function*(R){const O=yield $i(R.swRegistration,R.vapidKey),V={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:O.endpoint,auth:mo(O.getKey("auth")),p256dh:mo(O.getKey("p256dh"))},Q=yield tc(R.firebaseDependencies);if(Q){if(fl(Q.subscriptionOptions,V))return Date.now()>=Q.createTime+nc?Ih(R,{token:Q.token,createTime:Date.now(),subscriptionOptions:V}):Q.token;try{yield Gc(R.firebaseDependencies,Q.token)}catch(he){console.warn(he)}return En(R.firebaseDependencies,V)}return En(R.firebaseDependencies,V)})).apply(this,arguments)}function wd(R){return ic.apply(this,arguments)}function ic(){return(ic=(0,j.Z)(function*(R){const O=yield tc(R.firebaseDependencies);O&&(yield Gc(R.firebaseDependencies,O.token),yield Hc(R.firebaseDependencies));const V=yield R.swRegistration.pushManager.getSubscription();return!V||V.unsubscribe()})).apply(this,arguments)}function Ih(R,O){return Je.apply(this,arguments)}function Je(){return(Je=(0,j.Z)(function*(R,O){try{const V=yield li(R.firebaseDependencies,O),Q=Object.assign(Object.assign({},O),{token:V,createTime:Date.now()});return yield ai(R.firebaseDependencies,Q),V}catch(V){throw yield wd(R),V}})).apply(this,arguments)}function En(R,O){return rc.apply(this,arguments)}function rc(){return(rc=(0,j.Z)(function*(R,O){const Q={token:yield ro(R,O),createTime:Date.now(),subscriptionOptions:O};return yield ai(R,Q),Q.token})).apply(this,arguments)}function $i(R,O){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,j.Z)(function*(R,O){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Sh(O)})})).apply(this,arguments)}function fl(R,O){return O.vapidKey===R.vapidKey&&O.endpoint===R.endpoint&&O.auth===R.auth&&O.p256dh===R.p256dh}function ys(R){const O={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function Nu(R,O){if(!O.notification)return;R.notification={};const V=O.notification.title;V&&(R.notification.title=V);const Q=O.notification.body;Q&&(R.notification.body=Q);const he=O.notification.image;he&&(R.notification.image=he)}(O,R),function ss(R,O){!O.data||(R.data=O.data)}(O,R),function ku(R,O){if(!O.fcmOptions)return;R.fcmOptions={};const V=O.fcmOptions.link;V&&(R.fcmOptions.link=V);const Q=O.fcmOptions.analytics_label;Q&&(R.fcmOptions.analyticsLabel=Q)}(O,R),O}function sc(R){return"object"==typeof R&&!!R&&oi in R}function oc(R,O){const V=[];for(let Q=0;Q<R.length;Q++)V.push(R.charAt(Q)),Q<O.length&&V.push(O.charAt(Q));return V.join("")}function Dr(R){return pi.create("missing-app-config-values",{valueName:R})}oc("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),oc("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _o{constructor(O,V,Q){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const he=function pl(R){if(!R||!R.options)throw Dr("App Configuration Object");if(!R.name)throw Dr("App Name");const O=["projectId","apiKey","appId","messagingSenderId"],{options:V}=R;for(const Q of O)if(!V[Q])throw Dr(Q);return{appName:R.name,projectId:V.projectId,apiKey:V.apiKey,appId:V.appId,senderId:V.messagingSenderId}}(O);this.firebaseDependencies={app:O,appConfig:he,installations:V,analyticsProvider:Q}}_delete(){return Promise.resolve()}}function Ed(R){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,j.Z)(function*(R){try{R.swRegistration=yield navigator.serviceWorker.register(Ua,{scope:io}),R.swRegistration.update().catch(()=>{})}catch(O){throw pi.create("failed-service-worker-registration",{browserErrorMessage:O.message})}})).apply(this,arguments)}function pa(R,O){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,j.Z)(function*(R,O){if(!O&&!R.swRegistration&&(yield Ed(R)),O||!R.swRegistration){if(!(O instanceof ServiceWorkerRegistration))throw pi.create("invalid-sw-registration");R.swRegistration=O}})).apply(this,arguments)}function Ah(R,O){return zc.apply(this,arguments)}function zc(){return(zc=(0,j.Z)(function*(R,O){O?R.vapidKey=O:R.vapidKey||(R.vapidKey=Xl)})).apply(this,arguments)}function ja(){return(ja=(0,j.Z)(function*(R,O){if(!navigator)throw pi.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pi.create("permission-blocked");return yield Ah(R,null==O?void 0:O.vapidKey),yield pa(R,null==O?void 0:O.serviceWorkerRegistration),Wc(R)})).apply(this,arguments)}function vo(R,O,V){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,j.Z)(function*(R,O,V){const Q=Td(O);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(Q,{message_id:V[oi],message_name:V[wi],message_time:V[Ig],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Td(R){switch(R){case ha.NOTIFICATION_CLICKED:return"notification_open";case ha.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fu(){return(Fu=(0,j.Z)(function*(R,O){const V=O.data;if(!V.isFirebaseMessaging)return;R.onMessageHandler&&V.messageType===ha.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(ys(V)):R.onMessageHandler.next(ys(V)));const Q=V.data;sc(Q)&&"1"===Q[Wn]&&(yield vo(R,V.messageType,Q))})).apply(this,arguments)}const so="@firebase/messaging",$a=R=>{const O=new _o(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",V=>function Ag(R,O){return Fu.apply(this,arguments)}(O,V)),O},xh=R=>{const O=R.getProvider("messaging").getImmediate();return{getToken:Q=>function Pu(R,O){return ja.apply(this,arguments)}(O,Q)}};function ac(){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,j.Z)(function*(){try{yield(0,Se.eu)()}catch(R){return!1}return"undefined"!=typeof window&&(0,Se.hl)()&&(0,Se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qf(){(0,we._registerComponent)(new Re.wA("messaging",$a,"PUBLIC")),(0,we._registerComponent)(new Re.wA("messaging-internal",xh,"PRIVATE")),(0,we.registerVersion)(so,"0.9.13"),(0,we.registerVersion)(so,"0.9.13","esm2017")}();const ir="analytics",Ei="firebase_id",Wr="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ml="https://www.googletagmanager.com/gtag/js",Lr=new ve.Yd("@firebase/analytics");function lc(R){return Promise.all(R.map(O=>O.catch(V=>V)))}function Ho(R,O){const V=document.createElement("script");V.src=`${ml}?l=${R}&id=${O}`,V.async=!0,document.head.appendChild(V)}function Xn(R,O,V,Q,he,Ee){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,j.Z)(function*(R,O,V,Q,he,Ee){const Fe=Q[he];try{if(Fe)yield O[Fe];else{const Jt=(yield lc(V)).find(Yt=>Yt.measurementId===he);Jt&&(yield O[Jt.appId])}}catch(ct){Lr.error(ct)}R("config",he,Ee)})).apply(this,arguments)}function yo(R,O,V,Q,he){return _a.apply(this,arguments)}function _a(){return(_a=(0,j.Z)(function*(R,O,V,Q,he){try{let Ee=[];if(he&&he.send_to){let Fe=he.send_to;Array.isArray(Fe)||(Fe=[Fe]);const ct=yield lc(V);for(const Jt of Fe){const Yt=ct.find(Xt=>Xt.measurementId===Jt),Rn=Yt&&O[Yt.appId];if(!Rn){Ee=[];break}Ee.push(Rn)}}0===Ee.length&&(Ee=Object.values(O)),yield Promise.all(Ee),R("event",Q,he||{})}catch(Ee){Lr.error(Ee)}})).apply(this,arguments)}function Ti(){const R=window.document.getElementsByTagName("script");for(const O of Object.values(R))if(O.src&&O.src.includes(ml))return O;return null}const dt=new Se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Lu=new class Di{constructor(O={},V=1e3){this.throttleMetadata=O,this.intervalMillis=V}getThrottleMetadata(O){return this.throttleMetadata[O]}setThrottleMetadata(O,V){this.throttleMetadata[O]=V}deleteThrottleMetadata(O){delete this.throttleMetadata[O]}};function _l(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function ya(R){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,j.Z)(function*(R){var O;const{appId:V,apiKey:Q}=R,he={method:"GET",headers:_l(Q)},Ee=Wr.replace("{app-id}",V),Fe=yield fetch(Ee,he);if(200!==Fe.status&&304!==Fe.status){let ct="";try{const Jt=yield Fe.json();(null===(O=Jt.error)||void 0===O?void 0:O.message)&&(ct=Jt.error.message)}catch(Jt){}throw dt.create("config-fetch-failed",{httpStatus:Fe.status,responseMessage:ct})}return Fe.json()})).apply(this,arguments)}function bo(R){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,j.Z)(function*(R,O=Lu,V){const{appId:Q,apiKey:he,measurementId:Ee}=R.options;if(!Q)throw dt.create("no-app-id");if(!he){if(Ee)return{measurementId:Ee,appId:Q};throw dt.create("no-api-key")}const Fe=O.getThrottleMetadata(Q)||{backoffCount:0,throttleEndTimeMillis:Date.now()},ct=new vl;return setTimeout((0,j.Z)(function*(){ct.abort()}),void 0!==V?V:6e4),bs({appId:Q,apiKey:he,measurementId:Ee},Fe,ct,O)})).apply(this,arguments)}function bs(R,O,V){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,j.Z)(function*(R,{throttleEndTimeMillis:O,backoffCount:V},Q,he=Lu){const{appId:Ee,measurementId:Fe}=R;try{yield Oh(Q,O)}catch(ct){if(Fe)return Lr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${ct.message}]`),{appId:Ee,measurementId:Fe};throw ct}try{const ct=yield ya(R);return he.deleteThrottleMetadata(Ee),ct}catch(ct){if(!Nh(ct)){if(he.deleteThrottleMetadata(Ee),Fe)return Lr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Fe} provided in the "measurementId" field in the local Firebase config. [${ct.message}]`),{appId:Ee,measurementId:Fe};throw ct}const Jt=503===Number(ct.customData.httpStatus)?(0,Se.$s)(V,he.intervalMillis,30):(0,Se.$s)(V,he.intervalMillis),Yt={throttleEndTimeMillis:Date.now()+Jt,backoffCount:V+1};return he.setThrottleMetadata(Ee,Yt),Lr.debug(`Calling attemptFetch again in ${Jt} millis`),bs(R,Yt,Q,he)}})).apply(this,arguments)}function Oh(R,O){return new Promise((V,Q)=>{const he=Math.max(O-Date.now(),0),Ee=setTimeout(V,he);R.addEventListener(()=>{clearTimeout(Ee),Q(dt.create("fetch-throttle",{throttleEndTimeMillis:O}))})})}function Nh(R){if(!(R instanceof Se.ZR&&R.customData))return!1;const O=Number(R.customData.httpStatus);return 429===O||500===O||503===O||504===O}class vl{constructor(){this.listeners=[]}addEventListener(O){this.listeners.push(O)}abort(){this.listeners.forEach(O=>O())}}function qc(){return xn.apply(this,arguments)}function xn(){return(xn=(0,j.Z)(function*(){if(!(0,Se.hl)())return Lr.warn(dt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Se.eu)()}catch(R){return Lr.warn(dt.create("indexeddb-unavailable",{errorInfo:R}).message),!1}return!0})).apply(this,arguments)}function os(){return(os=(0,j.Z)(function*(R,O,V,Q,he,Ee,Fe){var ct;const Jt=bo(R);Jt.then(Pn=>{V[Pn.measurementId]=Pn.appId,R.options.measurementId&&Pn.measurementId!==R.options.measurementId&&Lr.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${Pn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Pn=>Lr.error(Pn)),O.push(Jt);const Yt=qc().then(Pn=>{if(Pn)return Q.getId()}),[Rn,Xt]=yield Promise.all([Jt,Yt]);Ti()||Ho(Ee,Rn.measurementId),he("js",new Date);const Ss=null!==(ct=null==Fe?void 0:Fe.config)&&void 0!==ct?ct:{};return Ss.origin="firebase",Ss.update=!0,null!=Xt&&(Ss[Ei]=Xt),he("config",Rn.measurementId,Ss),Rn.measurementId})).apply(this,arguments)}class yl{constructor(O){this.app=O}_delete(){return delete Hs[this.app.options.appId],Promise.resolve()}}let Hs={},Bn=[];const _i={};let ba,uc,bl="dataLayer",Ca=!1;function Cs(R,O,V){!function Wa(){const R=[];if((0,Se.ru)()&&R.push("This is a browser extension environment."),(0,Se.zI)()||R.push("Cookies are not available."),R.length>0){const O=R.map((Q,he)=>`(${he+1}) ${Q}`).join(" "),V=dt.create("invalid-analytics-context",{errorInfo:O});Lr.warn(V.message)}}();const Q=R.options.appId;if(!Q)throw dt.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw dt.create("no-api-key");Lr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hs[Q])throw dt.create("already-exists",{id:Q});if(!Ca){!function ma(R){let O=[];Array.isArray(window[R])?O=window[R]:window[R]=O}(bl);const{wrappedGtag:Ee,gtagCore:Fe}=function xg(R,O,V,Q,he){let Ee=function(...Fe){window[Q].push(arguments)};return window[he]&&"function"==typeof window[he]&&(Ee=window[he]),window[he]=function Mh(R,O,V,Q){function Ee(){return(Ee=(0,j.Z)(function*(Fe,ct,Jt){try{"event"===Fe?yield yo(R,O,V,ct,Jt):"config"===Fe?yield Xn(R,O,V,Q,ct,Jt):R("set",ct)}catch(Yt){Lr.error(Yt)}})).apply(this,arguments)}return function he(Fe,ct,Jt){return Ee.apply(this,arguments)}}(Ee,R,O,V),{gtagCore:Ee,wrappedGtag:window[he]}}(Hs,Bn,_i,bl,"gtag");uc=Ee,ba=Fe,Ca=!0}return Hs[Q]=function Bu(R,O,V,Q,he,Ee,Fe){return os.apply(this,arguments)}(R,Bn,_i,O,ba,bl,V),new yl(R)}function vi(){return(vi=(0,j.Z)(function*(R,O,V,Q,he){if(he&&he.global)R("event",V,Q);else{const Ee=yield O;R("event",V,Object.assign(Object.assign({},Q),{send_to:Ee}))}})).apply(this,arguments)}function H(){return ao.apply(this,arguments)}function ao(){return(ao=(0,j.Z)(function*(){if((0,Se.ru)()||!(0,Se.zI)()||!(0,Se.hl)())return!1;try{return yield(0,Se.eu)()}catch(R){return!1}})).apply(this,arguments)}const gr="@firebase/analytics";!function Za(){(0,we._registerComponent)(new Re.wA(ir,(O,{options:V})=>Cs(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),V),"PUBLIC")),(0,we._registerComponent)(new Re.wA("analytics-internal",function R(O){try{const V=O.getProvider(ir).getImmediate();return{logEvent:(Q,he,Ee)=>function dc(R,O,V,Q){R=(0,Se.m9)(R),function Co(R,O,V,Q,he){return vi.apply(this,arguments)}(uc,Hs[R.app.options.appId],O,V,Q).catch(he=>Lr.error(he))}(V,Q,he,Ee)}}catch(V){throw dt.create("interop-component-reg-failed",{reason:V})}},"PRIVATE")),(0,we.registerVersion)(gr,"0.7.9"),(0,we.registerVersion)(gr,"0.7.9","esm2017")}();var Cl=W(4408),rr=W(7565);const js=new class Zc extends rr.v{}(class hc extends Cl.o{constructor(O,V){super(O,V),this.scheduler=O,this.work=V}schedule(O,V=0){return V>0?super.schedule(O,V):(this.delay=V,this.state=O,this.scheduler.flush(this),this)}execute(O,V){return V>0||this.closed?super.execute(O,V):this._execute(O,V)}requestAsyncId(O,V,Q=0){return null!=Q&&Q>0||null==Q&&this.delay>0?super.requestAsyncId(O,V,Q):O.flush(this)}});var Kf=W(4986),Es=W(8505),Ts=W(5363),Yc=W(9468);const Gs=new o.GfV("7.3.0"),wa="__angularfire_symbol__analyticsIsSupportedValue",Uu="__angularfire_symbol__analyticsIsSupported",Ea="__angularfire_symbol__remoteConfigIsSupportedValue",Kc="__angularfire_symbol__remoteConfigIsSupported",Dd="__angularfire_symbol__messagingIsSupportedValue",sn="__angularfire_symbol__messagingIsSupported";function Rg(R,O,V){if(O){if(1===O.length)return O[0];const Ee=O.filter(Fe=>Fe.app===V);if(1===Ee.length)return Ee[0]}return V.container.getProvider(R).getImmediate({optional:!0})}globalThis[Uu]||(globalThis[Uu]=H().then(R=>globalThis[wa]=R).catch(()=>globalThis[wa]=!1)),globalThis[sn]||(globalThis[sn]=ac().then(R=>globalThis[Dd]=R).catch(()=>globalThis[Dd]=!1)),globalThis[Kc]||(globalThis[Kc]=zf().then(R=>globalThis[Ea]=R).catch(()=>globalThis[Ea]=!1));const Hu=(R,O)=>{const V=O?[O]:(0,P.C6)(),Q=[];return V.forEach(he=>{he.container.getProvider(R).instances.forEach(Fe=>{Q.includes(Fe)||Q.push(Fe)})}),Q};function fc(){}class $s{constructor(O,V=js){this.zone=O,this.delegate=V}now(){return this.delegate.now()}schedule(O,V,Q){const he=this.zone;return this.delegate.schedule(function(Fe){he.runGuarded(()=>{O.apply(this,[Fe])})},V,Q)}}class Sd{constructor(O){this.zone=O,this.task=null}call(O,V){const Q=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",fc,{},fc,fc)),V.pipe((0,Es.b)({next:Q,complete:Q,error:Q})).subscribe(O).add(Q)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Qc=(()=>{class R{constructor(V){this.ngZone=V,this.outsideAngular=V.runOutsideAngular(()=>new $s(Zone.current)),this.insideAngular=V.run(()=>new $s(Zone.current,Kf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(V){return new(V||R)(o.LFG(o.R0b))},R.\u0275prov=o.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function Go(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function Br(R){return R.pipe((0,Ts.Q)(Go().outsideAngular))}function Ya(R){return Go(),function El(R){return function(V){return(V=V.lift(new Sd(R.ngZone))).pipe((0,Yc.R)(R.outsideAngular),(0,Ts.Q)(R.insideAngular))}}(Go())(R)}},198:(wt,He,W)=>{"use strict";W.d(He,{$:()=>Po,A:()=>ee,B:()=>Qe,G:()=>Ci,H:()=>ii,J:()=>No,L:()=>ni,M:()=>Bc,N:()=>Uc,P:()=>Uu,Q:()=>oi,R:()=>Za,T:()=>wi,U:()=>Xl,V:()=>ha,W:()=>mo,X:()=>Cd,Y:()=>jc,Z:()=>ro,_:()=>li,a:()=>gi,a0:()=>Wc,a1:()=>wd,a2:()=>Ih,a3:()=>En,a4:()=>$i,a5:()=>fl,a6:()=>Nu,a7:()=>ss,a8:()=>sc,a9:()=>oc,aA:()=>Do,aB:()=>To,aC:()=>R,aD:()=>Ka,aE:()=>ht,aI:()=>_l,aL:()=>Wn,aa:()=>Ed,ab:()=>pa,ac:()=>Ah,af:()=>vo,ag:()=>Td,ah:()=>Ag,ak:()=>ko,al:()=>nr,an:()=>ml,ao:()=>Rh,ap:()=>tr,aq:()=>te,ar:()=>Sn,as:()=>Gt,at:()=>ft,au:()=>Sa,av:()=>Jf,aw:()=>ze,ax:()=>ye,ay:()=>De,az:()=>Qt,b:()=>dt,c:()=>Rg,d:()=>Sd,e:()=>fc,f:()=>Q,g:()=>Yt,h:()=>Fe,i:()=>Cs,j:()=>Ss,k:()=>np,l:()=>js,m:()=>ip,o:()=>Te,r:()=>Kf,s:()=>rr,u:()=>Gs});var o=W(5861),P=W(2090),j=W(9681),we=W(655),Se=W(1877),Re=W(4859);const Te={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ee={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Qe=function be(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},at=function mt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},lt=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),We=new Se.Yd("@firebase/auth");function ut(T,...y){We.logLevel<=Se.in.ERROR&&We.error(`Auth (${j.SDK_VERSION}): ${T}`,...y)}function ft(T,...y){throw _t(T,...y)}function ze(T,...y){return _t(T,...y)}function Ze(T,y,b){const I=Object.assign(Object.assign({},at()),{[y]:b});return new P.LL("auth","Firebase",I).create(y,{appName:T.name})}function Ue(T,y,b){if(!(y instanceof b))throw b.name!==y.constructor.name&&ft(T,"argument-error"),Ze(T,"argument-error",`Type of ${y.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function _t(T,...y){if("string"!=typeof T){const b=y[0],I=[...y.slice(1)];return I[0]&&(I[0].appName=T.name),T._errorFactory.create(b,...I)}return lt.create(T,...y)}function ye(T,y,...b){if(!T)throw _t(y,...b)}function Me(T){const y="INTERNAL ASSERTION FAILED: "+T;throw ut(y),new Error(y)}function te(T,y){T||Me(y)}const ge=new Map;function De(T){te(T instanceof Function,"Expected a class definition");let y=ge.get(T);return y?(te(y instanceof T,"Instance stored in cache mismatched with class"),y):(y=new T,ge.set(T,y),y)}function Ce(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.href)||""}function Vt(){return"http:"===tn()||"https:"===tn()}function tn(){var T;return"undefined"!=typeof self&&(null===(T=self.location)||void 0===T?void 0:T.protocol)||null}class Lt{constructor(y,b){this.shortDelay=y,this.longDelay=b,te(b>y,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function Ki(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Vt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Qi(T,y){te(T.emulator,"Emulator should always be set here");const{url:b}=T.emulator;return y?`${b}${y.startsWith("/")?y.slice(1):y}`:b}class Gn{static initialize(y,b,I){this.fetchImpl=y,b&&(this.headersImpl=b),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Me("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Me("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Me("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Cr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ln=new Lt(3e4,6e4);function Dn(T,y){return T.tenantId&&!y.tenantId?Object.assign(Object.assign({},y),{tenantId:T.tenantId}):y}function $n(T,y,b,I){return hi.apply(this,arguments)}function hi(){return(hi=(0,o.Z)(function*(T,y,b,I,U={}){return es(T,U,(0,o.Z)(function*(){let q={},me={};I&&("GET"===y?me=I:q={body:JSON.stringify(I)});const tt=(0,P.xO)(Object.assign({key:T.config.apiKey},me)).slice(1),St=yield T._getAdditionalHeaders();return St["Content-Type"]="application/json",T.languageCode&&(St["X-Firebase-Locale"]=T.languageCode),Gn.fetch()(ks(T,T.config.apiHost,b,tt),Object.assign({method:y,headers:St,referrerPolicy:"no-referrer"},q))}))})).apply(this,arguments)}function es(T,y,b){return ts.apply(this,arguments)}function ts(){return(ts=(0,o.Z)(function*(T,y,b){T._canInitEmulator=!1;const I=Object.assign(Object.assign({},Cr),y);try{const U=new Ji(T),q=yield Promise.race([b(),U.promise]);U.clearNetworkTimeout();const me=yield q.json();if("needConfirmation"in me)throw xi(T,"account-exists-with-different-credential",me);if(q.ok&&!("errorMessage"in me))return me;{const tt=q.ok?me.errorMessage:me.error.message,[St,zt]=tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===St)throw xi(T,"credential-already-in-use",me);if("EMAIL_EXISTS"===St)throw xi(T,"email-already-in-use",me);const ln=I[St]||St.toLowerCase().replace(/[_\s]+/g,"-");if(zt)throw Ze(T,ln,zt);ft(T,ln)}}catch(U){if(U instanceof P.ZR)throw U;ft(T,"network-request-failed")}})).apply(this,arguments)}function yi(T,y,b,I){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,o.Z)(function*(T,y,b,I,U={}){const q=yield $n(T,y,b,I,U);return"mfaPendingCredential"in q&&ft(T,"multi-factor-auth-required",{_serverResponse:q}),q})).apply(this,arguments)}function ks(T,y,b,I){const U=`${y}${b}?${I}`;return T.config.emulator?Qi(T.config,U):`${T.config.apiScheme}://${U}`}class Ji{constructor(y){this.auth=y,this.timer=null,this.promise=new Promise((b,I)=>{this.timer=setTimeout(()=>I(ze(this.auth,"network-request-failed")),Ln.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xi(T,y,b){const I={appName:T.name};b.email&&(I.email=b.email),b.phoneNumber&&(I.phoneNumber=b.phoneNumber);const U=ze(T,y,I);return U.customData._tokenResponse=b,U}function Bt(){return(Bt=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:delete",y)})).apply(this,arguments)}function ns(T,y){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function Mn(T,y){return bi.apply(this,arguments)}function bi(){return(bi=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:lookup",y)})).apply(this,arguments)}function Hi(T){if(T)try{const y=new Date(Number(T));if(!isNaN(y.getTime()))return y.toUTCString()}catch(y){}}function ji(){return(ji=(0,o.Z)(function*(T,y=!1){const b=(0,P.m9)(T),I=yield b.getIdToken(y),U=gn(I);ye(U&&U.exp&&U.auth_time&&U.iat,b.auth,"internal-error");const q="object"==typeof U.firebase?U.firebase:void 0,me=null==q?void 0:q.sign_in_provider;return{claims:U,token:I,authTime:Hi(sa(U.auth_time)),issuedAtTime:Hi(sa(U.iat)),expirationTime:Hi(sa(U.exp)),signInProvider:me||null,signInSecondFactor:(null==q?void 0:q.sign_in_second_factor)||null}})).apply(this,arguments)}function sa(T){return 1e3*Number(T)}function gn(T){const[y,b,I]=T.split(".");if(void 0===y||void 0===b||void 0===I)return ut("JWT malformed, contained fewer than 3 sections"),null;try{const U=(0,P.tV)(b);return U?JSON.parse(U):(ut("Failed to decode base64 JWT payload"),null)}catch(U){return ut("Caught error parsing JWT payload as JSON",U),null}}function Nt(T,y){return ps.apply(this,arguments)}function ps(){return(ps=(0,o.Z)(function*(T,y,b=!1){if(b)return y;try{return yield y}catch(I){throw I instanceof P.ZR&&gs(I)&&T.auth.currentUser===T&&(yield T.auth.signOut()),I}})).apply(this,arguments)}function gs({code:T}){return"auth/user-disabled"===T||"auth/user-token-expired"===T}class Cn{constructor(y){this.user=y,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(y){var b;if(y){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const U=(null!==(b=this.user.stsTokenManager.expirationTime)&&void 0!==b?b:0)-Date.now()-3e5;return Math.max(0,U)}}schedule(y=!1){var b=this;if(!this.isRunning)return;const I=this.getInterval(y);this.timerId=setTimeout((0,o.Z)(function*(){yield b.iteration()}),I)}iteration(){var y=this;return(0,o.Z)(function*(){try{yield y.user.getIdToken(!0)}catch(b){return void("auth/network-request-failed"===b.code&&y.schedule(!0))}y.schedule()})()}}class no{constructor(y,b){this.createdAt=y,this.lastLoginAt=b,this._initializeTime()}_initializeTime(){this.lastSignInTime=Hi(this.lastLoginAt),this.creationTime=Hi(this.createdAt)}_copy(y){this.createdAt=y.createdAt,this.lastLoginAt=y.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Pi(T){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,o.Z)(function*(T){var y;const b=T.auth,I=yield T.getIdToken(),U=yield Nt(T,Mn(b,{idToken:I}));ye(null==U?void 0:U.users.length,b,"internal-error");const q=U.users[0];T._notifyReloadListener(q);const me=(null===(y=q.providerUserInfo)||void 0===y?void 0:y.length)?je(q.providerUserInfo):[],tt=le(T.providerData,me),ln=!!T.isAnonymous&&!(T.email&&q.passwordHash||(null==tt?void 0:tt.length)),Si={uid:q.localId,displayName:q.displayName||null,photoURL:q.photoUrl||null,email:q.email||null,emailVerified:q.emailVerified||!1,phoneNumber:q.phoneNumber||null,tenantId:q.tenantId||null,providerData:tt,metadata:new no(q.createdAt,q.lastLoginAt),isAnonymous:ln};Object.assign(T,Si)})).apply(this,arguments)}function se(){return(se=(0,o.Z)(function*(T){const y=(0,P.m9)(T);yield Pi(y),yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)})).apply(this,arguments)}function le(T,y){return[...T.filter(I=>!y.some(U=>U.providerId===I.providerId)),...y]}function je(T){return T.map(y=>{var{providerId:b}=y,I=(0,we._T)(y,["providerId"]);return{providerId:b,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function pe(){return(pe=(0,o.Z)(function*(T,y){const b=yield es(T,{},(0,o.Z)(function*(){const I=(0,P.xO)({grant_type:"refresh_token",refresh_token:y}).slice(1),{tokenApiHost:U,apiKey:q}=T.config,me=ks(T,U,"/v1/token",`key=${q}`),tt=yield T._getAdditionalHeaders();return tt["Content-Type"]="application/x-www-form-urlencoded",Gn.fetch()(me,{method:"POST",headers:tt,body:I})}));return{accessToken:b.access_token,expiresIn:b.expires_in,refreshToken:b.refresh_token}})).apply(this,arguments)}class rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(y){ye(y.idToken,"internal-error"),ye(void 0!==y.idToken,"internal-error"),ye(void 0!==y.refreshToken,"internal-error");const b="expiresIn"in y&&void 0!==y.expiresIn?Number(y.expiresIn):function Ut(T){const y=gn(T);return ye(y,"internal-error"),ye(void 0!==y.exp,"internal-error"),ye(void 0!==y.iat,"internal-error"),Number(y.exp)-Number(y.iat)}(y.idToken);this.updateTokensAndExpiration(y.idToken,y.refreshToken,b)}getToken(y,b=!1){var I=this;return(0,o.Z)(function*(){return ye(!I.accessToken||I.refreshToken,y,"user-token-expired"),b||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(y,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(y,b){var I=this;return(0,o.Z)(function*(){const{accessToken:U,refreshToken:q,expiresIn:me}=yield function ie(T,y){return pe.apply(this,arguments)}(y,b);I.updateTokensAndExpiration(U,q,Number(me))})()}updateTokensAndExpiration(y,b,I){this.refreshToken=b||null,this.accessToken=y||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(y,b){const{refreshToken:I,accessToken:U,expirationTime:q}=b,me=new rt;return I&&(ye("string"==typeof I,"internal-error",{appName:y}),me.refreshToken=I),U&&(ye("string"==typeof U,"internal-error",{appName:y}),me.accessToken=U),q&&(ye("number"==typeof q,"internal-error",{appName:y}),me.expirationTime=q),me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(y){this.accessToken=y.accessToken,this.refreshToken=y.refreshToken,this.expirationTime=y.expirationTime}_clone(){return Object.assign(new rt,this.toJSON())}_performRefresh(){return Me("not implemented")}}function It(T,y){ye("string"==typeof T||void 0===T,"internal-error",{appName:y})}class qt{constructor(y){var{uid:b,auth:I,stsTokenManager:U}=y,q=(0,we._T)(y,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=b,this.auth=I,this.stsTokenManager=U,this.accessToken=U.accessToken,this.displayName=q.displayName||null,this.email=q.email||null,this.emailVerified=q.emailVerified||!1,this.phoneNumber=q.phoneNumber||null,this.photoURL=q.photoURL||null,this.isAnonymous=q.isAnonymous||!1,this.tenantId=q.tenantId||null,this.providerData=q.providerData?[...q.providerData]:[],this.metadata=new no(q.createdAt||void 0,q.lastLoginAt||void 0)}getIdToken(y){var b=this;return(0,o.Z)(function*(){const I=yield Nt(b,b.stsTokenManager.getToken(b.auth,y));return ye(I,b.auth,"internal-error"),b.accessToken!==I&&(b.accessToken=I,yield b.auth._persistUserIfCurrent(b),b.auth._notifyListenersIfCurrent(b)),I})()}getIdTokenResult(y){return function Ai(T){return ji.apply(this,arguments)}(this,y)}reload(){return function X(T){return se.apply(this,arguments)}(this)}_assign(y){this!==y&&(ye(this.uid===y.uid,this.auth,"internal-error"),this.displayName=y.displayName,this.photoURL=y.photoURL,this.email=y.email,this.emailVerified=y.emailVerified,this.phoneNumber=y.phoneNumber,this.isAnonymous=y.isAnonymous,this.tenantId=y.tenantId,this.providerData=y.providerData.map(b=>Object.assign({},b)),this.metadata._copy(y.metadata),this.stsTokenManager._assign(y.stsTokenManager))}_clone(y){return new qt(Object.assign(Object.assign({},this),{auth:y,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(y){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=y,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(y){this.reloadListener?this.reloadListener(y):this.reloadUserInfo=y}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(y,b=!1){var I=this;return(0,o.Z)(function*(){let U=!1;y.idToken&&y.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(y),U=!0),b&&(yield Pi(I)),yield I.auth._persistUserIfCurrent(I),U&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var y=this;return(0,o.Z)(function*(){const b=yield y.getIdToken();return yield Nt(y,function Oo(T,y){return Bt.apply(this,arguments)}(y.auth,{idToken:b})),y.stsTokenManager.clearRefreshToken(),y.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(y=>Object.assign({},y)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(y,b){var I,U,q,me,tt,St,zt,ln;const Si=null!==(I=b.displayName)&&void 0!==I?I:void 0,So=null!==(U=b.email)&&void 0!==U?U:void 0,zo=null!==(q=b.phoneNumber)&&void 0!==q?q:void 0,Md=null!==(me=b.photoURL)&&void 0!==me?me:void 0,qo=null!==(tt=b.tenantId)&&void 0!==tt?tt:void 0,gc=null!==(St=b._redirectEventId)&&void 0!==St?St:void 0,Sl=null!==(zt=b.createdAt)&&void 0!==zt?zt:void 0,nu=null!==(ln=b.lastLoginAt)&&void 0!==ln?ln:void 0,{uid:zu,emailVerified:Hh,isAnonymous:jh,providerData:iu,stsTokenManager:sp}=b;ye(zu&&sp,y,"internal-error");const Gh=rt.fromJSON(this.name,sp);ye("string"==typeof zu,y,"internal-error"),It(Si,y.name),It(So,y.name),ye("boolean"==typeof Hh,y,"internal-error"),ye("boolean"==typeof jh,y,"internal-error"),It(zo,y.name),It(Md,y.name),It(qo,y.name),It(gc,y.name),It(Sl,y.name),It(nu,y.name);const qu=new qt({uid:zu,auth:y,email:So,emailVerified:Hh,displayName:Si,isAnonymous:jh,photoURL:Md,phoneNumber:zo,tenantId:qo,stsTokenManager:Gh,createdAt:Sl,lastLoginAt:nu});return iu&&Array.isArray(iu)&&(qu.providerData=iu.map(ei=>Object.assign({},ei))),gc&&(qu._redirectEventId=gc),qu}static _fromIdTokenResponse(y,b,I=!1){return(0,o.Z)(function*(){const U=new rt;U.updateFromServerResponse(b);const q=new qt({uid:b.localId,auth:y,stsTokenManager:U,isAnonymous:I});return yield Pi(q),q})()}}const ni=(()=>{class T{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,o.Z)(function*(){return!0})()}_set(b,I){var U=this;return(0,o.Z)(function*(){U.storage[b]=I})()}_get(b){var I=this;return(0,o.Z)(function*(){const U=I.storage[b];return void 0===U?null:U})()}_remove(b){var I=this;return(0,o.Z)(function*(){delete I.storage[b]})()}_addListener(b,I){}_removeListener(b,I){}}return T.type="NONE",T})();function Qt(T,y,b){return`firebase:${T}:${y}:${b}`}class fr{constructor(y,b,I){this.persistence=y,this.auth=b,this.userKey=I;const{config:U,name:q}=this.auth;this.fullUserKey=Qt(this.userKey,U.apiKey,q),this.fullPersistenceKey=Qt("persistence",U.apiKey,q),this.boundEventHandler=b._onStorageEvent.bind(b),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(y){return this.persistence._set(this.fullUserKey,y.toJSON())}getCurrentUser(){var y=this;return(0,o.Z)(function*(){const b=yield y.persistence._get(y.fullUserKey);return b?qt._fromJSON(y.auth,b):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(y){var b=this;return(0,o.Z)(function*(){if(b.persistence===y)return;const I=yield b.getCurrentUser();return yield b.removeCurrentUser(),b.persistence=y,I?b.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(y,b,I="authUser"){return(0,o.Z)(function*(){if(!b.length)return new fr(De(ni),y,I);const U=(yield Promise.all(b.map(function(){var zt=(0,o.Z)(function*(ln){if(yield ln._isAvailable())return ln});return function(ln){return zt.apply(this,arguments)}}()))).filter(zt=>zt);let q=U[0]||De(ni);const me=Qt(I,y.config.apiKey,y.name);let tt=null;for(const zt of b)try{const ln=yield zt._get(me);if(ln){const Si=qt._fromJSON(y,ln);zt!==q&&(tt=Si),q=zt;break}}catch(ln){}const St=U.filter(zt=>zt._shouldAllowMigration);return q._shouldAllowMigration&&St.length?(q=St[0],tt&&(yield q._set(me,tt.toJSON())),yield Promise.all(b.map(function(){var zt=(0,o.Z)(function*(ln){if(ln!==q)try{yield ln._remove(me)}catch(Si){}});return function(ln){return zt.apply(this,arguments)}}())),new fr(q,y,I)):new fr(q,y,I)})()}}function Ie(T){const y=T.toLowerCase();if(y.includes("opera/")||y.includes("opr/")||y.includes("opios/"))return"Opera";if(vt(y))return"IEMobile";if(y.includes("msie")||y.includes("trident/"))return"IE";if(y.includes("edge/"))return"Edge";if(ce(y))return"Firefox";if(y.includes("silk/"))return"Silk";if(dn(y))return"Blackberry";if(On(y))return"Webos";if(oe(y))return"Safari";if((y.includes("chrome/")||Ye(y))&&!y.includes("edge/"))return"Chrome";if(Gt(y))return"Android";{const I=T.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function ce(T=(0,P.z$)()){return/firefox\//i.test(T)}function oe(T=(0,P.z$)()){const y=T.toLowerCase();return y.includes("safari/")&&!y.includes("chrome/")&&!y.includes("crios/")&&!y.includes("android")}function Ye(T=(0,P.z$)()){return/crios\//i.test(T)}function vt(T=(0,P.z$)()){return/iemobile/i.test(T)}function Gt(T=(0,P.z$)()){return/android/i.test(T)}function dn(T=(0,P.z$)()){return/blackberry/i.test(T)}function On(T=(0,P.z$)()){return/webos/i.test(T)}function Sn(T=(0,P.z$)()){return/iphone|ipad|ipod/i.test(T)}function tr(T=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(T)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(T)}function is(T=(0,P.z$)()){return Sn(T)||Gt(T)||On(T)||dn(T)||/windows phone/i.test(T)||vt(T)}function Nr(T,y=[]){let b;switch(T){case"Browser":b=Ie((0,P.z$)());break;case"Worker":b=`${Ie((0,P.z$)())}-${T}`;break;default:b=T}const I=y.length?y.join(","):"FirebaseCore-web";return`${b}/JsCore/${j.SDK_VERSION}/${I}`}class Fc{constructor(y){this.auth=y,this.queue=[]}pushCallback(y,b){const I=q=>new Promise((me,tt)=>{try{me(y(q))}catch(St){tt(St)}});I.onAbort=b,this.queue.push(I);const U=this.queue.length-1;return()=>{this.queue[U]=()=>Promise.resolve()}}runMiddleware(y){var b=this;return(0,o.Z)(function*(){if(b.auth.currentUser===y)return;const I=[];try{for(const U of b.queue)yield U(y),U.onAbort&&I.push(U.onAbort)}catch(U){I.reverse();for(const q of I)try{q()}catch(me){}throw b.auth._errorFactory.create("login-blocked",{originalMessage:U.message})}})()}}class Fs{constructor(y,b,I){this.app=y,this.heartbeatServiceProvider=b,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wn(this),this.idTokenSubscription=new wn(this),this.beforeStateQueue=new Fc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=lt,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=y.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(y,b){var I=this;return b&&(this._popupRedirectResolver=De(b)),this._initializationPromise=this.queue((0,o.Z)(function*(){var U,q;if(!I._deleted&&(I.persistenceManager=yield fr.create(I,y),!I._deleted)){if(null===(U=I._popupRedirectResolver)||void 0===U?void 0:U._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(me){}yield I.initializeCurrentUser(b),I.lastNotifiedUid=(null===(q=I.currentUser)||void 0===q?void 0:q.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var y=this;return(0,o.Z)(function*(){if(y._deleted)return;const b=yield y.assertedPersistence.getCurrentUser();if(y.currentUser||b){if(y.currentUser&&b&&y.currentUser.uid===b.uid)return y._currentUser._assign(b),void(yield y.currentUser.getIdToken());yield y._updateCurrentUser(b,!0)}})()}initializeCurrentUser(y){var b=this;return(0,o.Z)(function*(){var I;const U=yield b.assertedPersistence.getCurrentUser();let q=U,me=!1;if(y&&b.config.authDomain){yield b.getOrInitRedirectPersistenceManager();const tt=null===(I=b.redirectUser)||void 0===I?void 0:I._redirectEventId,St=null==q?void 0:q._redirectEventId,zt=yield b.tryRedirectSignIn(y);(!tt||tt===St)&&(null==zt?void 0:zt.user)&&(q=zt.user,me=!0)}if(!q)return b.directlySetCurrentUser(null);if(!q._redirectEventId){if(me)try{yield b.beforeStateQueue.runMiddleware(q)}catch(tt){q=U,b._popupRedirectResolver._overrideRedirectResult(b,()=>Promise.reject(tt))}return q?b.reloadAndSetCurrentUserOrClear(q):b.directlySetCurrentUser(null)}return ye(b._popupRedirectResolver,b,"argument-error"),yield b.getOrInitRedirectPersistenceManager(),b.redirectUser&&b.redirectUser._redirectEventId===q._redirectEventId?b.directlySetCurrentUser(q):b.reloadAndSetCurrentUserOrClear(q)})()}tryRedirectSignIn(y){var b=this;return(0,o.Z)(function*(){let I=null;try{I=yield b._popupRedirectResolver._completeRedirectFn(b,y,!0)}catch(U){yield b._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(y){var b=this;return(0,o.Z)(function*(){try{yield Pi(y)}catch(I){if("auth/network-request-failed"!==I.code)return b.directlySetCurrentUser(null)}return b.directlySetCurrentUser(y)})()}useDeviceLanguage(){this.languageCode=function Mt(){if("undefined"==typeof navigator)return null;const T=navigator;return T.languages&&T.languages[0]||T.language||null}()}_delete(){var y=this;return(0,o.Z)(function*(){y._deleted=!0})()}updateCurrentUser(y){var b=this;return(0,o.Z)(function*(){const I=y?(0,P.m9)(y):null;return I&&ye(I.auth.config.apiKey===b.config.apiKey,b,"invalid-user-token"),b._updateCurrentUser(I&&I._clone(b))})()}_updateCurrentUser(y,b=!1){var I=this;return(0,o.Z)(function*(){if(!I._deleted)return y&&ye(I.tenantId===y.tenantId,I,"tenant-id-mismatch"),b||(yield I.beforeStateQueue.runMiddleware(y)),I.queue((0,o.Z)(function*(){yield I.directlySetCurrentUser(y),I.notifyAuthListeners()}))})()}signOut(){var y=this;return(0,o.Z)(function*(){return yield y.beforeStateQueue.runMiddleware(null),(y.redirectPersistenceManager||y._popupRedirectResolver)&&(yield y._setRedirectUser(null)),y._updateCurrentUser(null,!0)})()}setPersistence(y){var b=this;return this.queue((0,o.Z)(function*(){yield b.assertedPersistence.setPersistence(De(y))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(y){this._errorFactory=new P.LL("auth","Firebase",y())}onAuthStateChanged(y,b,I){return this.registerStateListener(this.authStateSubscription,y,b,I)}beforeAuthStateChanged(y,b){return this.beforeStateQueue.pushCallback(y,b)}onIdTokenChanged(y,b,I){return this.registerStateListener(this.idTokenSubscription,y,b,I)}toJSON(){var y;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(y=this._currentUser)||void 0===y?void 0:y.toJSON()}}_setRedirectUser(y,b){var I=this;return(0,o.Z)(function*(){const U=yield I.getOrInitRedirectPersistenceManager(b);return null===y?U.removeCurrentUser():U.setCurrentUser(y)})()}getOrInitRedirectPersistenceManager(y){var b=this;return(0,o.Z)(function*(){if(!b.redirectPersistenceManager){const I=y&&De(y)||b._popupRedirectResolver;ye(I,b,"argument-error"),b.redirectPersistenceManager=yield fr.create(b,[De(I._redirectPersistence)],"redirectUser"),b.redirectUser=yield b.redirectPersistenceManager.getCurrentUser()}return b.redirectPersistenceManager})()}_redirectUserForId(y){var b=this;return(0,o.Z)(function*(){var I,U;return b._isInitialized&&(yield b.queue((0,o.Z)(function*(){}))),(null===(I=b._currentUser)||void 0===I?void 0:I._redirectEventId)===y?b._currentUser:(null===(U=b.redirectUser)||void 0===U?void 0:U._redirectEventId)===y?b.redirectUser:null})()}_persistUserIfCurrent(y){var b=this;return(0,o.Z)(function*(){if(y===b.currentUser)return b.queue((0,o.Z)(function*(){return b.directlySetCurrentUser(y)}))})()}_notifyListenersIfCurrent(y){y===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var y,b;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(b=null===(y=this.currentUser)||void 0===y?void 0:y.uid)&&void 0!==b?b:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(y,b,I,U){if(this._deleted)return()=>{};const q="function"==typeof b?b:b.next.bind(b),me=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(me,this,"internal-error"),me.then(()=>q(this.currentUser)),"function"==typeof b?y.addObserver(b,I,U):y.addObserver(b)}directlySetCurrentUser(y){var b=this;return(0,o.Z)(function*(){b.currentUser&&b.currentUser!==y&&(b._currentUser._stopProactiveRefresh(),y&&b.isProactiveRefreshEnabled&&y._startProactiveRefresh()),b.currentUser=y,y?yield b.assertedPersistence.setCurrentUser(y):yield b.assertedPersistence.removeCurrentUser()})()}queue(y){return this.operations=this.operations.then(y,y),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(y){!y||this.frameworks.includes(y)||(this.frameworks.push(y),this.frameworks.sort(),this.clientVersion=Nr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var y=this;return(0,o.Z)(function*(){var b;const I={"X-Client-Version":y.clientVersion};y.app.options.appId&&(I["X-Firebase-gmpid"]=y.app.options.appId);const U=yield null===(b=y.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===b?void 0:b.getHeartbeatsHeader();return U&&(I["X-Firebase-Client"]=U),I})()}}function ht(T){return(0,P.m9)(T)}class wn{constructor(y){this.auth=y,this.observer=null,this.addObserver=(0,P.ne)(b=>this.observer=b)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ci(T,y,b){const I=ht(T);ye(I._canInitEmulator,I,"emulator-config-failed"),ye(/^https?:\/\//.test(y),I,"invalid-emulator-scheme");const U=!!(null==b?void 0:b.disableWarnings),q=kr(y),{host:me,port:tt}=function oa(T){const y=kr(T),b=/(\/\/)?([^?#/]+)/.exec(T.substr(y.length));if(!b)return{host:"",port:null};const I=b[2].split("@").pop()||"",U=/^(\[[^\]]+\])(:|$)/.exec(I);if(U){const q=U[1];return{host:q,port:Fi(I.substr(q.length+1))}}{const[q,me]=I.split(":");return{host:q,port:Fi(me)}}}(y);I.config.emulator={url:`${q}//${me}${null===tt?"":`:${tt}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:me,port:tt,protocol:q.replace(":",""),options:Object.freeze({disableWarnings:U})}),U||function aa(){function T(){const y=document.createElement("p"),b=y.style;y.innerText="Running in emulator mode. Do not use with production credentials.",b.position="fixed",b.width="100%",b.backgroundColor="#ffffff",b.border=".1em solid #000000",b.color="#b50000",b.bottom="0px",b.left="0px",b.margin="0px",b.zIndex="10000",b.textAlign="center",y.classList.add("firebase-emulator-warning"),document.body.appendChild(y)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",T):T())}()}function kr(T){const y=T.indexOf(":");return y<0?"":T.substr(0,y+1)}function Fi(T){if(!T)return null;const y=Number(T);return isNaN(y)?null:y}class ii{constructor(y,b){this.providerId=y,this.signInMethod=b}toJSON(){return Me("not implemented")}_getIdTokenResponse(y){return Me("not implemented")}_linkToIdToken(y,b){return Me("not implemented")}_getReauthenticationResolver(y){return Me("not implemented")}}function cl(T,y){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:resetPassword",Dn(T,y))})).apply(this,arguments)}function hn(T,y){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function ul(T,y){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:update",Dn(T,y))})).apply(this,arguments)}function ri(){return(ri=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithPassword",Dn(T,y))})).apply(this,arguments)}function la(T,y){return La.apply(this,arguments)}function La(){return(La=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:sendOobCode",Dn(T,y))})).apply(this,arguments)}function si(T,y){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,o.Z)(function*(T,y){return la(T,y)})).apply(this,arguments)}function Ch(T,y){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,o.Z)(function*(T,y){return la(T,y)})).apply(this,arguments)}function ms(T,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,o.Z)(function*(T,y){return la(T,y)})).apply(this,arguments)}function wh(T,y){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,o.Z)(function*(T,y){return la(T,y)})).apply(this,arguments)}function _s(){return(_s=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithEmailLink",Dn(T,y))})).apply(this,arguments)}function ua(){return(ua=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithEmailLink",Dn(T,y))})).apply(this,arguments)}class Kl extends ii{constructor(y,b,I,U=null){super("password",I),this._email=y,this._password=b,this._tenantId=U}static _fromEmailAndPassword(y,b){return new Kl(y,b,"password")}static _fromEmailAndCode(y,b,I=null){return new Kl(y,b,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y;if((null==b?void 0:b.email)&&(null==b?void 0:b.password)){if("password"===b.signInMethod)return this._fromEmailAndPassword(b.email,b.password);if("emailLink"===b.signInMethod)return this._fromEmailAndCode(b.email,b.password,b.tenantId)}return null}_getIdTokenResponse(y){var b=this;return(0,o.Z)(function*(){switch(b.signInMethod){case"password":return function Yl(T,y){return ri.apply(this,arguments)}(y,{returnSecureToken:!0,email:b._email,password:b._password});case"emailLink":return function ca(T,y){return _s.apply(this,arguments)}(y,{email:b._email,oobCode:b._password});default:ft(y,"internal-error")}})()}_linkToIdToken(y,b){var I=this;return(0,o.Z)(function*(){switch(I.signInMethod){case"password":return hn(y,{idToken:b,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function Eh(T,y){return ua.apply(this,arguments)}(y,{idToken:b,email:I._email,oobCode:I._password});default:ft(y,"internal-error")}})()}_getReauthenticationResolver(y){return this._getIdTokenResponse(y)}}function Xi(T,y){return dl.apply(this,arguments)}function dl(){return(dl=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithIdp",Dn(T,y))})).apply(this,arguments)}class No extends ii{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(y){const b=new No(y.providerId,y.signInMethod);return y.idToken||y.accessToken?(y.idToken&&(b.idToken=y.idToken),y.accessToken&&(b.accessToken=y.accessToken),y.nonce&&!y.pendingToken&&(b.nonce=y.nonce),y.pendingToken&&(b.pendingToken=y.pendingToken)):y.oauthToken&&y.oauthTokenSecret?(b.accessToken=y.oauthToken,b.secret=y.oauthTokenSecret):ft("argument-error"),b}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:U}=b,q=(0,we._T)(b,["providerId","signInMethod"]);if(!I||!U)return null;const me=new No(I,U);return me.idToken=q.idToken||void 0,me.accessToken=q.accessToken||void 0,me.secret=q.secret,me.nonce=q.nonce,me.pendingToken=q.pendingToken||null,me}_getIdTokenResponse(y){return Xi(y,this.buildRequest())}_linkToIdToken(y,b){const I=this.buildRequest();return I.idToken=b,Xi(y,I)}_getReauthenticationResolver(y){const b=this.buildRequest();return b.autoCreate=!1,Xi(y,b)}buildRequest(){const y={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)y.pendingToken=this.pendingToken;else{const b={};this.idToken&&(b.id_token=this.idToken),this.accessToken&&(b.access_token=this.accessToken),this.secret&&(b.oauth_token_secret=this.secret),b.providerId=this.providerId,this.nonce&&!this.pendingToken&&(b.nonce=this.nonce),y.postBody=(0,P.xO)(b)}return y}}function Eg(T,y){return yd.apply(this,arguments)}function yd(){return(yd=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:sendVerificationCode",Dn(T,y))})).apply(this,arguments)}function Ql(){return(Ql=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithPhoneNumber",Dn(T,y))})).apply(this,arguments)}function Th(){return(Th=(0,o.Z)(function*(T,y){const b=yield yi(T,"POST","/v1/accounts:signInWithPhoneNumber",Dn(T,y));if(b.temporaryProof)throw xi(T,"account-exists-with-different-credential",b);return b})).apply(this,arguments)}const Tg={USER_NOT_FOUND:"user-not-found"};function bd(){return(bd=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithPhoneNumber",Dn(T,Object.assign(Object.assign({},y),{operation:"REAUTH"})),Tg)})).apply(this,arguments)}class Jl extends ii{constructor(y){super("phone","phone"),this.params=y}static _fromVerification(y,b){return new Jl({verificationId:y,verificationCode:b})}static _fromTokenResponse(y,b){return new Jl({phoneNumber:y,temporaryProof:b})}_getIdTokenResponse(y){return function $f(T,y){return Ql.apply(this,arguments)}(y,this._makeVerificationRequest())}_linkToIdToken(y,b){return function hl(T,y){return Th.apply(this,arguments)}(y,Object.assign({idToken:b},this._makeVerificationRequest()))}_getReauthenticationResolver(y){return function Dg(T,y){return bd.apply(this,arguments)}(y,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:y,phoneNumber:b,verificationId:I,verificationCode:U}=this.params;return y&&b?{temporaryProof:y,phoneNumber:b}:{sessionInfo:I,code:U}}toJSON(){const y={providerId:this.providerId};return this.params.phoneNumber&&(y.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(y.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(y.verificationCode=this.params.verificationCode),this.params.verificationId&&(y.verificationId=this.params.verificationId),y}static fromJSON(y){"string"==typeof y&&(y=JSON.parse(y));const{verificationId:b,verificationCode:I,phoneNumber:U,temporaryProof:q}=y;return I||b||U||q?new Jl({verificationId:b,verificationCode:I,phoneNumber:U,temporaryProof:q}):null}}class da{constructor(y){var b,I,U,q,me,tt;const St=(0,P.zd)((0,P.pd)(y)),zt=null!==(b=St.apiKey)&&void 0!==b?b:null,ln=null!==(I=St.oobCode)&&void 0!==I?I:null,Si=function Sg(T){switch(T){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(U=St.mode)&&void 0!==U?U:null);ye(zt&&ln&&Si,"argument-error"),this.apiKey=zt,this.operation=Si,this.code=ln,this.continueUrl=null!==(q=St.continueUrl)&&void 0!==q?q:null,this.languageCode=null!==(me=St.languageCode)&&void 0!==me?me:null,this.tenantId=null!==(tt=St.tenantId)&&void 0!==tt?tt:null}static parseLink(y){const b=function Wf(T){const y=(0,P.zd)((0,P.pd)(T)).link,b=y?(0,P.zd)((0,P.pd)(y)).deep_link_id:null,I=(0,P.zd)((0,P.pd)(T)).deep_link_id;return(I?(0,P.zd)((0,P.pd)(I)).link:null)||I||b||y||T}(y);try{return new da(b)}catch(I){return null}}}let Bc=(()=>{class T{constructor(){this.providerId=T.PROVIDER_ID}static credential(b,I){return Kl._fromEmailAndPassword(b,I)}static credentialWithLink(b,I){const U=da.parseLink(I);return ye(U,"argument-error"),Kl._fromEmailAndCode(b,U.code,U.tenantId)}}return T.PROVIDER_ID="password",T.EMAIL_PASSWORD_SIGN_IN_METHOD="password",T.EMAIL_LINK_SIGN_IN_METHOD="emailLink",T})();class Ua{constructor(y){this.providerId=y,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(y){this.defaultLanguageCode=y}setCustomParameters(y){return this.customParameters=y,this}getCustomParameters(){return this.customParameters}}class io extends Ua{constructor(){super(...arguments),this.scopes=[]}addScope(y){return this.scopes.includes(y)||this.scopes.push(y),this}getScopes(){return[...this.scopes]}}class Xl extends io{static credentialFromJSON(y){const b="string"==typeof y?JSON.parse(y):y;return ye("providerId"in b&&"signInMethod"in b,"argument-error"),No._fromParams(b)}credential(y){return this._credential(Object.assign(Object.assign({},y),{nonce:y.rawNonce}))}_credential(y){return ye(y.idToken||y.accessToken,"argument-error"),No._fromParams(Object.assign(Object.assign({},y),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(y){return Xl.oauthCredentialFromTaggedObject(y)}static credentialFromError(y){return Xl.oauthCredentialFromTaggedObject(y.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:b,oauthAccessToken:I,oauthTokenSecret:U,pendingToken:q,nonce:me,providerId:tt}=y;if(!I&&!U&&!b&&!q||!tt)return null;try{return new Xl(tt)._credential({idToken:b,accessToken:I,nonce:me,pendingToken:q})}catch(St){return null}}}let Uc=(()=>{class T extends io{constructor(){super("facebook.com")}static credential(b){return No._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.FACEBOOK_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return T.credentialFromTaggedObject(b)}static credentialFromError(b){return T.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return T.credential(b.oauthAccessToken)}catch(I){return null}}}return T.FACEBOOK_SIGN_IN_METHOD="facebook.com",T.PROVIDER_ID="facebook.com",T})(),oi=(()=>{class T extends io{constructor(){super("google.com"),this.addScope("profile")}static credential(b,I){return No._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GOOGLE_SIGN_IN_METHOD,idToken:b,accessToken:I})}static credentialFromResult(b){return T.credentialFromTaggedObject(b)}static credentialFromError(b){return T.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthIdToken:I,oauthAccessToken:U}=b;if(!I&&!U)return null;try{return T.credential(I,U)}catch(q){return null}}}return T.GOOGLE_SIGN_IN_METHOD="google.com",T.PROVIDER_ID="google.com",T})(),wi=(()=>{class T extends io{constructor(){super("github.com")}static credential(b){return No._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.GITHUB_SIGN_IN_METHOD,accessToken:b})}static credentialFromResult(b){return T.credentialFromTaggedObject(b)}static credentialFromError(b){return T.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b||!("oauthAccessToken"in b)||!b.oauthAccessToken)return null;try{return T.credential(b.oauthAccessToken)}catch(I){return null}}}return T.GITHUB_SIGN_IN_METHOD="github.com",T.PROVIDER_ID="github.com",T})();class Wn extends ii{constructor(y,b){super(y,y),this.pendingToken=b}_getIdTokenResponse(y){return Xi(y,this.buildRequest())}_linkToIdToken(y,b){const I=this.buildRequest();return I.idToken=b,Xi(y,I)}_getReauthenticationResolver(y){const b=this.buildRequest();return b.autoCreate=!1,Xi(y,b)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(y){const b="string"==typeof y?JSON.parse(y):y,{providerId:I,signInMethod:U,pendingToken:q}=b;return I&&U&&q&&I===U?new Wn(I,q):null}static _create(y,b){return new Wn(y,b)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ha extends Ua{constructor(y){ye(y.startsWith("saml."),"argument-error"),super(y)}static credentialFromResult(y){return ha.samlCredentialFromTaggedObject(y)}static credentialFromError(y){return ha.samlCredentialFromTaggedObject(y.customData||{})}static credentialFromJSON(y){const b=Wn.fromJSON(y);return ye(b,"argument-error"),b}static samlCredentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{pendingToken:b,providerId:I}=y;if(!b||!I)return null;try{return Wn._create(I,b)}catch(U){return null}}}let mo=(()=>{class T extends io{constructor(){super("twitter.com")}static credential(b,I){return No._fromParams({providerId:T.PROVIDER_ID,signInMethod:T.TWITTER_SIGN_IN_METHOD,oauthToken:b,oauthTokenSecret:I})}static credentialFromResult(b){return T.credentialFromTaggedObject(b)}static credentialFromError(b){return T.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{oauthAccessToken:I,oauthTokenSecret:U}=b;if(!I||!U)return null;try{return T.credential(I,U)}catch(q){return null}}}return T.TWITTER_SIGN_IN_METHOD="twitter.com",T.PROVIDER_ID="twitter.com",T})();function Sh(T,y){return wr.apply(this,arguments)}function wr(){return(wr=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signUp",Dn(T,y))})).apply(this,arguments)}class rs{constructor(y){this.user=y.user,this.providerId=y.providerId,this._tokenResponse=y._tokenResponse,this.operationType=y.operationType}static _fromIdTokenResponse(y,b,I,U=!1){return(0,o.Z)(function*(){const q=yield qt._fromIdTokenResponse(y,I,U),me=Er(I);return new rs({user:q,providerId:me,_tokenResponse:I,operationType:b})})()}static _forOperation(y,b,I){return(0,o.Z)(function*(){yield y._updateTokensIfNecessary(I,!0);const U=Er(I);return new rs({user:y,providerId:U,_tokenResponse:I,operationType:b})})()}}function Er(T){return T.providerId?T.providerId:"phoneNumber"in T?"phone":null}function Cd(T){return Va.apply(this,arguments)}function Va(){return(Va=(0,o.Z)(function*(T){var y;const b=ht(T);if(yield b._initializationPromise,null===(y=b.currentUser)||void 0===y?void 0:y.isAnonymous)return new rs({user:b.currentUser,providerId:null,operationType:"signIn"});const I=yield Sh(b,{returnSecureToken:!0}),U=yield rs._fromIdTokenResponse(b,"signIn",I,!0);return yield b._updateCurrentUser(U.user),U})).apply(this,arguments)}class Vc extends P.ZR{constructor(y,b,I,U){var q;super(b.code,b.message),this.operationType=I,this.user=U,Object.setPrototypeOf(this,Vc.prototype),this.customData={appName:y.name,tenantId:null!==(q=y.tenantId)&&void 0!==q?q:void 0,_serverResponse:b.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(y,b,I,U){return new Vc(y,b,I,U)}}function ec(T,y,b,I){return("reauthenticate"===y?b._getReauthenticationResolver(T):b._getIdTokenResponse(T)).catch(q=>{throw"auth/multi-factor-auth-required"===q.code?Vc._fromErrorAndOperation(T,q,y,I):q})}function vs(T){return new Set(T.map(({providerId:y})=>y).filter(y=>!!y))}function ko(T,y){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,o.Z)(function*(T,y){const b=(0,P.m9)(T);yield fa(!0,b,y);const{providerUserInfo:I}=yield ns(b.auth,{idToken:yield b.getIdToken(),deleteProvider:[y]}),U=vs(I||[]);return b.providerData=b.providerData.filter(q=>U.has(q.providerId)),U.has("phone")||(b.phoneNumber=null),yield b.auth._persistUserIfCurrent(b),b})).apply(this,arguments)}function fi(T,y){return tc.apply(this,arguments)}function tc(){return(tc=(0,o.Z)(function*(T,y,b=!1){const I=yield Nt(T,y._linkToIdToken(T.auth,yield T.getIdToken()),b);return rs._forOperation(T,"link",I)})).apply(this,arguments)}function fa(T,y,b){return ai.apply(this,arguments)}function ai(){return(ai=(0,o.Z)(function*(T,y,b){yield Pi(y);const U=!1===T?"provider-already-linked":"no-such-provider";ye(vs(y.providerData).has(b)===T,y.auth,U)})).apply(this,arguments)}function $r(T,y){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,o.Z)(function*(T,y,b=!1){const{auth:I}=T,U="reauthenticate";try{const q=yield Nt(T,ec(I,U,y,T),b);ye(q.idToken,I,"internal-error");const me=gn(q.idToken);ye(me,I,"internal-error");const{sub:tt}=me;return ye(T.uid===tt,I,"user-mismatch"),rs._forOperation(T,U,q)}catch(q){throw"auth/user-not-found"===(null==q?void 0:q.code)&&ft(I,"user-mismatch"),q}})).apply(this,arguments)}function Tr(T,y){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,o.Z)(function*(T,y,b=!1){const I="signIn",U=yield ec(T,I,y),q=yield rs._fromIdTokenResponse(T,I,U);return b||(yield T._updateCurrentUser(q.user)),q})).apply(this,arguments)}function jc(T,y){return pi.apply(this,arguments)}function pi(){return(pi=(0,o.Z)(function*(T,y){return Tr(ht(T),y)})).apply(this,arguments)}function ro(T,y){return pr.apply(this,arguments)}function pr(){return(pr=(0,o.Z)(function*(T,y){const b=(0,P.m9)(T);return yield fa(!1,b,y.providerId),fi(b,y)})).apply(this,arguments)}function li(T,y){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,o.Z)(function*(T,y){return $r((0,P.m9)(T),y)})).apply(this,arguments)}function Gc(T,y){return Bs.apply(this,arguments)}function Bs(){return(Bs=(0,o.Z)(function*(T,y){return yi(T,"POST","/v1/accounts:signInWithCustomToken",Dn(T,y))})).apply(this,arguments)}function Po(T,y){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,o.Z)(function*(T,y){const b=ht(T),I=yield Gc(b,{token:y,returnSecureToken:!0}),U=yield rs._fromIdTokenResponse(b,"signIn",I);return yield b._updateCurrentUser(U.user),U})).apply(this,arguments)}class Zt{constructor(y,b){this.factorId=y,this.uid=b.mfaEnrollmentId,this.enrollmentTime=new Date(b.enrolledAt).toUTCString(),this.displayName=b.displayName}static _fromServerResponse(y,b){return"phoneInfo"in b?$c._fromServerResponse(y,b):ft(y,"internal-error")}}class $c extends Zt{constructor(y){super("phone",y),this.phoneNumber=y.phoneInfo}static _fromServerResponse(y,b){return new $c(b)}}function nc(T,y,b){var I;ye((null===(I=b.url)||void 0===I?void 0:I.length)>0,T,"invalid-continue-uri"),ye(void 0===b.dynamicLinkDomain||b.dynamicLinkDomain.length>0,T,"invalid-dynamic-link-domain"),y.continueUrl=b.url,y.dynamicLinkDomain=b.dynamicLinkDomain,y.canHandleCodeInApp=b.handleCodeInApp,b.iOS&&(ye(b.iOS.bundleId.length>0,T,"missing-ios-bundle-id"),y.iOSBundleId=b.iOS.bundleId),b.android&&(ye(b.android.packageName.length>0,T,"missing-android-pkg-name"),y.androidInstallApp=b.android.installApp,y.androidMinimumVersionCode=b.android.minimumVersion,y.androidPackageName=b.android.packageName)}function Wc(T,y,b){return Fo.apply(this,arguments)}function Fo(){return(Fo=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T),U={requestType:"PASSWORD_RESET",email:y};b&&nc(I,U,b),yield Ch(I,U)})).apply(this,arguments)}function wd(T,y,b){return ic.apply(this,arguments)}function ic(){return(ic=(0,o.Z)(function*(T,y,b){yield cl((0,P.m9)(T),{oobCode:y,newPassword:b})})).apply(this,arguments)}function Ih(T,y){return Je.apply(this,arguments)}function Je(){return(Je=(0,o.Z)(function*(T,y){yield ul((0,P.m9)(T),{oobCode:y})})).apply(this,arguments)}function En(T,y){return rc.apply(this,arguments)}function rc(){return(rc=(0,o.Z)(function*(T,y){const b=(0,P.m9)(T),I=yield cl(b,{oobCode:y}),U=I.requestType;switch(ye(U,b,"internal-error"),U){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(I.newEmail,b,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(I.mfaInfo,b,"internal-error");default:ye(I.email,b,"internal-error")}let q=null;return I.mfaInfo&&(q=Zt._fromServerResponse(ht(b),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:q},operation:U}})).apply(this,arguments)}function $i(T,y){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,o.Z)(function*(T,y){const{data:b}=yield En((0,P.m9)(T),y);return b.email})).apply(this,arguments)}function fl(T,y,b){return ys.apply(this,arguments)}function ys(){return(ys=(0,o.Z)(function*(T,y,b){const I=ht(T),U=yield Sh(I,{returnSecureToken:!0,email:y,password:b}),q=yield rs._fromIdTokenResponse(I,"signIn",U);return yield I._updateCurrentUser(q.user),q})).apply(this,arguments)}function Nu(T,y,b){return jc((0,P.m9)(T),Bc.credential(y,b))}function ss(T,y,b){return ku.apply(this,arguments)}function ku(){return(ku=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T),U={requestType:"EMAIL_SIGNIN",email:y};ye(b.handleCodeInApp,I,"argument-error"),b&&nc(I,U,b),yield ms(I,U)})).apply(this,arguments)}function sc(T,y){const b=da.parseLink(y);return"EMAIL_SIGNIN"===(null==b?void 0:b.operation)}function oc(T,y,b){return pl.apply(this,arguments)}function pl(){return(pl=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T),U=Bc.credentialWithLink(y,b||Ce());return ye(U._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),jc(I,U)})).apply(this,arguments)}function Dr(T,y){return _o.apply(this,arguments)}function _o(){return(_o=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:createAuthUri",Dn(T,y))})).apply(this,arguments)}function Ed(T,y){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,o.Z)(function*(T,y){const I={identifier:y,continueUri:Vt()?Ce():"http://localhost"},{signinMethods:U}=yield Dr((0,P.m9)(T),I);return U||[]})).apply(this,arguments)}function pa(T,y){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,o.Z)(function*(T,y){const b=(0,P.m9)(T),U={requestType:"VERIFY_EMAIL",idToken:yield T.getIdToken()};y&&nc(b.auth,U,y);const{email:q}=yield si(b.auth,U);q!==T.email&&(yield T.reload())})).apply(this,arguments)}function Ah(T,y,b){return zc.apply(this,arguments)}function zc(){return(zc=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T),q={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield T.getIdToken(),newEmail:y};b&&nc(I.auth,q,b);const{email:me}=yield wh(I.auth,q);me!==T.email&&(yield T.reload())})).apply(this,arguments)}function Pu(T,y){return ja.apply(this,arguments)}function ja(){return(ja=(0,o.Z)(function*(T,y){return $n(T,"POST","/v1/accounts:update",y)})).apply(this,arguments)}function vo(T,y){return Ga.apply(this,arguments)}function Ga(){return(Ga=(0,o.Z)(function*(T,{displayName:y,photoURL:b}){if(void 0===y&&void 0===b)return;const I=(0,P.m9)(T),q={idToken:yield I.getIdToken(),displayName:y,photoUrl:b,returnSecureToken:!0},me=yield Nt(I,Pu(I.auth,q));I.displayName=me.displayName||null,I.photoURL=me.photoUrl||null;const tt=I.providerData.find(({providerId:St})=>"password"===St);tt&&(tt.displayName=I.displayName,tt.photoURL=I.photoURL),yield I._updateTokensIfNecessary(me)})).apply(this,arguments)}function Td(T,y){return Fu((0,P.m9)(T),y,null)}function Ag(T,y){return Fu((0,P.m9)(T),null,y)}function Fu(T,y,b){return so.apply(this,arguments)}function so(){return(so=(0,o.Z)(function*(T,y,b){const{auth:I}=T,q={idToken:yield T.getIdToken(),returnSecureToken:!0};y&&(q.email=y),b&&(q.password=b);const me=yield Nt(T,hn(I,q));yield T._updateTokensIfNecessary(me,!0)})).apply(this,arguments)}class $a{constructor(y,b,I={}){this.isNewUser=y,this.providerId=b,this.profile=I}}class xh extends $a{constructor(y,b,I,U){super(y,b,I),this.username=U}}class qf extends $a{constructor(y,b){super(y,"facebook.com",b)}}class ac extends xh{constructor(y,b){super(y,"github.com",b,"string"==typeof(null==b?void 0:b.login)?null==b?void 0:b.login:null)}}class Vo extends $a{constructor(y,b){super(y,"google.com",b)}}class Zf extends xh{constructor(y,b,I){super(y,"twitter.com",b,I)}}function nr(T){const{user:y,_tokenResponse:b}=T;return y.isAnonymous&&!b?{providerId:null,isNewUser:!1,profile:null}:function Us(T){var y,b;if(!T)return null;const{providerId:I}=T,U=T.rawUserInfo?JSON.parse(T.rawUserInfo):{},q=T.isNewUser||"identitytoolkit#SignupNewUserResponse"===T.kind;if(!I&&(null==T?void 0:T.idToken)){const me=null===(b=null===(y=gn(T.idToken))||void 0===y?void 0:y.firebase)||void 0===b?void 0:b.sign_in_provider;if(me)return new $a(q,"anonymous"!==me&&"custom"!==me?me:null)}if(!I)return null;switch(I){case"facebook.com":return new qf(q,U);case"github.com":return new ac(q,U);case"google.com":return new Vo(q,U);case"twitter.com":return new Zf(q,U,T.screenName||null);case"custom":case"anonymous":return new $a(q,null);default:return new $a(q,I,U)}}(b)}class ga{constructor(y,b){this.type=y,this.credential=b}static _fromIdtoken(y){return new ga("enroll",y)}static _fromMfaPendingCredential(y){return new ga("signin",y)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(y){var b,I;if(null==y?void 0:y.multiFactorSession){if(null===(b=y.multiFactorSession)||void 0===b?void 0:b.pendingCredential)return ga._fromMfaPendingCredential(y.multiFactorSession.pendingCredential);if(null===(I=y.multiFactorSession)||void 0===I?void 0:I.idToken)return ga._fromIdtoken(y.multiFactorSession.idToken)}return null}}class Wr{constructor(y,b,I){this.session=y,this.hints=b,this.signInResolver=I}static _fromError(y,b){const I=ht(y),U=b.customData._serverResponse,q=(U.mfaInfo||[]).map(tt=>Zt._fromServerResponse(I,tt));ye(U.mfaPendingCredential,I,"internal-error");const me=ga._fromMfaPendingCredential(U.mfaPendingCredential);return new Wr(me,q,function(){var tt=(0,o.Z)(function*(St){const zt=yield St._process(I,me);delete U.mfaInfo,delete U.mfaPendingCredential;const ln=Object.assign(Object.assign({},U),{idToken:zt.idToken,refreshToken:zt.refreshToken});switch(b.operationType){case"signIn":const Si=yield rs._fromIdTokenResponse(I,b.operationType,ln);return yield I._updateCurrentUser(Si.user),Si;case"reauthenticate":return ye(b.user,I,"internal-error"),rs._forOperation(b.user,b.operationType,ln);default:ft(I,"internal-error")}});return function(St){return tt.apply(this,arguments)}}())}resolveSignIn(y){var b=this;return(0,o.Z)(function*(){return b.signInResolver(y)})()}}function ml(T,y){var b;const I=(0,P.m9)(T),U=y;return ye(y.customData.operationType,I,"argument-error"),ye(null===(b=U.customData._serverResponse)||void 0===b?void 0:b.mfaPendingCredential,I,"argument-error"),Wr._fromError(I,U)}function Lr(T,y){return $n(T,"POST","/v2/accounts/mfaEnrollment:start",Dn(T,y))}class ma{constructor(y){this.user=y,this.enrolledFactors=[],y._onReload(b=>{b.mfaInfo&&(this.enrolledFactors=b.mfaInfo.map(I=>Zt._fromServerResponse(y.auth,I)))})}static _fromUser(y){return new ma(y)}getSession(){var y=this;return(0,o.Z)(function*(){return ga._fromIdtoken(yield y.user.getIdToken())})()}enroll(y,b){var I=this;return(0,o.Z)(function*(){const U=y,q=yield I.getSession(),me=yield Nt(I.user,U._process(I.user.auth,q,b));return yield I.user._updateTokensIfNecessary(me),I.user.reload()})()}unenroll(y){var b=this;return(0,o.Z)(function*(){const I="string"==typeof y?y:y.uid,U=yield b.user.getIdToken(),q=yield Nt(b.user,function Ho(T,y){return $n(T,"POST","/v2/accounts/mfaEnrollment:withdraw",Dn(T,y))}(b.user.auth,{idToken:U,mfaEnrollmentId:I}));b.enrolledFactors=b.enrolledFactors.filter(({uid:me})=>me!==I),yield b.user._updateTokensIfNecessary(q);try{yield b.user.reload()}catch(me){if("auth/user-token-expired"!==me.code)throw me}})()}}const Xn=new WeakMap;function Rh(T){const y=(0,P.m9)(T);return Xn.has(y)||Xn.set(y,ma._fromUser(y)),Xn.get(y)}const yo="__sak";class _a{constructor(y,b){this.storageRetriever=y,this.type=b}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(y){return Promise.resolve(!1)}}_set(y,b){return this.storage.setItem(y,JSON.stringify(b)),Promise.resolve()}_get(y){const b=this.storage.getItem(y);return Promise.resolve(b?JSON.parse(b):null)}_remove(y){return this.storage.removeItem(y),Promise.resolve()}get storage(){return this.storageRetriever()}}const dt=(()=>{class T extends _a{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(b,I)=>this.onStorageEvent(b,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Mh(){const T=(0,P.z$)();return oe(T)||Sn(T)}()&&function go(){try{return!(!window||window===window.top)}catch(T){return!1}}(),this.fallbackToPolling=is(),this._shouldAllowMigration=!0}forAllChangedKeys(b){for(const I of Object.keys(this.listeners)){const U=this.storage.getItem(I),q=this.localCache[I];U!==q&&b(I,q,U)}}onStorageEvent(b,I=!1){if(!b.key)return void this.forAllChangedKeys((tt,St,zt)=>{this.notifyListeners(tt,zt)});const U=b.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const tt=this.storage.getItem(U);if(b.newValue!==tt)null!==b.newValue?this.storage.setItem(U,b.newValue):this.storage.removeItem(U);else if(this.localCache[U]===b.newValue&&!I)return}const q=()=>{const tt=this.storage.getItem(U);!I&&this.localCache[U]===tt||this.notifyListeners(U,tt)},me=this.storage.getItem(U);!function In(){return(0,P.w1)()&&10===document.documentMode}()||me===b.newValue||b.newValue===b.oldValue?q():setTimeout(q,10)}notifyListeners(b,I){this.localCache[b]=I;const U=this.listeners[b];if(U)for(const q of Array.from(U))q(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((b,I,U)=>{this.onStorageEvent(new StorageEvent("storage",{key:b,oldValue:I,newValue:U}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(b,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[b]||(this.listeners[b]=new Set,this.localCache[b]=this.storage.getItem(b)),this.listeners[b].add(I)}_removeListener(b,I){this.listeners[b]&&(this.listeners[b].delete(I),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(b,I){var U=()=>super._set,q=this;return(0,o.Z)(function*(){yield U().call(q,b,I),q.localCache[b]=JSON.stringify(I)})()}_get(b){var I=()=>super._get,U=this;return(0,o.Z)(function*(){const q=yield I().call(U,b);return U.localCache[b]=JSON.stringify(q),q})()}_remove(b){var I=()=>super._remove,U=this;return(0,o.Z)(function*(){yield I().call(U,b),delete U.localCache[b]})()}}return T.type="LOCAL",T})(),gi=(()=>{class T extends _a{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(b,I){}_removeListener(b,I){}}return T.type="SESSION",T})();let Lu=(()=>{class T{constructor(b){this.eventTarget=b,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(b){const I=this.receivers.find(q=>q.isListeningto(b));if(I)return I;const U=new T(b);return this.receivers.push(U),U}isListeningto(b){return this.eventTarget===b}handleEvent(b){var I=this;return(0,o.Z)(function*(){const U=b,{eventId:q,eventType:me,data:tt}=U.data,St=I.handlersMap[me];if(!(null==St?void 0:St.size))return;U.ports[0].postMessage({status:"ack",eventId:q,eventType:me});const zt=Array.from(St).map(function(){var Si=(0,o.Z)(function*(So){return So(U.origin,tt)});return function(So){return Si.apply(this,arguments)}}()),ln=yield function Di(T){return Promise.all(T.map(function(){var y=(0,o.Z)(function*(b){try{return{fulfilled:!0,value:yield b}}catch(I){return{fulfilled:!1,reason:I}}});return function(b){return y.apply(this,arguments)}}()))}(zt);U.ports[0].postMessage({status:"done",eventId:q,eventType:me,response:ln})})()}_subscribe(b,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[b]||(this.handlersMap[b]=new Set),this.handlersMap[b].add(I)}_unsubscribe(b,I){this.handlersMap[b]&&I&&this.handlersMap[b].delete(I),(!I||0===this.handlersMap[b].size)&&delete this.handlersMap[b],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return T.receivers=[],T})();function _l(T="",y=10){let b="";for(let I=0;I<y;I++)b+=Math.floor(10*Math.random());return T+b}class ya{constructor(y){this.target=y,this.handlers=new Set}removeMessageHandler(y){y.messageChannel&&(y.messageChannel.port1.removeEventListener("message",y.onMessage),y.messageChannel.port1.close()),this.handlers.delete(y)}_send(y,b,I=50){var U=this;return(0,o.Z)(function*(){const q="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!q)throw new Error("connection_unavailable");let me,tt;return new Promise((St,zt)=>{const ln=_l("",20);q.port1.start();const Si=setTimeout(()=>{zt(new Error("unsupported_event"))},I);tt={messageChannel:q,onMessage(So){const zo=So;if(zo.data.eventId===ln)switch(zo.data.status){case"ack":clearTimeout(Si),me=setTimeout(()=>{zt(new Error("timeout"))},3e3);break;case"done":clearTimeout(me),St(zo.data.response);break;default:clearTimeout(Si),clearTimeout(me),zt(new Error("invalid_response"))}}},U.handlers.add(tt),q.port1.addEventListener("message",tt.onMessage),U.target.postMessage({eventType:y,eventId:ln,data:b},[q.port2])}).finally(()=>{tt&&U.removeMessageHandler(tt)})})()}}function Wi(){return window}function Vs(){return void 0!==Wi().WorkerGlobalScope&&"function"==typeof Wi().importScripts}function Rt(){return(Rt=(0,o.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(T){return null}})).apply(this,arguments)}const vl="firebaseLocalStorageDb",xn="firebaseLocalStorage",Bu="fbase_key";class os{constructor(y){this.request=y}toPromise(){return new Promise((y,b)=>{this.request.addEventListener("success",()=>{y(this.request.result)}),this.request.addEventListener("error",()=>{b(this.request.error)})})}}function yl(T,y){return T.transaction([xn],y?"readwrite":"readonly").objectStore(xn)}function Bn(){const T=indexedDB.open(vl,1);return new Promise((y,b)=>{T.addEventListener("error",()=>{b(T.error)}),T.addEventListener("upgradeneeded",()=>{const I=T.result;try{I.createObjectStore(xn,{keyPath:Bu})}catch(U){b(U)}}),T.addEventListener("success",(0,o.Z)(function*(){const I=T.result;I.objectStoreNames.contains(xn)?y(I):(I.close(),yield function Hs(){const T=indexedDB.deleteDatabase(vl);return new os(T).toPromise()}(),y(yield Bn()))}))})}function _i(T,y,b){return bl.apply(this,arguments)}function bl(){return(bl=(0,o.Z)(function*(T,y,b){const I=yl(T,!0).put({[Bu]:y,value:b});return new os(I).toPromise()})).apply(this,arguments)}function ba(){return(ba=(0,o.Z)(function*(T,y){const b=yl(T,!1).get(y),I=yield new os(b).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function uc(T,y){const b=yl(T,!0).delete(y);return new os(b).toPromise()}const Cs=(()=>{class T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var b=this;return(0,o.Z)(function*(){return b.db||(b.db=yield Bn()),b.db})()}_withRetries(b){var I=this;return(0,o.Z)(function*(){let U=0;for(;;)try{const q=yield I._openDb();return yield b(q)}catch(q){if(U++>3)throw q;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var b=this;return(0,o.Z)(function*(){return Vs()?b.initializeReceiver():b.initializeSender()})()}initializeReceiver(){var b=this;return(0,o.Z)(function*(){b.receiver=Lu._getInstance(function Nh(){return Vs()?self:null}()),b.receiver._subscribe("keyChanged",function(){var I=(0,o.Z)(function*(U,q){return{keyProcessed:(yield b._poll()).includes(q.key)}});return function(U,q){return I.apply(this,arguments)}}()),b.receiver._subscribe("ping",function(){var I=(0,o.Z)(function*(U,q){return["keyChanged"]});return function(U,q){return I.apply(this,arguments)}}())})()}initializeSender(){var b=this;return(0,o.Z)(function*(){var I,U;if(b.activeServiceWorker=yield function bs(){return Rt.apply(this,arguments)}(),!b.activeServiceWorker)return;b.sender=new ya(b.activeServiceWorker);const q=yield b.sender._send("ping",{},800);!q||(null===(I=q[0])||void 0===I?void 0:I.fulfilled)&&(null===(U=q[0])||void 0===U?void 0:U.value.includes("keyChanged"))&&(b.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(b){var I=this;return(0,o.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Oh(){var T;return(null===(T=null==navigator?void 0:navigator.serviceWorker)||void 0===T?void 0:T.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:b},I.serviceWorkerReceiverAvailable?800:50)}catch(U){}})()}_isAvailable(){return(0,o.Z)(function*(){try{if(!indexedDB)return!1;const b=yield Bn();return yield _i(b,yo,"1"),yield uc(b,yo),!0}catch(b){}return!1})()}_withPendingWrite(b){var I=this;return(0,o.Z)(function*(){I.pendingWrites++;try{yield b()}finally{I.pendingWrites--}})()}_set(b,I){var U=this;return(0,o.Z)(function*(){return U._withPendingWrite((0,o.Z)(function*(){return yield U._withRetries(q=>_i(q,b,I)),U.localCache[b]=I,U.notifyServiceWorker(b)}))})()}_get(b){var I=this;return(0,o.Z)(function*(){const U=yield I._withRetries(q=>function cc(T,y){return ba.apply(this,arguments)}(q,b));return I.localCache[b]=U,U})()}_remove(b){var I=this;return(0,o.Z)(function*(){return I._withPendingWrite((0,o.Z)(function*(){return yield I._withRetries(U=>uc(U,b)),delete I.localCache[b],I.notifyServiceWorker(b)}))})()}_poll(){var b=this;return(0,o.Z)(function*(){const I=yield b._withRetries(me=>{const tt=yl(me,!1).getAll();return new os(tt).toPromise()});if(!I)return[];if(0!==b.pendingWrites)return[];const U=[],q=new Set;for(const{fbase_key:me,value:tt}of I)q.add(me),JSON.stringify(b.localCache[me])!==JSON.stringify(tt)&&(b.notifyListeners(me,tt),U.push(me));for(const me of Object.keys(b.localCache))b.localCache[me]&&!q.has(me)&&(b.notifyListeners(me,null),U.push(me));return U})()}notifyListeners(b,I){this.localCache[b]=I;const U=this.listeners[b];if(U)for(const q of Array.from(U))q(I)}startPolling(){var b=this;this.stopPolling(),this.pollTimer=setInterval((0,o.Z)(function*(){return b._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(b,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[b]||(this.listeners[b]=new Set,this._get(b)),this.listeners[b].add(I)}_removeListener(b,I){this.listeners[b]&&(this.listeners[b].delete(I),0===this.listeners[b].size&&delete this.listeners[b]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return T.type="LOCAL",T})();function Co(T,y){return $n(T,"POST","/v2/accounts/mfaSignIn:start",Dn(T,y))}function wo(){return(wo=(0,o.Z)(function*(T){return(yield $n(T,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ui(T){return new Promise((y,b)=>{const I=document.createElement("script");I.setAttribute("src",T),I.onload=y,I.onerror=U=>{const q=ze("internal-error");q.customData=U,b(q)},I.type="text/javascript",I.charset="UTF-8",function zi(){var T,y;return null!==(y=null===(T=document.getElementsByTagName("head"))||void 0===T?void 0:T[0])&&void 0!==y?y:document}().appendChild(I)})}function ws(T){return`__${T}${Math.floor(1e6*Math.random())}`}const zn=1e12;class Un{constructor(y){this.auth=y,this.counter=zn,this._widgets=new Map}render(y,b){const I=this.counter;return this._widgets.set(I,new Ri(y,this.auth.name,b||{})),this.counter++,I}reset(y){var b;const I=y||zn;null===(b=this._widgets.get(I))||void 0===b||b.delete(),this._widgets.delete(I)}getResponse(y){var b;return(null===(b=this._widgets.get(y||zn))||void 0===b?void 0:b.getResponse())||""}execute(y){var b=this;return(0,o.Z)(function*(){var I;return null===(I=b._widgets.get(y||zn))||void 0===I||I.execute(),""})()}}class Ri{constructor(y,b,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const U="string"==typeof y?document.getElementById(y):y;ye(U,"argument-error",{appName:b}),this.container=U,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function H(T){const y=[],b="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<T;I++)y.push(b.charAt(Math.floor(Math.random()*b.length)));return y.join("")}(50);const{callback:y,"expired-callback":b}=this.params;if(y)try{y(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,b)try{b()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ao=ws("rcb"),Mi=new Lt(3e4,6e4);class kn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Wi().grecaptcha}load(y,b=""){return ye(function F_(T){return T.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(T)}(b),y,"argument-error"),this.shouldResolveImmediately(b)?Promise.resolve(Wi().grecaptcha):new Promise((I,U)=>{const q=Wi().setTimeout(()=>{U(ze(y,"network-request-failed"))},Mi.get());Wi()[ao]=()=>{Wi().clearTimeout(q),delete Wi()[ao];const tt=Wi().grecaptcha;if(!tt)return void U(ze(y,"internal-error"));const St=tt.render;tt.render=(zt,ln)=>{const Si=St(zt,ln);return this.counter++,Si},this.hostLanguage=b,I(tt)},ui(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:ao,render:"explicit",hl:b})}`).catch(()=>{clearTimeout(q),U(ze(y,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(y){return!!Wi().grecaptcha&&(y===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dc{load(y){return(0,o.Z)(function*(){return new Un(y)})()}clearedOneInstance(){}}const gr="recaptcha",qa={theme:"light",type:"image"};class Za{constructor(y,b=Object.assign({},qa),I){this.parameters=b,this.type=gr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(I),this.isInvisible="invisible"===this.parameters.size,ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const U="string"==typeof y?document.getElementById(y):y;ye(U,this.auth,"argument-error"),this.container=U,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dc:new kn,this.validateStartingState()}verify(){var y=this;return(0,o.Z)(function*(){y.assertNotDestroyed();const b=yield y.render(),I=y.getAssertedRecaptcha();return I.getResponse(b)||new Promise(q=>{const me=tt=>{!tt||(y.tokenChangeListeners.delete(me),q(tt))};y.tokenChangeListeners.add(me),y.isInvisible&&I.execute(b)})})()}render(){try{this.assertNotDestroyed()}catch(y){return Promise.reject(y)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(y=>{throw this.renderPromise=null,y})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(y=>{this.container.removeChild(y)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(y){return b=>{if(this.tokenChangeListeners.forEach(I=>I(b)),"function"==typeof y)y(b);else if("string"==typeof y){const I=Wi()[y];"function"==typeof I&&I(b)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var y=this;return(0,o.Z)(function*(){if(yield y.init(),!y.widgetId){let b=y.container;if(!y.isInvisible){const I=document.createElement("div");b.appendChild(I),b=I}y.widgetId=y.getAssertedRecaptcha().render(b,y.parameters)}return y.widgetId})()}init(){var y=this;return(0,o.Z)(function*(){ye(Vt()&&!Vs(),y.auth,"internal-error"),yield function Cl(){let T=null;return new Promise(y=>{"complete"!==document.readyState?(T=()=>y(),window.addEventListener("load",T)):y()}).catch(y=>{throw T&&window.removeEventListener("load",T),y})}(),y.recaptcha=yield y._recaptchaLoader.load(y.auth,y.auth.languageCode||void 0);const b=yield function jo(T){return wo.apply(this,arguments)}(y.auth);ye(b,y.auth,"internal-error"),y.parameters.sitekey=b})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class hc{constructor(y,b){this.verificationId=y,this.onConfirmation=b}confirm(y){const b=Jl._fromVerification(this.verificationId,y);return this.onConfirmation(b)}}function rr(T,y,b){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,o.Z)(function*(T,y,b){const I=ht(T),U=yield Ts(I,y,(0,P.m9)(b));return new hc(U,q=>jc(I,q))})).apply(this,arguments)}function js(T,y,b){return Yf.apply(this,arguments)}function Yf(){return(Yf=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T);yield fa(!1,I,"phone");const U=yield Ts(I.auth,y,(0,P.m9)(b));return new hc(U,q=>ro(I,q))})).apply(this,arguments)}function Kf(T,y,b){return Es.apply(this,arguments)}function Es(){return(Es=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T),U=yield Ts(I.auth,y,(0,P.m9)(b));return new hc(U,q=>li(I,q))})).apply(this,arguments)}function Ts(T,y,b){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,o.Z)(function*(T,y,b){var I;const U=yield b.verify();try{let q;if(ye("string"==typeof U,T,"argument-error"),ye(b.type===gr,T,"argument-error"),q="string"==typeof y?{phoneNumber:y}:y,"session"in q){const me=q.session;if("phoneNumber"in q)return ye("enroll"===me.type,T,"internal-error"),(yield Lr(T,{idToken:me.credential,phoneEnrollmentInfo:{phoneNumber:q.phoneNumber,recaptchaToken:U}})).phoneSessionInfo.sessionInfo;{ye("signin"===me.type,T,"internal-error");const tt=(null===(I=q.multiFactorHint)||void 0===I?void 0:I.uid)||q.multiFactorUid;return ye(tt,T,"missing-multi-factor-info"),(yield Co(T,{mfaPendingCredential:me.credential,mfaEnrollmentId:tt,phoneSignInInfo:{recaptchaToken:U}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:me}=yield Eg(T,{phoneNumber:q.phoneNumber,recaptchaToken:U});return me}}finally{b._reset()}})).apply(this,arguments)}function Gs(T,y){return wa.apply(this,arguments)}function wa(){return(wa=(0,o.Z)(function*(T,y){yield fi((0,P.m9)(T),y)})).apply(this,arguments)}let Uu=(()=>{class T{constructor(b){this.providerId=T.PROVIDER_ID,this.auth=ht(b)}verifyPhoneNumber(b,I){return Ts(this.auth,b,(0,P.m9)(I))}static credential(b,I){return Jl._fromVerification(b,I)}static credentialFromResult(b){return T.credentialFromTaggedObject(b)}static credentialFromError(b){return T.credentialFromTaggedObject(b.customData||{})}static credentialFromTaggedObject({_tokenResponse:b}){if(!b)return null;const{phoneNumber:I,temporaryProof:U}=b;return I&&U?Jl._fromTokenResponse(I,U):null}}return T.PROVIDER_ID="phone",T.PHONE_SIGN_IN_METHOD="phone",T})();function Ea(T,y){return y?De(y):(ye(T._popupRedirectResolver,T,"argument-error"),T._popupRedirectResolver)}class Kc extends ii{constructor(y){super("custom","custom"),this.params=y}_getIdTokenResponse(y){return Xi(y,this._buildIdpRequest())}_linkToIdToken(y,b){return Xi(y,this._buildIdpRequest(b))}_getReauthenticationResolver(y){return Xi(y,this._buildIdpRequest())}_buildIdpRequest(y){const b={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return y&&(b.idToken=y),b}}function Dd(T){return Tr(T.auth,new Kc(T),T.bypassAuthState)}function sn(T){const{auth:y,user:b}=T;return ye(b,y,"internal-error"),$r(b,new Kc(T),T.bypassAuthState)}function Vu(T){return mr.apply(this,arguments)}function mr(){return(mr=(0,o.Z)(function*(T){const{auth:y,user:b}=T;return ye(b,y,"internal-error"),fi(b,new Kc(T),T.bypassAuthState)})).apply(this,arguments)}class Ds{constructor(y,b,I,U,q=!1){this.auth=y,this.resolver=I,this.user=U,this.bypassAuthState=q,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(b)?b:[b]}execute(){var y=this;return new Promise(function(){var b=(0,o.Z)(function*(I,U){y.pendingPromise={resolve:I,reject:U};try{y.eventManager=yield y.resolver._initialize(y.auth),yield y.onExecution(),y.eventManager.registerConsumer(y)}catch(q){y.reject(q)}});return function(I,U){return b.apply(this,arguments)}}())}onAuthEvent(y){var b=this;return(0,o.Z)(function*(){const{urlResponse:I,sessionId:U,postBody:q,tenantId:me,error:tt,type:St}=y;if(tt)return void b.reject(tt);const zt={auth:b.auth,requestUri:I,sessionId:U,tenantId:me||void 0,postBody:q||void 0,user:b.user,bypassAuthState:b.bypassAuthState};try{b.resolve(yield b.getIdpTask(St)(zt))}catch(ln){b.reject(ln)}})()}onError(y){this.reject(y)}getIdpTask(y){switch(y){case"signInViaPopup":case"signInViaRedirect":return Dd;case"linkViaPopup":case"linkViaRedirect":return Vu;case"reauthViaPopup":case"reauthViaRedirect":return sn;default:ft(this.auth,"internal-error")}}resolve(y){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(y),this.unregisterAndCleanUp()}reject(y){te(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(y),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const wl=new Lt(2e3,1e4);function Rg(T,y,b){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,o.Z)(function*(T,y,b){const I=ht(T);Ue(T,y,Ua);const U=Ea(I,b);return new Go(I,"signInViaPopup",y,U).executeNotNull()})).apply(this,arguments)}function fc(T,y,b){return $s.apply(this,arguments)}function $s(){return($s=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T);Ue(I.auth,y,Ua);const U=Ea(I.auth,b);return new Go(I.auth,"reauthViaPopup",y,U,I).executeNotNull()})).apply(this,arguments)}function Sd(T,y,b){return Qc.apply(this,arguments)}function Qc(){return(Qc=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T);Ue(I.auth,y,Ua);const U=Ea(I.auth,b);return new Go(I.auth,"linkViaPopup",y,U,I).executeNotNull()})).apply(this,arguments)}let Go=(()=>{class T extends Ds{constructor(b,I,U,q,me){super(b,I,q,me),this.provider=U,this.authWindow=null,this.pollId=null,T.currentPopupAction&&T.currentPopupAction.cancel(),T.currentPopupAction=this}executeNotNull(){var b=this;return(0,o.Z)(function*(){const I=yield b.execute();return ye(I,b.auth,"internal-error"),I})()}onExecution(){var b=this;return(0,o.Z)(function*(){te(1===b.filter.length,"Popup operations only handle one event");const I=_l();b.authWindow=yield b.resolver._openPopup(b.auth,b.provider,b.filter[0],I),b.authWindow.associatedEvent=I,b.resolver._originValidation(b.auth).catch(U=>{b.reject(U)}),b.resolver._isIframeWebStorageSupported(b.auth,U=>{U||b.reject(ze(b.auth,"web-storage-unsupported"))}),b.pollUserCancellation()})()}get eventId(){var b;return(null===(b=this.authWindow)||void 0===b?void 0:b.associatedEvent)||null}cancel(){this.reject(ze(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,T.currentPopupAction=null}pollUserCancellation(){const b=()=>{var I,U;this.pollId=(null===(U=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===U?void 0:U.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(ze(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(b,wl.get())};b()}}return T.currentPopupAction=null,T})();const qn=new Map;class Br extends Ds{constructor(y,b,I=!1){super(y,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],b,void 0,I),this.eventId=null}execute(){var y=()=>super.execute,b=this;return(0,o.Z)(function*(){let I=qn.get(b.auth._key());if(!I){try{const q=(yield function kh(T,y){return Ya.apply(this,arguments)}(b.resolver,b.auth))?yield y().call(b):null;I=()=>Promise.resolve(q)}catch(U){I=()=>Promise.reject(U)}qn.set(b.auth._key(),I)}return b.bypassAuthState||qn.set(b.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(y){var b=()=>super.onAuthEvent,I=this;return(0,o.Z)(function*(){if("signInViaRedirect"===y.type)return b().call(I,y);if("unknown"!==y.type){if(y.eventId){const U=yield I.auth._redirectUserForId(y.eventId);if(U)return I.user=U,b().call(I,y);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,o.Z)(function*(){})()}cleanUp(){}}function Ya(){return(Ya=(0,o.Z)(function*(T,y){const b=V(y),I=O(T);if(!(yield I._isAvailable()))return!1;const U="true"===(yield I._get(b));return yield I._remove(b),U})).apply(this,arguments)}function El(T,y){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,o.Z)(function*(T,y){return O(T)._set(V(y),"true")})).apply(this,arguments)}function Ka(){qn.clear()}function R(T,y){qn.set(T._key(),y)}function O(T){return De(T._redirectPersistence)}function V(T){return Qt("pendingRedirect",T.config.apiKey,T.name)}function Q(T,y,b){return function he(T,y,b){return Ee.apply(this,arguments)}(T,y,b)}function Ee(){return(Ee=(0,o.Z)(function*(T,y,b){const I=ht(T);Ue(T,y,Ua);const U=Ea(I,b);return yield El(U,I),U._openRedirect(I,y,"signInViaRedirect")})).apply(this,arguments)}function Fe(T,y,b){return function ct(T,y,b){return Jt.apply(this,arguments)}(T,y,b)}function Jt(){return(Jt=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T);Ue(I.auth,y,Ua);const U=Ea(I.auth,b);yield El(U,I.auth);const q=yield sr(I);return U._openRedirect(I.auth,y,"reauthViaRedirect",q)})).apply(this,arguments)}function Yt(T,y,b){return function Rn(T,y,b){return Xt.apply(this,arguments)}(T,y,b)}function Xt(){return(Xt=(0,o.Z)(function*(T,y,b){const I=(0,P.m9)(T);Ue(I.auth,y,Ua);const U=Ea(I.auth,b);yield fa(!1,I,y.providerId),yield El(U,I.auth);const q=yield sr(I);return U._openRedirect(I.auth,y,"linkViaRedirect",q)})).apply(this,arguments)}function Ss(T,y){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,o.Z)(function*(T,y){return yield ht(T)._initializationPromise,To(T,y,!1)})).apply(this,arguments)}function To(T,y){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,o.Z)(function*(T,y,b=!1){const I=ht(T),U=Ea(I,y),me=yield new Br(I,U,b).execute();return me&&!b&&(delete me.user._redirectEventId,yield I._persistUserIfCurrent(me.user),yield I._setRedirectUser(null,y)),me})).apply(this,arguments)}function sr(T){return as.apply(this,arguments)}function as(){return(as=(0,o.Z)(function*(T){const y=_l(`${T.uid}:::`);return T._redirectEventId=y,yield T.auth._setRedirectUser(T),yield T.auth._persistUserIfCurrent(T),y})).apply(this,arguments)}class Do{constructor(y){this.auth=y,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(y){this.consumers.add(y),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,y)&&(this.sendToConsumer(this.queuedRedirectEvent,y),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(y){this.consumers.delete(y)}onEvent(y){if(this.hasEventBeenHandled(y))return!1;let b=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(y,I)&&(b=!0,this.sendToConsumer(y,I),this.saveEventToCache(y))}),this.hasHandledPotentialRedirect||!function Xc(T){switch(T.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ur(T);default:return!1}}(y)||(this.hasHandledPotentialRedirect=!0,b||(this.queuedRedirectEvent=y,b=!0)),b}sendToConsumer(y,b){var I;if(y.error&&!Ur(y)){const U=(null===(I=y.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";b.onError(ze(this.auth,U))}else b.onAuthEvent(y)}isEventForConsumer(y,b){const I=null===b.eventId||!!y.eventId&&y.eventId===b.eventId;return b.filter.includes(y.type)&&I}hasEventBeenHandled(y){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jc(y))}saveEventToCache(y){this.cachedEventUids.add(Jc(y)),this.lastProcessedEventTime=Date.now()}}function Jc(T){return[T.type,T.eventId,T.sessionId,T.tenantId].filter(y=>y).join("-")}function Ur({type:T,error:y}){return"unknown"===T&&"auth/no-auth-event"===(null==y?void 0:y.code)}function Jf(T){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,o.Z)(function*(T,y={}){return $n(T,"GET","/v1/projects",y)})).apply(this,arguments)}const L_=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ta=/^https?/;function eu(){return(eu=(0,o.Z)(function*(T){if(T.config.emulator)return;const{authorizedDomains:y}=yield Jf(T);for(const b of y)try{if(B_(b))return}catch(I){}ft(T,"unauthorized-domain")})).apply(this,arguments)}function B_(T){const y=Ce(),{protocol:b,hostname:I}=new URL(y);if(T.startsWith("chrome-extension://")){const me=new URL(T);return""===me.hostname&&""===I?"chrome-extension:"===b&&T.replace("chrome-extension://","")===y.replace("chrome-extension://",""):"chrome-extension:"===b&&me.hostname===I}if(!Ta.test(b))return!1;if(L_.test(T))return I===T;const U=T.replace(/\./g,"\\.");return new RegExp("^(.+\\."+U+"|"+U+")$","i").test(I)}const Mg=new Lt(3e4,6e4);function Og(){const T=Wi().___jsl;if(null==T?void 0:T.H)for(const y of Object.keys(T.H))if(T.H[y].r=T.H[y].r||[],T.H[y].L=T.H[y].L||[],T.H[y].r=[...T.H[y].L],T.CP)for(let b=0;b<T.CP.length;b++)T.CP[b]=null}let ju=null;function ep(T){return ju=ju||function Ad(T){return new Promise((y,b)=>{var I,U,q;function me(){Og(),gapi.load("gapi.iframes",{callback:()=>{y(gapi.iframes.getContext())},ontimeout:()=>{Og(),b(ze(T,"network-request-failed"))},timeout:Mg.get()})}if(null===(U=null===(I=Wi().gapi)||void 0===I?void 0:I.iframes)||void 0===U?void 0:U.Iframe)y(gapi.iframes.getContext());else{if(!(null===(q=Wi().gapi)||void 0===q?void 0:q.load)){const tt=ws("iframefcb");return Wi()[tt]=()=>{gapi.load?me():b(ze(T,"network-request-failed"))},ui(`https://apis.google.com/js/api.js?onload=${tt}`).catch(St=>b(St))}me()}}).catch(y=>{throw ju=null,y})}(T),ju}const Da=new Lt(5e3,15e3),tu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},U_=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $o(T){const y=T.config;ye(y.authDomain,T,"auth-domain-config-required");const b=y.emulator?Qi(y,"emulator/auth/iframe"):`https://${T.config.authDomain}/__/auth/iframe`,I={apiKey:y.apiKey,appName:T.name,v:j.SDK_VERSION},U=U_.get(T.config.apiHost);U&&(I.eid=U);const q=T._getFrameworks();return q.length&&(I.fw=q.join(",")),`${b}?${(0,P.xO)(I).slice(1)}`}function Gu(){return Gu=(0,o.Z)(function*(T){const y=yield ep(T),b=Wi().gapi;return ye(b,T,"internal-error"),y.open({where:document.body,url:$o(T),messageHandlersFilter:b.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tu,dontclear:!0},I=>new Promise(function(){var U=(0,o.Z)(function*(q,me){yield I.restyle({setHideOnLeave:!1});const tt=ze(T,"network-request-failed"),St=Wi().setTimeout(()=>{me(tt)},Da.get());function zt(){Wi().clearTimeout(St),q(I)}I.ping(zt).then(zt,()=>{me(tt)})});return function(q,me){return U.apply(this,arguments)}}()))}),Gu.apply(this,arguments)}const pc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Bh{constructor(y){this.window=y,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(y){}}}function Sa(T,y,b,I,U,q){ye(T.config.authDomain,T,"auth-domain-config-required"),ye(T.config.apiKey,T,"invalid-api-key");const me={apiKey:T.config.apiKey,appName:T.name,authType:b,redirectUrl:I,v:j.SDK_VERSION,eventId:U};if(y instanceof Ua){y.setDefaultLanguage(T.languageCode),me.providerId=y.providerId||"",(0,P.xb)(y.getCustomParameters())||(me.customParameters=JSON.stringify(y.getCustomParameters()));for(const[St,zt]of Object.entries(q||{}))me[St]=zt}if(y instanceof io){const St=y.getScopes().filter(zt=>""!==zt);St.length>0&&(me.scopes=St.join(","))}T.tenantId&&(me.tid=T.tenantId);const tt=me;for(const St of Object.keys(tt))void 0===tt[St]&&delete tt[St];return`${function Ia({config:T}){return T.emulator?Qi(T,"emulator/auth/handler"):`https://${T.authDomain}/__/auth/handler`}(T)}?${(0,P.xO)(tt).slice(1)}`}const Dl="webStorageSupport",np=class Rd{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gi,this._completeRedirectFn=To,this._overrideRedirectResult=R}_openPopup(y,b,I,U){var q=this;return(0,o.Z)(function*(){var me;te(null===(me=q.eventManagers[y._key()])||void 0===me?void 0:me.manager,"_initialize() not called before _openPopup()");const tt=Sa(y,b,I,Ce(),U);return function Ng(T,y,b,I=500,U=600){const q=Math.max((window.screen.availHeight-U)/2,0).toString(),me=Math.max((window.screen.availWidth-I)/2,0).toString();let tt="";const St=Object.assign(Object.assign({},pc),{width:I.toString(),height:U.toString(),top:q,left:me}),zt=(0,P.z$)().toLowerCase();b&&(tt=Ye(zt)?"_blank":b),ce(zt)&&(y=y||"http://localhost",St.scrollbars="yes");const ln=Object.entries(St).reduce((So,[zo,Md])=>`${So}${zo}=${Md},`,"");if(function Ps(T=(0,P.z$)()){var y;return Sn(T)&&!!(null===(y=window.navigator)||void 0===y?void 0:y.standalone)}(zt)&&"_self"!==tt)return function $u(T,y){const b=document.createElement("a");b.href=T,b.target=y;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),b.dispatchEvent(I)}(y||"",tt),new Bh(null);const Si=window.open(y||"",tt,ln);ye(Si,T,"popup-blocked");try{Si.focus()}catch(So){}return new Bh(Si)}(y,tt,_l())})()}_openRedirect(y,b,I,U){var q=this;return(0,o.Z)(function*(){return yield q._originValidation(y),function bo(T){Wi().location.href=T}(Sa(y,b,I,Ce(),U)),new Promise(()=>{})})()}_initialize(y){const b=y._key();if(this.eventManagers[b]){const{manager:U,promise:q}=this.eventManagers[b];return U?Promise.resolve(U):(te(q,"If manager is not set, promise should be"),q)}const I=this.initAndGetManager(y);return this.eventManagers[b]={promise:I},I.catch(()=>{delete this.eventManagers[b]}),I}initAndGetManager(y){var b=this;return(0,o.Z)(function*(){const I=yield function tp(T){return Gu.apply(this,arguments)}(y),U=new Do(y);return I.register("authEvent",q=>(ye(null==q?void 0:q.authEvent,y,"invalid-auth-event"),{status:U.onEvent(q.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),b.eventManagers[y._key()]={manager:U},b.iframes[y._key()]=I,U})()}_isIframeWebStorageSupported(y,b){this.iframes[y._key()].send(Dl,{type:Dl},U=>{var q;const me=null===(q=null==U?void 0:U[0])||void 0===q?void 0:q[Dl];void 0!==me&&b(!!me),ft(y,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(y){const b=y._key();return this.originValidationPromises[b]||(this.originValidationPromises[b]=function Id(T){return eu.apply(this,arguments)}(y)),this.originValidationPromises[b]}get _shouldInitProactively(){return is()||oe()||Sn()}};class Tn extends class Uh{constructor(y){this.factorId=y}_process(y,b,I){switch(b.type){case"enroll":return this._finalizeEnroll(y,b.credential,I);case"signin":return this._finalizeSignIn(y,b.credential);default:return Me("unexpected MultiFactorSessionType")}}}{constructor(y){super("phone"),this.credential=y}static _fromCredential(y){return new Tn(y)}_finalizeEnroll(y,b,I){return function lc(T,y){return $n(T,"POST","/v2/accounts/mfaEnrollment:finalize",Dn(T,y))}(y,{idToken:b,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(y,b){return function vi(T,y){return $n(T,"POST","/v2/accounts/mfaSignIn:finalize",Dn(T,y))}(y,{mfaPendingCredential:b,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ip=(()=>{class T{constructor(){}static assertion(b){return Tn._fromCredential(b)}}return T.FACTOR_ID="phone",T})();var rp="@firebase/auth";class Pg{constructor(y){this.auth=y,this.internalListeners=new Map}getUid(){var y;return this.assertAuthConfigured(),(null===(y=this.auth.currentUser)||void 0===y?void 0:y.uid)||null}getToken(y){var b=this;return(0,o.Z)(function*(){return b.assertAuthConfigured(),yield b.auth._initializationPromise,b.auth.currentUser?{accessToken:yield b.auth.currentUser.getIdToken(y)}:null})()}addAuthTokenListener(y){if(this.assertAuthConfigured(),this.internalListeners.has(y))return;const b=this.auth.onIdTokenChanged(I=>{var U;y((null===(U=I)||void 0===U?void 0:U.stsTokenManager.accessToken)||null)});this.internalListeners.set(y,b),this.updateProactiveRefresh()}removeAuthTokenListener(y){this.assertAuthConfigured();const b=this.internalListeners.get(y);!b||(this.internalListeners.delete(y),b(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function Vh(T){(0,j._registerComponent)(new Re.wA("auth",(y,{options:b})=>{const I=y.getProvider("app").getImmediate(),U=y.getProvider("heartbeat"),{apiKey:q,authDomain:me}=I.options;return((tt,St)=>{ye(q&&!q.includes(":"),"invalid-api-key",{appName:tt.name}),ye(!(null==me?void 0:me.includes(":")),"argument-error",{appName:tt.name});const zt={apiKey:q,authDomain:me,clientPlatform:T,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Nr(T)},ln=new Fs(tt,St,zt);return function it(T,y){const b=(null==y?void 0:y.persistence)||[],I=(Array.isArray(b)?b:[b]).map(De);(null==y?void 0:y.errorMap)&&T._updateErrorMap(y.errorMap),T._initializeWithPersistence(I,null==y?void 0:y.popupRedirectResolver)}(ln,b),ln})(I,U)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((y,b,I)=>{y.getProvider("auth-internal").initialize()})),(0,j._registerComponent)(new Re.wA("auth-internal",y=>{const b=ht(y.getProvider("auth").getImmediate());return new Pg(b)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,j.registerVersion)(rp,"0.20.1",function Fg(T){switch(T){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(T)),(0,j.registerVersion)(rp,"0.20.1","esm2017")}("Browser")},2090:(wt,He,W)=>{"use strict";W.d(He,{$s:()=>Cn,BH:()=>mt,DV:()=>$n,Dv:()=>bi,G6:()=>ye,GJ:()=>Ln,L:()=>Te,LL:()=>Ce,Mn:()=>Ue,Pz:()=>Mt,Sg:()=>Qe,UG:()=>Oe,UI:()=>es,US:()=>Re,Wj:()=>Ai,Yr:()=>_t,ZB:()=>ee,ZR:()=>it,b$:()=>ft,cI:()=>Ki,d:()=>ze,dS:()=>sa,eu:()=>te,g5:()=>j,gK:()=>Hi,gQ:()=>xi,h$:()=>ve,hl:()=>Me,hu:()=>P,jU:()=>We,lb:()=>ji,m9:()=>Qn,ne:()=>Oo,p$:()=>ne,pd:()=>Ji,r3:()=>Dn,ru:()=>ut,tV:()=>Be,uI:()=>lt,ug:()=>gn,vZ:()=>ts,w1:()=>Ze,w9:()=>Cr,xO:()=>Ns,xb:()=>hi,z$:()=>at,zI:()=>ge,zd:()=>ks});const P=function(X,se){if(!X)throw j(se)},j=function(X){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+X)},we=function(X){const se=[];let le=0;for(let je=0;je<X.length;je++){let ie=X.charCodeAt(je);ie<128?se[le++]=ie:ie<2048?(se[le++]=ie>>6|192,se[le++]=63&ie|128):55296==(64512&ie)&&je+1<X.length&&56320==(64512&X.charCodeAt(je+1))?(ie=65536+((1023&ie)<<10)+(1023&X.charCodeAt(++je)),se[le++]=ie>>18|240,se[le++]=ie>>12&63|128,se[le++]=ie>>6&63|128,se[le++]=63&ie|128):(se[le++]=ie>>12|224,se[le++]=ie>>6&63|128,se[le++]=63&ie|128)}return se},Re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(X,se){if(!Array.isArray(X))throw Error("encodeByteArray takes an array as a parameter");this.init_();const le=se?this.byteToCharMapWebSafe_:this.byteToCharMap_,je=[];for(let ie=0;ie<X.length;ie+=3){const pe=X[ie],rt=ie+1<X.length,It=rt?X[ie+1]:0,qt=ie+2<X.length,mn=qt?X[ie+2]:0;let fr=(15&It)<<2|mn>>6,Ie=63&mn;qt||(Ie=64,rt||(fr=64)),je.push(le[pe>>2],le[(3&pe)<<4|It>>4],le[fr],le[Ie])}return je.join("")},encodeString(X,se){return this.HAS_NATIVE_SUPPORT&&!se?btoa(X):this.encodeByteArray(we(X),se)},decodeString(X,se){return this.HAS_NATIVE_SUPPORT&&!se?atob(X):function(X){const se=[];let le=0,je=0;for(;le<X.length;){const ie=X[le++];if(ie<128)se[je++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const pe=X[le++];se[je++]=String.fromCharCode((31&ie)<<6|63&pe)}else if(ie>239&&ie<365){const qt=((7&ie)<<18|(63&X[le++])<<12|(63&X[le++])<<6|63&X[le++])-65536;se[je++]=String.fromCharCode(55296+(qt>>10)),se[je++]=String.fromCharCode(56320+(1023&qt))}else{const pe=X[le++],rt=X[le++];se[je++]=String.fromCharCode((15&ie)<<12|(63&pe)<<6|63&rt)}}return se.join("")}(this.decodeStringToByteArray(X,se))},decodeStringToByteArray(X,se){this.init_();const le=se?this.charToByteMapWebSafe_:this.charToByteMap_,je=[];for(let ie=0;ie<X.length;){const pe=le[X.charAt(ie++)],It=ie<X.length?le[X.charAt(ie)]:0;++ie;const mn=ie<X.length?le[X.charAt(ie)]:64;++ie;const Qt=ie<X.length?le[X.charAt(ie)]:64;if(++ie,null==pe||null==It||null==mn||null==Qt)throw Error();je.push(pe<<2|It>>4),64!==mn&&(je.push(It<<4&240|mn>>2),64!==Qt&&je.push(mn<<6&192|Qt))}return je},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let X=0;X<this.ENCODED_VALS.length;X++)this.byteToCharMap_[X]=this.ENCODED_VALS.charAt(X),this.charToByteMap_[this.byteToCharMap_[X]]=X,this.byteToCharMapWebSafe_[X]=this.ENCODED_VALS_WEBSAFE.charAt(X),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[X]]=X,X>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(X)]=X,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(X)]=X)}}},ve=function(X){const se=we(X);return Re.encodeByteArray(se,!0)},Te=function(X){return ve(X).replace(/\./g,"")},Be=function(X){try{return Re.decodeString(X,!0)}catch(se){console.error("base64Decode failed: ",se)}return null};function ne(X){return ee(void 0,X)}function ee(X,se){if(!(se instanceof Object))return se;switch(se.constructor){case Date:return new Date(se.getTime());case Object:void 0===X&&(X={});break;case Array:X=[];break;default:return se}for(const le in se)!se.hasOwnProperty(le)||!be(le)||(X[le]=ee(X[le],se[le]));return X}function be(X){return"__proto__"!==X}class mt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((se,le)=>{this.resolve=se,this.reject=le})}wrapCallback(se){return(le,je)=>{le?this.reject(le):this.resolve(je),"function"==typeof se&&(this.promise.catch(()=>{}),1===se.length?se(le):se(le,je))}}}function Qe(X,se){if(X.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const je=se||"demo-project",ie=X.iat||0,pe=X.sub||X.user_id;if(!pe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const rt=Object.assign({iss:`https://securetoken.google.com/${je}`,aud:je,iat:ie,exp:ie+3600,auth_time:ie,sub:pe,user_id:pe,firebase:{sign_in_provider:"custom",identities:{}}},X);return[Te(JSON.stringify({alg:"none",type:"JWT"})),Te(JSON.stringify(rt)),""].join(".")}function at(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function lt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(at())}function Oe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(X){return!1}}function We(){return"object"==typeof self&&self.self===self}function ut(){const X="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof X&&void 0!==X.id}function ft(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function ze(){return at().indexOf("Electron/")>=0}function Ze(){const X=at();return X.indexOf("MSIE ")>=0||X.indexOf("Trident/")>=0}function Ue(){return at().indexOf("MSAppHost/")>=0}function _t(){return!1}function ye(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Me(){return"object"==typeof indexedDB}function te(){return new Promise((X,se)=>{try{let le=!0;const je="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(je);ie.onsuccess=()=>{ie.result.close(),le||self.indexedDB.deleteDatabase(je),X(!0)},ie.onupgradeneeded=()=>{le=!1},ie.onerror=()=>{var pe;se((null===(pe=ie.error)||void 0===pe?void 0:pe.message)||"")}}catch(le){se(le)}})}function ge(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class it extends Error{constructor(se,le,je){super(le),this.code=se,this.customData=je,this.name="FirebaseError",Object.setPrototypeOf(this,it.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(se,le,je){this.service=se,this.serviceName=le,this.errors=je}create(se,...le){const je=le[0]||{},ie=`${this.service}/${se}`,pe=this.errors[se],rt=pe?function Vt(X,se){return X.replace(tn,(le,je)=>{const ie=se[je];return null!=ie?String(ie):`<${je}?>`})}(pe,je):"Error";return new it(ie,`${this.serviceName}: ${rt} (${ie}).`,je)}}const tn=/\{\$([^}]+)}/g;function Ki(X){return JSON.parse(X)}function Mt(X){return JSON.stringify(X)}const Lt=function(X){let se={},le={},je={},ie="";try{const pe=X.split(".");se=Ki(Be(pe[0])||""),le=Ki(Be(pe[1])||""),ie=pe[2],je=le.d||{},delete le.d}catch(pe){}return{header:se,claims:le,data:je,signature:ie}},Cr=function(X){const le=Lt(X).claims;return!!le&&"object"==typeof le&&le.hasOwnProperty("iat")},Ln=function(X){const se=Lt(X).claims;return"object"==typeof se&&!0===se.admin};function Dn(X,se){return Object.prototype.hasOwnProperty.call(X,se)}function $n(X,se){if(Object.prototype.hasOwnProperty.call(X,se))return X[se]}function hi(X){for(const se in X)if(Object.prototype.hasOwnProperty.call(X,se))return!1;return!0}function es(X,se,le){const je={};for(const ie in X)Object.prototype.hasOwnProperty.call(X,ie)&&(je[ie]=se.call(le,X[ie],ie,X));return je}function ts(X,se){if(X===se)return!0;const le=Object.keys(X),je=Object.keys(se);for(const ie of le){if(!je.includes(ie))return!1;const pe=X[ie],rt=se[ie];if(yi(pe)&&yi(rt)){if(!ts(pe,rt))return!1}else if(pe!==rt)return!1}for(const ie of je)if(!le.includes(ie))return!1;return!0}function yi(X){return null!==X&&"object"==typeof X}function Ns(X){const se=[];for(const[le,je]of Object.entries(X))Array.isArray(je)?je.forEach(ie=>{se.push(encodeURIComponent(le)+"="+encodeURIComponent(ie))}):se.push(encodeURIComponent(le)+"="+encodeURIComponent(je));return se.length?"&"+se.join("&"):""}function ks(X){const se={};return X.replace(/^\?/,"").split("&").forEach(je=>{if(je){const[ie,pe]=je.split("=");se[decodeURIComponent(ie)]=decodeURIComponent(pe)}}),se}function Ji(X){const se=X.indexOf("?");if(!se)return"";const le=X.indexOf("#",se);return X.substring(se,le>0?le:void 0)}class xi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let se=1;se<this.blockSize;++se)this.pad_[se]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(se,le){le||(le=0);const je=this.W_;if("string"==typeof se)for(let Qt=0;Qt<16;Qt++)je[Qt]=se.charCodeAt(le)<<24|se.charCodeAt(le+1)<<16|se.charCodeAt(le+2)<<8|se.charCodeAt(le+3),le+=4;else for(let Qt=0;Qt<16;Qt++)je[Qt]=se[le]<<24|se[le+1]<<16|se[le+2]<<8|se[le+3],le+=4;for(let Qt=16;Qt<80;Qt++){const fr=je[Qt-3]^je[Qt-8]^je[Qt-14]^je[Qt-16];je[Qt]=4294967295&(fr<<1|fr>>>31)}let mn,ni,ie=this.chain_[0],pe=this.chain_[1],rt=this.chain_[2],It=this.chain_[3],qt=this.chain_[4];for(let Qt=0;Qt<80;Qt++){Qt<40?Qt<20?(mn=It^pe&(rt^It),ni=1518500249):(mn=pe^rt^It,ni=1859775393):Qt<60?(mn=pe&rt|It&(pe|rt),ni=2400959708):(mn=pe^rt^It,ni=3395469782);const fr=(ie<<5|ie>>>27)+mn+qt+ni+je[Qt]&4294967295;qt=It,It=rt,rt=4294967295&(pe<<30|pe>>>2),pe=ie,ie=fr}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+pe&4294967295,this.chain_[2]=this.chain_[2]+rt&4294967295,this.chain_[3]=this.chain_[3]+It&4294967295,this.chain_[4]=this.chain_[4]+qt&4294967295}update(se,le){if(null==se)return;void 0===le&&(le=se.length);const je=le-this.blockSize;let ie=0;const pe=this.buf_;let rt=this.inbuf_;for(;ie<le;){if(0===rt)for(;ie<=je;)this.compress_(se,ie),ie+=this.blockSize;if("string"==typeof se){for(;ie<le;)if(pe[rt]=se.charCodeAt(ie),++rt,++ie,rt===this.blockSize){this.compress_(pe),rt=0;break}}else for(;ie<le;)if(pe[rt]=se[ie],++rt,++ie,rt===this.blockSize){this.compress_(pe),rt=0;break}}this.inbuf_=rt,this.total_+=le}digest(){const se=[];let le=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&le,le/=256;this.compress_(this.buf_);let je=0;for(let ie=0;ie<5;ie++)for(let pe=24;pe>=0;pe-=8)se[je]=this.chain_[ie]>>pe&255,++je;return se}}function Oo(X,se){const le=new Bt(X,se);return le.subscribe.bind(le)}class Bt{constructor(se,le){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=le,this.task.then(()=>{se(this)}).catch(je=>{this.error(je)})}next(se){this.forEachObserver(le=>{le.next(se)})}error(se){this.forEachObserver(le=>{le.error(se)}),this.close(se)}complete(){this.forEachObserver(se=>{se.complete()}),this.close()}subscribe(se,le,je){let ie;if(void 0===se&&void 0===le&&void 0===je)throw new Error("Missing Observer.");ie=function Ii(X,se){if("object"!=typeof X||null===X)return!1;for(const le of se)if(le in X&&"function"==typeof X[le])return!0;return!1}(se,["next","error","complete"])?se:{next:se,error:le,complete:je},void 0===ie.next&&(ie.next=Mn),void 0===ie.error&&(ie.error=Mn),void 0===ie.complete&&(ie.complete=Mn);const pe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(rt){}}),this.observers.push(ie),pe}unsubscribeOne(se){void 0===this.observers||void 0===this.observers[se]||(delete this.observers[se],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(se){if(!this.finalized)for(let le=0;le<this.observers.length;le++)this.sendOne(le,se)}sendOne(se,le){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[se])try{le(this.observers[se])}catch(je){"undefined"!=typeof console&&console.error&&console.error(je)}})}close(se){this.finalized||(this.finalized=!0,void 0!==se&&(this.finalError=se),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mn(){}const bi=function(X,se,le,je){let ie;if(je<se?ie="at least "+se:je>le&&(ie=0===le?"none":"no more than "+le),ie)throw new Error(X+" failed: Was called with "+je+(1===je?" argument.":" arguments.")+" Expects "+ie+".")};function Hi(X,se){return`${X} failed: ${se} argument `}function Ai(X,se,le,je){if((!je||le)&&"function"!=typeof le)throw new Error(Hi(X,se)+"must be a valid function.")}function ji(X,se,le,je){if((!je||le)&&("object"!=typeof le||null===le))throw new Error(Hi(X,se)+"must be a valid context object.")}const sa=function(X){const se=[];let le=0;for(let je=0;je<X.length;je++){let ie=X.charCodeAt(je);if(ie>=55296&&ie<=56319){const pe=ie-55296;je++,P(je<X.length,"Surrogate pair missing trail surrogate."),ie=65536+(pe<<10)+(X.charCodeAt(je)-56320)}ie<128?se[le++]=ie:ie<2048?(se[le++]=ie>>6|192,se[le++]=63&ie|128):ie<65536?(se[le++]=ie>>12|224,se[le++]=ie>>6&63|128,se[le++]=63&ie|128):(se[le++]=ie>>18|240,se[le++]=ie>>12&63|128,se[le++]=ie>>6&63|128,se[le++]=63&ie|128)}return se},gn=function(X){let se=0;for(let le=0;le<X.length;le++){const je=X.charCodeAt(le);je<128?se++:je<2048?se+=2:je>=55296&&je<=56319?(se+=4,le++):se+=3}return se};function Cn(X,se=1e3,le=2){const je=se*Math.pow(le,X),ie=Math.round(.5*je*(Math.random()-.5)*2);return Math.min(144e5,je+ie)}function Qn(X){return X&&X._delegate?X._delegate:X}},7115:(wt,He,W)=>{"use strict";var o=W(5e3);let P=null;function j(){return P}const ve=new o.OlP("DocumentToken");let Te=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Be(){return(0,o.LFG)(ee)}()},providedIn:"platform"}),n})();const ne=new o.OlP("Location Initialized");let ee=(()=>{class n extends Te{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return j().getBaseHref(this._doc)}onPopState(e){const i=j().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",e,!1),()=>i.removeEventListener("popstate",e)}onHashChange(e){const i=j().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",e,!1),()=>i.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,i,r){be()?this._history.pushState(e,i,r):this.location.hash=r}replaceState(e,i,r){be()?this._history.replaceState(e,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function mt(){return new ee((0,o.LFG)(ve))}()},providedIn:"platform"}),n})();function be(){return!!window.history.pushState}function Qe(n,t){if(0==n.length)return t;if(0==t.length)return n;let e=0;return n.endsWith("/")&&e++,t.startsWith("/")&&e++,2==e?n+t.substring(1):1==e?n+t:n+"/"+t}function at(n){const t=n.match(/#|\?|$/),e=t&&t.index||n.length;return n.slice(0,e-("/"===n[e-1]?1:0))+n.slice(e)}function lt(n){return n&&"?"!==n[0]?"?"+n:n}let Oe=(()=>{class n{historyGo(e){throw new Error("Not implemented")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(){return function We(n){const t=(0,o.LFG)(ve).location;return new ft((0,o.LFG)(Te),t&&t.origin||"")}()},providedIn:"root"}),n})();const ut=new o.OlP("appBaseHref");let ft=(()=>{class n extends Oe{constructor(e,i){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return Qe(this._baseHref,e)}path(e=!1){const i=this._platformLocation.pathname+lt(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${i}${r}`:i}pushState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){const c=this.prepareExternalUrl(r+lt(s));this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Te),o.LFG(ut,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),ze=(()=>{class n extends Oe{constructor(e,i){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(e){const i=Qe(this._baseHref,e);return i.length>0?"#"+i:i}pushState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(e,i,c)}replaceState(e,i,r,s){let c=this.prepareExternalUrl(r+lt(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(e,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Te),o.LFG(ut,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Ze=(()=>{class n{constructor(e,i){this._subject=new o.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=at(ye(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,i=""){return this.path()==this.normalize(e+lt(i))}normalize(e){return n.stripTrailingSlash(function _t(n,t){return n&&t.startsWith(n)?t.substring(n.length):t}(this._baseHref,ye(e)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,i="",r=null){this._platformStrategy.pushState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}replaceState(e,i="",r=null){this._platformStrategy.replaceState(r,"",e,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+lt(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(e="",i){this._urlChangeListeners.forEach(r=>r(e,i))}subscribe(e,i,r){return this._subject.subscribe({next:e,error:i,complete:r})}}return n.normalizeQueryParams=lt,n.joinWithSlash=Qe,n.stripTrailingSlash=at,n.\u0275fac=function(e){return new(e||n)(o.LFG(Oe),o.LFG(Te))},n.\u0275prov=o.Yz7({token:n,factory:function(){return function Ue(){return new Ze((0,o.LFG)(Oe),(0,o.LFG)(Te))}()},providedIn:"root"}),n})();function ye(n){return n.replace(/\/index.html$/,"")}function Fa(n,t){t=encodeURIComponent(t);for(const e of n.split(";")){const i=e.indexOf("="),[r,s]=-1==i?[e,""]:[e.slice(0,i),e.slice(i+1)];if(r.trim()===t)return decodeURIComponent(s)}return null}let ul=(()=>{class n{constructor(e,i,r,s){this._iterableDiffers=e,this._keyValueDiffers=i,this._ngEl=r,this._renderer=s,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,o.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),e.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,o.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),e.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!0)):Object.keys(e).forEach(i=>this._toggleClass(i,!!e[i])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(i=>this._toggleClass(i,!1)):Object.keys(e).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(e,i){(e=e.trim())&&e.split(/\s+/g).forEach(r=>{i?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.aQg),o.Y36(o.SBq),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Yl{constructor(t,e,i,r){this.$implicit=t,this.ngForOf=e,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ri=(()=>{class n{constructor(e,i,r){this._viewContainer=e,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const e=this._ngForOf;!this._differ&&e&&(this._differ=this._differs.find(e).create(this.ngForTrackBy))}if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const i=this._viewContainer;e.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new Yl(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),la(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{la(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function la(n,t){n.context.$implicit=t.item}let si=(()=>{class n{constructor(e,i){this._viewContainer=e,this._context=new Jn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){Ch("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){Ch("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,i){return!0}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Jn{constructor(){this.$implicit=null,this.ngIf=null}}function Ch(n,t){if(t&&!t.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,o.AaK)(t)}'.`)}let Eh=(()=>{class n{constructor(e,i,r){this._ngEl=e,this._differs=i,this._renderer=r,this._ngStyle=null,this._differ=null}set ngStyle(e){this._ngStyle=e,!this._differ&&e&&(this._differ=this._differs.find(e).create())}ngDoCheck(){if(this._differ){const e=this._differ.diff(this._ngStyle);e&&this._applyChanges(e)}}_setStyle(e,i){const[r,s]=e.split(".");null!=(i=null!=i&&s?`${i}${s}`:i)?this._renderer.setStyle(this._ngEl.nativeElement,r,i):this._renderer.removeStyle(this._ngEl.nativeElement,r)}_applyChanges(e){e.forEachRemovedItem(i=>this._setStyle(i.key,null)),e.forEachAddedItem(i=>this._setStyle(i.key,i.currentValue)),e.forEachChangedItem(i=>this._setStyle(i.key,i.currentValue))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.aQg),o.Y36(o.Qsj))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),n})(),ua=(()=>{class n{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null}ngOnChanges(e){if(e.ngTemplateOutlet){const i=this._viewContainerRef;this._viewRef&&i.remove(i.indexOf(this._viewRef)),this._viewRef=this.ngTemplateOutlet?i.createEmbeddedView(this.ngTemplateOutlet,this.ngTemplateOutletContext):null}else this._viewRef&&e.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet"},features:[o.TTD]}),n})(),Wn=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Dh="browser";function rs(n){return"server"===n}let Vc=(()=>{class n{}return n.\u0275prov=(0,o.Yz7)({token:n,providedIn:"root",factory:()=>new ec((0,o.LFG)(ve),window)}),n})();class ec{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function ko(n,t){const e=n.getElementById(t)||n.getElementsByName(t)[0];if(e)return e;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(t)||s.querySelector(`[name="${t}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),i=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=vs(this.window.history)||vs(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function vs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fi{}class fa extends class tc extends class Re{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function Se(n){P||(P=n)}(new fa)}onAndCancel(t,e,i){return t.addEventListener(e,i,!1),()=>{t.removeEventListener(e,i,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=function $r(){return ai=ai||document.querySelector("base"),ai?ai.getAttribute("href"):null}();return null==e?null:function Tr(n){Hc=Hc||document.createElement("a"),Hc.setAttribute("href",n);const t=Hc.pathname;return"/"===t.charAt(0)?t:`/${t}`}(e)}resetBaseElement(){ai=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fa(document.cookie,t)}}let Hc,ai=null;const Pr=new o.OlP("TRANSITION_ID"),pi=[{provide:o.ip1,useFactory:function jc(n,t,e){return()=>{e.get(o.CZH).donePromise.then(()=>{const i=j(),r=t.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[Pr,ve,o.zs3],multi:!0}];class ro{static init(){(0,o.VLi)(new ro)}addToWindow(t){o.dqk.getAngularTestability=(i,r=!0)=>{const s=t.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},o.dqk.getAllAngularTestabilities=()=>t.getAllTestabilities(),o.dqk.getAllAngularRootElements=()=>t.getAllRootElements(),o.dqk.frameworkStabilizers||(o.dqk.frameworkStabilizers=[]),o.dqk.frameworkStabilizers.push(i=>{const r=o.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(p){c=c||p,s--,0==s&&i(c)};r.forEach(function(p){p.whenStable(d)})})}findTestabilityInTree(t,e,i){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:i?j().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let pr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const li=new o.OlP("EventManagerPlugins");let Fr=(()=>{class n{constructor(e,i){this._zone=i,this._eventNameToPlugin=new Map,e.forEach(r=>r.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,i,r){return this._findPluginFor(i).addEventListener(e,i,r)}addGlobalEventListener(e,i,r){return this._findPluginFor(i).addGlobalEventListener(e,i,r)}getZone(){return this._zone}_findPluginFor(e){const i=this._eventNameToPlugin.get(e);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(e))return this._eventNameToPlugin.set(e,c),c}throw new Error(`No event manager plugin found for event ${e}`)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(li),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Gc{constructor(t){this._doc=t}addGlobalEventListener(t,e,i){const r=j().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,i)}}let Bs=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(e){const i=new Set;e.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),Po=(()=>{class n extends Bs{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,i,r){e.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(e){const i=[];this._addStylesToHost(this._stylesSet,e,i),this._hostNodes.set(e,i)}removeHost(e){const i=this._hostNodes.get(e);i&&i.forEach(Ha),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(e,r,i)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Ha))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function Ha(n){j().remove(n)}const Zt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},$c=/%COMP%/g;function Je(n,t,e){for(let i=0;i<t.length;i++){let r=t[i];Array.isArray(r)?Je(n,r,e):(r=r.replace($c,n),e.push(r))}return e}function En(n){return t=>{if("__ngUnwrap__"===t)return n;!1===n(t)&&(t.preventDefault(),t.returnValue=!1)}}let $i=(()=>{class n{constructor(e,i,r){this.eventManager=e,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Lo(e)}createRenderer(e,i){if(!e||!i)return this.defaultRenderer;switch(i.encapsulation){case o.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new Nu(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(e),r}case 1:case o.ifc.ShadowDom:return new ss(this.eventManager,this.sharedStylesHost,e,i);default:if(!this.rendererByCompId.has(i.id)){const r=Je(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Fr),o.LFG(Po),o.LFG(o.AFp))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class Lo{constructor(t){this.eventManager=t,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(t,e){return e?document.createElementNS(Zt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,i){t&&t.insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i="string"==typeof t?document.querySelector(t):t;if(!i)throw new Error(`The selector "${t}" did not match any elements`);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;const s=Zt[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){const r=Zt[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(o.JOm.DashCase|o.JOm.Important)?t.style.setProperty(e,i,r&o.JOm.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&o.JOm.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t[e]=i}setValue(t,e){t.nodeValue=e}listen(t,e,i){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,En(i)):this.eventManager.addEventListener(t,e,En(i))}}class Nu extends Lo{constructor(t,e,i,r){super(t),this.component=i;const s=Je(r+"-"+i.id,i.styles,[]);e.addStyles(s),this.contentAttr=function ic(n){return"_ngcontent-%COMP%".replace($c,n)}(r+"-"+i.id),this.hostAttr=function Ih(n){return"_nghost-%COMP%".replace($c,n)}(r+"-"+i.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}}class ss extends Lo{constructor(t,e,i,r){super(t),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Je(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let ku=(()=>{class n extends Gc{constructor(e){super(e)}supports(e){return!0}addEventListener(e,i,r){return e.addEventListener(i,r,!1),()=>this.removeEventListener(e,i,r)}removeEventListener(e,i,r){return e.removeEventListener(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const sc=["alt","control","meta","shift"],pl={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Dr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_o={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ed=(()=>{class n extends Gc{constructor(e){super(e)}supports(e){return null!=n.parseEventName(e)}addEventListener(e,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>j().onAndCancel(e,s.domEventName,c))}static parseEventName(e){const i=e.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(sc.forEach(p=>{const v=i.indexOf(p);v>-1&&(i.splice(v,1),c+=p+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(e){let i="",r=function Bo(n){let t=n.key;if(null==t){if(t=n.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===n.location&&Dr.hasOwnProperty(t)&&(t=Dr[t]))}return pl[t]||t}(e);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),sc.forEach(s=>{s!=r&&_o[s](e)&&(i+=s+".")}),i+=r,i}static eventCallback(e,i,r){return s=>{n.getEventFullKey(s)===e&&r.runGuarded(()=>i(s))}}static _normalizeKey(e){return"esc"===e?"escape":e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Pu=(0,o.eFA)(o._c5,"browser",[{provide:o.Lbi,useValue:Dh},{provide:o.g9A,useValue:function pa(){fa.makeCurrent(),ro.init()},multi:!0},{provide:ve,useFactory:function Ah(){return(0,o.RDi)(document),document},deps:[]}]),ja=[{provide:o.zSh,useValue:"root"},{provide:o.qLn,useFactory:function Uo(){return new o.qLn},deps:[]},{provide:li,useClass:ku,multi:!0,deps:[ve,o.R0b,o.Lbi]},{provide:li,useClass:Ed,multi:!0,deps:[ve]},{provide:$i,useClass:$i,deps:[Fr,Po,o.AFp]},{provide:o.FYo,useExisting:$i},{provide:Bs,useExisting:Po},{provide:Po,useClass:Po,deps:[ve]},{provide:o.dDg,useClass:o.dDg,deps:[o.R0b]},{provide:Fr,useClass:Fr,deps:[li,o.R0b]},{provide:fi,useClass:pr,deps:[]}];let vo=(()=>{class n{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:n,providers:[{provide:o.AFp,useValue:e.appId},{provide:Pr,useExisting:o.AFp},pi]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(n,12))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:ja,imports:[Wn,o.hGG]}),n})();"undefined"!=typeof window&&window;let yo=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new(e||n):o.LFG(Mh),i},providedIn:"root"}),n})(),Mh=(()=>{class n extends yo{constructor(e){super(),this._doc=e}sanitize(e,i){if(null==i)return null;switch(e){case o.q3G.NONE:return i;case o.q3G.HTML:return(0,o.qzn)(i,"HTML")?(0,o.z3N)(i):(0,o.EiD)(this._doc,String(i)).toString();case o.q3G.STYLE:return(0,o.qzn)(i,"Style")?(0,o.z3N)(i):i;case o.q3G.SCRIPT:if((0,o.qzn)(i,"Script"))return(0,o.z3N)(i);throw new Error("unsafe value used in a script context");case o.q3G.URL:return(0,o.yhl)(i),(0,o.qzn)(i,"URL")?(0,o.z3N)(i):(0,o.mCW)(String(i));case o.q3G.RESOURCE_URL:if((0,o.qzn)(i,"ResourceURL"))return(0,o.z3N)(i);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${e} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(e){return(0,o.JVY)(e)}bypassSecurityTrustStyle(e){return(0,o.L6k)(e)}bypassSecurityTrustScript(e){return(0,o.eBb)(e)}bypassSecurityTrustUrl(e){return(0,o.LAX)(e)}bypassSecurityTrustResourceUrl(e){return(0,o.pB0)(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:function(e){let i=null;return i=e?new e:function _a(n){return new Mh(n.get(ve))}(o.LFG(o.zs3)),i},providedIn:"root"}),n})();var Ti=W(8996),va=W(3269);function dt(...n){const t=(0,va.yG)(n);return(0,Ti.D)(n,t)}var an=W(7579);class gi extends an.x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){const{hasError:t,thrownError:e,_value:i}=this;if(t)throw e;return this._throwIfClosed(),i}next(t){super.next(this._value=t)}}var Di=W(8306);const{isArray:Lu}=Array,{getPrototypeOf:_l,prototype:ya,keys:Wi}=Object;function bo(n){if(1===n.length){const t=n[0];if(Lu(t))return{args:t,keys:null};if(function Vs(n){return n&&"object"==typeof n&&_l(n)===ya}(t)){const e=Wi(t);return{args:e.map(i=>t[i]),keys:e}}}return{args:n,keys:null}}var bs=W(4671),Rt=W(4004);const{isArray:Oh}=Array;function vl(n){return(0,Rt.U)(t=>function Nh(n,t){return Oh(t)?n(...t):n(t)}(n,t))}function qc(n,t){return n.reduce((e,i,r)=>(e[i]=t[r],e),{})}var xn=W(5403),Bu=W(9672);function os(...n){const t=(0,va.yG)(n),e=(0,va.jO)(n),{args:i,keys:r}=bo(n);if(0===i.length)return(0,Ti.D)([],t);const s=new Di.y(function yl(n,t,e=bs.y){return i=>{Hs(t,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let p=0;p<r;p++)Hs(t,()=>{const v=(0,Ti.D)(n[p],t);let E=!1;v.subscribe((0,xn.x)(i,S=>{s[p]=S,E||(E=!0,d--),d||i.next(e(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,t,r?c=>qc(r,c):bs.y));return e?s.pipe(vl(e)):s}function Hs(n,t,e){n?(0,Bu.f)(e,n,t):t()}var Bn=W(576);function _i(n,t){const e=(0,Bn.m)(n)?n:()=>n,i=r=>r.error(e());return new Di.y(t?r=>t.schedule(i,0,r):i)}const cc=(0,W(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ba=W(8189);function Ca(...n){return function uc(){return(0,ba.J)(1)}()((0,Ti.D)(n,(0,va.yG)(n)))}var Sr=W(8421);function Wa(n){return new Di.y(t=>{(0,Sr.Xf)(n()).subscribe(t)})}var Cs=W(515),Co=W(727),vi=W(4482);function jo(){return(0,vi.e)((n,t)=>{let e=null;n._refCount++;const i=(0,xn.x)(t,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(e=null);const r=n._connection,s=e;e=null,r&&(!s||r===s)&&r.unsubscribe(),t.unsubscribe()});n.subscribe(i),i.closed||(e=n.connect())})}class wo extends Di.y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,(0,vi.A)(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:t}=this;this._subject=this._connection=null,null==t||t.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Co.w0;const e=this.getSubject();t.add(this.source.subscribe((0,xn.x)(e,void 0,()=>{this._teardown(),e.complete()},i=>{this._teardown(),e.error(i)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Co.w0.EMPTY)}return t}refCount(){return jo()(this)}}function zi(n,t){return(0,vi.e)((e,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();e.subscribe((0,xn.x)(i,p=>{null==r||r.unsubscribe();let v=0;const E=s++;(0,Sr.Xf)(n(p,E)).subscribe(r=(0,xn.x)(i,S=>i.next(t?t(p,S,E,v++):S),()=>{r=null,d()}))},()=>{c=!0,d()}))})}var ui=W(5698);function ws(...n){const t=(0,va.yG)(n);return(0,vi.e)((e,i)=>{(t?Ca(n,e,t):Ca(n,e)).subscribe(i)})}function za(n,t,e,i,r){return(s,c)=>{let d=e,p=t,v=0;s.subscribe((0,xn.x)(c,E=>{const S=v++;p=d?n(p,E,S):(d=!0,E),i&&c.next(p)},r&&(()=>{d&&c.next(p),c.complete()})))}}function oo(n,t){return(0,vi.e)(za(n,t,arguments.length>=2,!0))}function zn(n,t){return(0,vi.e)((e,i)=>{let r=0;e.subscribe((0,xn.x)(i,s=>n.call(t,s,r++)&&i.next(s)))})}function Un(n){return(0,vi.e)((t,e)=>{let s,i=null,r=!1;i=t.subscribe((0,xn.x)(e,void 0,void 0,c=>{s=(0,Sr.Xf)(n(c,Un(n)(t))),i?(i.unsubscribe(),i=null,s.subscribe(e)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(e))})}var Ri=W(5577);function H(n,t){return(0,Bn.m)(t)?(0,Ri.z)(n,t,1):(0,Ri.z)(n,1)}function ao(n){return n<=0?()=>Cs.E:(0,vi.e)((t,e)=>{let i=[];t.subscribe((0,xn.x)(e,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)e.next(r);e.complete()},void 0,()=>{i=null}))})}function Mi(n=Eo){return(0,vi.e)((t,e)=>{let i=!1;t.subscribe((0,xn.x)(e,r=>{i=!0,e.next(r)},()=>i?e.complete():e.error(n())))})}function Eo(){return new cc}function kn(n){return(0,vi.e)((t,e)=>{let i=!1;t.subscribe((0,xn.x)(e,r=>{i=!0,e.next(r)},()=>{i||e.next(n),e.complete()}))})}function dc(n,t){const e=arguments.length>=2;return i=>i.pipe(n?zn((r,s)=>n(r,s,i)):bs.y,(0,ui.q)(1),e?kn(t):Mi(()=>new cc))}var gr=W(8505);function qa(n){return(0,vi.e)((t,e)=>{try{t.subscribe(e)}finally{e.add(n)}})}class Za{constructor(t,e){this.id=t,this.url=e}}class Cl extends Za{constructor(t,e,i="imperative",r=null){super(t,e),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class hc extends Za{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class rr extends Za{constructor(t,e,i){super(t,e),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Zc extends Za{constructor(t,e,i){super(t,e),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class js extends Za{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yf extends Za{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Kf extends Za{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Es extends Za{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ts extends Za{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yc{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gs{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class wa{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uu{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ea{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kc{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dd{constructor(t,e,i){this.routerEvent=t,this.position=e,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const sn="primary";class Vu{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function mr(n){return new Vu(n)}const Ds="ngNavigationCancelingError";function wl(n){const t=Error("NavigationCancelingError: "+n);return t[Ds]=!0,t}function Hu(n,t,e){const i=e.path.split("/");if(i.length>n.length||"full"===e.pathMatch&&(t.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function $s(n,t){const e=n?Object.keys(n):void 0,i=t?Object.keys(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Sd(n[r],t[r]))return!1;return!0}function Sd(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;const e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}return n===t}function Qc(n){return Array.prototype.concat.apply([],n)}function Go(n){return n.length>0?n[n.length-1]:null}function qn(n,t){for(const e in n)n.hasOwnProperty(e)&&t(n[e],e)}function Br(n){return(0,o.CqO)(n)?n:(0,o.QGY)(n)?(0,Ti.D)(Promise.resolve(n)):dt(n)}const Ya={exact:function R(n,t,e){if(!Yt(n.segments,t.segments)||!he(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(const i in t.children)if(!n.children[i]||!R(n.children[i],t.children[i],e))return!1;return!0},subset:V},El={exact:function Ka(n,t){return $s(n,t)},subset:function O(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Sd(n[e],t[e]))},ignored:()=>!0};function Tl(n,t,e){return Ya[e.paths](n.root,t.root,e.matrixParams)&&El[e.queryParams](n.queryParams,t.queryParams)&&!("exact"===e.fragment&&n.fragment!==t.fragment)}function V(n,t,e){return Q(n,t,t.segments,e)}function Q(n,t,e,i){if(n.segments.length>e.length){const r=n.segments.slice(0,e.length);return!(!Yt(r,e)||t.hasChildren()||!he(r,e,i))}if(n.segments.length===e.length){if(!Yt(n.segments,e)||!he(n.segments,e,i))return!1;for(const r in t.children)if(!n.children[r]||!V(n.children[r],t.children[r],i))return!1;return!0}{const r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!!(Yt(n.segments,r)&&he(n.segments,r,i)&&n.children[sn])&&Q(n.children[sn],t,s,i)}}function he(n,t,e){return t.every((i,r)=>El[e](n[r].parameters,i.parameters))}class Ee{constructor(t,e,i){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return Pn.serialize(this)}}class Fe{constructor(t,e){this.segments=t,this.children=e,this.parent=null,qn(e,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return To(this)}}class ct{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=mr(this.parameters)),this._parameterMap}toString(){return Xc(this)}}function Yt(n,t){return n.length===t.length&&n.every((e,i)=>e.path===t[i].path)}class Xt{}class Ss{parse(t){const e=new Og(t);return new Ee(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){const e=`/${Ws(t.root,!0)}`,i=function Xf(n){const t=Object.keys(n).map(e=>{const i=n[e];return Array.isArray(i)?i.map(r=>`${as(e)}=${as(r)}`).join("&"):`${as(e)}=${as(i)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(t.queryParams);return`${e}${i}${"string"==typeof t.fragment?`#${function zs(n){return encodeURI(n)}(t.fragment)}`:""}`}}const Pn=new Ss;function To(n){return n.segments.map(t=>Xc(t)).join("/")}function Ws(n,t){if(!n.hasChildren())return To(n);if(t){const e=n.children[sn]?Ws(n.children[sn],!1):"",i=[];return qn(n.children,(r,s)=>{s!==sn&&i.push(`${s}:${Ws(r,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}{const e=function Rn(n,t){let e=[];return qn(n.children,(i,r)=>{r===sn&&(e=e.concat(t(i,r)))}),qn(n.children,(i,r)=>{r!==sn&&(e=e.concat(t(i,r)))}),e}(n,(i,r)=>r===sn?[Ws(n.children[sn],!1)]:[`${r}:${Ws(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[sn]?`${To(n)}/${e[0]}`:`${To(n)}/(${e.join("//")})`}}function sr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function as(n){return sr(n).replace(/%3B/gi,";")}function Do(n){return sr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Jc(n){return decodeURIComponent(n)}function Ur(n){return Jc(n.replace(/\+/g,"%20"))}function Xc(n){return`${Do(n.path)}${function Jf(n){return Object.keys(n).map(t=>`;${Do(t)}=${Do(n[t])}`).join("")}(n.parameters)}`}const L_=/^[^\/()?;=#]+/;function Ta(n){const t=n.match(L_);return t?t[0]:""}const Id=/^[^=?&#]+/,B_=/^[^&#]+/;class Og{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Fe([],{}):new Fe([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[sn]=new Fe(t,e)),i}parseSegment(){const t=Ta(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new ct(Jc(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Ta(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const r=Ta(this.remaining);r&&(i=r,this.capture(i))}t[Jc(e)]=Jc(i)}parseQueryParam(t){const e=function eu(n){const t=n.match(Id);return t?t[0]:""}(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){const c=function Mg(n){const t=n.match(B_);return t?t[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Ur(e),s=Ur(i);if(t.hasOwnProperty(r)){let c=t[r];Array.isArray(c)||(c=[c],t[r]=c),c.push(s)}else t[r]=s}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=Ta(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=sn);const c=this.parseChildren();e[s]=1===Object.keys(c).length?c[sn]:new Fe([],c),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ad{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=ju(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){const e=ju(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=ep(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return ep(t,this._root).map(e=>e.value)}}function ju(n,t){if(n===t.value)return t;for(const e of t.children){const i=ju(n,e);if(i)return i}return null}function ep(n,t){if(n===t.value)return[t];for(const e of t.children){const i=ep(n,e);if(i.length)return i.unshift(t),i}return[]}class Da{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qa(n){const t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}class Ph extends Ad{constructor(t,e){super(t),this.snapshot=e,xd(this,t)}toString(){return this.snapshot.toString()}}function tu(n,t){const e=function U_(n,t){const c=new pc([],{},{},"",{},sn,t,null,n.root,-1,{});return new Fh("",new Da(c,[]))}(n,t),i=new gi([new ct("",{})]),r=new gi({}),s=new gi({}),c=new gi({}),d=new gi(""),p=new $o(i,r,c,d,s,sn,t,e.root);return p.snapshot=e.root,new Ph(new Da(p,[]),e)}class $o{constructor(t,e,i,r,s,c,d,p){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Rt.U)(t=>mr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Rt.U)(t=>mr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function tp(n,t="emptyOnly"){const e=n.pathFromRoot;let i=0;if("always"!==t)for(i=e.length-1;i>=1;){const r=e[i],s=e[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function Gu(n){return n.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(e.slice(i))}class pc{constructor(t,e,i,r,s,c,d,p,v,E,S){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=p,this._urlSegment=v,this._lastPathIndex=E,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=mr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=mr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Fh extends Ad{constructor(t,e){super(e),this.url=t,xd(this,e)}toString(){return Lh(this._root)}}function xd(n,t){t.value._routerState=n,t.children.forEach(e=>xd(n,e))}function Lh(n){const t=n.children.length>0?` { ${n.children.map(Lh).join(", ")} } `:"";return`${n.value}${t}`}function Wo(n){if(n.snapshot){const t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,$s(t.queryParams,e.queryParams)||n.queryParams.next(e.queryParams),t.fragment!==e.fragment&&n.fragment.next(e.fragment),$s(t.params,e.params)||n.params.next(e.params),function fc(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!$s(n[e],t[e]))return!1;return!0}(t.url,e.url)||n.url.next(e.url),$s(t.data,e.data)||n.data.next(e.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Bh(n,t){const e=$s(n.params,t.params)&&function Jt(n,t){return Yt(n,t)&&n.every((e,i)=>$s(e.parameters,t[i].parameters))}(n.url,t.url);return e&&!(!n.parent!=!t.parent)&&(!n.parent||Bh(n.parent,t.parent))}function $u(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){const i=e.value;i._futureSnapshot=t.value;const r=function V_(n,t,e){return t.children.map(i=>{for(const r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return $u(n,i,r);return $u(n,i)})}(n,t,e);return new Da(i,r)}{if(n.shouldAttach(t.value)){const s=n.retrieve(t.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=t.value,c.children=t.children.map(d=>$u(n,d)),c}}const i=function kg(n){return new $o(new gi(n.url),new gi(n.params),new gi(n.queryParams),new gi(n.fragment),new gi(n.data),n.outlet,n.component,n)}(t.value),r=t.children.map(s=>$u(n,s));return new Da(i,r)}}function Ia(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Dl(n){return"object"==typeof n&&null!=n&&n.outlets}function Rd(n,t,e,i,r){let s={};if(i&&qn(i,(d,p)=>{s[p]=Array.isArray(d)?d.map(v=>`${v}`):`${d}`}),n===t)return new Ee(e,s,r);const c=np(n,t,e);return new Ee(c,s,r)}function np(n,t,e){const i={};return qn(n.children,(r,s)=>{i[s]=r===t?e:np(r,t,e)}),new Fe(n.segments,i)}class Uh{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Ia(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(Dl);if(r&&r!==Go(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ip{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}}function Fg(n,t,e){if(n||(n=new Fe([],{})),0===n.segments.length&&n.hasChildren())return Vh(n,t,e);const i=function Ja(n,t,e){let i=0,r=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;const c=n.segments[r],d=e[i];if(Dl(d))break;const p=`${d}`,v=i<e.length-1?e[i+1]:null;if(r>0&&void 0===p)break;if(p&&v&&"object"==typeof v&&void 0===v.outlets){if(!I(p,v,c))return s;i+=2}else{if(!I(p,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new Fe(n.segments.slice(0,i.pathIndex),{});return s.children[sn]=new Fe(n.segments.slice(i.pathIndex),n.children),Vh(s,0,r)}return i.match&&0===r.length?new Fe(n.segments,{}):i.match&&!n.hasChildren()?T(n,t,e):i.match?Vh(n,0,r):T(n,t,e)}function Vh(n,t,e){if(0===e.length)return new Fe(n.segments,{});{const i=function Pg(n){return Dl(n[0])?n[0].outlets:{[sn]:n}}(e),r={};return qn(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=Fg(n.children[c],t,s))}),qn(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new Fe(n.segments,r)}}function T(n,t,e){const i=n.segments.slice(0,t);let r=0;for(;r<e.length;){const s=e[r];if(Dl(s)){const p=y(s.outlets);return new Fe(i,p)}if(0===r&&Ia(e[0])){i.push(new ct(n.segments[t].path,b(e[0]))),r++;continue}const c=Dl(s)?s.outlets[sn]:`${s}`,d=r<e.length-1?e[r+1]:null;c&&d&&Ia(d)?(i.push(new ct(c,b(d))),r+=2):(i.push(new ct(c,{})),r++)}return new Fe(i,{})}function y(n){const t={};return qn(n,(e,i)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[i]=T(new Fe([],{}),0,e))}),t}function b(n){const t={};return qn(n,(e,i)=>t[i]=`${e}`),t}function I(n,t,e){return n==e.path&&$s(t,e.parameters)}class q{constructor(t,e,i,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r}activate(t){const e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Wo(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){const r=Qa(e);t.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),qn(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(t,e,c.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Qa(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:c,route:t,contexts:d})}}deactivateRouteAndOutlet(t,e){const i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Qa(t);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(t,e,i){const r=Qa(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Kc(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Uu(t.value.snapshot))}activateRoutes(t,e,i){const r=t.value,s=e?e.value:null;if(Wo(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,c.children)}else this.activateChildRoutes(t,e,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),Wo(d.route.value),this.activateChildRoutes(t,null,c.children)}else{const d=function me(n){for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),p=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=p,c.outlet&&c.outlet.activateWith(r,p),this.activateChildRoutes(t,null,c.children)}}else this.activateChildRoutes(t,null,i)}}class tt{constructor(t,e){this.routes=t,this.module=e}}function St(n){return"function"==typeof n}function ln(n){return n instanceof Ee}const qo=Symbol("INITIAL_VALUE");function gc(){return zi(n=>os(n.map(t=>t.pipe((0,ui.q)(1),ws(qo)))).pipe(oo((t,e)=>{let i=!1;return e.reduce((r,s,c)=>r!==qo?r:(s===qo&&(i=!0),i||!1!==s&&c!==e.length-1&&!ln(s)?r:s),t)},qo),zn(t=>t!==qo),(0,Rt.U)(t=>ln(t)?t:!0===t),(0,ui.q)(1)))}class Sl{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new nu,this.attachRef=null}}class nu{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const i=this.getOrCreateContext(t);i.outlet=e,this.contexts.set(t,i)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null,e.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Sl,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}let zu=(()=>{class n{constructor(e,i,r,s,c){this.parentContexts=e,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.attachEvents=new o.vpe,this.detachEvents=new o.vpe,this.name=s||sn,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,i){this.activated=e,this._activatedRoute=i,this.location.insert(e.hostView),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const c=(i=i||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,p=new Hh(e,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(nu),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.Y36(o.sBO))},n.\u0275dir=o.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Hh{constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===$o?this.route:t===nu?this.childContexts:this.parent.get(t,e)}}let jh=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"router-outlet")},directives:[zu],encapsulation:2}),n})();function iu(n,t=""){for(let e=0;e<n.length;e++){const i=n[e];sp(i,Gh(t,i))}}function sp(n,t){n.children&&iu(n.children,t)}function Gh(n,t){return t?n||t.path?n&&!t.path?`${n}/`:!n&&t.path?t.path:`${n}/${t.path}`:"":n}function qu(n){const t=n.children&&n.children.map(qu),e=t?Object.assign(Object.assign({},n),{children:t}):Object.assign({},n);return!e.component&&(t||e.loadChildren)&&e.outlet&&e.outlet!==sn&&(e.component=jh),e}function ei(n){return n.outlet||sn}function H_(n,t){const e=n.filter(i=>ei(i)===t);return e.push(...n.filter(i=>ei(i)!==t)),e}const j_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ls(n,t,e){var i;if(""===t.path)return"full"===t.pathMatch&&(n.hasChildren()||e.length>0)?Object.assign({},j_):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};const s=(t.matcher||Hu)(e,n,t);if(!s)return Object.assign({},j_);const c={};qn(s.posParams,(p,v)=>{c[v]=p.path});const d=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:e.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function Zo(n,t,e,i,r="corrected"){if(e.length>0&&function Lg(n,t,e){return e.some(i=>op(n,t,i)&&ei(i)!==sn)}(n,e,i)){const c=new Fe(t,function cw(n,t,e,i){const r={};r[sn]=i,i._sourceSegment=n,i._segmentIndexShift=t.length;for(const s of e)if(""===s.path&&ei(s)!==sn){const c=new Fe([],{});c._sourceSegment=n,c._segmentIndexShift=t.length,r[ei(s)]=c}return r}(n,t,i,new Fe(e,n.children)));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:[]}}if(0===e.length&&function $h(n,t,e){return e.some(i=>op(n,t,i))}(n,e,i)){const c=new Fe(n.segments,function lw(n,t,e,i,r,s){const c={};for(const d of i)if(op(n,e,d)&&!r[ei(d)]){const p=new Fe([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:t.length,c[ei(d)]=p}return Object.assign(Object.assign({},r),c)}(n,t,e,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=t.length,{segmentGroup:c,slicedSegments:e}}const s=new Fe(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:e}}function op(n,t,e){return(!(n.hasChildren()||t.length>0)||"full"!==e.pathMatch)&&""===e.path}function y0(n,t,e,i){return!!(ei(n)===i||i!==sn&&op(t,e,n))&&("**"===n.path||ls(t,n,e).matched)}function uw(n,t,e){return 0===t.length&&!n.children[e]}class ru{constructor(t){this.segmentGroup=t||null}}class Vr{constructor(t){this.urlTree=t}}function Il(n){return _i(new ru(n))}function G_(n){return _i(new Vr(n))}class Bg{constructor(t,e,i,r,s){this.configLoader=e,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=t.get(o.h0i)}apply(){const t=Zo(this.urlTree.root,[],[],this.config).segmentGroup,e=new Fe(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,sn).pipe((0,Rt.U)(s=>this.createUrlTree(ap(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Un(s=>{if(s instanceof Vr)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ru?this.noMatchError(s):s}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,sn).pipe((0,Rt.U)(r=>this.createUrlTree(ap(r),t.queryParams,t.fragment))).pipe(Un(r=>{throw r instanceof ru?this.noMatchError(r):r}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,i){const r=t.segments.length>0?new Fe([],{[sn]:t}):t;return new Ee(r,e,i)}expandSegmentGroup(t,e,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(t,e,i).pipe((0,Rt.U)(s=>new Fe([],s))):this.expandSegment(t,i,e,i.segments,r,!0)}expandChildren(t,e,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,Ti.D)(r).pipe(H(s=>{const c=i.children[s],d=H_(e,s);return this.expandSegmentGroup(t,d,c,s).pipe((0,Rt.U)(p=>({segment:p,outlet:s})))}),oo((s,c)=>(s[c.outlet]=c.segment,s),{}),function F_(n,t){const e=arguments.length>=2;return i=>i.pipe(n?zn((r,s)=>n(r,s,i)):bs.y,ao(1),e?kn(t):Mi(()=>new cc))}())}expandSegment(t,e,i,r,s,c){return(0,Ti.D)(i).pipe(H(d=>this.expandSegmentAgainstRoute(t,e,i,d,r,s,c).pipe(Un(v=>{if(v instanceof ru)return dt(null);throw v}))),dc(d=>!!d),Un((d,p)=>{if(d instanceof cc||"EmptyError"===d.name)return uw(e,r,s)?dt(new Fe([],{})):Il(e);throw d}))}expandSegmentAgainstRoute(t,e,i,r,s,c,d){return y0(r,e,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c):Il(e):Il(e)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?G_(s):this.lineralizeSegments(i,s).pipe((0,Ri.z)(c=>{const d=new Fe(c,{});return this.expandSegment(t,d,e,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,i,r,s,c){const{matched:d,consumedSegments:p,remainingSegments:v,positionalParamSegments:E}=ls(e,r,s);if(!d)return Il(e);const S=this.applyRedirectCommands(p,r.redirectTo,E);return r.redirectTo.startsWith("/")?G_(S):this.lineralizeSegments(r,S).pipe((0,Ri.z)(N=>this.expandSegment(t,e,i,N.concat(v),c,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?dt(i._loadedConfig):this.configLoader.load(t.injector,i)).pipe((0,Rt.U)(S=>(i._loadedConfig=S,new Fe(r,{})))):dt(new Fe(r,{}));const{matched:c,consumedSegments:d,remainingSegments:p}=ls(e,i,r);return c?this.getChildConfig(t,i,r).pipe((0,Ri.z)(E=>{const S=E.module,N=E.routes,{segmentGroup:F,slicedSegments:G}=Zo(e,d,p,N),J=new Fe(F.segments,F.children);if(0===G.length&&J.hasChildren())return this.expandChildren(S,N,J).pipe((0,Rt.U)(st=>new Fe(d,st)));if(0===N.length&&0===G.length)return dt(new Fe(d,{}));const de=ei(i)===s;return this.expandSegment(S,J,N,G,de?sn:s,!0).pipe((0,Rt.U)(Ke=>new Fe(d.concat(Ke.segments),Ke.children)))})):Il(e)}getChildConfig(t,e,i){return e.children?dt(new tt(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?dt(e._loadedConfig):this.runCanLoadGuards(t.injector,e,i).pipe((0,Ri.z)(r=>r?this.configLoader.load(t.injector,e).pipe((0,Rt.U)(s=>(e._loadedConfig=s,s))):function qs(n){return _i(wl(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(e))):dt(new tt([],t))}runCanLoadGuards(t,e,i){const r=e.canLoad;return r&&0!==r.length?dt(r.map(c=>{const d=t.get(c);let p;if(function Si(n){return n&&St(n.canLoad)}(d))p=d.canLoad(e,i);else{if(!St(d))throw new Error("Invalid CanLoad guard");p=d(e,i)}return Br(p)})).pipe(gc(),(0,gr.b)(c=>{if(!ln(c))return;const d=wl(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),(0,Rt.U)(c=>!0===c)):dt(!0)}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return dt(i);if(r.numberOfChildren>1||!r.children[sn])return _i(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t.redirectTo}'`));r=r.children[sn]}}applyRedirectCommands(t,e,i){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,i)}applyRedirectCreatreUrlTree(t,e,i,r){const s=this.createSegmentGroup(t,e.root,i,r);return new Ee(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const i={};return qn(t,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=e[d]}else i[s]=r}),i}createSegmentGroup(t,e,i,r){const s=this.createSegments(t,e.segments,i,r);let c={};return qn(e.children,(d,p)=>{c[p]=this.createSegmentGroup(t,d,i,r)}),new Fe(s,c)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){const r=i[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let i=0;for(const r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}}function ap(n){const t={};for(const i of Object.keys(n.children)){const s=ap(n.children[i]);(s.segments.length>0||s.hasChildren())&&(t[i]=s)}return function Ug(n){if(1===n.numberOfChildren&&n.children[sn]){const t=n.children[sn];return new Fe(n.segments.concat(t.segments),t.children)}return n}(new Fe(n.segments,t))}class b0{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Wh{constructor(t,e){this.component=t,this.route=e}}function Vg(n,t,e){const i=n._root;return Yu(i,t?t._root:null,e,[i.value])}function zh(n,t,e){const i=function dw(n){if(!n)return null;for(let t=n.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(i?i.module.injector:e).get(n)}function Yu(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Qa(t);return n.children.forEach(c=>{(function su(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=t?t.value:null,d=e?e.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const p=function C0(n,t,e){if("function"==typeof e)return e(n,t);switch(e){case"pathParamsChange":return!Yt(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Yt(n.url,t.url)||!$s(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Bh(n,t)||!$s(n.queryParams,t.queryParams);default:return!Bh(n,t)}}(c,s,s.routeConfig.runGuardsAndResolvers);p?r.canActivateChecks.push(new b0(i)):(s.data=c.data,s._resolvedData=c._resolvedData),Yu(n,t,s.component?d?d.children:null:e,i,r),p&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new Wh(d.outlet.component,c))}else c&&Ku(t,d,r),r.canActivateChecks.push(new b0(i)),Yu(n,null,s.component?d?d.children:null:e,i,r)})(c,s[c.value.outlet],e,i.concat([c.value]),r),delete s[c.value.outlet]}),qn(s,(c,d)=>Ku(c,e.getContext(d),r)),r}function Ku(n,t,e){const i=Qa(n),r=n.value;qn(i,(s,c)=>{Ku(s,r.component?t?t.children.getContext(c):null:t,e)}),e.canDeactivateChecks.push(new Wh(r.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,r))}class cp{}function Od(n){return new Di.y(t=>t.error(n))}class jg{constructor(t,e,i,r,s,c){this.rootComponentType=t,this.config=e,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const t=Zo(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,sn);if(null===e)return null;const i=new pc([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},sn,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Da(i,e),s=new Fh(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(t){const e=t.value,i=tp(e,this.paramsInheritanceStrategy);e.params=Object.freeze(i.params),e.data=Object.freeze(i.data),t.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(t,e,i){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,i)}processChildren(t,e){const i=[];for(const s of Object.keys(e.children)){const c=e.children[s],d=H_(t,s),p=this.processSegmentGroup(d,c,s);if(null===p)return null;i.push(...p)}const r=Gg(i);return function Y_(n){n.sort((t,e)=>t.value.outlet===sn?-1:e.value.outlet===sn?1:t.value.outlet.localeCompare(e.value.outlet))}(r),r}processSegment(t,e,i,r){for(const s of t){const c=this.processSegmentAgainstRoute(s,e,i,r);if(null!==c)return c}return uw(e,i,r)?[]:null}processSegmentAgainstRoute(t,e,i,r){if(t.redirectTo||!y0(t,e,i,r))return null;let s,c=[],d=[];if("**"===t.path){const F=i.length>0?Go(i).parameters:{};s=new pc(i,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mw(t),ei(t),t.component,t,Ir(e),Al(e)+i.length,E0(t))}else{const F=ls(e,t,i);if(!F.matched)return null;c=F.consumedSegments,d=F.remainingSegments,s=new pc(c,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,mw(t),ei(t),t.component,t,Ir(e),Al(e)+c.length,E0(t))}const p=function Nd(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(t),{segmentGroup:v,slicedSegments:E}=Zo(e,c,d,p.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===E.length&&v.hasChildren()){const F=this.processChildren(p,v);return null===F?null:[new Da(s,F)]}if(0===p.length&&0===E.length)return[new Da(s,[])];const S=ei(t)===r,N=this.processSegment(p,v,E,S?sn:r);return null===N?null:[new Da(s,N)]}}function pw(n){const t=n.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Gg(n){const t=[],e=new Set;for(const i of n){if(!pw(i)){t.push(i);continue}const r=t.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),e.add(r)):t.push(i)}for(const i of e){const r=Gg(i.children);t.push(new Da(i.value,r))}return t.filter(i=>!e.has(i))}function Ir(n){let t=n;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Al(n){let t=n,e=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,e+=t._segmentIndexShift?t._segmentIndexShift:0;return e-1}function mw(n){return n.data||{}}function E0(n){return n.resolve||{}}function $g(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Is(n){return zi(t=>{const e=n(t);return e?(0,Ti.D)(e).pipe((0,Rt.U)(()=>t)):dt(t)})}class Wg extends class D0{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const up=new o.OlP("ROUTES");class zg{constructor(t,e,i,r){this.injector=t,this.compiler=e,this.onLoadStartListener=i,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const r=this.loadModuleFactory(e.loadChildren).pipe((0,Rt.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(e);const c=s.create(t);return new tt(Qc(c.injector.get(up,void 0,o.XFs.Self|o.XFs.Optional)).map(qu),c)}),Un(s=>{throw e._loader$=void 0,s}));return e._loader$=new wo(r,()=>new an.x).pipe(jo()),e._loader$}loadModuleFactory(t){return Br(t()).pipe((0,Ri.z)(e=>e instanceof o.YKP?dt(e):(0,Ti.D)(this.compiler.compileModuleAsync(e))))}}class vw{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Pd(n){throw n}function Q_(n,t,e){return t.parse("/")}function J_(n,t){return dt(null)}const yw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},X_={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Li=(()=>{class n{constructor(e,i,r,s,c,d,p){this.rootComponentType=e,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new an.x,this.errorHandler=Pd,this.malformedUriErrorHandler=Q_,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:J_,afterPreactivation:J_},this.urlHandlingStrategy=new vw,this.routeReuseStrategy=new Wg,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(o.h0i),this.console=c.get(o.c2e);const S=c.get(o.R0b);this.isNgZoneEnabled=S instanceof o.R0b&&o.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function kh(){return new Ee(new Fe([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new zg(c,d,N=>this.triggerEvent(new Yc(N)),N=>this.triggerEvent(new Gs(N))),this.routerState=tu(this.currentUrlTree,this.rootComponentType),this.transitions=new gi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const i=this.events;return e.pipe(zn(r=>0!==r.id),(0,Rt.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),zi(r=>{let s=!1,c=!1;return dt(r).pipe((0,gr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),zi(d=>{const p=this.browserUrlTree.toString(),v=!this.navigated||d.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||v)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return I0(d.source)&&(this.browserUrlTree=d.extractedUrl),dt(d).pipe(zi(S=>{const N=this.transitions.getValue();return i.next(new Cl(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),N!==this.transitions.getValue()?Cs.E:Promise.resolve(S)}),function lp(n,t,e,i){return zi(r=>function Zu(n,t,e,i,r){return new Bg(n,t,e,i,r).apply()}(n,t,e,r.extractedUrl,i).pipe((0,Rt.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,gr.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function T0(n,t,e,i,r){return(0,Ri.z)(s=>function nn(n,t,e,i,r="emptyOnly",s="legacy"){try{const c=new jg(n,t,e,i,r,s).recognize();return null===c?Od(new cp):dt(c)}catch(c){return Od(c)}}(n,t,s.urlAfterRedirects,e(s.urlAfterRedirects),i,r).pipe((0,Rt.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,gr.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(F,S)}this.browserUrlTree=S.urlAfterRedirects}const N=new js(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);i.next(N)}));if(v&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:N,extractedUrl:F,source:G,restoredState:J,extras:de}=d,$e=new Cl(N,this.serializeUrl(F),G,J);i.next($e);const Ke=tu(F,this.rootComponentType).snapshot;return dt(Object.assign(Object.assign({},d),{targetSnapshot:Ke,urlAfterRedirects:F,extras:Object.assign(Object.assign({},de),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),Cs.E}),Is(d=>{const{targetSnapshot:p,id:v,extractedUrl:E,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:F}}=d;return this.hooks.beforePreactivation(p,{navigationId:v,appliedUrlTree:E,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!F})}),(0,gr.b)(d=>{const p=new Yf(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(p)}),(0,Rt.U)(d=>Object.assign(Object.assign({},d),{guards:Vg(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function hw(n,t){return(0,Ri.z)(e=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=e;return 0===c.length&&0===s.length?dt(Object.assign(Object.assign({},e),{guardsResult:!0})):function w0(n,t,e,i){return(0,Ti.D)(n).pipe((0,Ri.z)(r=>function Z_(n,t,e,i,r){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return s&&0!==s.length?dt(s.map(d=>{const p=zh(d,t,r);let v;if(function Md(n){return n&&St(n.canDeactivate)}(p))v=Br(p.canDeactivate(n,t,e,i));else{if(!St(p))throw new Error("Invalid CanDeactivate guard");v=Br(p(n,t,e,i))}return v.pipe(dc())})).pipe(gc()):dt(!0)}(r.component,r.route,e,t,i)),dc(r=>!0!==r,!0))}(c,i,r,n).pipe((0,Ri.z)(d=>d&&function zt(n){return"boolean"==typeof n}(d)?function Hg(n,t,e,i){return(0,Ti.D)(t).pipe(H(r=>Ca(function ou(n,t){return null!==n&&t&&t(new wa(n)),dt(!0)}(r.route.parent,i),function fw(n,t){return null!==n&&t&&t(new Ea(n)),dt(!0)}(r.route,i),function q_(n,t,e){const i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(c=>function W_(n){const t=n.routeConfig?n.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:n,guards:t}:null}(c)).filter(c=>null!==c).map(c=>Wa(()=>dt(c.guards.map(p=>{const v=zh(p,c.node,e);let E;if(function zo(n){return n&&St(n.canActivateChild)}(v))E=Br(v.canActivateChild(i,n));else{if(!St(v))throw new Error("Invalid CanActivateChild guard");E=Br(v(i,n))}return E.pipe(dc())})).pipe(gc())));return dt(s).pipe(gc())}(n,r.path,e),function z_(n,t,e){const i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||0===i.length)return dt(!0);const r=i.map(s=>Wa(()=>{const c=zh(s,t,e);let d;if(function So(n){return n&&St(n.canActivate)}(c))d=Br(c.canActivate(t,n));else{if(!St(c))throw new Error("Invalid CanActivate guard");d=Br(c(t,n))}return d.pipe(dc())}));return dt(r).pipe(gc())}(n,r.route,e))),dc(r=>!0!==r,!0))}(i,s,n,t):dt(d)),(0,Rt.U)(d=>Object.assign(Object.assign({},e),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,gr.b)(d=>{if(ln(d.guardsResult)){const v=wl(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw v.url=d.guardsResult,v}const p=new Kf(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(p)}),zn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),Is(d=>{if(d.guards.canActivateChecks.length)return dt(d).pipe((0,gr.b)(p=>{const v=new Es(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),zi(p=>{let v=!1;return dt(p).pipe(function _w(n,t){return(0,Ri.z)(e=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return dt(e);let s=0;return(0,Ti.D)(r).pipe(H(c=>function mc(n,t,e,i){return function K_(n,t,e,i){const r=$g(n);if(0===r.length)return dt({});const s={};return(0,Ti.D)(r).pipe((0,Ri.z)(c=>function au(n,t,e,i){const r=zh(n,t,i);return Br(r.resolve?r.resolve(t,e):r(t,e))}(n[c],t,e,i).pipe((0,gr.b)(d=>{s[c]=d}))),ao(1),(0,Ri.z)(()=>$g(s).length===r.length?dt(s):Cs.E))}(n._resolve,n,t,i).pipe((0,Rt.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),tp(n,e).resolve),null)))}(c.route,i,n,t)),(0,gr.b)(()=>s++),ao(1),(0,Ri.z)(c=>s===r.length?dt(e):Cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,gr.b)({next:()=>v=!0,complete:()=>{v||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),(0,gr.b)(p=>{const v=new Ts(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}))}),Is(d=>{const{targetSnapshot:p,id:v,extractedUrl:E,rawUrl:S,extras:{skipLocationChange:N,replaceUrl:F}}=d;return this.hooks.afterPreactivation(p,{navigationId:v,appliedUrlTree:E,rawUrlTree:S,skipLocationChange:!!N,replaceUrl:!!F})}),(0,Rt.U)(d=>{const p=function Ng(n,t,e){const i=$u(n,t._root,e?e._root:void 0);return new Ph(i,t)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:p})}),(0,gr.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,t,e)=>(0,Rt.U)(i=>(new q(t,i.targetRouterState,i.currentRouterState,e).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,gr.b)({next(){s=!0},complete(){s=!0}}),qa(()=>{var d;s||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),Un(d=>{if(c=!0,function Rg(n){return n&&n[Ds]}(d)){const p=ln(d.url);p||(this.navigated=!0,this.restoreHistory(r,!0));const v=new rr(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(v),p?setTimeout(()=>{const E=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),S={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||I0(r.source)};this.scheduleNavigation(E,"imperative",null,S,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const p=new Zc(r.id,this.serializeUrl(r.extractedUrl),d);i.next(p);try{r.resolve(this.errorHandler(d))}catch(v){r.reject(v)}}return Cs.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const i="popstate"===e.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},c=(null===(r=e.state)||void 0===r?void 0:r.navigationId)?e.state:null;if(c){const p=Object.assign({},c);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(s.state=p)}const d=this.parseUrl(e.url);this.scheduleNavigation(d,i,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){iu(e),this.config=e.map(qu),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:p}=i,v=r||this.routerState.root,E=p?this.currentUrlTree.fragment:c;let S=null;switch(d){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=s||null}return null!==S&&(S=this.removeEmptyProps(S)),function Sa(n,t,e,i,r){if(0===e.length)return Rd(t.root,t.root,t.root,i,r);const s=function Tn(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Uh(!0,0,n);let t=0,e=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return qn(s.outlets,(p,v)=>{d[v]="string"==typeof p?p.split("/"):p}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,p)=>{0==p&&"."===d||(0==p&&""===d?e=!0:".."===d?t++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Uh(e,t,i)}(e);if(s.toRoot())return Rd(t.root,t.root,new Fe([],{}),i,r);const c=function rp(n,t,e){if(n.isAbsolute)return new ip(t.root,!0,0);if(-1===e.snapshot._lastPathIndex){const s=e.snapshot._urlSegment;return new ip(s,s===t.root,0)}const i=Ia(n.commands[0])?0:1;return function Wu(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new ip(i,!1,r-s)}(e.snapshot._urlSegment,e.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,t,n),d=c.processChildren?Vh(c.segmentGroup,c.index,s.commands):Fg(c.segmentGroup,c.index,s.commands);return Rd(t.root,c.segmentGroup,d,i,r)}(v,this.currentUrlTree,e,S,null!=E?E:null)}navigateByUrl(e,i={skipLocationChange:!1}){const r=ln(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(e,i={skipLocationChange:!1}){return function S0(n){for(let t=0;t<n.length;t++){const e=n[t];if(null==e)throw new Error(`The requested path contains ${e} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,i),i)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let i;try{i=this.urlSerializer.parse(e)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,e)}return i}isActive(e,i){let r;if(r=!0===i?Object.assign({},yw):!1===i?Object.assign({},X_):i,ln(e))return Tl(this.currentUrlTree,e,r);const s=this.parseUrl(e);return Tl(this.currentUrlTree,s,r)}removeEmptyProps(e){return Object.keys(e).reduce((i,r)=>{const s=e[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new hc(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,i,r,s,c){var d,p;if(this.disposed)return Promise.resolve(!1);let v,E,S;c?(v=c.resolve,E=c.reject,S=c.promise):S=new Promise((G,J)=>{v=G,E=J});const N=++this.navigationId;let F;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),F=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):F=0,this.setTransition({id:N,targetPageId:F,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:s,resolve:v,reject:E,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(G=>Promise.reject(G))}setBrowserUrl(e,i){const r=this.urlSerializer.serialize(e),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(e,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,i){const r=new rr(e.id,this.serializeUrl(e.extractedUrl),i);this.triggerEvent(r),e.resolve(!1)}generateNgRouterState(e,i){return"computed"===this.canceledNavigationResolution?{navigationId:e,\u0275routerPageId:i}:{navigationId:e}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function I0(n){return"imperative"!==n}let Qu=(()=>{class n{constructor(e,i,r,s,c){this.router=e,this.route=i,this.tabIndexAttribute=r,this.renderer=s,this.el=c,this.commands=null,this.onChanges=new an.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){if(null!=this.tabIndexAttribute)return;const i=this.renderer,r=this.el.nativeElement;null!==e?i.setAttribute(r,"tabindex",e):i.removeAttribute(r,"tabindex")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){null!=e?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const e={skipLocationChange:_c(this.skipLocationChange),replaceUrl:_c(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:_c(this.preserveFragment)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Li),o.Y36($o),o.$8M("tabindex"),o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,i){1&e&&o.NdJ("click",function(){return i.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[o.TTD]}),n})();function _c(n){return""===n||!!n}class Kg{}class ev{preload(t,e){return dt(null)}}let xl=(()=>{class n{constructor(e,i,r,s){this.router=e,this.injector=r,this.preloadingStrategy=s,this.loader=new zg(r,i,p=>e.triggerEvent(new Yc(p)),p=>e.triggerEvent(new Gs(p)))}setUpPreloading(){this.subscription=this.router.events.pipe(zn(e=>e instanceof hc),H(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(o.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(e,s)):s.children&&r.push(this.processRoutes(e,s.children));return(0,Ti.D)(r).pipe((0,ba.J)(),(0,Rt.U)(s=>{}))}preloadConfig(e,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?dt(i._loadedConfig):this.loader.load(e.injector,i)).pipe((0,Ri.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Li),o.LFG(o.Sil),o.LFG(o.zs3),o.LFG(Kg))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),vc=(()=>{class n{constructor(e,i,r={}){this.router=e,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Cl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof hc&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Dd&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,i){this.router.triggerEvent(new Dd(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Yo=new o.OlP("ROUTER_CONFIGURATION"),tv=new o.OlP("ROUTER_FORROOT_GUARD"),A0=[Ze,{provide:Xt,useClass:Ss},{provide:Li,useFactory:function iv(n,t,e,i,r,s,c={},d,p){const v=new Li(null,n,t,e,i,r,Qc(s));return d&&(v.urlHandlingStrategy=d),p&&(v.routeReuseStrategy=p),function M0(n,t){n.errorHandler&&(t.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(t.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(t.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(t.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(t.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(t.canceledNavigationResolution=n.canceledNavigationResolution)}(c,v),c.enableTracing&&v.events.subscribe(E=>{var S,N;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${E.constructor.name}`),console.log(E.toString()),console.log(E),null===(N=console.groupEnd)||void 0===N||N.call(console)}),v},deps:[Xt,nu,Ze,o.zs3,o.Sil,up,Yo,[class qh{},new o.FiY],[class kd{},new o.FiY]]},nu,{provide:$o,useFactory:function Qg(n){return n.routerState.root},deps:[Li]},xl,ev,class Zh{preload(t,e){return e().pipe(Un(()=>dt(null)))}},{provide:Yo,useValue:{enableTracing:!1}}];function Cw(){return new o.PXZ("Router",Li)}let Yh=(()=>{class n{constructor(e,i){}static forRoot(e,i){return{ngModule:n,providers:[A0,nv(e),{provide:tv,useFactory:R0,deps:[[Li,new o.FiY,new o.tp0]]},{provide:Yo,useValue:i||{}},{provide:Oe,useFactory:x0,deps:[Te,[new o.tBr(ut),new o.FiY],Yo]},{provide:vc,useFactory:ww,deps:[Li,Vc,Yo]},{provide:Kg,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:ev},{provide:o.PXZ,multi:!0,useFactory:Cw},[Fd,{provide:o.ip1,multi:!0,useFactory:rv,deps:[Fd]},{provide:sv,useFactory:Jg,deps:[Fd]},{provide:o.tb,multi:!0,useExisting:sv}]]}}static forChild(e){return{ngModule:n,providers:[nv(e)]}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(tv,8),o.LFG(Li,8))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();function ww(n,t,e){return e.scrollOffset&&t.setOffset(e.scrollOffset),new vc(n,t,e)}function x0(n,t,e={}){return e.useHash?new ze(n,t):new ft(n,t)}function R0(n){return"guarded"}function nv(n){return[{provide:o.deG,multi:!0,useValue:n},{provide:up,multi:!0,useValue:n}]}let Fd=(()=>{class n{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new an.x}appInitializer(){return this.injector.get(ne,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(Li),c=this.injector.get(Yo);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?dt(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(e){const i=this.injector.get(Yo),r=this.injector.get(xl),s=this.injector.get(vc),c=this.injector.get(Li),d=this.injector.get(o.z2F);e===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),s.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();function rv(n){return n.appInitializer.bind(n)}function Jg(n){return n.bootstrapListener.bind(n)}const sv=new o.OlP("Router Initializer");var O0=W(198),z=W(2090),Io=W(9681),Rl=W(1877),Xa=W(4859),Ju=W(4986),di=W(5813);function Aa(){return(0,vi.e)((n,t)=>{let e,i=!1;n.subscribe((0,xn.x)(t,r=>{const s=e;e=r,i&&t.next([s,r]),i=!0}))})}function Ld(n,t=bs.y){return n=null!=n?n:Ew,(0,vi.e)((e,i)=>{let r,s=!0;e.subscribe((0,xn.x)(i,c=>{const d=t(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function Ew(n,t){return n===t}var Ft,zr=W(2011),av=(W(5881),W(3942)),Pe=W(5861),Dw="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},yc={},lv=lv||{},vn=Dw||self;function em(){}function tm(n){var t=typeof n;return"array"==(t="object"!=t?t:n?Array.isArray(n)?"array":t:"null")||"object"==t&&"number"==typeof n.length}function dp(n){var t=typeof n;return"object"==t&&null!=n||"function"==t}var cv="closure_uid_"+(1e9*Math.random()>>>0),bn=0;function N0(n,t,e){return n.call.apply(n.bind,arguments)}function k0(n,t,e){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(t,r)}}return function(){return n.apply(t,arguments)}}function As(n,t,e){return(As=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N0:k0).apply(null,arguments)}function Bd(n,t){var e=Array.prototype.slice.call(arguments,1);return function(){var i=e.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Bi(n,t){function e(){}e.prototype=t.prototype,n.Z=t.prototype,n.prototype=new e,n.prototype.constructor=n,n.Vb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return t.prototype[r].apply(i,c)}}function lu(){this.s=this.s,this.o=this.o}var uv={};lu.prototype.s=!1,lu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Sw(n){return Object.prototype.hasOwnProperty.call(n,cv)&&n[cv]||(n[cv]=++bn)}(this);delete uv[n]}},lu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bc=Array.prototype.indexOf?function(n,t){return Array.prototype.indexOf.call(n,t,void 0)}:function(n,t){if("string"==typeof n)return"string"!=typeof t||1!=t.length?-1:n.indexOf(t,0);for(let e=0;e<n.length;e++)if(e in n&&n[e]===t)return e;return-1},nm=Array.prototype.forEach?function(n,t,e){Array.prototype.forEach.call(n,t,e)}:function(n,t,e){const i=n.length,r="string"==typeof n?n.split(""):n;for(let s=0;s<i;s++)s in r&&t.call(e,r[s],s,n)};function im(n){return Array.prototype.concat.apply([],arguments)}function rm(n){const t=n.length;if(0<t){const e=Array(t);for(let i=0;i<t;i++)e[i]=n[i];return e}return[]}function Kh(n){return/^[\s\xa0]*$/.test(n)}var Zs,Aw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function xs(n,t){return-1!=n.indexOf(t)}function Qh(n,t){return n<t?-1:n>t?1:0}e:{var sm=vn.navigator;if(sm){var om=sm.userAgent;if(om){Zs=om;break e}}Zs=""}function F0(n,t,e){for(const i in n)t.call(e,n[i],i,n)}function L0(n){const t={};for(const e in n)t[e]=n[e];return t}var dv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B0(n,t){let e,i;for(let r=1;r<arguments.length;r++){for(e in i=arguments[r],i)n[e]=i[e];for(let s=0;s<dv.length;s++)e=dv[s],Object.prototype.hasOwnProperty.call(i,e)&&(n[e]=i[e])}}function Jh(n){return Jh[" "](n),n}Jh[" "]=em;var fv,n,sS=xs(Zs,"Opera"),Xh=xs(Zs,"Trident")||xs(Zs,"MSIE"),xw=xs(Zs,"Edge"),am=xw||Xh,hv=xs(Zs,"Gecko")&&!(xs(Zs.toLowerCase(),"webkit")&&!xs(Zs,"Edge"))&&!(xs(Zs,"Trident")||xs(Zs,"MSIE"))&&!xs(Zs,"Edge"),Rw=xs(Zs.toLowerCase(),"webkit")&&!xs(Zs,"Edge");function lm(){var n=vn.document;return n?n.documentMode:void 0}e:{var V0="",H0=(n=Zs,hv?/rv:([^\);]+)(\)|;)/.exec(n):xw?/Edge\/([\d\.]+)/.exec(n):Xh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Rw?/WebKit\/(\S+)/.exec(n):sS?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(H0&&(V0=H0?H0[1]:""),Xh){var j0=lm();if(null!=j0&&j0>parseFloat(V0)){fv=String(j0);break e}}fv=V0}var oS={};var Ow=vn.document&&Xh&&(lm()||parseInt(fv,10))||void 0,Nw=function(){if(!vn.addEventListener||!Object.defineProperty)return!1;var n=!1,t=Object.defineProperty({},"passive",{get:function(){n=!0}});try{vn.addEventListener("test",em,t),vn.removeEventListener("test",em,t)}catch(e){}return n}();function _r(n,t){this.type=n,this.g=this.target=t,this.defaultPrevented=!1}function Ud(n,t){if(_r.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var e=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=t,t=n.relatedTarget){if(hv){e:{try{Jh(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==e?t=n.fromElement:"mouseout"==e&&(t=n.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:kw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ud.Z.h.call(this)}}_r.prototype.h=function(){this.defaultPrevented=!0},Bi(Ud,_r);var kw={2:"touch",3:"pen",4:"mouse"};Ud.prototype.h=function(){Ud.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var ef="closure_listenable_"+(1e6*Math.random()|0),tf=0;function $0(n,t,e,i,r){this.listener=n,this.proxy=null,this.src=t,this.type=e,this.capture=!!i,this.ia=r,this.key=++tf,this.ca=this.fa=!1}function nf(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function cm(n){this.src=n,this.g={},this.h=0}function Cc(n,t){var e=t.type;if(e in n.g){var s,i=n.g[e],r=bc(i,t);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(nf(t),0==n.g[e].length&&(delete n.g[e],n.h--))}}function um(n,t,e,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ca&&s.listener==t&&s.capture==!!e&&s.ia==i)return r}return-1}cm.prototype.add=function(n,t,e,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=um(n,t,i,r);return-1<c?(t=n[c],e||(t.fa=!1)):((t=new $0(t,this.src,s,!!i,r)).fa=e,n.push(t)),t};var pv="closure_lm_"+(1e6*Math.random()|0),hp={};function W0(n,t,e,i,r){if(i&&i.once)return z0(n,t,e,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)W0(n,t[s],e,i,r);return null}return e=dm(e),n&&n[ef]?n.N(t,e,dp(i)?!!i.capture:!!i,r):gv(n,t,e,!1,i,r)}function gv(n,t,e,i,r,s){if(!t)throw Error("Invalid event type");var c=dp(r)?!!r.capture:!!r,d=uu(n);if(d||(n[pv]=d=new cm(n)),(e=d.add(t,e,i,c,s)).proxy)return e;if(i=function Pw(){var t=Vd;return function n(e){return t.call(n.src,n.listener,e)}}(),e.proxy=i,i.src=n,i.listener=e,n.addEventListener)Nw||(r=c),void 0===r&&(r=!1),n.addEventListener(t.toString(),i,r);else if(n.attachEvent)n.attachEvent(fp(t.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return e}function z0(n,t,e,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)z0(n,t[s],e,i,r);return null}return e=dm(e),n&&n[ef]?n.O(t,e,dp(i)?!!i.capture:!!i,r):gv(n,t,e,!0,i,r)}function cu(n,t,e,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)cu(n,t[s],e,i,r);else i=dp(i)?!!i.capture:!!i,e=dm(e),n&&n[ef]?(n=n.i,(t=String(t).toString())in n.g&&-1<(e=um(s=n.g[t],e,i,r))&&(nf(s[e]),Array.prototype.splice.call(s,e,1),0==s.length&&(delete n.g[t],n.h--))):n&&(n=uu(n))&&(t=n.g[t.toString()],n=-1,t&&(n=um(t,e,i,r)),(e=-1<n?t[n]:null)&&Xu(e))}function Xu(n){if("number"!=typeof n&&n&&!n.ca){var t=n.src;if(t&&t[ef])Cc(t.i,n);else{var e=n.type,i=n.proxy;t.removeEventListener?t.removeEventListener(e,i,n.capture):t.detachEvent?t.detachEvent(fp(e),i):t.addListener&&t.removeListener&&t.removeListener(i),(e=uu(t))?(Cc(e,n),0==e.h&&(e.src=null,t[pv]=null)):nf(n)}}}function fp(n){return n in hp?hp[n]:hp[n]="on"+n}function Vd(n,t){if(n.ca)n=!0;else{t=new Ud(t,this);var e=n.listener,i=n.ia||n.src;n.fa&&Xu(n),n=e.call(i,t)}return n}function uu(n){return(n=n[pv])instanceof cm?n:null}var du="__closure_events_fn_"+(1e9*Math.random()>>>0);function dm(n){return"function"==typeof n?n:(n[du]||(n[du]=function(t){return n.handleEvent(t)}),n[du])}function qr(){lu.call(this),this.i=new cm(this),this.P=this,this.I=null}function cs(n,t){var e,i=n.I;if(i)for(e=[];i;i=i.I)e.push(i);if(n=n.P,i=t.type||t,"string"==typeof t)t=new _r(t,n);else if(t instanceof _r)t.target=t.target||n;else{var r=t;B0(t=new _r(i,n),r)}if(r=!0,e)for(var s=e.length-1;0<=s;s--){var c=t.g=e[s];r=rf(c,i,!0,t)&&r}if(r=rf(c=t.g=n,i,!0,t)&&r,r=rf(c,i,!1,t)&&r,e)for(s=0;s<e.length;s++)r=rf(c=t.g=e[s],i,!1,t)&&r}function rf(n,t,e,i){if(!(t=n.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var c=t[s];if(c&&!c.ca&&c.capture==e){var d=c.listener,p=c.ia||c.src;c.fa&&Cc(n.i,c),r=!1!==d.call(p,i)&&r}}return r&&!i.defaultPrevented}Bi(qr,lu),qr.prototype[ef]=!0,qr.prototype.removeEventListener=function(n,t,e,i){cu(this,n,t,e,i)},qr.prototype.M=function(){if(qr.Z.M.call(this),this.i){var t,n=this.i;for(t in n.g){for(var e=n.g[t],i=0;i<e.length;i++)nf(e[i]);delete n.g[t],n.h--}}this.I=null},qr.prototype.N=function(n,t,e,i){return this.i.add(String(n),t,!1,e,i)},qr.prototype.O=function(n,t,e,i){return this.i.add(String(n),t,!0,e,i)};var pp=vn.JSON.stringify;function q0(){var n=Y0;let t=null;return n.g&&(t=n.g,n.g=n.g.next,n.g||(n.h=null),t.next=null),t}var mp,gp=new class{constructor(n,t){this.i=n,this.j=t,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Z0,n=>n.reset());class Z0{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function lS(n){vn.setTimeout(()=>{throw n},0)}function sf(n,t){mp||function Fw(){var n=vn.Promise.resolve(void 0);mp=function(){n.then(Lw)}}(),hm||(mp(),hm=!0),Y0.add(n,t)}var hm=!1,Y0=new class Hd{constructor(){this.h=this.g=null}add(t,e){const i=gp.get();i.set(t,e),this.h?this.h.next=i:this.g=i,this.h=i}};function Lw(){for(var n;n=q0();){try{n.h.call(n.g)}catch(e){lS(e)}var t=gp;t.j(n),100>t.h&&(t.h++,n.next=t.g,t.g=n)}hm=!1}function lo(n,t){qr.call(this),this.h=n||1,this.g=t||vn,this.j=As(this.kb,this),this.l=Date.now()}function mv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function _v(n,t,e){if("function"==typeof n)e&&(n=As(n,e));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=As(n.handleEvent,n)}return 2147483647<Number(t)?-1:vn.setTimeout(n,t||0)}function Bw(n){n.g=_v(()=>{n.g=null,n.i&&(n.i=!1,Bw(n))},n.j);const t=n.h;n.h=null,n.m.apply(null,t)}Bi(lo,qr),(Ft=lo.prototype).da=!1,Ft.S=null,Ft.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),cs(this,"tick"),this.da&&(mv(this),this.start()))}},Ft.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ft.M=function(){lo.Z.M.call(this),mv(this),delete this.g};class cS extends lu{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Bw(this)}M(){super.M(),this.g&&(vn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function af(n){lu.call(this),this.h=n,this.g={}}Bi(af,lu);var Uw=[];function K0(n,t,e,i){Array.isArray(e)||(e&&(Uw[0]=e.toString()),e=Uw);for(var r=0;r<e.length;r++){var s=W0(t,e[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Ko(n){F0(n.g,function(t,e){this.g.hasOwnProperty(e)&&Xu(t)},n),n.g={}}function _p(){this.g=!0}function cn(n,t,e,i){n.info(function(){return"XMLHTTP TEXT ("+t+"): "+function Qo(n,t){if(!n.g)return t;if(!t)return null;try{var e=JSON.parse(t);if(e)for(n=0;n<e.length;n++)if(Array.isArray(e[n])){var i=e[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return pp(e)}catch(d){return t}}(n,e)+(i?" "+i:"")})}af.prototype.M=function(){af.Z.M.call(this),Ko(this)},af.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_p.prototype.Aa=function(){this.g=!1},_p.prototype.info=function(){};var Oi={},J0=null;function Ml(){return J0=J0||new qr}function vv(n){_r.call(this,Oi.Ma,n)}function lf(n){const t=Ml();cs(t,new vv(t,n))}function X0(n,t){_r.call(this,Oi.STAT_EVENT,n),this.stat=t}function or(n){const t=Ml();cs(t,new X0(t,n))}function fm(n,t){_r.call(this,Oi.Na,n),this.size=t}function Gd(n,t){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return vn.setTimeout(function(){n()},t)}Oi.Ma="serverreachability",Bi(vv,_r),Oi.STAT_EVENT="statevent",Bi(X0,_r),Oi.Na="timingevent",Bi(fm,_r);var pm={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},hu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function vp(){}function ar(){}vp.prototype.h=null;var bv,qi={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function cf(){_r.call(this,"d")}function yv(){_r.call(this,"c")}function $d(){}function Wd(n,t,e,i){this.l=n,this.j=t,this.m=e,this.X=i||1,this.V=new af(this),this.P=Cv,this.W=new lo(n=am?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new eb}function eb(){this.i=null,this.g="",this.h=!1}Bi(cf,_r),Bi(yv,_r),Bi($d,vp),$d.prototype.g=function(){return new XMLHttpRequest},$d.prototype.i=function(){return{}},bv=new $d;var Cv=45e3,uf={},fu={};function bp(n,t,e){n.K=1,n.v=hf(pu(t)),n.s=e,n.U=!0,tb(n,null)}function tb(n,t){n.F=Date.now(),Ol(n),n.A=pu(n.v);var e=n.A,i=n.X;Array.isArray(i)||(i=[String(i)]),Iv(e.h,"t",i),n.C=0,e=n.l.H,n.h=new eb,n.g=Kd(n.l,e?t:null,!n.s),0<n.O&&(n.L=new cS(As(n.Ia,n,n.g),n.O)),K0(n.V,n.g,"readystatechange",n.gb),t=n.H?L0(n.H):{},n.s?(n.u||(n.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,t)):(n.u="GET",n.g.ea(n.A,n.u,null,t)),lf(1),function Vw(n,t,e,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),p=0;p<d.length;p++){var v=d[p].split("=");if(1<v.length){var E=v[0];v=v[1];var S=E.split("_");c=2<=S.length&&"type"==S[1]?c+(E+"=")+v+"&":c+(E+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+e+"\n"+c})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Cp(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function gm(n,t,e){let r,i=!0;for(;!n.I&&n.C<e.length;){if(r=xa(n,e),r==fu){4==t&&(n.o=4,or(14),i=!1),cn(n.j,n.m,null,"[Incomplete Response]");break}if(r==uf){n.o=4,or(15),cn(n.j,n.m,e,"[Invalid Chunk]"),i=!1;break}cn(n.j,n.m,r,null),Nl(n,r)}Cp(n)&&r!=fu&&r!=uf&&(n.h.g="",n.C=0),4!=t||0!=e.length||n.h.h||(n.o=1,or(16),i=!1),n.i=n.i&&i,i?0<e.length&&!n.aa&&(n.aa=!0,(t=n.l).g==n&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+e.length),nd(t),t.L=!0,or(11))):(cn(n.j,n.m,e,"[Invalid Chunked Response]"),ed(n),df(n))}function xa(n,t){var e=n.C,i=t.indexOf("\n",e);return-1==i?fu:(e=Number(t.substring(e,i)),isNaN(e)?uf:(i+=1)+e>t.length?fu:(t=t.substr(i,e),n.C=i+e,t))}function Ol(n){n.Y=Date.now()+n.P,wv(n,n.P)}function wv(n,t){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Gd(As(n.eb,n),t)}function wp(n){n.B&&(vn.clearTimeout(n.B),n.B=null)}function df(n){0==n.l.G||n.I||id(n.l,n)}function ed(n){wp(n);var t=n.L;t&&"function"==typeof t.na&&t.na(),n.L=null,mv(n.W),Ko(n.V),n.g&&(t=n.g,n.g=null,t.abort(),t.na())}function Nl(n,t){try{var e=n.l;if(0!=e.G&&(e.g==n||vm(e.i,n)))if(e.I=n.N,!n.J&&vm(e.i,n)&&3==e.G){try{var i=e.Ca.g.parse(t)}catch(v){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(e.u)e.ta=r[1],0<e.ta-e.U&&37500>r[2]&&e.N&&0==e.A&&!e.v&&(e.v=Gd(As(e.ab,e),6e3));else{if(e.g){if(!(e.g.F+3e3<n.F))break e;Dc(e),Sm(e)}Rp(e),or(18)}if(1>=ob(e.i)&&e.ka){try{e.ka()}catch(v){}e.ka=void 0}}else el(e,11)}else if((n.J||e.g==n)&&Dc(e),!Kh(t))for(r=e.Ca.g.parse(t),t=0;t<r.length;t++){let v=r[t];if(e.U=v[0],v=v[1],2==e.G)if("c"==v[0]){e.J=v[1],e.la=v[2];const E=v[3];null!=E&&(e.ma=E,e.h.info("VER="+e.ma));const S=v[4];null!=S&&(e.za=S,e.h.info("SVER="+e.za));const N=v[5];null!=N&&"number"==typeof N&&0<N&&(e.K=i=1.5*N,e.h.info("backChannelRequestTimeoutMs_="+i)),i=e;const F=n.g;if(F){const G=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(G){var s=i.i;!s.g&&(xs(G,"spdy")||xs(G,"quic")||xs(G,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(ab(s,s.h),s.h=null))}if(i.D){const J=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;J&&(i.sa=J,lr(i.F,i.D,J))}}e.G=3,e.j&&e.j.xa(),e.$&&(e.O=Date.now()-n.F,e.h.info("Handshake RTT: "+e.O+"ms"));var c=n;if((i=e).oa=_u(i,i.H?i.la:null,i.W),c.J){ym(i.i,c);var d=c,p=i.K;p&&d.setTimeout(p),d.B&&(wp(d),Ol(d)),i.g=c}else Ma(i);0<e.l.length&&Ra(e)}else"stop"!=v[0]&&"close"!=v[0]||el(e,7);else 3==e.G&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?el(e,7):qd(e):"noop"!=v[0]&&e.j&&e.j.wa(v),e.A=0)}lf(4)}catch(v){}}function kl(n,t){if(n.forEach&&"function"==typeof n.forEach)n.forEach(t,void 0);else if(tm(n)||"string"==typeof n)nm(n,t,void 0);else{if(n.T&&"function"==typeof n.T)var e=n.T();else if(n.R&&"function"==typeof n.R)e=void 0;else if(tm(n)||"string"==typeof n){e=[];for(var i=n.length,r=0;r<i;r++)e.push(r)}else for(r in e=[],i=0,n)e[i++]=r;i=function Ep(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(tm(n)){for(var t=[],e=n.length,i=0;i<e;i++)t.push(n[i]);return t}for(i in t=[],e=0,n)t[e++]=n[i];return t}(n),r=i.length;for(var s=0;s<r;s++)t.call(void 0,i[s],e&&e[s],n)}}function fn(n,t){this.h={},this.g=[],this.i=0;var e=arguments.length;if(1<e){if(e%2)throw Error("Uneven number of arguments");for(var i=0;i<e;i+=2)this.set(arguments[i],arguments[i+1])}else if(n)if(n instanceof fn)for(e=n.T(),i=0;i<e.length;i++)this.set(e[i],n.get(e[i]));else for(i in n)this.set(i,n[i])}function Ev(n){if(n.i!=n.g.length){for(var t=0,e=0;t<n.g.length;){var i=n.g[t];Zr(n.h,i)&&(n.g[e++]=i),t++}n.g.length=e}if(n.i!=n.g.length){var r={};for(e=t=0;t<n.g.length;)Zr(r,i=n.g[t])||(n.g[e++]=i,r[i]=1),t++;n.g.length=e}}function Zr(n,t){return Object.prototype.hasOwnProperty.call(n,t)}(Ft=Wd.prototype).setTimeout=function(n){this.P=n},Ft.gb=function(n){n=n.target;const t=this.L;t&&3==gu(n)?t.l():this.Ia(n)},Ft.Ia=function(n){try{if(n==this.g)e:{const E=gu(this.g);var t=this.g.Da();const S=this.g.ba();if(!(3>E)&&(3!=E||am||this.g&&(this.h.h||this.g.ga()||mb(this.g)))){this.I||4!=E||7==t||lf(8==t||0>=S?3:2),wp(this);var e=this.g.ba();this.N=e;t:if(Cp(this)){var i=mb(this.g);n="";var r=i.length,s=4==gu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ed(this),df(this);var c="";break t}this.h.i=new vn.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,n+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ga();if(this.i=200==e,function jd(n,t,e,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+e+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.X,E,e),this.i){if(this.$&&!this.J){t:{if(this.g){var d,p=this.g;if((d=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Kh(d)){var v=d;break t}}v=null}if(!(e=v)){this.i=!1,this.o=3,or(12),ed(this),df(this);break e}cn(this.j,this.m,e,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Nl(this,e)}this.U?(gm(this,E,c),am&&this.i&&3==E&&(K0(this.V,this.W,"tick",this.fb),this.W.start())):(cn(this.j,this.m,c,null),Nl(this,c)),4==E&&ed(this),this.i&&!this.I&&(4==E?id(this.l,this):(this.i=!1,Ol(this)))}else 400==e&&0<c.indexOf("Unknown SID")?(this.o=3,or(12)):(this.o=0,or(13)),ed(this),df(this)}}}catch(E){}},Ft.fb=function(){if(this.g){var n=gu(this.g),t=this.g.ga();this.C<t.length&&(wp(this),gm(this,n,t),this.i&&4!=n&&Ol(this))}},Ft.cancel=function(){this.I=!0,ed(this)},Ft.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Q0(n,t){n.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(lf(3),or(17)),ed(this),this.o=2,df(this)):wv(this,this.Y-n)},(Ft=fn.prototype).R=function(){Ev(this);for(var n=[],t=0;t<this.g.length;t++)n.push(this.h[this.g[t]]);return n},Ft.T=function(){return Ev(this),this.g.concat()},Ft.get=function(n,t){return Zr(this.h,n)?this.h[n]:t},Ft.set=function(n,t){Zr(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=t},Ft.forEach=function(n,t){for(var e=this.T(),i=0;i<e.length;i++){var r=e[i],s=this.get(r);n.call(t,s,r,this)}};var mm=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(n,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Nn){this.g=void 0!==t?t:n.g,zd(this,n.j),this.s=n.s,td(this,n.i),Tp(this,n.m),this.l=n.l,t=n.h;var e=new Dp;e.i=t.i,t.g&&(e.g=new fn(t.g),e.h=t.h),Dv(this,e),this.o=n.o}else n&&(e=String(n).match(mm))?(this.g=!!t,zd(this,e[1]||"",!0),this.s=ff(e[2]||""),td(this,e[3]||"",!0),Tp(this,e[4]),this.l=ff(e[5]||"",!0),Dv(this,e[6]||"",!0),this.o=ff(e[7]||"")):(this.g=!!t,this.h=new Dp(null,this.g))}function pu(n){return new Nn(n)}function zd(n,t,e){n.j=e?ff(t,!0):t,n.j&&(n.j=n.j.replace(/:$/,""))}function td(n,t,e){n.i=e?ff(t,!0):t}function Tp(n,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);n.m=t}else n.m=null}function Dv(n,t,e){t instanceof Dp?(n.h=t,function Ao(n,t){t&&!n.j&&(Ec(n),n.i=null,n.g.forEach(function(e,i){var r=i.toLowerCase();i!=r&&(Pl(this,i),Iv(this,r,e))},n)),n.j=t}(n.h,n.g)):(e||(t=wc(t,$w)),n.h=new Dp(t,n.g))}function lr(n,t,e){n.h.set(t,e)}function hf(n){return lr(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ff(n,t){return n?t?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function wc(n,t,e){return"string"==typeof n?(n=encodeURI(n).replace(t,nb),e&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function nb(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Nn.prototype.toString=function(){var n=[],t=this.j;t&&n.push(wc(t,ib,!0),":");var e=this.i;return(e||"file"==t)&&(n.push("//"),(t=this.s)&&n.push(wc(t,ib,!0),"@"),n.push(encodeURIComponent(String(e)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(e=this.m)&&n.push(":",String(e))),(e=this.l)&&(this.i&&"/"!=e.charAt(0)&&n.push("/"),n.push(wc(e,"/"==e.charAt(0)?pf:Gw,!0))),(e=this.h.toString())&&n.push("?",e),(e=this.o)&&n.push("#",wc(e,Sv)),n.join("")};var ib=/[#\/\?@]/g,Gw=/[#\?:]/g,pf=/[#\?]/g,$w=/[#\?@]/g,Sv=/#/g;function Dp(n,t){this.h=this.g=null,this.i=n||null,this.j=!!t}function Ec(n){n.g||(n.g=new fn,n.h=0,n.i&&function Tv(n,t){if(n){n=n.split("&");for(var e=0;e<n.length;e++){var i=n[e].indexOf("="),r=null;if(0<=i){var s=n[e].substring(0,i);r=n[e].substring(i+1)}else s=n[e];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Pl(n,t){Ec(n),t=cr(n,t),Zr(n.g.h,t)&&(n.i=null,n.h-=n.g.get(t).length,Zr((n=n.g).h,t)&&(delete n.h[t],n.i--,n.g.length>2*n.i&&Ev(n)))}function _m(n,t){return Ec(n),t=cr(n,t),Zr(n.g.h,t)}function Iv(n,t,e){Pl(n,t),0<e.length&&(n.i=null,n.g.set(cr(n,t),rm(e)),n.h+=e.length)}function cr(n,t){return t=String(t),n.j&&(t=t.toLowerCase()),t}function sb(n){this.l=n||Ww,n=vn.PerformanceNavigationTiming?0<(n=vn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(vn.g&&vn.g.Ea&&vn.g.Ea()&&vn.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ft=Dp.prototype).add=function(n,t){Ec(this),this.i=null,n=cr(this,n);var e=this.g.get(n);return e||this.g.set(n,e=[]),e.push(t),this.h+=1,this},Ft.forEach=function(n,t){Ec(this),this.g.forEach(function(e,i){nm(e,function(r){n.call(t,r,i,this)},this)},this)},Ft.T=function(){Ec(this);for(var n=this.g.R(),t=this.g.T(),e=[],i=0;i<t.length;i++)for(var r=n[i],s=0;s<r.length;s++)e.push(t[i]);return e},Ft.R=function(n){Ec(this);var t=[];if("string"==typeof n)_m(this,n)&&(t=im(t,this.g.get(cr(this,n))));else{n=this.g.R();for(var e=0;e<n.length;e++)t=im(t,n[e])}return t},Ft.set=function(n,t){return Ec(this),this.i=null,_m(this,n=cr(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[t]),this.h+=1,this},Ft.get=function(n,t){return n&&0<(n=this.R(n)).length?String(n[0]):t},Ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],t=this.g.T(),e=0;e<t.length;e++){var i=t[e],r=encodeURIComponent(String(i));i=this.R(i);for(var s=0;s<i.length;s++){var c=r;""!==i[s]&&(c+="="+encodeURIComponent(String(i[s]))),n.push(c)}}return this.i=n.join("&")};var Ww=10;function Av(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ob(n){return n.h?1:n.g?n.g.size:0}function vm(n,t){return n.h?n.h==t:!!n.g&&n.g.has(t)}function ab(n,t){n.g?n.g.add(t):n.h=t}function ym(n,t){n.h&&n.h==t?n.h=null:n.g&&n.g.has(t)&&n.g.delete(t)}function lb(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let t=n.i;for(const e of n.g.values())t=t.concat(e.D);return t}return rm(n.i)}function xv(){}function uS(){this.g=new xv}function zw(n,t,e){const i=e||"";try{kl(n,function(r,s){let c=r;dp(r)&&(c=pp(r)),t.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Cm(n,t,e,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function gf(n){this.l=n.$b||null,this.j=n.ib||!1}function Sp(n,t){qr.call(this),this.D=n,this.u=t,this.m=void 0,this.readyState=cb,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}sb.prototype.cancel=function(){if(this.i=lb(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},xv.prototype.stringify=function(n){return vn.JSON.stringify(n,void 0)},xv.prototype.parse=function(n){return vn.JSON.parse(n,void 0)},Bi(gf,vp),gf.prototype.g=function(){return new Sp(this.l,this.j)},gf.prototype.i=function(n){return function(){return n}}({}),Bi(Sp,qr);var cb=0;function Ys(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function wm(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Em(n)}function Em(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ft=Sp.prototype).open=function(n,t){if(this.readyState!=cb)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=t,this.readyState=1,Em(this)},Ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(t.body=n),(this.D||vn).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,wm(this)),this.readyState=cb},Ft.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Em(this)),this.g&&(this.readyState=3,Em(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==vn.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ys(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ft.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var t=n.value?n.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!n.done}))&&(this.response=this.responseText+=t)}n.done?wm(this):Em(this),3==this.readyState&&Ys(this)}},Ft.Ua=function(n){this.g&&(this.response=this.responseText=n,wm(this))},Ft.Ta=function(n){this.g&&(this.response=n,wm(this))},Ft.ha=function(){this.g&&wm(this)},Ft.setRequestHeader=function(n,t){this.v.append(n,t)},Ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],t=this.h.entries();for(var e=t.next();!e.done;)n.push((e=e.value)[0]+": "+e[1]),e=t.next();return n.join("\r\n")},Object.defineProperty(Sp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ub=vn.JSON.parse;function Hr(n){qr.call(this),this.headers=new fn,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Rv,this.K=this.L=!1}Bi(Hr,qr);var Rv="",db=/^https?$/i,qw=["POST","PUT"];function Mv(n){return"content-type"==n.toLowerCase()}function fb(n,t){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=t,n.m=5,Tm(n),Dm(n)}function Tm(n){n.D||(n.D=!0,cs(n,"complete"),cs(n,"error"))}function pb(n){if(n.h&&void 0!==lv&&(!n.C[1]||4!=gu(n)||2!=n.ba()))if(n.v&&4==gu(n))_v(n.Fa,0,n);else if(cs(n,"readystatechange"),4==gu(n)){n.h=!1;try{const d=n.ba();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var e;if(!(e=t)){var i;if(i=0===d){var r=String(n.H).match(mm)[1]||null;if(!r&&vn.self&&vn.self.location){var s=vn.self.location.protocol;r=s.substr(0,s.length-1)}i=!db.test(r?r.toLowerCase():"")}e=i}if(e)cs(n,"complete"),cs(n,"success");else{n.m=6;try{var c=2<gu(n)?n.g.statusText:""}catch(p){c=""}n.j=c+" ["+n.ba()+"]",Tm(n)}}finally{Dm(n)}}}function Dm(n,t){if(n.g){gb(n);const e=n.g,i=n.C[0]?em:null;n.g=null,n.C=null,t||cs(n,"ready");try{e.onreadystatechange=i}catch(r){}}}function gb(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(vn.clearTimeout(n.A),n.A=null)}function gu(n){return n.g?n.g.readyState:0}function mb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Rv:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(t){return null}}function mf(n,t,e){e:{for(i in e){var i=!1;break e}i=!0}i||(e=function Zw(n){let t="";return F0(n,function(e,i){t+=i,t+=":",t+=e,t+="\r\n"}),t}(e),"string"==typeof n?null!=e&&encodeURIComponent(String(e)):lr(n,t,e))}function Tc(n,t,e){return e&&e.internalChannelParams&&e.internalChannelParams[n]||t}function _b(n){this.za=0,this.l=[],this.h=new _p,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Tc("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Tc("baseRetryDelayMs",5e3,n),this.$a=Tc("retryDelaySeedMs",1e4,n),this.Ya=Tc("forwardChannelMaxRetries",2,n),this.ra=Tc("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new sb(n&&n.concurrentRequestLimit),this.Ca=new uS,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function qd(n){if(vb(n),3==n.G){var t=n.V++,e=pu(n.F);lr(e,"SID",n.J),lr(e,"RID",t),lr(e,"TYPE","terminate"),Fl(n,e),(t=new Wd(n,n.h,t,void 0)).K=2,t.v=hf(pu(e)),e=!1,vn.navigator&&vn.navigator.sendBeacon&&(e=vn.navigator.sendBeacon(t.v.toString(),"")),!e&&vn.Image&&((new Image).src=t.v,e=!0),e||(t.g=Kd(t.l,null),t.g.ea(t.v)),t.F=Date.now(),Ol(t)}Yd(n)}function Sm(n){n.g&&(nd(n),n.g.cancel(),n.g=null)}function vb(n){Sm(n),n.u&&(vn.clearTimeout(n.u),n.u=null),Dc(n),n.i.cancel(),n.m&&("number"==typeof n.m&&vn.clearTimeout(n.m),n.m=null)}function Ip(n,t){n.l.push(new class{constructor(n,t){this.h=n,this.g=t}}(n.Za++,t)),3==n.G&&Ra(n)}function Ra(n){Av(n.i)||n.m||(n.m=!0,sf(n.Ha,n),n.C=0)}function Ks(n,t){var e;e=t?t.m:n.V++;const i=pu(n.F);lr(i,"SID",n.J),lr(i,"RID",e),lr(i,"AID",n.U),Fl(n,i),n.o&&n.s&&mf(i,n.o,n.s),e=new Wd(n,n.h,e,n.C+1),null===n.o&&(e.H=n.s),t&&(n.l=t.D.concat(n.l)),t=xp(n,e,1e3),e.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),ab(n.i,e),bp(e,i,t)}function Fl(n,t){n.j&&kl({},function(e,i){lr(t,i,e)})}function xp(n,t,e){e=Math.min(n.l.length,e);var i=n.j?As(n.j.Oa,n.j,n):null;e:{var r=n.l;let s=-1;for(;;){const c=["count="+e];-1==s?0<e?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let p=0;p<e;p++){let v=r[p].h;const E=r[p].g;if(v-=s,0>v)s=Math.max(0,r[p].h-100),d=!1;else try{zw(E,c,"req"+v+"_")}catch(S){i&&i(E)}}if(d){i=c.join("&");break e}}}return n=n.l.splice(0,e),t.D=n,i}function Ma(n){n.g||n.u||(n.Y=1,sf(n.Ga,n),n.A=0)}function Rp(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Gd(As(n.Ga,n),Zd(n,n.A)),n.A++,0))}function nd(n){null!=n.B&&(vn.clearTimeout(n.B),n.B=null)}function mu(n){n.g=new Wd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var t=pu(n.oa);lr(t,"RID","rpc"),lr(t,"SID",n.J),lr(t,"CI",n.N?"0":"1"),lr(t,"AID",n.U),Fl(n,t),lr(t,"TYPE","xmlhttp"),n.o&&n.s&&mf(t,n.o,n.s),n.K&&n.g.setTimeout(n.K);var e=n.g;n=n.la,e.K=1,e.v=hf(pu(t)),e.s=null,e.U=!0,tb(e,n)}function Dc(n){null!=n.v&&(vn.clearTimeout(n.v),n.v=null)}function id(n,t){var e=null;if(n.g==t){Dc(n),nd(n),n.g=null;var i=2}else{if(!vm(n.i,t))return;e=t.D,ym(n.i,t),i=1}if(n.I=t.N,0!=n.G)if(t.i)if(1==i){e=t.s?t.s.length:0,t=Date.now()-t.F;var r=n.C;cs(i=Ml(),new fm(i,e,t,r)),Ra(n)}else Ma(n);else if(3==(r=t.o)||0==r&&0<n.I||!(1==i&&function Ap(n,t){return!(ob(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=t.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Gd(As(n.Ha,n,t),Zd(n,n.C)),n.C++,0)))}(n,t)||2==i&&Rp(n)))switch(e&&0<e.length&&(t=n.i,t.i=t.i.concat(e)),r){case 1:el(n,5);break;case 4:el(n,10);break;case 3:el(n,6);break;default:el(n,2)}}function Zd(n,t){let e=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(e*=2),e*t}function el(n,t){if(n.h.info("Error code "+t),2==t){var e=null;n.j&&(e=null);var i=As(n.jb,n);e||(e=new Nn("//www.google.com/images/cleardot.gif"),vn.location&&"http"==vn.location.protocol||zd(e,"https"),hf(e)),function bm(n,t){const e=new _p;if(vn.Image){const i=new Image;i.onload=Bd(Cm,e,i,"TestLoadImage: loaded",!0,t),i.onerror=Bd(Cm,e,i,"TestLoadImage: error",!1,t),i.onabort=Bd(Cm,e,i,"TestLoadImage: abort",!1,t),i.ontimeout=Bd(Cm,e,i,"TestLoadImage: timeout",!1,t),vn.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else t(!1)}(e.toString(),i)}else or(2);n.G=0,n.j&&n.j.va(t),Yd(n),vb(n)}function Yd(n){n.G=0,n.I=-1,n.j&&((0!=lb(n.i).length||0!=n.l.length)&&(n.i.i.length=0,rm(n.l),n.l.length=0),n.j.ua())}function _u(n,t,e){let i=function Hw(n){return n instanceof Nn?pu(n):new Nn(n,void 0)}(e);if(""!=i.i)t&&td(i,t+"."+i.i),Tp(i,i.m);else{const r=vn.location;i=function jw(n,t,e,i){var r=new Nn(null,void 0);return n&&zd(r,n),t&&td(r,t),e&&Tp(r,e),i&&(r.l=i),r}(r.protocol,t?t+"."+r.hostname:r.hostname,+r.port,e)}return n.aa&&F0(n.aa,function(r,s){lr(i,s,r)}),e=n.sa,(t=n.D)&&e&&lr(i,t,e),lr(i,"VER",n.ma),Fl(n,i),i}function Kd(n,t,e){if(t&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Hr(e&&n.Ba&&!n.qa?new gf({ib:!0}):n.qa)).L=n.H,t}function Ov(){}function Mp(){if(Xh&&!(10<=Number(Ow)))throw Error("Environmental error: no available transport.")}function Ui(n,t){qr.call(this),this.g=new _b(t),this.l=n,this.h=t&&t.messageUrlParams||null,n=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(n?n["X-WebChannel-Content-Type"]=t.messageContentType:n={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(n?n["X-WebChannel-Client-Profile"]=t.ya:n={"X-WebChannel-Client-Profile":t.ya}),this.g.P=n,(n=t&&t.httpHeadersOverwriteParam)&&!Kh(n)&&(this.g.o=n),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Kh(t)&&(this.g.D=t,null!==(n=this.h)&&t in n&&t in(n=this.h)&&delete n[t]),this.j=new Qd(this)}function Op(n){cf.call(this);var t=n.__sm__;if(t){e:{for(const e in t){n=e;break e}n=void 0}(this.i=n)&&(n=this.i,t=null!==t&&n in t?t[n]:void 0),this.data=t}else this.data=n}function Nv(){yv.call(this),this.status=1}function Qd(n){this.g=n}(Ft=Hr.prototype).ea=function(n,t,e,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);t=t?t.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bv.g(),this.C=function yp(n){return n.h||(n.h=n.i())}(this.u?this.u:bv),this.g.onreadystatechange=As(this.Fa,this);try{this.F=!0,this.g.open(t,String(n),!0),this.F=!1}catch(s){return void fb(this,s)}n=e||"";const r=new fn(this.headers);i&&kl(i,function(s,c){r.set(c,s)}),i=function P0(n){e:{var t=Mv;const e=n.length,i="string"==typeof n?n.split(""):n;for(let r=0;r<e;r++)if(r in i&&t.call(void 0,i[r],r,n)){t=r;break e}t=-1}return 0>t?null:"string"==typeof n?n.charAt(t):n[t]}(r.T()),e=vn.FormData&&n instanceof vn.FormData,!(0<=bc(qw,t))||i||e||r.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.forEach(function(s,c){this.g.setRequestHeader(c,s)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{gb(this),0<this.B&&((this.K=function hb(n){return Xh&&function aS(){return function U0(n){var t=oS;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=n(9)}(function(){let n=0;const t=Aw(String(fv)).split("."),e=Aw("9").split("."),i=Math.max(t.length,e.length);for(let c=0;0==n&&c<i;c++){var r=t[c]||"",s=e[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=Qh(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||Qh(0==r[2].length,0==s[2].length)||Qh(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=As(this.pa,this)):this.A=_v(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){fb(this,s)}},Ft.pa=function(){void 0!==lv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,cs(this,"timeout"),this.abort(8))},Ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,cs(this,"complete"),cs(this,"abort"),Dm(this))},Ft.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Dm(this,!0)),Hr.Z.M.call(this)},Ft.Fa=function(){this.s||(this.F||this.v||this.l?pb(this):this.cb())},Ft.cb=function(){pb(this)},Ft.ba=function(){try{return 2<gu(this)?this.g.status:-1}catch(n){return-1}},Ft.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ft.Qa=function(n){if(this.g){var t=this.g.responseText;return n&&0==t.indexOf(n)&&(t=t.substring(n.length)),ub(t)}},Ft.Da=function(){return this.m},Ft.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ft=_b.prototype).ma=8,Ft.G=1,Ft.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(t){}},Ft.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const r=new Wd(this,this.h,n,void 0);let s=this.s;if(this.P&&(s?(s=L0(s),B0(s,this.P)):s=this.P),null===this.o&&(r.H=s),this.ja)e:{for(var t=0,e=0;e<this.l.length;e++){var i=this.l[e];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=e;break e}if(4096===t||e===this.l.length-1){t=e+1;break e}}t=1e3}else t=1e3;t=xp(this,r,t),lr(e=pu(this.F),"RID",n),lr(e,"CVER",22),this.D&&lr(e,"X-HTTP-Session-Id",this.D),Fl(this,e),this.o&&s&&mf(e,this.o,s),ab(this.i,r),this.Ra&&lr(e,"TYPE","init"),this.ja?(lr(e,"$req",t),lr(e,"SID","null"),r.$=!0,bp(r,e,null)):bp(r,e,t),this.G=2}}else 3==this.G&&(n?Ks(this,n):0==this.l.length||Av(this.i)||Ks(this))},Ft.Ga=function(){if(this.u=null,mu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Gd(As(this.bb,this),n)}},Ft.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,or(10),Sm(this),mu(this))},Ft.ab=function(){null!=this.v&&(this.v=null,Sm(this),Rp(this),or(19))},Ft.jb=function(n){n?(this.h.info("Successfully pinged google.com"),or(2)):(this.h.info("Failed to ping google.com"),or(1))},(Ft=Ov.prototype).xa=function(){},Ft.wa=function(){},Ft.va=function(){},Ft.ua=function(){},Ft.Oa=function(){},Mp.prototype.g=function(n,t){return new Ui(n,t)},Bi(Ui,qr),Ui.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,t=this.l,e=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),sf(As(n.hb,n,t))),or(0),n.W=t,n.aa=e||{},n.N=n.X,n.F=_u(n,null,n.W),Ra(n)},Ui.prototype.close=function(){qd(this.g)},Ui.prototype.u=function(n){if("string"==typeof n){var t={};t.__data__=n,Ip(this.g,t)}else this.v?((t={}).__data__=pp(n),Ip(this.g,t)):Ip(this.g,n)},Ui.prototype.M=function(){this.g.j=null,delete this.j,qd(this.g),delete this.g,Ui.Z.M.call(this)},Bi(Op,cf),Bi(Nv,yv),Bi(Qd,Ov),Qd.prototype.xa=function(){cs(this.g,"a")},Qd.prototype.wa=function(n){cs(this.g,new Op(n))},Qd.prototype.va=function(n){cs(this.g,new Nv(n))},Qd.prototype.ua=function(){cs(this.g,"b")},Mp.prototype.createWebChannel=Mp.prototype.g,Ui.prototype.send=Ui.prototype.u,Ui.prototype.open=Ui.prototype.m,Ui.prototype.close=Ui.prototype.close,pm.NO_ERROR=0,pm.TIMEOUT=8,pm.HTTP_ERROR=6,hu.COMPLETE="complete",ar.EventType=qi,qi.OPEN="a",qi.CLOSE="b",qi.ERROR="c",qi.MESSAGE="d",qr.prototype.listen=qr.prototype.N,Hr.prototype.listenOnce=Hr.prototype.O,Hr.prototype.getLastError=Hr.prototype.La,Hr.prototype.getLastErrorCode=Hr.prototype.Da,Hr.prototype.getStatus=Hr.prototype.ba,Hr.prototype.getResponseJson=Hr.prototype.Qa,Hr.prototype.getResponseText=Hr.prototype.ga,Hr.prototype.send=Hr.prototype.ea;var yb=yc.createWebChannelTransport=function(){return new Mp},bb=yc.getStatEventTarget=function(){return Ml()},_f=yc.ErrorCode=pm,Yw=yc.EventType=hu,Im=yc.Event=Oi,Cb=yc.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},wb=yc.FetchXmlHttpFactory=gf,Np=yc.WebChannel=ar,Kw=yc.XhrIo=Hr;const kv="@firebase/firestore";class Rs{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs("google-credentials-uid"),Rs.FIRST_PARTY=new Rs("first-party-uid"),Rs.MOCK_USER=new Rs("mock-user");let vf="9.8.0";const vu=new Rl.Yd("@firebase/firestore");function kp(){return vu.logLevel}function pt(n,...t){if(vu.logLevel<=Rl.in.DEBUG){const e=t.map(Pp);vu.debug(`Firestore (${vf}): ${n}`,...e)}}function Yr(n,...t){if(vu.logLevel<=Rl.in.ERROR){const e=t.map(Pp);vu.error(`Firestore (${vf}): ${n}`,...e)}}function Jd(n,...t){if(vu.logLevel<=Rl.in.WARN){const e=t.map(Pp);vu.warn(`Firestore (${vf}): ${n}`,...e)}}function Pp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(e){return n}}function Ht(n="Unexpected state"){const t=`FIRESTORE (${vf}) INTERNAL ASSERTION FAILED: `+n;throw Yr(t),new Error(t)}function pn(n,t){n||Ht()}function At(n,t){return n}const ke={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ot extends z.ZR{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qs{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}class Eb{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class yf{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Rs.UNAUTHENTICATED))}shutdown(){}}class Qw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}}class Tb{constructor(t){this.t=t,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){var i=this;let r=this.i;const s=v=>this.i!==r?(r=this.i,e(v)):Promise.resolve();let c=new Qs;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Qs,t.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const v=c;t.enqueueRetryable((0,Pe.Z)(function*(){yield v.promise,yield s(i.currentUser)}))},p=v=>{pt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=v,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(v=>p(v)),setTimeout(()=>{if(!this.auth){const v=this.t.getImmediate({optional:!0});v?p(v):(pt("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Qs)}},0),d()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(pt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(pn("string"==typeof i.accessToken),new Eb(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return pn(null===t||"string"==typeof t),new Rs(t)}}class Jw{constructor(t,e,i){this.type="FirstParty",this.user=Rs.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",e);const r=t.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),i&&this.headers.set("X-Goog-Iam-Authorization-Token",i)}}class Db{constructor(t,e,i){this.h=t,this.l=e,this.m=i}getToken(){return Promise.resolve(new Jw(this.h,this.l,this.m))}start(t,e){t.enqueueRetryable(()=>e(Rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Fp{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Xw{constructor(t){this.g=t,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(t,e){const i=s=>{null!=s.error&&pt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.p;return this.p=s.token,pt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};const r=s=>{pt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.g.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.g.getImmediate({optional:!0});s?r(s):pt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(pn("string"==typeof e.token),this.p=e.token,new Fp(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Oa{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=i=>this.I(i),this.T=i=>e.writeSequenceNumber(i))}I(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.T&&this.T(t),t}}function h(n){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}Oa.A=-1;class m{static R(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let i="";for(;i.length<20;){const r=h(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}}function C(n,t){return n<t?-1:n>t?1:0}function M(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}function L(n){return n+"\0"}class ${constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ot(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ot(ke.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ot(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ot(ke.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return $.fromMillis(Date.now())}static fromDate(t){return $.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new $(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?C(this.nanoseconds,t.nanoseconds):C(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class K{constructor(t){this.timestamp=t}static fromTimestamp(t){return new K(t)}static min(){return new K(new $(0,0))}static max(){return new K(new $(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function ae(n){let t=0;for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function fe(n,t){for(const e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Xe(n){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}class qe{constructor(t,e,i){void 0===e?e=0:e>t.length&&Ht(),void 0===i?i=t.length-e:i>t.length-e&&Ht(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return 0===qe.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof qe?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const i=Math.min(t.length,e.length);for(let r=0;r<i;r++){const s=t.get(r),c=e.get(r);if(s<c)return-1;if(s>c)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Ve extends qe{construct(t,e,i){return new Ve(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...t){const e=[];for(const i of t){if(i.indexOf("//")>=0)throw new ot(ke.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new Ve(e)}static emptyPath(){return new Ve([])}}const xt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends qe{construct(t,e,i){return new bt(t,e,i)}static isValidIdentifier(t){return xt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new bt(["__name__"])}static fromServerFormat(t){const e=[];let i="",r=0;const s=()=>{if(0===i.length)throw new ot(ke.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""};let c=!1;for(;r<t.length;){const d=t[r];if("\\"===d){if(r+1===t.length)throw new ot(ke.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const p=t[r+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new ot(ke.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=p,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new ot(ke.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new bt(e)}static emptyPath(){return new bt([])}}class Kt{constructor(t){this.fields=t,t.sort(bt.comparator)}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return M(this.fields,t.fields,(e,i)=>e.isEqual(i))}}class Pt{constructor(t){this.binaryString=t}static fromBase64String(t){const e=atob(t);return new Pt(e)}static fromUint8Array(t){const e=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(t);return new Pt(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let i=0;i<t.length;i++)e[i]=t.charCodeAt(i);return e}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return C(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const Vn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function yn(n){if(pn(!!n),"string"==typeof n){let t=0;const e=Vn.exec(n);if(pn(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vr(n){return"string"==typeof n?Pt.fromBase64String(n):Pt.fromUint8Array(n)}function Jo(n){var t,e;return"server_timestamp"===(null===(e=((null===(t=null==n?void 0:n.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===e?void 0:e.stringValue)}function Ar(n){const t=n.mapValue.fields.__previous_value__;return Jo(t)?Ar(t):t}function Ms(n){const t=yn(n.mapValue.fields.__local_write_time__.timestampValue);return new $(t.seconds,t.nanos)}class tl{constructor(t,e,i,r,s,c,d,p){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=p}}class nl{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new nl("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof nl&&t.projectId===this.projectId&&t.database===this.database}}function Am(n){return null==n}function Lp(n){return 0===n&&1/n==-1/0}function tE(n){return"number"==typeof n&&Number.isInteger(n)&&!Lp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Tt{constructor(t){this.path=t}static fromPath(t){return new Tt(Ve.fromString(t))}static fromName(t){return new Tt(Ve.fromString(t).popFirst(5))}static empty(){return new Tt(Ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Ve.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Ve.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Tt(new Ve(t.slice()))}}const rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},xm={nullValue:"NULL_VALUE"};function Bp(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jo(n)?4:sE(n)?9007199254740991:10:Ht()}function yu(n,t){if(n===t)return!0;const e=Bp(n);if(e!==Bp(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return Ms(n).isEqual(Ms(t));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=yn(i.timestampValue),c=yn(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return r=t,vr(n.bytesValue).isEqual(vr(r.bytesValue));case 7:return n.referenceValue===t.referenceValue;case 8:return function(i,r){return Hn(i.geoPointValue.latitude)===Hn(r.geoPointValue.latitude)&&Hn(i.geoPointValue.longitude)===Hn(r.geoPointValue.longitude)}(n,t);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Hn(i.integerValue)===Hn(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Hn(i.doubleValue),c=Hn(r.doubleValue);return s===c?Lp(s)===Lp(c):isNaN(s)&&isNaN(c)}return!1}(n,t);case 9:return M(n.arrayValue.values||[],t.arrayValue.values||[],yu);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(ae(s)!==ae(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!yu(s[d],c[d])))return!1;return!0}(n,t);default:return Ht()}var r}function Rm(n,t){return void 0!==(n.values||[]).find(e=>yu(e,t))}function sd(n,t){if(n===t)return 0;const e=Bp(n),i=Bp(t);if(e!==i)return C(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return C(n.booleanValue,t.booleanValue);case 2:return function(r,s){const c=Hn(r.integerValue||r.doubleValue),d=Hn(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,t);case 3:return nE(n.timestampValue,t.timestampValue);case 4:return nE(Ms(n),Ms(t));case 5:return C(n.stringValue,t.stringValue);case 6:return function(r,s){const c=vr(r),d=vr(s);return c.compareTo(d)}(n.bytesValue,t.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let p=0;p<c.length&&p<d.length;p++){const v=C(c[p],d[p]);if(0!==v)return v}return C(c.length,d.length)}(n.referenceValue,t.referenceValue);case 8:return function(r,s){const c=C(Hn(r.latitude),Hn(s.latitude));return 0!==c?c:C(Hn(r.longitude),Hn(s.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let p=0;p<c.length&&p<d.length;++p){const v=sd(c[p],d[p]);if(v)return v}return C(c.length,d.length)}(n.arrayValue,t.arrayValue);case 10:return function(r,s){if(r===rd.mapValue&&s===rd.mapValue)return 0;if(r===rd.mapValue)return 1;if(s===rd.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),p=s.fields||{},v=Object.keys(p);d.sort(),v.sort();for(let E=0;E<d.length&&E<v.length;++E){const S=C(d[E],v[E]);if(0!==S)return S;const N=sd(c[d[E]],p[v[E]]);if(0!==N)return N}return C(d.length,v.length)}(n.mapValue,t.mapValue);default:throw Ht()}}function nE(n,t){if("string"==typeof n&&"string"==typeof t&&n.length===t.length)return C(n,t);const e=yn(n),i=yn(t),r=C(e.seconds,i.seconds);return 0!==r?r:C(e.nanos,i.nanos)}function Mm(n){return Sb(n)}function Sb(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=yn(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vr(n.bytesValue).toBase64():"referenceValue"in n?Tt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(t=n.geoPointValue).latitude},${t.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=Sb(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${Sb(i.fields[d])}`;return s+"}"}(n.mapValue):Ht();var t}function bf(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Fv(n){return!!n&&"integerValue"in n}function Cf(n){return!!n&&"arrayValue"in n}function iE(n){return!!n&&"nullValue"in n}function rE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Lv(n){return!!n&&"mapValue"in n}function Om(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const t={mapValue:{fields:{}}};return fe(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=Om(i)),t}if(n.arrayValue){const t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=Om(n.arrayValue.values[e]);return t}return Object.assign({},n)}function sE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function hS(n){return"nullValue"in n?xm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bf(nl.empty(),Tt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Ht()}function fS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bf(nl.empty(),Tt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rd:Ht()}function oE(n,t){const e=sd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?-1:!n.inclusive&&t.inclusive?1:0}function qx(n,t){const e=sd(n.value,t.value);return 0!==e?e:n.inclusive&&!t.inclusive?1:!n.inclusive&&t.inclusive?-1:0}class Xo{constructor(t){this.value=t}static empty(){return new Xo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Lv(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Om(e)}setAll(t){let e=bt.emptyPath(),i={},r=[];t.forEach((c,d)=>{if(!e.isImmediateParentOf(d)){const p=this.getFieldsMap(e);this.applyChanges(p,i,r),i={},r=[],e=d.popLast()}c?i[d.lastSegment()]=Om(c):r.push(d.lastSegment())});const s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){const e=this.field(t.popLast());Lv(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return yu(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Lv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){fe(e,(r,s)=>t[r]=s);for(const r of i)delete t[r]}clone(){return new Xo(Om(this.value))}}function pS(n){const t=[];return fe(n.fields,(e,i)=>{const r=new bt([e]);if(Lv(i)){const s=pS(i.mapValue).fields;if(0===s.length)t.push(r);else for(const c of s)t.push(r.child(c))}else t.push(r)}),new Kt(t)}class ur{constructor(t,e,i,r,s,c){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(t){return new ur(t,0,K.min(),K.min(),Xo.empty(),0)}static newFoundDocument(t,e,i){return new ur(t,1,e,K.min(),i,0)}static newNoDocument(t,e){return new ur(t,2,e,K.min(),Xo.empty(),0)}static newUnknownDocument(t,e){return new ur(t,3,e,K.min(),Xo.empty(),2)}convertToFoundDocument(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Xo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Xo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof ur&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ur(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ib{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}}function us(n){return n.fields.find(t=>2===t.kind)}function wf(n){return n.fields.filter(t=>2!==t.kind)}Ib.UNKNOWN_ID=-1;class Ab{constructor(t,e){this.fieldPath=t,this.kind=e}}class Bv{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new Bv(0,Sc.min())}}function aE(n,t){const e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=K.fromTimestamp(1e9===i?new $(e+1,0):new $(e,i));return new Sc(r,Tt.empty(),t)}function Zx(n){return new Sc(n.readTime,n.key,-1)}class Sc{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new Sc(K.min(),Tt.empty(),-1)}static max(){return new Sc(K.max(),Tt.empty(),-1)}}function lE(n,t){let e=n.readTime.compareTo(t.readTime);return 0!==e?e:(e=Tt.comparator(n.documentKey,t.documentKey),0!==e?e:C(n.largestBatchId,t.largestBatchId))}class dr{constructor(t,e){this.comparator=t,this.root=e||xo.EMPTY}insert(t,e){return new dr(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,xo.BLACK,null,null))}remove(t){return new dr(this.comparator,this.root.remove(t,this.comparator).copy(null,null,xo.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const i=this.comparator(t,e.key);if(0===i)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(t,i.key);if(0===r)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){const t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xb(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xb(this.root,t,this.comparator,!1)}getReverseIterator(){return new xb(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xb(this.root,t,this.comparator,!0)}}class xb{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(0===s){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class xo{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=null!=i?i:xo.RED,this.left=null!=r?r:xo.EMPTY,this.right=null!=s?s:xo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new xo(null!=t?t:this.key,null!=e?e:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this;const s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):0===s?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return xo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===e(t,r.key)){if(r.right.isEmpty())return xo.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,xo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,xo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const t=this.left.check();if(t!==this.right.check())throw Ht();return t+(this.isRed()?0:1)}}xo.EMPTY=null,xo.RED=!0,xo.BLACK=!1,xo.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(n,t,e,i,r){return this}insert(n,t,e){return new xo(n,t)}remove(n,t){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class er{constructor(t){this.comparator=t,this.data=new dr(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new gS(this.data.getIterator())}getIteratorFrom(t){return new gS(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof er)||this.size!==t.size)return!1;const e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const t=[];return this.forEach(e=>{t.push(e)}),t}toString(){const t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){const e=new er(this.comparator);return e.data=t,e}}class gS{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Up(n){return n.hasNext()?n.getNext():void 0}class DP{constructor(t,e=null,i=[],r=[],s=null,c=null,d=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.P=null}}function Rb(n,t=null,e=[],i=[],r=null,s=null,c=null){return new DP(n,t,e,i,r,s,c)}function Xd(n){const t=At(n);if(null===t.P){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+Mm(r.value);var r}).join(","),e+="|ob:",e+=t.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),Am(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>Mm(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>Mm(i)).join(",")),t.P=e}return t.P}function Uv(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!vS(n.orderBy[r],t.orderBy[r]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((e=n.filters[r]).op!==(i=t.filters[r]).op||!e.field.isEqual(i.field)||!yu(e.value,i.value))return!1;var e,i;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!jv(n.startAt,t.startAt)&&jv(n.endAt,t.endAt)}function Vv(n){return Tt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function Ll(n,t){return n.filters.filter(e=>e instanceof co&&e.field.isEqual(t))}function Ic(n,t,e){let i=xm,r=!0;for(const s of Ll(n,t)){let c=xm,d=!0;switch(s.op){case"<":case"<=":c=hS(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=xm}oE({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];oE({value:i,inclusive:r},{value:c,inclusive:e.inclusive})<0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}function Ac(n,t,e){let i=rd,r=!0;for(const s of Ll(n,t)){let c=rd,d=!0;switch(s.op){case">=":case">":c=fS(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=rd}qx({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==e)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(t)){const c=e.position[s];qx({value:i,inclusive:r},{value:c,inclusive:e.inclusive})>0&&(i=c,r=e.inclusive);break}return{value:i,inclusive:r}}class co extends class{}{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?"in"===e||"not-in"===e?this.V(t,e,i):new mS(t,e,i):"array-contains"===e?new Qx(t,i):"in"===e?new cE(t,i):"not-in"===e?new Hv(t,i):"array-contains-any"===e?new Jx(t,i):new co(t,e,i)}static V(t,e,i){return"in"===e?new Yx(t,i):new Kx(t,i)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.v(sd(e,this.value)):null!==e&&Bp(this.value)===Bp(e)&&this.v(sd(e,this.value))}v(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ht()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class mS extends co{constructor(t,e,i){super(t,e,i),this.key=Tt.fromName(i.referenceValue)}matches(t){const e=Tt.comparator(t.key,this.key);return this.v(e)}}class Yx extends co{constructor(t,e){super(t,"in",e),this.keys=_S(0,e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}}class Kx extends co{constructor(t,e){super(t,"not-in",e),this.keys=_S(0,e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}}function _S(n,t){var e;return((null===(e=t.arrayValue)||void 0===e?void 0:e.values)||[]).map(i=>Tt.fromName(i.referenceValue))}class Qx extends co{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return Cf(e)&&Rm(e.arrayValue,this.value)}}class cE extends co{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&Rm(this.value.arrayValue,e)}}class Hv extends co{constructor(t,e){super(t,"not-in",e)}matches(t){if(Rm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!Rm(this.value.arrayValue,e)}}class Jx extends co{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!Cf(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>Rm(this.value.arrayValue,i))}}class eh{constructor(t,e){this.position=t,this.inclusive=e}}class Nm{constructor(t,e="asc"){this.field=t,this.dir=e}}function vS(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}function uE(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){const s=t[r],c=n.position[r];if(i=s.field.isKeyField()?Tt.comparator(Tt.fromName(c.referenceValue),e.key):sd(c,e.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function jv(n,t){if(null===n)return null===t;if(null===t||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!yu(n.position[e],t.position[e]))return!1;return!0}class th{constructor(t,e=null,i=[],r=[],s=null,c="F",d=null,p=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=p,this.D=null,this.C=null}}function dE(n,t,e,i,r,s,c,d){return new th(n,t,e,i,r,s,c,d)}function Vp(n){return new th(n)}function km(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Mb(n){for(const t of n.filters)if(t.S())return t.field;return null}function Ob(n){return null!==n.collectionGroup}function Hp(n){const t=At(n);if(null===t.D){t.D=[];const e=Mb(t),i=km(t);if(null!==e&&null===i)e.isKeyField()||t.D.push(new Nm(e)),t.D.push(new Nm(bt.keyField(),"asc"));else{let r=!1;for(const s of t.explicitOrderBy)t.D.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.D.push(new Nm(bt.keyField(),s))}}}return t.D}function Bl(n){const t=At(n);if(!t.C)if("F"===t.limitType)t.C=Rb(t.path,t.collectionGroup,Hp(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of Hp(t))e.push(new Nm(s.field,"desc"===s.dir?"asc":"desc"));const i=t.endAt?new eh(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new eh(t.startAt.position,t.startAt.inclusive):null;t.C=Rb(t.path,t.collectionGroup,e,t.filters,t.limit,i,r)}return t.C}function fE(n,t,e){return new th(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function Pm(n,t){return Uv(Bl(n),Bl(t))&&n.limitType===t.limitType}function pE(n){return`${Xd(Bl(n))}|lt:${n.limitType}`}function Nb(n){return`Query(target=${function od(n){let t=n.path.canonicalString();return null!==n.collectionGroup&&(t+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(t+=`, filters: [${n.filters.map(e=>{return`${(i=e).field.canonicalString()} ${i.op} ${Mm(i.value)}`;var i}).join(", ")}]`),Am(n.limit)||(t+=", limit: "+n.limit),n.orderBy.length>0&&(t+=`, orderBy: [${n.orderBy.map(e=>{return`${(i=e).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(t+=", startAt: ",t+=n.startAt.inclusive?"b:":"a:",t+=n.startAt.position.map(e=>Mm(e)).join(",")),n.endAt&&(t+=", endAt: ",t+=n.endAt.inclusive?"a:":"b:",t+=n.endAt.position.map(e=>Mm(e)).join(",")),`Target(${t})`}(Bl(n))}; limitType=${n.limitType})`}function gE(n,t){return t.isFoundDocument()&&function(e,i){const r=i.key.path;return null!==e.collectionGroup?i.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):Tt.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}(n,t)&&function(e,i){for(const r of e.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,t)&&function(e,i){for(const r of e.filters)if(!r.matches(i))return!1;return!0}(n,t)&&(i=t,!((e=n).startAt&&!function(r,s,c){const d=uE(r,s,c);return r.inclusive?d<=0:d<0}(e.startAt,Hp(e),i)||e.endAt&&!function(r,s,c){const d=uE(r,s,c);return r.inclusive?d>=0:d>0}(e.endAt,Hp(e),i)));var e,i}function yS(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function bS(n){return(t,e)=>{let i=!1;for(const r of Hp(n)){const s=Xx(r,t,e);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function Xx(n,t,e){const i=n.field.isKeyField()?Tt.comparator(t.key,e.key):function(r,s,c){const d=s.data.field(r),p=c.data.field(r);return null!==d&&null!==p?sd(d,p):Ht()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht()}}function CS(n,t){if(n.N){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lp(t)?"-0":t}}function wS(n){return{integerValue:""+n}}function ES(n,t){return tE(t)?wS(t):CS(n,t)}class kb{constructor(){this._=void 0}}function eR(n,t,e){return n instanceof Fm?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(e,t):n instanceof jp?DS(n,t):n instanceof Gp?SS(n,t):function(i,r){const s=TS(i,r),c=IS(s)+IS(i.k);return Fv(s)&&Fv(i.k)?wS(c):CS(i.M,c)}(n,t)}function tR(n,t,e){return n instanceof jp?DS(n,t):n instanceof Gp?SS(n,t):e}function TS(n,t){return n instanceof Lm?Fv(e=t)||(i=e)&&"doubleValue"in i?t:{integerValue:0}:null;var i,e}class Fm extends kb{}class jp extends kb{constructor(t){super(),this.elements=t}}function DS(n,t){const e=mE(t);for(const i of n.elements)e.some(r=>yu(r,i))||e.push(i);return{arrayValue:{values:e}}}class Gp extends kb{constructor(t){super(),this.elements=t}}function SS(n,t){let e=mE(t);for(const i of n.elements)e=e.filter(r=>!yu(r,i));return{arrayValue:{values:e}}}class Lm extends kb{constructor(t,e){super(),this.M=t,this.k=e}}function IS(n){return Hn(n.integerValue||n.doubleValue)}function mE(n){return Cf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Bm{constructor(t,e){this.field=t,this.transform=e}}class xS{constructor(t,e){this.version=t,this.transformResults=e}}class ds{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new ds}static exists(t){return new ds(void 0,t)}static updateTime(t){return new ds(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Gv(n,t){return void 0!==n.updateTime?t.isFoundDocument()&&t.version.isEqual(n.updateTime):void 0===n.exists||n.exists===t.isFoundDocument()}class $v{}function RS(n,t,e){n instanceof Wv?function(i,r,s){const c=i.value.clone(),d=nR(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,t,e):n instanceof $p?function(i,r,s){if(!Gv(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=nR(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(Wp(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,t,e):t.convertToNoDocument(e.version).setHasCommittedMutations()}function Pb(n,t,e){var r;n instanceof Wv?function(i,r,s){if(!Gv(i.precondition,r))return;const c=i.value.clone(),d=Lb(i.fieldTransforms,s,r);c.setAll(d),r.convertToFoundDocument(Ef(r),c).setHasLocalMutations()}(n,t,e):n instanceof $p?function(i,r,s){if(!Gv(i.precondition,r))return;const c=Lb(i.fieldTransforms,s,r),d=r.data;d.setAll(Wp(i)),d.setAll(c),r.convertToFoundDocument(Ef(r),d).setHasLocalMutations()}(n,t,e):Gv(n.precondition,r=t)&&r.convertToNoDocument(K.min())}function _E(n,t){let e=null;for(const i of n.fieldTransforms){const r=t.data.field(i.field),s=TS(i.transform,r||null);null!=s&&(null==e&&(e=Xo.empty()),e.set(i.field,s))}return e||null}function Fb(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&(i=t.fieldTransforms,!!(void 0===(e=n.fieldTransforms)&&void 0===i||e&&i&&M(e,i,(r,s)=>function AS(n,t){return n.field.isEqual(t.field)&&(i=t.transform,(e=n.transform)instanceof jp&&i instanceof jp||e instanceof Gp&&i instanceof Gp?M(e.elements,i.elements,yu):e instanceof Lm&&i instanceof Lm?yu(e.k,i.k):e instanceof Fm&&i instanceof Fm);var e,i}(r,s))))&&(0===n.type?n.value.isEqual(t.value):1!==n.type||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask));var e,i}function Ef(n){return n.isFoundDocument()?n.version:K.min()}class Wv extends $v{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}}class $p extends $v{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}}function Wp(n){const t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){const i=n.data.field(e);t.set(e,i)}}),t}function nR(n,t,e){const i=new Map;pn(n.length===e.length);for(let r=0;r<e.length;r++){const s=n[r],c=s.transform,d=t.data.field(s.field);i.set(s.field,tR(c,d,e[r]))}return i}function Lb(n,t,e){const i=new Map;for(const r of n){const s=r.transform,c=e.data.field(r.field);i.set(r.field,eR(s,c,t))}return i}class Bb extends $v{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}}class Ub extends $v{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}}class MS{constructor(t){this.count=t}}var Js,yt;function OS(n){switch(n){default:return Ht();case ke.CANCELLED:case ke.UNKNOWN:case ke.DEADLINE_EXCEEDED:case ke.RESOURCE_EXHAUSTED:case ke.INTERNAL:case ke.UNAVAILABLE:case ke.UNAUTHENTICATED:return!1;case ke.INVALID_ARGUMENT:case ke.NOT_FOUND:case ke.ALREADY_EXISTS:case ke.PERMISSION_DENIED:case ke.FAILED_PRECONDITION:case ke.ABORTED:case ke.OUT_OF_RANGE:case ke.UNIMPLEMENTED:case ke.DATA_LOSS:return!0}}function NS(n){if(void 0===n)return Yr("GRPC error has no .code"),ke.UNKNOWN;switch(n){case Js.OK:return ke.OK;case Js.CANCELLED:return ke.CANCELLED;case Js.UNKNOWN:return ke.UNKNOWN;case Js.DEADLINE_EXCEEDED:return ke.DEADLINE_EXCEEDED;case Js.RESOURCE_EXHAUSTED:return ke.RESOURCE_EXHAUSTED;case Js.INTERNAL:return ke.INTERNAL;case Js.UNAVAILABLE:return ke.UNAVAILABLE;case Js.UNAUTHENTICATED:return ke.UNAUTHENTICATED;case Js.INVALID_ARGUMENT:return ke.INVALID_ARGUMENT;case Js.NOT_FOUND:return ke.NOT_FOUND;case Js.ALREADY_EXISTS:return ke.ALREADY_EXISTS;case Js.PERMISSION_DENIED:return ke.PERMISSION_DENIED;case Js.FAILED_PRECONDITION:return ke.FAILED_PRECONDITION;case Js.ABORTED:return ke.ABORTED;case Js.OUT_OF_RANGE:return ke.OUT_OF_RANGE;case Js.UNIMPLEMENTED:return ke.UNIMPLEMENTED;case Js.DATA_LOSS:return ke.DATA_LOSS;default:return Ht()}}(yt=Js||(Js={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";class Tf{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,t))return s}has(t){return void 0!==this.get(t)}set(t,e){const i=this.mapKeyFn(t),r=this.inner[i];if(void 0===r)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),i=this.inner[e];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return 1===i.length?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){fe(this.inner,(e,i)=>{for(const[r,s]of i)t(r,s)})}isEmpty(){return Xe(this.inner)}size(){return this.innerSize}}const Vb=new dr(Tt.comparator);function xc(){return Vb}const Hb=new dr(Tt.comparator);function Um(...n){let t=Hb;for(const e of n)t=t.insert(e.key,e);return t}function hr(){return new Tf(n=>n.toString(),(n,t)=>n.isEqual(t))}const SP=new dr(Tt.comparator),kS=new er(Tt.comparator);function Ni(...n){let t=kS;for(const e of n)t=t.add(e);return t}const iR=new er(C);function zv(){return iR}class Vm{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e){const i=new Map;return i.set(t,Hm.createSynthesizedTargetChangeForCurrentChange(t,e)),new Vm(K.min(),i,zv(),xc(),Ni())}}class Hm{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e){return new Hm(Pt.EMPTY_BYTE_STRING,e,Ni(),Ni(),Ni())}}class qv{constructor(t,e,i,r){this.O=t,this.removedTargetIds=e,this.key=i,this.F=r}}class PS{constructor(t,e){this.targetId=t,this.$=e}}class FS{constructor(t,e,i=Pt.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}}class LS{constructor(){this.B=0,this.L=US(),this.U=Pt.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(t){t.approximateByteSize()>0&&(this.K=!0,this.U=t)}H(){let t=Ni(),e=Ni(),i=Ni();return this.L.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:Ht()}}),new Hm(this.U,this.q,t,e,i)}J(){this.K=!1,this.L=US()}Y(t,e){this.K=!0,this.L=this.L.insert(t,e)}X(t){this.K=!0,this.L=this.L.remove(t)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Zv{constructor(t){this.nt=t,this.st=new Map,this.it=xc(),this.rt=BS(),this.ot=new er(C)}ut(t){for(const e of t.O)t.F&&t.F.isFoundDocument()?this.at(e,t.F):this.ct(e,t.key,t.F);for(const e of t.removedTargetIds)this.ct(e,t.key,t.F)}ht(t){this.forEachTarget(t,e=>{const i=this.lt(e);switch(t.state){case 0:this.ft(e)&&i.W(t.resumeToken);break;case 1:i.tt(),i.G||i.J(),i.W(t.resumeToken);break;case 2:i.tt(),i.G||this.removeTarget(e);break;case 3:this.ft(e)&&(i.et(),i.W(t.resumeToken));break;case 4:this.ft(e)&&(this.dt(e),i.W(t.resumeToken));break;default:Ht()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.st.forEach((i,r)=>{this.ft(r)&&e(r)})}_t(t){const e=t.targetId,i=t.$.count,r=this.wt(e);if(r){const s=r.target;if(Vv(s))if(0===i){const c=new Tt(s.path);this.ct(e,c,ur.newNoDocument(c,K.min()))}else pn(1===i);else this.gt(e)!==i&&(this.dt(e),this.ot=this.ot.add(e))}}yt(t){const e=new Map;this.st.forEach((s,c)=>{const d=this.wt(c);if(d){if(s.current&&Vv(d.target)){const p=new Tt(d.target.path);null!==this.it.get(p)||this.It(c,p)||this.ct(c,p,ur.newNoDocument(p,t))}s.j&&(e.set(c,s.H()),s.J())}});let i=Ni();this.rt.forEach((s,c)=>{let d=!0;c.forEachWhile(p=>{const v=this.wt(p);return!v||2===v.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.it.forEach((s,c)=>c.setReadTime(t));const r=new Vm(t,e,this.ot,this.it,i);return this.it=xc(),this.rt=BS(),this.ot=new er(C),r}at(t,e){if(!this.ft(t))return;const i=this.It(t,e.key)?2:0;this.lt(t).Y(e.key,i),this.it=this.it.insert(e.key,e),this.rt=this.rt.insert(e.key,this.Tt(e.key).add(t))}ct(t,e,i){if(!this.ft(t))return;const r=this.lt(t);this.It(t,e)?r.Y(e,1):r.X(e),this.rt=this.rt.insert(e,this.Tt(e).delete(t)),i&&(this.it=this.it.insert(e,i))}removeTarget(t){this.st.delete(t)}gt(t){const e=this.lt(t).H();return this.nt.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Z(t){this.lt(t).Z()}lt(t){let e=this.st.get(t);return e||(e=new LS,this.st.set(t,e)),e}Tt(t){let e=this.rt.get(t);return e||(e=new er(C),this.rt=this.rt.insert(t,e)),e}ft(t){const e=null!==this.wt(t);return e||pt("WatchChangeAggregator","Detected inactive target",t),e}wt(t){const e=this.st.get(t);return e&&e.G?null:this.nt.Et(t)}dt(t){this.st.set(t,new LS),this.nt.getRemoteKeysForTarget(t).forEach(e=>{this.ct(t,e,null)})}It(t,e){return this.nt.getRemoteKeysForTarget(t).has(e)}}function BS(){return new dr(Tt.comparator)}function US(){return new dr(Tt.comparator)}const rR={asc:"ASCENDING",desc:"DESCENDING"},jb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class VS{constructor(t,e){this.databaseId=t,this.N=e}}function jm(n,t){return n.N?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function vE(n,t){return n.N?t.toBase64():t.toUint8Array()}function sR(n,t){return jm(n,t.toTimestamp())}function Kr(n){return pn(!!n),K.fromTimestamp(function(t){const e=yn(t);return new $(e.seconds,e.nanos)}(n))}function zp(n,t){return(e=n,new Ve(["projects",e.projectId,"databases",e.database])).child("documents").child(t).canonicalString();var e}function HS(n){const t=Ve.fromString(n);return pn(qS(t)),t}function Yv(n,t){return zp(n.databaseId,t.path)}function ad(n,t){const e=HS(t);if(e.get(1)!==n.databaseId.projectId)throw new ot(ke.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new ot(ke.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Tt(jS(e))}function Gb(n,t){return zp(n.databaseId,t)}function yE(n){const t=HS(n);return 4===t.length?Ve.emptyPath():jS(t)}function Gm(n){return new Ve(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function jS(n){return pn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bE(n,t,e){return{name:Yv(n,t),fields:e.value.mapValue.fields}}function GS(n,t,e){const i=ad(n,t.name),r=Kr(t.updateTime),s=new Xo({mapValue:{fields:t.fields}}),c=ur.newFoundDocument(i,r,s);return e&&c.setHasCommittedMutations(),e?c.setHasCommittedMutations():c}function $b(n,t){let e;if(t instanceof Wv)e={update:bE(n,t.key,t.value)};else if(t instanceof Bb)e={delete:Yv(n,t.key)};else if(t instanceof $p)e={update:bE(n,t.key,t.data),updateMask:zS(t.fieldMask)};else{if(!(t instanceof Ub))return Ht();e={verify:Yv(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof Fm)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof jp)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Gp)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Lm)return{fieldPath:s.field.canonicalString(),increment:c.k};throw Ht()}(0,i))),t.precondition.isNone||(e.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:sR(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Ht()),e;var r}function $S(n,t){const e=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?ds.updateTime(Kr(r.updateTime)):void 0!==r.exists?ds.exists(r.exists):ds.none():ds.none(),i=t.updateTransforms?t.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(pn("REQUEST_TIME"===c.setToServerValue),d=new Fm):"appendMissingElements"in c?d=new jp(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Gp(c.removeAllFromArray.values||[]):"increment"in c?d=new Lm(s,c.increment):Ht();const p=bt.fromServerFormat(c.fieldPath);return new Bm(p,d)}(n,r)):[];var r;if(t.update){const r=ad(n,t.update.name),s=new Xo({mapValue:{fields:t.update.fields}});if(t.updateMask){const c=new Kt((t.updateMask.fieldPaths||[]).map(v=>bt.fromServerFormat(v)));return new $p(r,s,c,e,i)}return new Wv(r,s,e,i)}if(t.delete){const r=ad(n,t.delete);return new Bb(r,e)}if(t.verify){const r=ad(n,t.verify);return new Ub(r,e)}return Ht()}function CE(n,t){return{documents:[Gb(n,t.path)]}}function Kv(n,t){const e={structuredQuery:{}},i=t.path;null!==t.collectionGroup?(e.parent=Gb(n,i),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(e.parent=Gb(n,i.popLast()),e.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(p){if(0===p.length)return;const v=p.map(E=>function(S){if("=="===S.op){if(rE(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NAN"}};if(iE(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(rE(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NOT_NAN"}};if(iE(S.value))return{unaryFilter:{field:$m(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:$m(S.field),op:lR(S.op),value:S.value}}}(E));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(t.filters);r&&(e.structuredQuery.where=r);const s=function(p){if(0!==p.length)return p.map(v=>{return{field:$m((E=v).field),direction:Qv(E.dir)};var E})}(t.orderBy);s&&(e.structuredQuery.orderBy=s);const c=(v=t.limit,n.N||Am(v)?v:{value:v});var v,d,p;return null!==c&&(e.structuredQuery.limit=c),t.startAt&&(e.structuredQuery.startAt={before:(d=t.startAt).inclusive,values:d.position}),t.endAt&&(e.structuredQuery.endAt={before:!(p=t.endAt).inclusive,values:p.position}),e}function WS(n){let t=yE(n.parent);const e=n.structuredQuery,i=e.from?e.from.length:0;let r=null;if(i>0){pn(1===i);const E=e.from[0];E.allDescendants?r=E.collectionId:t=t.child(E.collectionId)}let s=[];e.where&&(s=wE(e.where));let c=[];e.orderBy&&(c=e.orderBy.map(E=>{return new Nm(Wm((S=E).field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;e.limit&&(d=function(E){let S;return S="object"==typeof E?E.value:E,Am(S)?null:S}(e.limit));let p=null;var E;e.startAt&&(p=new eh((E=e.startAt).values||[],!!E.before));let v=null;return e.endAt&&(v=function(E){return new eh(E.values||[],!E.before)}(e.endAt)),dE(t,r,c,s,d,"F",p,v)}function wE(n){return n?void 0!==n.unaryFilter?[uR(n)]:void 0!==n.fieldFilter?[cR(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(t=>wE(t)).reduce((t,e)=>t.concat(e)):Ht():[]}function Qv(n){return rR[n]}function lR(n){return jb[n]}function $m(n){return{fieldPath:n.canonicalString()}}function Wm(n){return bt.fromServerFormat(n.fieldPath)}function cR(n){return co.create(Wm(n.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(n.fieldFilter.op),n.fieldFilter.value)}function uR(n){switch(n.unaryFilter.op){case"IS_NAN":const t=Wm(n.unaryFilter.field);return co.create(t,"==",{doubleValue:NaN});case"IS_NULL":const e=Wm(n.unaryFilter.field);return co.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Wm(n.unaryFilter.field);return co.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Wm(n.unaryFilter.field);return co.create(r,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}function zS(n){const t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function qS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Na(n){let t="";for(let e=0;e<n.length;e++)t.length>0&&(t=ZS(t)),t=zm(n.get(e),t);return ZS(t)}function zm(n,t){let e=t;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":e+="\x01\x10";break;case"\x01":e+="\x01\x11";break;default:e+=s}}return e}function ZS(n){return n+"\x01\x01"}function bu(n){const t=n.length;if(pn(t>=2),2===t)return pn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Ve.emptyPath();const e=t-2,i=[];let r="";for(let s=0;s<t;){const c=n.indexOf("\x01",s);switch((c<0||c>e)&&Ht(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let p;0===r.length?p=d:(r+=d,p=r,r=""),i.push(p);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:Ht()}s=c+2}return new Ve(i)}const YS=["userId","batchId"];function Jv(n,t){return[n,Na(t)]}function KS(n,t,e){return[n,Na(t),e]}const QS={},dR=["prefixPath","collectionGroup","readTime","documentId"],EE=["prefixPath","collectionGroup","documentId"],hR=["collectionGroup","readTime","prefixPath","documentId"],JS=["canonicalId","targetId"],XS=["targetId","path"],fR=["path","targetId"],pR=["collectionId","parent"],gR=["indexId","uid"],TE=["uid","sequenceNumber"],mR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eI=["indexId","uid","orderedDocumentKey"],_R=["userId","collectionPath","documentId"],vR=["userId","collectionPath","largestBatchId"],yR=["userId","collectionGroup","largestBatchId"],tI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bR=[...tI,"documentOverlays"],nI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],CR=[...nI,"indexConfiguration","indexState","indexEntries"],iI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}class Le{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Le((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{const e=t();return e instanceof Le?e:Le.resolve(e)}catch(e){return Le.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):Le.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):Le.reject(e)}static resolve(t){return new Le((e,i)=>{e(t)})}static reject(t){return new Le((e,i)=>{i(t)})}static waitFor(t){return new Le((e,i)=>{let r=0,s=0,c=!1;t.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&e()},p=>i(p))}),c=!0,s===r&&e()})}static or(t){let e=Le.resolve(!1);for(const i of t)e=e.next(r=>r?Le.resolve(r):i());return e}static forEach(t,e){const i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}}class Xv{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.At=new Qs,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{e.error?this.At.reject(new qm(t,e.error)):this.At.resolve()},this.transaction.onerror=i=>{const r=zb(i.target.error);this.At.reject(new qm(t,r))}}static open(t,e,i,r){try{return new Xv(e,t.transaction(r,i))}catch(s){throw new qm(e,s)}}get Rt(){return this.At.promise}abort(t){t&&this.At.reject(t),this.aborted||(pt("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new wR(e)}}class Cu{constructor(t,e,i){this.name=t,this.version=e,this.Pt=i,12.2===Cu.Vt((0,z.z$)())&&Yr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return pt("SimpleDb","Removing database:",t),nh(window.indexedDB.deleteDatabase(t)).toPromise()}static vt(){if(!(0,z.hl)())return!1;if(Cu.St())return!0;const t=(0,z.z$)(),e=Cu.Vt(t),i=0<e&&e<10,r=Cu.Dt(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||s)}static St(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Ct)}static xt(t,e){return t.store(e)}static Vt(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static Dt(t){const e=t.match(/Android ([\d.]+)/i),i=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(i)}Nt(t){var e=this;return(0,Pe.Z)(function*(){return e.db||(pt("SimpleDb","Opening database:",e.name),e.db=yield new Promise((i,r)=>{const s=indexedDB.open(e.name,e.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new qm(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new ot(ke.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new ot(ke.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new qm(t,d))},s.onupgradeneeded=c=>{pt("SimpleDb",'Database "'+e.name+'" requires upgrade from version:',c.oldVersion),e.Pt.kt(c.target.result,s.transaction,c.oldVersion,e.version).next(()=>{pt("SimpleDb","Database upgrade to version "+e.version+" complete")})}})),e.Mt&&(e.db.onversionchange=i=>e.Mt(i)),e.db})()}Ot(t){this.Mt=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,i,r){var s=this;return(0,Pe.Z)(function*(){const c="readonly"===e;let d=0;for(;;){++d;try{s.db=yield s.Nt(t);const p=Xv.open(s.db,t,c?"readonly":"readwrite",i),v=r(p).next(E=>(p.bt(),E)).catch(E=>(p.abort(E),Le.reject(E))).toPromise();return v.catch(()=>{}),yield p.Rt,v}catch(p){const v="FirebaseError"!==p.name&&d<3;if(pt("SimpleDb","Transaction failed with error:",p.message,"Retrying:",v),s.close(),!v)return Promise.reject(p)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class SE{constructor(t){this.Ft=t,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(t){this.Ft=t}done(){this.$t=!0}Ut(t){this.Bt=t}delete(){return nh(this.Ft.delete())}}class qm extends ot{constructor(t,e){super(ke.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function qp(n){return"IndexedDbTransactionError"===n.name}class wR{constructor(t){this.store=t}put(t,e){let i;return void 0!==e?(pt("SimpleDb","PUT",this.store.name,t,e),i=this.store.put(e,t)):(pt("SimpleDb","PUT",this.store.name,"<auto-key>",t),i=this.store.put(t)),nh(i)}add(t){return pt("SimpleDb","ADD",this.store.name,t,t),nh(this.store.add(t))}get(t){return nh(this.store.get(t)).next(e=>(void 0===e&&(e=null),pt("SimpleDb","GET",this.store.name,t,e),e))}delete(t){return pt("SimpleDb","DELETE",this.store.name,t),nh(this.store.delete(t))}count(){return pt("SimpleDb","COUNT",this.store.name),nh(this.store.count())}qt(t,e){const i=this.options(t,e);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.Kt(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new Le((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}Gt(t,e){const i=this.store.getAll(t,null===e?void 0:e);return new Le((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Qt(t,e){pt("SimpleDb","DELETE ALL",this.store.name);const i=this.options(t,e);i.jt=!1;const r=this.cursor(i);return this.Kt(r,(s,c,d)=>d.delete())}Wt(t,e){let i;e?i=t:(i={},e=t);const r=this.cursor(i);return this.Kt(r,e)}zt(t){const e=this.cursor({});return new Le((i,r)=>{e.onerror=s=>{const c=zb(s.target.error);r(c)},e.onsuccess=s=>{const c=s.target.result;c?t(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}Kt(t,e){const i=[];return new Le((r,s)=>{t.onerror=c=>{s(c.target.error)},t.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const p=new SE(d),v=e(d.primaryKey,d.value,p);if(v instanceof Le){const E=v.catch(S=>(p.done(),Le.reject(S)));i.push(E)}p.isDone?r():null===p.Lt?d.continue():d.continue(p.Lt)}}).next(()=>Le.waitFor(i))}options(t,e){let i;return void 0!==t&&("string"==typeof t?i=t:e=t),{index:i,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const i=this.store.index(t.index);return t.jt?i.openKeyCursor(t.range,e):i.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function nh(n){return new Le((t,e)=>{n.onsuccess=i=>{t(i.target.result)},n.onerror=i=>{const r=zb(i.target.error);e(r)}})}let Wb=!1;function zb(n){const t=Cu.Vt((0,z.z$)());if(t>=12.2&&t<13){const e="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(e)>=0){const i=new ot("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Wb||(Wb=!0,setTimeout(()=>{throw i},0)),i}}return n}class qb extends DE{constructor(t,e){super(),this.Ht=t,this.currentSequenceNumber=e}}function uo(n,t){const e=At(n);return Cu.xt(e.Ht,t)}class IE{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){const i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(t.key)&&RS(s,t,i[r])}}applyToLocalView(t){for(const e of this.baseMutations)e.key.isEqual(t.key)&&Pb(e,t,this.localWriteTime);for(const e of this.mutations)e.key.isEqual(t.key)&&Pb(e,t,this.localWriteTime)}applyToLocalDocumentSet(t){this.mutations.forEach(e=>{const i=t.get(e.key),r=i;this.applyToLocalView(r),i.isValidDocument()||r.convertToNoDocument(K.min())})}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Ni())}isEqual(t){return this.batchId===t.batchId&&M(this.mutations,t.mutations,(e,i)=>Fb(e,i))&&M(this.baseMutations,t.baseMutations,(e,i)=>Fb(e,i))}}class ey{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){pn(t.mutations.length===i.length);let r=SP;const s=t.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new ey(t,e,i,r)}}class AE{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ih{constructor(t,e,i,r,s=K.min(),c=K.min(),d=Pt.EMPTY_BYTE_STRING){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(t){return new ih(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(t,e){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)}withLastLimboFreeSnapshotVersion(t){return new ih(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}class rI{constructor(t){this.Jt=t}}function oI(n,t){const e=t.key,i={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:ty(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document={name:Yv(r=n.Jt,(s=t).key),fields:s.data.value.mapValue.fields,updateTime:jm(r,s.version.toTimestamp())};else if(t.isNoDocument())i.noDocument={path:e.path.toArray(),readTime:Zm(t.version)};else{if(!t.isUnknownDocument())return Ht();i.unknownDocument={path:e.path.toArray(),version:Zm(t.version)}}var r,s;return i}function ty(n){const t=n.toTimestamp();return[t.seconds,t.nanoseconds]}function Zm(n){const t=n.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Zp(n){const t=new $(n.seconds,n.nanoseconds);return K.fromTimestamp(t)}function rh(n,t){const e=(t.baseMutations||[]).map(s=>$S(n.Jt,s));for(let s=0;s<t.mutations.length-1;++s){const c=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(c.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const i=t.mutations.map(s=>$S(n.Jt,s)),r=$.fromMillis(t.localWriteTimeMs);return new IE(t.batchId,r,e,i)}function ny(n){const t=Zp(n.readTime),e=void 0!==n.lastLimboFreeSnapshotVersion?Zp(n.lastLimboFreeSnapshotVersion):K.min();let i;var r;return void 0!==n.query.documents?(pn(1===(r=n.query).documents.length),i=Bl(Vp(yE(r.documents[0])))):i=Bl(WS(n.query)),new ih(i,n.targetId,0,n.lastListenSequenceNumber,t,e,Pt.fromBase64String(n.resumeToken))}function Yp(n,t){const e=Zm(t.snapshotVersion),i=Zm(t.lastLimboFreeSnapshotVersion);let r;r=Vv(t.target)?CE(n.Jt,t.target):Kv(n.Jt,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Xd(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function Kp(n){const t=WS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?fE(t,t.limit,"L"):t}function xE(n,t){return new AE(t.largestBatchId,$S(n.Jt,t.overlayMutation))}function ER(n,t){const e=t.path.lastSegment();return[n,Na(t.path.popLast()),e]}class aI{getBundleMetadata(t,e){return lI(t).get(e).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Zp(r.createTime),version:r.version};var r})}saveBundleMetadata(t,e){return lI(t).put({bundleId:(i=e).id,createTime:Zm(Kr(i.createTime)),version:i.version});var i}getNamedQuery(t,e){return cI(t).get(e).next(i=>{if(i)return{name:(r=i).name,query:Kp(r.bundledQuery),readTime:Zp(r.readTime)};var r})}saveNamedQuery(t,e){return cI(t).put({name:(i=e).name,readTime:Zm(Kr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function lI(n){return uo(n,"bundles")}function cI(n){return uo(n,"namedQueries")}class RE{constructor(t,e){this.M=t,this.userId=e}static Yt(t,e){return new RE(t,e.uid||"")}getOverlay(t,e){return iy(t).get(ER(this.userId,e)).next(i=>i?xE(this.M,i):null)}saveOverlays(t,e,i){const r=[];return i.forEach((s,c)=>{const d=new AE(e,c);r.push(this.Xt(t,d))}),Le.waitFor(r)}removeOverlaysForBatchId(t,e,i){const r=new Set;e.forEach(c=>r.add(Na(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(iy(t).Qt("collectionPathOverlayIndex",d))}),Le.waitFor(s)}getOverlaysForCollection(t,e,i){const r=hr(),s=Na(e),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return iy(t).qt("collectionPathOverlayIndex",c).next(d=>{for(const p of d){const v=xE(this.M,p);r.set(v.getKey(),v)}return r})}getOverlaysForCollectionGroup(t,e,i,r){const s=hr();let c;const d=IDBKeyRange.bound([this.userId,e,i],[this.userId,e,Number.POSITIVE_INFINITY],!0);return iy(t).Wt({index:"collectionGroupOverlayIndex",range:d},(p,v,E)=>{const S=xE(this.M,v);s.size()<r||S.largestBatchId===c?(s.set(S.getKey(),S),c=S.largestBatchId):E.done()}).next(()=>s)}Xt(t,e){return iy(t).put(function(i,r,s){const[c,d,p]=ER(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:$b(i.Jt,s.mutation)}}(this.M,this.userId,e))}}function iy(n){return uo(n,"documentOverlays")}class Df{constructor(){}Zt(t,e){this.te(t,e),e.ee()}te(t,e){if("nullValue"in t)this.ne(e,5);else if("booleanValue"in t)this.ne(e,10),e.se(t.booleanValue?1:0);else if("integerValue"in t)this.ne(e,15),e.se(Hn(t.integerValue));else if("doubleValue"in t){const i=Hn(t.doubleValue);isNaN(i)?this.ne(e,13):(this.ne(e,15),Lp(i)?e.se(0):e.se(i))}else if("timestampValue"in t){const i=t.timestampValue;this.ne(e,20),"string"==typeof i?e.ie(i):(e.ie(`${i.seconds||""}`),e.se(i.nanos||0))}else if("stringValue"in t)this.re(t.stringValue,e),this.oe(e);else if("bytesValue"in t)this.ne(e,30),e.ue(vr(t.bytesValue)),this.oe(e);else if("referenceValue"in t)this.ae(t.referenceValue,e);else if("geoPointValue"in t){const i=t.geoPointValue;this.ne(e,45),e.se(i.latitude||0),e.se(i.longitude||0)}else"mapValue"in t?sE(t)?this.ne(e,Number.MAX_SAFE_INTEGER):(this.ce(t.mapValue,e),this.oe(e)):"arrayValue"in t?(this.he(t.arrayValue,e),this.oe(e)):Ht()}re(t,e){this.ne(e,25),this.le(t,e)}le(t,e){e.ie(t)}ce(t,e){const i=t.fields||{};this.ne(e,55);for(const r of Object.keys(i))this.re(r,e),this.te(i[r],e)}he(t,e){const i=t.values||[];this.ne(e,50);for(const r of i)this.te(r,e)}ae(t,e){this.ne(e,37),Tt.fromName(t).path.forEach(i=>{this.ne(e,60),this.le(i,e)})}ne(t,e){t.se(e)}oe(t){t.se(2)}}function uI(n){if(0===n)return 8;let t=0;return n>>4==0&&(t+=4,n<<=4),n>>6==0&&(t+=2,n<<=2),n>>7==0&&(t+=1),t}function Zb(n){const t=64-function(e){let i=0;for(let r=0;r<8;++r){const s=uI(255&e[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(t/8)}Df.fe=new Df;class Yb{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this._e(i.value),i=e.next();this.we()}me(t){const e=t[Symbol.iterator]();let i=e.next();for(;!i.done;)this.ge(i.value),i=e.next();this.ye()}pe(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this._e(i);else if(i<2048)this._e(960|i>>>6),this._e(128|63&i);else if(e<"\ud800"||"\udbff"<e)this._e(480|i>>>12),this._e(128|63&i>>>6),this._e(128|63&i);else{const r=e.codePointAt(0);this._e(240|r>>>18),this._e(128|63&r>>>12),this._e(128|63&r>>>6),this._e(128|63&r)}}this.we()}Ie(t){for(const e of t){const i=e.charCodeAt(0);if(i<128)this.ge(i);else if(i<2048)this.ge(960|i>>>6),this.ge(128|63&i);else if(e<"\ud800"||"\udbff"<e)this.ge(480|i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i);else{const r=e.codePointAt(0);this.ge(240|r>>>18),this.ge(128|63&r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r)}}this.ye()}Te(t){const e=this.Ee(t),i=Zb(e);this.Ae(1+i),this.buffer[this.position++]=255&i;for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=255&e[r]}Re(t){const e=this.Ee(t),i=Zb(e);this.Ae(1+i),this.buffer[this.position++]=~(255&i);for(let r=e.length-i;r<e.length;++r)this.buffer[this.position++]=~(255&e[r])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(t){this.Ae(t.length),this.buffer.set(t,this.position),this.position+=t.length}Se(){return this.buffer.slice(0,this.position)}Ee(t){const e=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(t),i=0!=(128&e[0]);e[0]^=i?255:128;for(let r=1;r<e.length;++r)e[r]^=i?255:0;return e}_e(t){const e=255&t;0===e?(this.Pe(0),this.Pe(255)):255===e?(this.Pe(255),this.Pe(0)):this.Pe(e)}ge(t){const e=255&t;0===e?(this.ve(0),this.ve(255)):255===e?(this.ve(255),this.ve(0)):this.ve(t)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(t){this.Ae(1),this.buffer[this.position++]=t}ve(t){this.Ae(1),this.buffer[this.position++]=~t}Ae(t){const e=t+this.position;if(e<=this.buffer.length)return;let i=2*this.buffer.length;i<e&&(i=e);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class ry{constructor(t){this.De=t}ue(t){this.De.de(t)}ie(t){this.De.pe(t)}se(t){this.De.Te(t)}ee(){this.De.be()}}class TR{constructor(t){this.De=t}ue(t){this.De.me(t)}ie(t){this.De.Ie(t)}se(t){this.De.Re(t)}ee(){this.De.Ve()}}class Ym{constructor(){this.De=new Yb,this.Ce=new ry(this.De),this.xe=new TR(this.De)}seed(t){this.De.seed(t)}Ne(t){return 0===t?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Sf{constructor(t,e,i,r){this.indexId=t,this.documentKey=e,this.arrayValue=i,this.directionalValue=r}ke(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,i=new Uint8Array(e);return i.set(this.directionalValue,0),e!==t?i.set([0],this.directionalValue.length):++i[i.length-1],new Sf(this.indexId,this.documentKey,this.arrayValue,i)}}function Qp(n,t){let e=n.indexId-t.indexId;return 0!==e?e:(e=dI(n.arrayValue,t.arrayValue),0!==e?e:(e=dI(n.directionalValue,t.directionalValue),0!==e?e:Tt.comparator(n.documentKey,t.documentKey)))}function dI(n,t){for(let e=0;e<n.length&&e<t.length;++e){const i=n[e]-t[e];if(0!==i)return i}return n.length-t.length}class ME{constructor(t){this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Me=t.orderBy,this.Oe=[];for(const e of t.filters){const i=e;i.S()?this.Fe=i:this.Oe.push(i)}}$e(t){const e=us(t);if(void 0!==e&&!this.Be(e))return!1;const i=wf(t);let r=0,s=0;for(;r<i.length&&this.Be(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.Fe){const c=i[r];if(!this.Le(this.Fe,c)||!this.Ue(this.Me[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Me.length||!this.Ue(this.Me[s++],c))return!1}return!0}Be(t){for(const e of this.Oe)if(this.Le(e,t))return!0;return!1}Le(t,e){return!(void 0===t||!t.field.isEqual(e.fieldPath))&&2===e.kind==("array-contains"===t.op||"array-contains-any"===t.op)}Ue(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}class DR{constructor(){this.qe=new hI}addToCollectionParentIndex(t,e){return this.qe.add(e),Le.resolve()}getCollectionParents(t,e){return Le.resolve(this.qe.getEntries(e))}addFieldIndex(t,e){return Le.resolve()}deleteFieldIndex(t,e){return Le.resolve()}getDocumentsMatchingTarget(t,e){return Le.resolve(null)}getIndexType(t,e){return Le.resolve(0)}getFieldIndexes(t,e){return Le.resolve([])}getNextCollectionGroupToUpdate(t){return Le.resolve(null)}getMinOffset(t,e){return Le.resolve(Sc.min())}updateCollectionGroup(t,e,i){return Le.resolve()}updateIndexEntries(t,e){return Le.resolve()}}class hI{constructor(){this.index={}}add(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new er(Ve.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){const e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new er(Ve.comparator)).toArray()}}const Kb=new Uint8Array(0);class SR{constructor(t,e){this.user=t,this.databaseId=e,this.Ke=new hI,this.Ge=new Tf(i=>Xd(i),(i,r)=>Uv(i,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.Ke.has(e)){const i=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.Ke.add(e)});const s={collectionId:i,parent:Na(r)};return Jp(t).put(s)}return Le.resolve()}getCollectionParents(t,e){const i=[],r=IDBKeyRange.bound([e,""],[L(e),""],!1,!0);return Jp(t).qt(r).next(s=>{for(const c of s){if(c.collectionId!==e)break;i.push(bu(c.parent))}return i})}addFieldIndex(t,e){const i=sh(t),r={indexId:(s=e).indexId,collectionGroup:s.collectionGroup,fields:s.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])};var s;return delete r.indexId,i.add(r).next()}deleteFieldIndex(t,e){const i=sh(t),r=OE(t),s=Km(t);return i.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}getDocumentsMatchingTarget(t,e){const i=Km(t);let r=!0;const s=new Map;return Le.forEach(this.Qe(e),c=>this.je(t,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=Ni();const d=[];return Le.forEach(s,(p,v)=>{var E;pt("IndexedDbIndexManager",`Using index ${E=p,`id=${E.indexId}|cg=${E.collectionGroup}|f=${E.fields.map(st=>`${st.fieldPath}:${st.kind}`).join(",")}`} to execute ${Xd(e)}`);const S=function(st,et){const Ct=us(et);if(void 0===Ct)return null;for(const Dt of Ll(st,Ct.fieldPath))switch(Dt.op){case"array-contains-any":return Dt.value.arrayValue.values||[];case"array-contains":return[Dt.value]}return null}(v,p),N=function(st,et){const Ct=new Map;for(const Dt of wf(et))for(const $t of Ll(st,Dt.fieldPath))switch($t.op){case"==":case"in":Ct.set(Dt.fieldPath.canonicalString(),$t.value);break;case"not-in":case"!=":return Ct.set(Dt.fieldPath.canonicalString(),$t.value),Array.from(Ct.values())}return null}(v,p),F=function(st,et){const Ct=[];let Dt=!0;for(const $t of wf(et)){const un=0===$t.kind?Ic(st,$t.fieldPath,st.startAt):Ac(st,$t.fieldPath,st.startAt);Ct.push(un.value),Dt&&(Dt=un.inclusive)}return new eh(Ct,Dt)}(v,p),G=function(st,et){const Ct=[];let Dt=!0;for(const $t of wf(et)){const un=0===$t.kind?Ac(st,$t.fieldPath,st.endAt):Ic(st,$t.fieldPath,st.endAt);Ct.push(un.value),Dt&&(Dt=un.inclusive)}return new eh(Ct,Dt)}(v,p),J=this.We(p,v,F),de=this.We(p,v,G),$e=this.ze(p,v,N),Ke=this.He(p.indexId,S,J,F.inclusive,de,G.inclusive,$e);return Le.forEach(Ke,st=>i.Gt(st,e.limit).next(et=>{et.forEach(Ct=>{const Dt=Tt.fromSegments(Ct.documentKey);c.has(Dt)||(c=c.add(Dt),d.push(Dt))})}))}).next(()=>d)}return Le.resolve(null)})}Qe(t){let e=this.Ge.get(t);return e||(e=[t],this.Ge.set(t,e),e)}He(t,e,i,r,s,c,d){const p=(null!=e?e.length:1)*Math.max(i.length,s.length),v=p/(null!=e?e.length:1),E=[];for(let S=0;S<p;++S){const N=e?this.Je(e[S/v]):Kb,F=this.Ye(t,N,i[S%v],r),G=this.Xe(t,N,s[S%v],c),J=d.map(de=>this.Ye(t,N,de,!0));E.push(...this.createRange(F,G,J))}return E}Ye(t,e,i,r){const s=new Sf(t,Tt.empty(),e,i);return r?s:s.ke()}Xe(t,e,i,r){const s=new Sf(t,Tt.empty(),e,i);return r?s.ke():s}je(t,e){const i=new ME(e),r=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let c=null;for(const d of s)i.$e(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(t,e){let i=2;return Le.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new er(bt.comparator),p=!1;for(const v of c.filters){const E=v;E.field.isKeyField()||("array-contains"===E.op||"array-contains-any"===E.op?p=!0:d=d.add(E.field))}for(const v of c.orderBy)v.field.isKeyField()||(d=d.add(v.field));return d.size+(p?1:0)}(r)&&(i=1):i=0})).next(()=>i)}Ze(t,e){const i=new Ym;for(const r of wf(t)){const s=e.data.field(r.fieldPath);if(null==s)return null;const c=i.Ne(r.kind);Df.fe.Zt(s,c)}return i.Se()}Je(t){const e=new Ym;return Df.fe.Zt(t,e.Ne(0)),e.Se()}tn(t,e){const i=new Ym;return Df.fe.Zt(bf(this.databaseId,e),i.Ne(function(r){const s=wf(r);return 0===s.length?0:s[s.length-1].kind}(t))),i.Se()}ze(t,e,i){if(null===i)return[];let r=[];r.push(new Ym);let s=0;for(const c of wf(t)){const d=i[s++];for(const p of r)if(this.en(e,c.fieldPath)&&Cf(d))r=this.nn(r,c,d);else{const v=p.Ne(c.kind);Df.fe.Zt(d,v)}}return this.sn(r)}We(t,e,i){return this.ze(t,e,i.position)}sn(t){const e=[];for(let i=0;i<t.length;++i)e[i]=t[i].Se();return e}nn(t,e,i){const r=[...t],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const p=new Ym;p.seed(d.Se()),Df.fe.Zt(c,p.Ne(e.kind)),s.push(p)}return s}en(t,e){return!!t.filters.find(i=>i instanceof co&&i.field.isEqual(e)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(t,e){const i=sh(t),r=OE(t);return(e?i.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)):i.qt()).next(s=>{const c=[];return Le.forEach(s,d=>r.get([d.indexId,this.uid]).next(p=>{c.push(function(v,E){const S=E?new Bv(E.sequenceNumber,new Sc(Zp(E.readTime),new Tt(bu(E.documentKey)),E.largestBatchId)):Bv.empty(),N=v.fields.map(([F,G])=>new Ab(bt.fromServerFormat(F),G));return new Ib(v.indexId,v.collectionGroup,N,S)}(d,p))})).next(()=>c)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>0===e.length?null:(e.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:C(i.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,i){const r=sh(t),s=OE(t);return this.rn(t).next(c=>r.qt("collectionGroupIndex",IDBKeyRange.bound(e,e)).next(d=>Le.forEach(d,p=>{return s.put({indexId:p.indexId,uid:this.user.uid||"",sequenceNumber:c,readTime:Zm((N=i).readTime),documentKey:Na(N.documentKey.path),largestBatchId:N.largestBatchId});var N})))}updateIndexEntries(t,e){const i=new Map;return Le.forEach(e,(r,s)=>{const c=i.get(r.collectionGroup);return(c?Le.resolve(c):this.getFieldIndexes(t,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),Le.forEach(d,p=>this.on(t,r,p).next(v=>{const E=this.un(s,p);return v.isEqual(E)?Le.resolve():this.an(t,s,p,v,E)}))))})}cn(t,e,i,r){return Km(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.tn(i,e.key),documentKey:e.key.path.toArray()})}hn(t,e,i,r){return Km(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.tn(i,e.key),e.key.path.toArray()])}on(t,e,i){const r=Km(t);let s=new er(Qp);return r.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.tn(i,e)])},(c,d)=>{s=s.add(new Sf(i.indexId,e,d.arrayValue,d.directionalValue))}).next(()=>s)}un(t,e){let i=new er(Qp);const r=this.Ze(e,t);if(null==r)return i;const s=us(e);if(null!=s){const c=t.data.field(s.fieldPath);if(Cf(c))for(const d of c.arrayValue.values||[])i=i.add(new Sf(e.indexId,t.key,this.Je(d),r))}else i=i.add(new Sf(e.indexId,t.key,Kb,r));return i}an(t,e,i,r,s){pt("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const c=[];return function(d,p,v,E,S){const N=d.getIterator(),F=p.getIterator();let G=Up(N),J=Up(F);for(;G||J;){let de=!1,$e=!1;if(G&&J){const Ke=v(G,J);Ke<0?$e=!0:Ke>0&&(de=!0)}else null!=G?$e=!0:de=!0;de?(E(J),J=Up(F)):$e?(S(G),G=Up(N)):(G=Up(N),J=Up(F))}}(r,s,Qp,d=>{c.push(this.cn(t,e,i,d))},d=>{c.push(this.hn(t,e,i,d))}),Le.waitFor(c)}rn(t){let e=1;return OE(t).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),e=r.sequenceNumber+1}).next(()=>e)}createRange(t,e,i){i=i.sort((c,d)=>Qp(c,d)).filter((c,d,p)=>!d||0!==Qp(c,p[d-1]));const r=[];r.push(t);for(const c of i){const d=Qp(c,t),p=Qp(c,e);if(0===d)r[0]=t.ke();else if(d>0&&p<0)r.push(c),r.push(c.ke());else if(p>0)break}r.push(e);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,Kb,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,Kb,[]]));return s}getMinOffset(t,e){let i;return Le.forEach(this.Qe(e),r=>this.je(t,r).next(s=>{s?(!i||lE(s.indexState.offset,i)<0)&&(i=s.indexState.offset):i=Sc.min()})).next(()=>i)}}function Jp(n){return uo(n,"collectionParents")}function Km(n){return uo(n,"indexEntries")}function sh(n){return uo(n,"indexConfiguration")}function OE(n){return uo(n,"indexState")}const NE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class il{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new il(t,il.DEFAULT_COLLECTION_PERCENTILE,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function IR(n,t,e){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(e.batchId);let d=0;const p=i.Wt({range:c},(E,S,N)=>(d++,N.delete()));s.push(p.next(()=>{pn(1===d)}));const v=[];for(const E of e.mutations){const S=KS(t,E.key.path,e.batchId);s.push(r.delete(S)),v.push(E.key)}return Le.waitFor(s).next(()=>v)}function sy(n){if(!n)return 0;let t;if(n.document)t=n.document;else if(n.unknownDocument)t=n.unknownDocument;else{if(!n.noDocument)throw Ht();t=n.noDocument}return JSON.stringify(t).length}il.DEFAULT_COLLECTION_PERCENTILE=10,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,il.DEFAULT=new il(41943040,il.DEFAULT_COLLECTION_PERCENTILE,il.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),il.DISABLED=new il(-1,0,0);class fI{constructor(t,e,i,r){this.userId=t,this.M=e,this.indexManager=i,this.referenceDelegate=r,this.ln={}}static Yt(t,e,i,r){pn(""!==t.uid);const s=t.isAuthenticated()?t.uid:"";return new fI(s,e,i,r)}checkEmpty(t){let e=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ld(t).Wt({index:"userMutationsIndex",range:i},(r,s,c)=>{e=!1,c.done()}).next(()=>e)}addMutationBatch(t,e,i,r){const s=Xp(t),c=ld(t);return c.add({}).next(d=>{pn("number"==typeof d);const p=new IE(d,e,i,r),v=function(N,F,G){const J=G.baseMutations.map($e=>$b(N.Jt,$e)),de=G.mutations.map($e=>$b(N.Jt,$e));return{userId:F,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:J,mutations:de}}(this.M,this.userId,p),E=[];let S=new er((N,F)=>C(N.canonicalString(),F.canonicalString()));for(const N of r){const F=KS(this.userId,N.key.path,d);S=S.add(N.key.path.popLast()),E.push(c.put(v)),E.push(s.put(F,QS))}return S.forEach(N=>{E.push(this.indexManager.addToCollectionParentIndex(t,N))}),t.addOnCommittedListener(()=>{this.ln[d]=p.keys()}),Le.waitFor(E).next(()=>p)})}lookupMutationBatch(t,e){return ld(t).get(e).next(i=>i?(pn(i.userId===this.userId),rh(this.M,i)):null)}fn(t,e){return this.ln[e]?Le.resolve(this.ln[e]):this.lookupMutationBatch(t,e).next(i=>{if(i){const r=i.keys();return this.ln[e]=r,r}return null})}getNextMutationBatchAfterBatchId(t,e){const i=e+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return ld(t).Wt({index:"userMutationsIndex",range:r},(c,d,p)=>{d.userId===this.userId&&(pn(d.batchId>=i),s=rh(this.M,d)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return ld(t).Wt({index:"userMutationsIndex",range:e,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ld(t).qt("userMutationsIndex",e).next(i=>i.map(r=>rh(this.M,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){const i=Jv(this.userId,e.path),r=IDBKeyRange.lowerBound(i),s=[];return Xp(t).Wt({range:r},(c,d,p)=>{const[v,E,S]=c,N=bu(E);if(v===this.userId&&e.path.isEqual(N))return ld(t).get(S).next(F=>{if(!F)throw Ht();pn(F.userId===this.userId),s.push(rh(this.M,F))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new er(C);const r=[];return e.forEach(s=>{const c=Jv(this.userId,s.path),d=IDBKeyRange.lowerBound(c),p=Xp(t).Wt({range:d},(v,E,S)=>{const[N,F,G]=v,J=bu(F);N===this.userId&&s.path.isEqual(J)?i=i.add(G):S.done()});r.push(p)}),Le.waitFor(r).next(()=>this.dn(t,i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1,s=Jv(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new er(C);return Xp(t).Wt({range:c},(p,v,E)=>{const[S,N,F]=p,G=bu(N);S===this.userId&&i.isPrefixOf(G)?G.length===r&&(d=d.add(F)):E.done()}).next(()=>this.dn(t,d))}dn(t,e){const i=[],r=[];return e.forEach(s=>{r.push(ld(t).get(s).next(c=>{if(null===c)throw Ht();pn(c.userId===this.userId),i.push(rh(this.M,c))}))}),Le.waitFor(r).next(()=>i)}removeMutationBatch(t,e){return IR(t.Ht,this.userId,e).next(i=>(t.addOnCommittedListener(()=>{this._n(e.batchId)}),Le.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}_n(t){delete this.ln[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return Le.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return Xp(t).Wt({range:i},(s,c,d)=>{if(s[0]===this.userId){const p=bu(s[1]);r.push(p)}else d.done()}).next(()=>{pn(0===r.length)})})}containsKey(t,e){return kE(t,this.userId,e)}wn(t){return PE(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function kE(n,t,e){const i=Jv(t,e.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return Xp(n).Wt({range:s,jt:!0},(d,p,v)=>{const[E,S,N]=d;E===t&&S===r&&(c=!0),v.done()}).next(()=>c)}function ld(n){return uo(n,"mutations")}function Xp(n){return uo(n,"documentMutations")}function PE(n){return uo(n,"mutationQueues")}class If{constructor(t){this.mn=t}next(){return this.mn+=2,this.mn}static gn(){return new If(0)}static yn(){return new If(-1)}}class pI{constructor(t,e){this.referenceDelegate=t,this.M=e}allocateTargetId(t){return this.pn(t).next(e=>{const i=new If(e.highestTargetId);return e.highestTargetId=i.next(),this.In(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.pn(t).next(e=>K.fromTimestamp(new $(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.pn(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,i){return this.pn(t).next(r=>(r.highestListenSequenceNumber=e,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.In(t,r)))}addTargetData(t,e){return this.Tn(t,e).next(()=>this.pn(t).next(i=>(i.targetCount+=1,this.En(e,i),this.In(t,i))))}updateTargetData(t,e){return this.Tn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Qm(t).delete(e.targetId)).next(()=>this.pn(t)).next(i=>(pn(i.targetCount>0),i.targetCount-=1,this.In(t,i)))}removeTargets(t,e,i){let r=0;const s=[];return Qm(t).Wt((c,d)=>{const p=ny(d);p.sequenceNumber<=e&&null===i.get(p.targetId)&&(r++,s.push(this.removeTargetData(t,p)))}).next(()=>Le.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Qm(t).Wt((i,r)=>{const s=ny(r);e(s)})}pn(t){return gI(t).get("targetGlobalKey").next(e=>(pn(null!==e),e))}In(t,e){return gI(t).put("targetGlobalKey",e)}Tn(t,e){return Qm(t).put(Yp(this.M,e))}En(t,e){let i=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,i=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,i=!0),i}getTargetCount(t){return this.pn(t).next(e=>e.targetCount)}getTargetData(t,e){const i=Xd(e),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Qm(t).Wt({range:r,index:"queryTargetsIndex"},(c,d,p)=>{const v=ny(d);Uv(e,v.target)&&(s=v,p.done())}).next(()=>s)}addMatchingKeys(t,e,i){const r=[],s=Af(t);return e.forEach(c=>{const d=Na(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(t,i,c))}),Le.waitFor(r)}removeMatchingKeys(t,e,i){const r=Af(t);return Le.forEach(e,s=>{const c=Na(s.path);return Le.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(t,i,s)])})}removeMatchingKeysForTargetId(t,e){const i=Af(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(t,e){const i=IDBKeyRange.bound([e],[e+1],!1,!0),r=Af(t);let s=Ni();return r.Wt({range:i,jt:!0},(c,d,p)=>{const v=bu(c[1]),E=new Tt(v);s=s.add(E)}).next(()=>s)}containsKey(t,e){const i=Na(e.path),r=IDBKeyRange.bound([i],[L(i)],!1,!0);let s=0;return Af(t).Wt({index:"documentTargetsIndex",jt:!0,range:r},([c,d],p,v)=>{0!==c&&(s++,v.done())}).next(()=>s>0)}Et(t,e){return Qm(t).get(e).next(i=>i?ny(i):null)}}function Qm(n){return uo(n,"targets")}function gI(n){return uo(n,"targetGlobal")}function Af(n){return uo(n,"targetDocuments")}function eg(n){return FE.apply(this,arguments)}function FE(){return FE=(0,Pe.Z)(function*(n){if(n.code!==ke.FAILED_PRECONDITION||n.message!==iI)throw n;pt("LocalStore","Unexpectedly lost primary lease")}),FE.apply(this,arguments)}function mI([n,t],[e,i]){const r=C(n,e);return 0===r?C(t,i):r}class oy{constructor(t){this.An=t,this.buffer=new er(mI),this.Rn=0}bn(){return++this.Rn}Pn(t){const e=[t,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(e);else{const i=this.buffer.last();mI(e,i)<0&&(this.buffer=this.buffer.delete(i).add(e))}}get maxValue(){return this.buffer.last()[0]}}class _I{constructor(t,e){this.garbageCollector=t,this.asyncQueue=e,this.Vn=!1,this.vn=null}start(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(t)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(t){var e=this;const i=this.Vn?3e5:6e4;pt("LruGarbageCollector",`Garbage collection scheduled in ${i}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",i,(0,Pe.Z)(function*(){e.vn=null,e.Vn=!0;try{yield t.collectGarbage(e.garbageCollector)}catch(r){qp(r)?pt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield eg(r)}yield e.Sn(t)}))}}class vI{constructor(t,e){this.Dn=t,this.params=e}calculateTargetCount(t,e){return this.Dn.Cn(t).next(i=>Math.floor(e/100*i))}nthSequenceNumber(t,e){if(0===e)return Le.resolve(Oa.A);const i=new oy(e);return this.Dn.forEachTarget(t,r=>i.Pn(r.sequenceNumber)).next(()=>this.Dn.xn(t,r=>i.Pn(r))).next(()=>i.maxValue)}removeTargets(t,e,i){return this.Dn.removeTargets(t,e,i)}removeOrphanedDocuments(t,e){return this.Dn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(NE)):this.getCacheSize(t).next(i=>i<this.params.cacheSizeCollectionThreshold?(pt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),NE):this.Nn(t,e))}getCacheSize(t){return this.Dn.getCacheSize(t)}Nn(t,e){let i,r,s,c,d,p,v;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(pt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),r=this.params.maximumSequenceNumbersToCollect):r=S,c=Date.now(),this.nthSequenceNumber(t,r))).next(S=>(i=S,d=Date.now(),this.removeTargets(t,i,e))).next(S=>(s=S,p=Date.now(),this.removeOrphanedDocuments(t,i))).next(S=>(v=Date.now(),kp()<=Rl.in.DEBUG&&pt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-E}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(p-d)+`ms\n\tRemoved ${S} documents in `+(v-p)+`ms\nTotal Duration: ${v-E}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:S})))}}class yI{constructor(t,e){this.db=t,this.garbageCollector=new vI(this,e)}Cn(t){const e=this.kn(t);return this.db.getTargetCache().getTargetCount(t).next(i=>e.next(r=>i+r))}kn(t){let e=0;return this.xn(t,i=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}xn(t,e){return this.Mn(t,(i,r)=>e(r))}addReference(t,e,i){return ay(t,i)}removeReference(t,e,i){return ay(t,i)}removeTargets(t,e,i){return this.db.getTargetCache().removeTargets(t,e,i)}markPotentiallyOrphaned(t,e){return ay(t,e)}On(t,e){return function(i,r){let s=!1;return PE(i).zt(c=>kE(i,c,r).next(d=>(d&&(s=!0),Le.resolve(!d)))).next(()=>s)}(t,e)}removeOrphanedDocuments(t,e){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Mn(t,(c,d)=>{if(d<=e){const p=this.On(t,c).next(v=>{if(!v)return s++,i.getEntry(t,c).next(()=>(i.removeEntry(c,K.min()),Af(t).delete([0,Na(c.path)])))});r.push(p)}}).next(()=>Le.waitFor(r)).next(()=>i.apply(t)).next(()=>s)}removeTarget(t,e){const i=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,i)}updateLimboDocument(t,e){return ay(t,e)}Mn(t,e){const i=Af(t);let r,s=Oa.A;return i.Wt({index:"documentTargetsIndex"},([c,d],{path:p,sequenceNumber:v})=>{0===c?(s!==Oa.A&&e(new Tt(bu(r)),s),s=v,r=p):s=Oa.A}).next(()=>{s!==Oa.A&&e(new Tt(bu(r)),s)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function ay(n,t){return Af(n).put((i=n.currentSequenceNumber,{targetId:0,path:Na(t.path),sequenceNumber:i}));var i}class LE{constructor(){this.changes=new Tf(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,ur.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const i=this.changes.get(e);return void 0!==i?Le.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}class AR{constructor(t){this.M=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,i){return tg(t).put(i)}removeEntry(t,e,i){return tg(t).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],ty(s),c[c.length-1]]}(e,i))}updateMetadata(t,e){return this.getMetadata(t).next(i=>(i.byteSize+=e,this.Fn(t,i)))}getEntry(t,e){let i=ur.newInvalidDocument(e);return tg(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ly(e))},(r,s)=>{i=this.$n(e,s)}).next(()=>i)}Bn(t,e){let i={size:0,document:ur.newInvalidDocument(e)};return tg(t).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(ly(e))},(r,s)=>{i={document:this.$n(e,s),size:sy(s)}}).next(()=>i)}getEntries(t,e){let i=xc();return this.Ln(t,e,(r,s)=>{const c=this.$n(r,s);i=i.insert(r,c)}).next(()=>i)}Un(t,e){let i=xc(),r=new dr(Tt.comparator);return this.Ln(t,e,(s,c)=>{const d=this.$n(s,c);i=i.insert(s,d),r=r.insert(s,sy(c))}).next(()=>({documents:i,qn:r}))}Ln(t,e,i){if(e.isEmpty())return Le.resolve();let r=new er(wI);e.forEach(p=>r=r.add(p));const s=IDBKeyRange.bound(ly(r.first()),ly(r.last())),c=r.getIterator();let d=c.getNext();return tg(t).Wt({index:"documentKeyIndex",range:s},(p,v,E)=>{const S=Tt.fromSegments([...v.prefixPath,v.collectionGroup,v.documentId]);for(;d&&wI(d,S)<0;)i(d,null),d=c.getNext();d&&d.isEqual(S)&&(i(d,v),d=c.hasNext()?c.getNext():null),d?E.Ut(ly(d)):E.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(t,e,i){const r=[e.popLast().toArray(),e.lastSegment(),ty(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[e.popLast().toArray(),e.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return tg(t).qt(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=xc();for(const p of c){const v=this.$n(Tt.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);d=d.insert(v.key,v)}return d})}getAllFromCollectionGroup(t,e,i,r){let s=xc();const c=CI(e,i),d=CI(e,Sc.max());return tg(t).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(p,v,E)=>{const S=this.$n(Tt.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);s=s.insert(S.key,S),s.size===r&&E.done()}).next(()=>s)}newChangeBuffer(t){return new xR(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return bI(t).get("remoteDocumentGlobalKey").next(e=>(pn(!!e),e))}Fn(t,e){return bI(t).put("remoteDocumentGlobalKey",e)}$n(t,e){if(e){const i=function sI(n,t){let e;if(t.document)e=GS(n.Jt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const i=Tt.fromSegments(t.noDocument.path),r=Zp(t.noDocument.readTime);e=ur.newNoDocument(i,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else{if(!t.unknownDocument)return Ht();{const i=Tt.fromSegments(t.unknownDocument.path),r=Zp(t.unknownDocument.version);e=ur.newUnknownDocument(i,r)}}return t.readTime&&e.setReadTime(function(i){const r=new $(i[0],i[1]);return K.fromTimestamp(r)}(t.readTime)),e}(this.M,e);if(!i.isNoDocument()||!i.version.isEqual(K.min()))return i}return ur.newInvalidDocument(t)}}class xR extends LE{constructor(t,e){super(),this.Kn=t,this.trackRemovals=e,this.Gn=new Tf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(t){const e=[];let i=0,r=new er((s,c)=>C(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Gn.get(s);if(e.push(this.Kn.removeEntry(t,s,d.readTime)),c.isValidDocument()){const p=oI(this.Kn.M,c);r=r.add(s.path.popLast()),i+=sy(p)-d.size,e.push(this.Kn.addEntry(t,s,p))}else if(i-=d.size,this.trackRemovals){const p=oI(this.Kn.M,c.convertToNoDocument(K.min()));e.push(this.Kn.addEntry(t,s,p))}}),r.forEach(s=>{e.push(this.Kn.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.Kn.updateMetadata(t,i)),Le.waitFor(e)}getFromCache(t,e){return this.Kn.Bn(t,e).next(i=>(this.Gn.set(e,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(t,e){return this.Kn.Un(t,e).next(({documents:i,qn:r})=>(r.forEach((s,c)=>{this.Gn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function bI(n){return uo(n,"remoteDocumentGlobal")}function tg(n){return uo(n,"remoteDocumentsV14")}function ly(n){const t=n.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function CI(n,t){const e=t.documentKey.path.toArray();return[n,ty(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function wI(n,t){const e=n.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<e.length-2&&s<i.length-2;++s)if(r=C(e[s],i[s]),r)return r;return r=C(e.length,i.length),r||(r=C(e[e.length-2],i[i.length-2]),r||C(e[e.length-1],i[i.length-1]))}class cy{constructor(t){this.M=t}kt(t,e,i,r){const s=new Xv("createOrUpgrade",e);var d;i<1&&r>=1&&(t.createObjectStore("owner"),(d=t).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YS,{unique:!0}),d.createObjectStore("documentMutations"),EI(t),function(d){d.createObjectStore("remoteDocuments")}(t));let c=Le.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(t),EI(t)),c=c.next(()=>function(d){const p=d.store("targetGlobal"),v={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:K.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",v)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,p){return p.store("mutations").qt().next(v=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",YS,{unique:!0});const E=p.store("mutations"),S=v.map(N=>E.put(N));return Le.waitFor(S)})}(t,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)})),i<5&&r>=5&&(c=c.next(()=>this.Qn(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(t),this.jn(s)))),i<7&&r>=7&&(c=c.next(()=>this.Wn(s))),i<8&&r>=8&&(c=c.next(()=>this.zn(t,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(t)})),i<10&&r>=10&&(c=c.next(()=>this.Hn(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(t),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(t)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const p=d.createObjectStore("documentOverlays",{keyPath:_R});p.createIndex("collectionPathOverlayIndex",vR,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",yR,{unique:!1})}(t)})),i<13&&r>=13&&(c=c.next(()=>function(d){const p=d.createObjectStore("remoteDocumentsV14",{keyPath:dR});p.createIndex("documentKeyIndex",EE),p.createIndex("collectionGroupIndex",hR)}(t)).next(()=>this.Jn(t,s)).next(()=>t.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>{!function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:gR}).createIndex("sequenceNumberIndex",TE,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:mR}).createIndex("documentKeyIndex",eI,{unique:!1})}(t)})),c}jn(t){let e=0;return t.store("remoteDocuments").Wt((i,r)=>{e+=sy(r)}).next(()=>{const i={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}Qn(t){const e=t.store("mutationQueues"),i=t.store("mutations");return e.qt().next(r=>Le.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.qt("userMutationsIndex",c).next(d=>Le.forEach(d,p=>{pn(p.userId===s.userId);const v=rh(this.M,p);return IR(t,s.userId,v).next(()=>{})}))}))}Wn(t){const e=t.store("targetDocuments"),i=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Wt((c,d)=>{const p=new Ve(c),v=[0,Na(p)];s.push(e.get(v).next(E=>E?Le.resolve():e.put({targetId:0,path:Na(p),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>Le.waitFor(s))})}zn(t,e){t.createObjectStore("collectionParents",{keyPath:pR});const i=e.store("collectionParents"),r=new hI,s=c=>{if(r.add(c)){const d=c.lastSegment(),p=c.popLast();return i.put({collectionId:d,parent:Na(p)})}};return e.store("remoteDocuments").Wt({jt:!0},(c,d)=>{const p=new Ve(c);return s(p.popLast())}).next(()=>e.store("documentMutations").Wt({jt:!0},([c,d,p],v)=>{const E=bu(d);return s(E.popLast())}))}Hn(t){const e=t.store("targets");return e.Wt((i,r)=>{const s=ny(r),c=Yp(this.M,s);return e.put(c)})}Jn(t,e){const i=e.store("remoteDocuments"),r=[];return i.Wt((s,c)=>{const d=e.store("remoteDocumentsV14"),p=(v=c,v.document?new Tt(Ve.fromString(v.document.name).popFirst(5)):v.noDocument?Tt.fromSegments(v.noDocument.path):v.unknownDocument?Tt.fromSegments(v.unknownDocument.path):Ht()).path.toArray();var v;const E={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(E))}).next(()=>Le.waitFor(r))}}function EI(n){n.createObjectStore("targetDocuments",{keyPath:XS}).createIndex("documentTargetsIndex",fR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",JS,{unique:!0}),n.createObjectStore("targetGlobal")}const uy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rc{constructor(t,e,i,r,s,c,d,p,v,E,S=13){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=i,this.Yn=s,this.window=c,this.document=d,this.Xn=v,this.Zn=E,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=N=>Promise.resolve(),!Rc.vt())throw new ot(ke.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yI(this,r),this.hs=e+"main",this.M=new rI(p),this.ls=new Cu(this.hs,this.ts,new cy(this.M)),this.fs=new pI(this.referenceDelegate,this.M),this.ds=new AR(this.M),this._s=new aI,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===E&&Yr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ot(ke.FAILED_PRECONDITION,uy);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.fs.getHighestSequenceNumber(t))}).then(t=>{this.es=new Oa(t,this.Xn)}).then(()=>{this.ns=!0}).catch(t=>(this.ls&&this.ls.close(),Promise.reject(t)))}Ts(t){var e=this;return this.cs=function(){var i=(0,Pe.Z)(function*(r){if(e.started)return t(r)});return function(r){return i.apply(this,arguments)}}(),t(this.isPrimary)}setDatabaseDeletedListener(t){this.ls.Ot(function(){var e=(0,Pe.Z)(function*(i){null===i.newVersion&&(yield t())});return function(i){return e.apply(this,arguments)}}())}setNetworkEnabled(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Yn.enqueueAndForget((0,Pe.Z)(function*(){e.started&&(yield e.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>Jm(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(t).next(e=>{e||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(t)).next(e=>this.isPrimary&&!e?this.Rs(t).next(()=>!1):!!e&&this.bs(t).next(()=>!0))).catch(t=>{if(qp(t))return pt("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return pt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.Yn.enqueueRetryable(()=>this.cs(t)),this.isPrimary=t})}Es(t){return dy(t).get("owner").next(e=>Le.resolve(this.Ps(e)))}Vs(t){return Jm(t).delete(this.clientId)}vs(){var t=this;return(0,Pe.Z)(function*(){if(t.isPrimary&&!t.Ss(t.us,18e5)){t.us=Date.now();const e=yield t.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=uo(i,"clientMetadata");return r.qt().next(s=>{const c=t.Ds(s,18e5),d=s.filter(p=>-1===c.indexOf(p));return Le.forEach(d,p=>r.delete(p.clientId)).next(()=>d)})}).catch(()=>[]);if(t.ws)for(const i of e)t.ws.removeItem(t.Cs(i.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(t){return!!t&&t.ownerId===this.clientId}As(t){return this.Zn?Le.resolve(!0):dy(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)){if(this.Ps(e)&&this.networkEnabled)return!0;if(!this.Ps(e)){if(!e.allowTabSynchronization)throw new ot(ke.FAILED_PRECONDITION,uy);return!1}}return!(!this.networkEnabled||!this.inForeground)||Jm(t).qt().next(i=>void 0===this.Ds(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&pt("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var t=this;return(0,Pe.Z)(function*(){t.ns=!1,t.Ns(),t.os&&(t.os.cancel(),t.os=null),t.ks(),t.Ms(),yield t.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const i=new qb(e,Oa.A);return t.Rs(i).next(()=>t.Vs(i))}),t.ls.close(),t.Os()})()}Ds(t,e){return t.filter(i=>this.Ss(i.updateTimeMs,e)&&!this.xs(i.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",t=>Jm(t).qt().next(e=>this.Ds(e,18e5).map(i=>i.clientId)))}get started(){return this.ns}getMutationQueue(t,e){return fI.Yt(t,this.M,e,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(t){return new SR(t,this.M.Jt.databaseId)}getDocumentOverlayCache(t){return RE.Yt(this.M,t)}getBundleCache(){return this._s}runTransaction(t,e,i){pt("IndexedDbPersistence","Starting transaction:",t);const r="readonly"===e?"readonly":"readwrite",s=14===(c=this.ts)?CR:13===c?nI:12===c?bR:11===c?tI:void Ht();var c;let d;return this.ls.runTransaction(t,r,s,p=>(d=new qb(p,this.es?this.es.next():Oa.A),"readwrite-primary"===e?this.Es(d).next(v=>!!v||this.As(d)).next(v=>{if(!v)throw Yr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new ot(ke.FAILED_PRECONDITION,iI);return i(d)}).next(v=>this.bs(d).next(()=>v)):this.$s(d).next(()=>i(d)))).then(p=>(d.raiseOnCommittedEvent(),p))}$s(t){return dy(t).get("owner").next(e=>{if(null!==e&&this.Ss(e.leaseTimestampMs,5e3)&&!this.xs(e.ownerId)&&!this.Ps(e)&&!(this.Zn||this.allowTabSynchronization&&e.allowTabSynchronization))throw new ot(ke.FAILED_PRECONDITION,uy)})}bs(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return dy(t).put("owner",e)}static vt(){return Cu.vt()}Rs(t){const e=dy(t);return e.get("owner").next(i=>this.Ps(i)?(pt("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Le.resolve())}Ss(t,e){const i=Date.now();return!(t<i-e||t>i&&(Yr(`Detected an update time that is in the future: ${t} > ${i}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ss=()=>{this.Ns(),(0,z.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(t){var e;try{const i=null!==(null===(e=this.ws)||void 0===e?void 0:e.getItem(this.Cs(t)));return pt("IndexedDbPersistence",`Client '${t}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Yr("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(t){Yr("Failed to set zombie client id.",t)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(t){}}Cs(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function dy(n){return uo(n,"owner")}function Jm(n){return uo(n,"clientMetadata")}function ng(n,t){let e=n.projectId;return n.isDefaultDatabase||(e+="."+n.database),"firestore/"+t+"/"+e+"/"}class RR{constructor(t,e,i){this.ds=t,this.Bs=e,this.indexManager=i}Ls(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKey(t,e).next(i=>this.Us(t,e,i))}Us(t,e,i){return this.ds.getEntry(t,e).next(r=>{for(const s of i)s.applyToLocalView(r);return r})}qs(t,e){t.forEach((i,r)=>{for(const s of e)s.applyToLocalView(r)})}Ks(t,e){return this.ds.getEntries(t,e).next(i=>this.Gs(t,i).next(()=>i))}Gs(t,e){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(t,e).next(i=>this.qs(e,i))}Qs(t,e,i){return Tt.isDocumentKey((r=e).path)&&null===r.collectionGroup&&0===r.filters.length?this.js(t,e.path):Ob(e)?this.Ws(t,e,i):this.zs(t,e,i);var r}js(t,e){return this.Ls(t,new Tt(e)).next(i=>{let r=Um();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}Ws(t,e,i){const r=e.collectionGroup;let s=Um();return this.indexManager.getCollectionParents(t,r).next(c=>Le.forEach(c,d=>{const p=(v=e,E=d.child(r),new th(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt));var v,E;return this.zs(t,p,i).next(v=>{v.forEach((E,S)=>{s=s.insert(E,S)})})}).next(()=>s))}zs(t,e,i){let r;return this.ds.getAllFromCollection(t,e.path,i).next(s=>(r=s,this.Bs.getAllMutationBatchesAffectingQuery(t,e))).next(s=>{for(const c of s)for(const d of c.mutations){const p=d.key;let v=r.get(p);null==v&&(v=ur.newInvalidDocument(p),r=r.insert(p,v)),Pb(d,v,c.localWriteTime),v.isFoundDocument()||(r=r.remove(p))}}).next(()=>(r.forEach((s,c)=>{gE(e,c)||(r=r.remove(s))}),r))}}class BE{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Hs=i,this.Js=r}static Ys(t,e){let i=Ni(),r=Ni();for(const s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new BE(t,e.fromCache,i,r)}}class TI{constructor(){this.Xs=!1}initialize(t,e){this.Zs=t,this.indexManager=e,this.Xs=!0}Qs(t,e,i,r){return this.ti(t,e).next(s=>s||this.ei(t,e,r,i)).next(s=>s||this.ni(t,e))}ti(t,e){return Le.resolve(null)}ei(t,e,i,r){return function hE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(e)||r.isEqual(K.min())?this.ni(t,e):this.Zs.Ks(t,i).next(s=>{const c=this.si(e,s);return this.ii(e,c,i,r)?this.ni(t,e):(kp()<=Rl.in.DEBUG&&pt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Nb(e)),this.ri(t,c,e,aE(r,-1)))})}si(t,e){let i=new er(bS(t));return e.forEach((r,s)=>{gE(t,s)&&(i=i.add(s))}),i}ii(t,e,i,r){if(null===t.limit)return!1;if(i.size!==e.size)return!0;const s="F"===t.limitType?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ni(t,e){return kp()<=Rl.in.DEBUG&&pt("QueryEngine","Using full collection scan to execute query:",Nb(e)),this.Zs.Qs(t,e,Sc.min())}ri(t,e,i,r){return this.Zs.Qs(t,i,r).next(s=>(e.forEach(c=>{s=s.insert(c.key,c)}),s))}}class Qb{constructor(t,e,i,r){this.persistence=t,this.oi=e,this.M=r,this.ui=new dr(C),this.ai=new Tf(s=>Xd(s),Uv),this.ci=new Map,this.hi=t.getRemoteDocumentCache(),this.fs=t.getTargetCache(),this._s=t.getBundleCache(),this.li(i)}li(t){this.indexManager=this.persistence.getIndexManager(t),this.Bs=this.persistence.getMutationQueue(t,this.indexManager),this.fi=new RR(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ui))}}function hy(n,t,e,i){return new Qb(n,t,e,i)}function DI(n,t){return UE.apply(this,arguments)}function UE(){return UE=(0,Pe.Z)(function*(n,t){const e=At(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.Bs.getAllMutationBatches(i).next(s=>(r=s,e.li(t),e.Bs.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let p=Ni();for(const v of r){c.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}for(const v of s){d.push(v.batchId);for(const E of v.mutations)p=p.add(E.key)}return e.fi.Ks(i,p).next(v=>({di:v,removedBatchIds:c,addedBatchIds:d}))})})}),UE.apply(this,arguments)}function SI(n,t){const e=At(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=t.batch.keys(),s=e.hi.newChangeBuffer({trackRemovals:!0});return function(c,d,p,v){const E=p.batch,S=E.keys();let N=Le.resolve();return S.forEach(F=>{N=N.next(()=>v.getEntry(d,F)).next(G=>{const J=p.docVersions.get(F);pn(null!==J),G.version.compareTo(J)<0&&(E.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),v.addEntry(G)))})}),N.next(()=>c.Bs.removeMutationBatch(d,E))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.Bs.performConsistencyCheck(i)).next(()=>e.fi.Ks(i,r))})}function VE(n){const t=At(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.fs.getLastRemoteSnapshotVersion(e))}function HE(n,t){const e=At(n),i=t.snapshotVersion;let r=e.ui;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=e.hi.newChangeBuffer({trackRemovals:!0});r=e.ui;const d=[];t.targetChanges.forEach((v,E)=>{const S=r.get(E);if(!S)return;d.push(e.fs.removeMatchingKeys(s,v.removedDocuments,E).next(()=>e.fs.addMatchingKeys(s,v.addedDocuments,E)));let N=S.withSequenceNumber(s.currentSequenceNumber);var F,G,J;t.targetMismatches.has(E)?N=N.withResumeToken(Pt.EMPTY_BYTE_STRING,K.min()).withLastLimboFreeSnapshotVersion(K.min()):v.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(v.resumeToken,i)),r=r.insert(E,N),G=N,J=v,(0===(F=S).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&d.push(e.fs.updateTargetData(s,N))});let p=xc();if(t.documentUpdates.forEach(v=>{t.resolvedLimboDocuments.has(v)&&d.push(e.persistence.referenceDelegate.updateLimboDocument(s,v))}),d.push(jE(s,c,t.documentUpdates).next(v=>{p=v})),!i.isEqual(K.min())){const v=e.fs.getLastRemoteSnapshotVersion(s).next(E=>e.fs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(v)}return Le.waitFor(d).next(()=>c.apply(s)).next(()=>e.fi.Gs(s,p)).next(()=>p)}).then(s=>(e.ui=r,s))}function jE(n,t,e){let i=Ni();return e.forEach(r=>i=i.add(r)),t.getEntries(n,i).next(r=>{let s=xc();return e.forEach((c,d)=>{const p=r.get(c);d.isNoDocument()&&d.version.isEqual(K.min())?(t.removeEntry(c,d.readTime),s=s.insert(c,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||0===d.version.compareTo(p.version)&&p.hasPendingWrites?(t.addEntry(d),s=s.insert(c,d)):pt("LocalStore","Ignoring outdated watch update for ",c,". Current version:",p.version," Watch version:",d.version)}),s})}function MR(n,t){const e=At(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===t&&(t=-1),e.Bs.getNextMutationBatchAfterBatchId(i,t)))}function Xm(n,t){const e=At(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.fs.getTargetData(i,t).next(s=>s?(r=s,Le.resolve(r)):e.fs.allocateTargetId(i).next(c=>(r=new ih(t,c,0,i.currentSequenceNumber),e.fs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=e.ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ui=e.ui.insert(i.targetId,i),e.ai.set(t,i.targetId)),i})}function fy(n,t,e){return py.apply(this,arguments)}function py(){return py=(0,Pe.Z)(function*(n,t,e){const i=At(n),r=i.ui.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!qp(c))throw c;pt("LocalStore",`Failed to update sequence numbers for target ${t}: ${c}`)}i.ui=i.ui.remove(t),i.ai.delete(r.target)}),py.apply(this,arguments)}function e_(n,t,e){const i=At(n);let r=K.min(),s=Ni();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,p,v){const E=At(d),S=E.ai.get(v);return void 0!==S?Le.resolve(E.ui.get(S)):E.fs.getTargetData(p,v)}(i,c,Bl(t)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.fs.getMatchingKeysForTargetId(c,d.targetId).next(p=>{s=p})}).next(()=>i.oi.Qs(c,t,e?r:K.min(),e?s:Ni())).next(d=>(Xb(i,yS(t),d),{documents:d,_i:s})))}function GE(n,t){const e=At(n),i=At(e.fs),r=e.ui.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>i.Et(s,t).next(c=>c?c.target:null))}function Jb(n,t){const e=At(n),i=e.ci.get(t)||K.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.hi.getAllFromCollectionGroup(r,t,aE(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(Xb(e,t,r),r))}function Xb(n,t,e){let i=K.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ci.set(t,i)}function $E(){return $E=(0,Pe.Z)(function*(n,t,e,i){const r=At(n);let s=Ni(),c=xc();for(const v of e){const E=t.wi(v.metadata.name);v.document&&(s=s.add(E));const S=t.mi(v);S.setReadTime(t.gi(v.metadata.readTime)),c=c.insert(E,S)}const d=r.hi.newChangeBuffer({trackRemovals:!0}),p=yield Xm(r,(v=i,Bl(Vp(Ve.fromString(`__bundle__/docs/${v}`)))));var v;return r.persistence.runTransaction("Apply bundle documents","readwrite",v=>jE(v,d,c).next(E=>(d.apply(v),E)).next(E=>r.fs.removeMatchingKeysForTargetId(v,p.targetId).next(()=>r.fs.addMatchingKeys(v,s,p.targetId)).next(()=>r.fi.Gs(v,E)).next(()=>E)))}),$E.apply(this,arguments)}function NR(n,t){return WE.apply(this,arguments)}function WE(){return WE=(0,Pe.Z)(function*(n,t,e=Ni()){const i=yield Xm(n,Bl(Kp(t.bundledQuery))),r=At(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=Kr(t.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r._s.saveNamedQuery(s,t);const d=i.withResumeToken(Pt.EMPTY_BYTE_STRING,c);return r.ui=r.ui.insert(d.targetId,d),r.fs.updateTargetData(s,d).next(()=>r.fs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.fs.addMatchingKeys(s,e,i.targetId)).next(()=>r._s.saveNamedQuery(s,t))})}),WE.apply(this,arguments)}class II{constructor(t){this.M=t,this.yi=new Map,this.pi=new Map}getBundleMetadata(t,e){return Le.resolve(this.yi.get(e))}saveBundleMetadata(t,e){var i;return this.yi.set(e.id,{id:(i=e).id,version:i.version,createTime:Kr(i.createTime)}),Le.resolve()}getNamedQuery(t,e){return Le.resolve(this.pi.get(e))}saveNamedQuery(t,e){return this.pi.set(e.name,{name:(i=e).name,query:Kp(i.bundledQuery),readTime:Kr(i.readTime)}),Le.resolve();var i}}class zE{constructor(){this.overlays=new dr(Tt.comparator),this.Ii=new Map}getOverlay(t,e){return Le.resolve(this.overlays.get(e))}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.Xt(t,e,s)}),Le.resolve()}removeOverlaysForBatchId(t,e,i){const r=this.Ii.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ii.delete(i)),Le.resolve()}getOverlaysForCollection(t,e,i){const r=hr(),s=e.length+1,c=new Tt(e.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const p=d.getNext().value,v=p.getKey();if(!e.isPrefixOf(v.path))break;v.path.length===s&&p.largestBatchId>i&&r.set(p.getKey(),p)}return Le.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new dr((v,E)=>v-E);const c=this.overlays.getIterator();for(;c.hasNext();){const v=c.getNext().value;if(v.getKey().getCollectionGroup()===e&&v.largestBatchId>i){let E=s.get(v.largestBatchId);null===E&&(E=hr(),s=s.insert(v.largestBatchId,E)),E.set(v.getKey(),v)}}const d=hr(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,E)=>d.set(v,E)),!(d.size()>=r)););return Le.resolve(d)}Xt(t,e,i){if(null===i)return;const r=this.overlays.get(i.key);if(null!==r){const c=this.Ii.get(r.largestBatchId).delete(i.key);this.Ii.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new AE(e,i));let s=this.Ii.get(e);void 0===s&&(s=Ni(),this.Ii.set(e,s)),this.Ii.set(e,s.add(i.key))}}class eC{constructor(){this.Ti=new er(Xs.Ei),this.Ai=new er(Xs.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(t,e){const i=new Xs(t,e);this.Ti=this.Ti.add(i),this.Ai=this.Ai.add(i)}bi(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Pi(new Xs(t,e))}Vi(t,e){t.forEach(i=>this.removeReference(i,e))}vi(t){const e=new Tt(new Ve([])),i=new Xs(e,t),r=new Xs(e,t+1),s=[];return this.Ai.forEachInRange([i,r],c=>{this.Pi(c),s.push(c.key)}),s}Si(){this.Ti.forEach(t=>this.Pi(t))}Pi(t){this.Ti=this.Ti.delete(t),this.Ai=this.Ai.delete(t)}Di(t){const e=new Tt(new Ve([])),i=new Xs(e,t),r=new Xs(e,t+1);let s=Ni();return this.Ai.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(t){const e=new Xs(t,0),i=this.Ti.firstAfterOrEqual(e);return null!==i&&t.isEqual(i.key)}}class Xs{constructor(t,e){this.key=t,this.Ci=e}static Ei(t,e){return Tt.comparator(t.key,e.key)||C(t.Ci,e.Ci)}static Ri(t,e){return C(t.Ci,e.Ci)||Tt.comparator(t.key,e.key)}}class AI{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.Bs=[],this.xi=1,this.Ni=new er(Xs.Ei)}checkEmpty(t){return Le.resolve(0===this.Bs.length)}addMutationBatch(t,e,i,r){const s=this.xi;this.xi++;const c=new IE(s,e,i,r);this.Bs.push(c);for(const d of r)this.Ni=this.Ni.add(new Xs(d.key,s)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return Le.resolve(c)}lookupMutationBatch(t,e){return Le.resolve(this.ki(e))}getNextMutationBatchAfterBatchId(t,e){const r=this.Mi(e+1),s=r<0?0:r;return Le.resolve(this.Bs.length>s?this.Bs[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(t){return Le.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const i=new Xs(e,0),r=new Xs(e,Number.POSITIVE_INFINITY),s=[];return this.Ni.forEachInRange([i,r],c=>{const d=this.ki(c.Ci);s.push(d)}),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new er(C);return e.forEach(r=>{const s=new Xs(r,0),c=new Xs(r,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([s,c],d=>{i=i.add(d.Ci)})}),Le.resolve(this.Oi(i))}getAllMutationBatchesAffectingQuery(t,e){const i=e.path,r=i.length+1;let s=i;Tt.isDocumentKey(s)||(s=s.child(""));const c=new Xs(new Tt(s),0);let d=new er(C);return this.Ni.forEachWhile(p=>{const v=p.key.path;return!!i.isPrefixOf(v)&&(v.length===r&&(d=d.add(p.Ci)),!0)},c),Le.resolve(this.Oi(d))}Oi(t){const e=[];return t.forEach(i=>{const r=this.ki(i);null!==r&&e.push(r)}),e}removeMutationBatch(t,e){pn(0===this.Fi(e.batchId,"removed")),this.Bs.shift();let i=this.Ni;return Le.forEach(e.mutations,r=>{const s=new Xs(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Ni=i})}_n(t){}containsKey(t,e){const i=new Xs(e,0),r=this.Ni.firstAfterOrEqual(i);return Le.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return Le.resolve()}Fi(t,e){return this.Mi(t)}Mi(t){return 0===this.Bs.length?0:t-this.Bs[0].batchId}ki(t){const e=this.Mi(t);return e<0||e>=this.Bs.length?null:this.Bs[e]}}class xI{constructor(t){this.$i=t,this.docs=new dr(Tt.comparator),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const i=e.key,r=this.docs.get(i),s=r?r.size:0,c=this.$i(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const i=this.docs.get(e);return Le.resolve(i?i.document.mutableCopy():ur.newInvalidDocument(e))}getEntries(t,e){let i=xc();return e.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ur.newInvalidDocument(r))}),Le.resolve(i)}getAllFromCollection(t,e,i){let r=xc();const s=new Tt(e.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!e.isPrefixOf(d.path))break;d.path.length>e.length+1||lE(Zx(p),i)<=0||(r=r.insert(p.key,p.mutableCopy()))}return Le.resolve(r)}getAllFromCollectionGroup(t,e,i,r){Ht()}Bi(t,e){return Le.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new kR(this)}getSize(t){return Le.resolve(this.size)}}class kR extends LE{constructor(t){super(),this.Kn=t}applyChanges(t){const e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.Kn.addEntry(t,r)):this.Kn.removeEntry(i)}),Le.waitFor(e)}getFromCache(t,e){return this.Kn.getEntry(t,e)}getAllFromCache(t,e){return this.Kn.getEntries(t,e)}}class RI{constructor(t){this.persistence=t,this.Li=new Tf(e=>Xd(e),Uv),this.lastRemoteSnapshotVersion=K.min(),this.highestTargetId=0,this.Ui=0,this.qi=new eC,this.targetCount=0,this.Ki=If.gn()}forEachTarget(t,e){return this.Li.forEach((i,r)=>e(r)),Le.resolve()}getLastRemoteSnapshotVersion(t){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Le.resolve(this.Ui)}allocateTargetId(t){return this.highestTargetId=this.Ki.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Ui&&(this.Ui=e),Le.resolve()}Tn(t){this.Li.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Ki=new If(e),this.highestTargetId=e),t.sequenceNumber>this.Ui&&(this.Ui=t.sequenceNumber)}addTargetData(t,e){return this.Tn(e),this.targetCount+=1,Le.resolve()}updateTargetData(t,e){return this.Tn(e),Le.resolve()}removeTargetData(t,e){return this.Li.delete(e.target),this.qi.vi(e.targetId),this.targetCount-=1,Le.resolve()}removeTargets(t,e,i){let r=0;const s=[];return this.Li.forEach((c,d)=>{d.sequenceNumber<=e&&null===i.get(d.targetId)&&(this.Li.delete(c),s.push(this.removeMatchingKeysForTargetId(t,d.targetId)),r++)}),Le.waitFor(s).next(()=>r)}getTargetCount(t){return Le.resolve(this.targetCount)}getTargetData(t,e){const i=this.Li.get(e)||null;return Le.resolve(i)}addMatchingKeys(t,e,i){return this.qi.bi(e,i),Le.resolve()}removeMatchingKeys(t,e,i){this.qi.Vi(e,i);const r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(c=>{s.push(r.markPotentiallyOrphaned(t,c))}),Le.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.qi.vi(e),Le.resolve()}getMatchingKeysForTargetId(t,e){const i=this.qi.Di(e);return Le.resolve(i)}containsKey(t,e){return Le.resolve(this.qi.containsKey(e))}}class MI{constructor(t,e){this.Gi={},this.overlays={},this.es=new Oa(0),this.ns=!1,this.ns=!0,this.referenceDelegate=t(this),this.fs=new RI(this),this.indexManager=new DR,this.ds=new xI(i=>this.referenceDelegate.Qi(i)),this.M=new rI(e),this._s=new II(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new zE,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.Gi[t.toKey()];return i||(i=new AI(e,this.referenceDelegate),this.Gi[t.toKey()]=i),i}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(t,e,i){pt("MemoryPersistence","Starting transaction:",t);const r=new PR(this.es.next());return this.referenceDelegate.ji(),i(r).next(s=>this.referenceDelegate.Wi(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}zi(t,e){return Le.or(Object.values(this.Gi).map(i=>()=>i.containsKey(t,e)))}}class PR extends DE{constructor(t){super(),this.currentSequenceNumber=t}}class tC{constructor(t){this.persistence=t,this.Hi=new eC,this.Ji=null}static Yi(t){return new tC(t)}get Xi(){if(this.Ji)return this.Ji;throw Ht()}addReference(t,e,i){return this.Hi.addReference(i,e),this.Xi.delete(i.toString()),Le.resolve()}removeReference(t,e,i){return this.Hi.removeReference(i,e),this.Xi.add(i.toString()),Le.resolve()}markPotentiallyOrphaned(t,e){return this.Xi.add(e.toString()),Le.resolve()}removeTarget(t,e){this.Hi.vi(e.targetId).forEach(r=>this.Xi.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Xi.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}ji(){this.Ji=new Set}Wi(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.Xi,i=>{const r=Tt.fromPath(i);return this.Zi(t,r).next(s=>{s||e.removeEntry(r,K.min())})}).next(()=>(this.Ji=null,e.apply(t)))}updateLimboDocument(t,e){return this.Zi(t,e).next(i=>{i?this.Xi.delete(e.toString()):this.Xi.add(e.toString())})}Qi(t){return 0}Zi(t,e){return Le.or([()=>Le.resolve(this.Hi.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.zi(t,e)])}}function qE(n,t){return`firestore_clients_${n}_${t}`}function ea(n,t,e){let i=`firestore_mutations_${n}_${e}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}function xf(n,t){return`firestore_targets_${n}_${t}`}class nC{constructor(t,e,i,r){this.user=t,this.batchId=e,this.state=i,this.error=r}static tr(t,e,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new ot(r.error.code,r.error.message))),c?new nC(t,e,r.state,s):(Yr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${i}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class gy{constructor(t,e,i){this.targetId=t,this.state=e,this.error=i}static tr(t,e){const i=JSON.parse(e);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new ot(i.error.code,i.error.message))),s?new gy(t,i.state,r):(Yr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}er(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class ZE{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static tr(t,e){const i=JSON.parse(e);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=zv();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=tE(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new ZE(t,s):(Yr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class ig{constructor(t,e){this.clientId=t,this.onlineState=e}static tr(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new ig(e.clientId,e.onlineState):(Yr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class YE{constructor(){this.activeTargetIds=zv()}nr(t){this.activeTargetIds=this.activeTargetIds.add(t)}sr(t){this.activeTargetIds=this.activeTargetIds.delete(t)}er(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class my{constructor(t,e,i,r,s){this.window=t,this.Yn=e,this.persistenceKey=i,this.ir=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new dr(C),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.hr=qE(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new YE),this.dr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(t){return!(!t||!t.localStorage)}start(){var t=this;return(0,Pe.Z)(function*(){const e=yield t.syncEngine.Fs();for(const r of e){if(r===t.ir)continue;const s=t.getItem(qE(t.persistenceKey,r));if(s){const c=ZE.tr(r,s);c&&(t.ar=t.ar.insert(c.clientId,c))}}t.yr();const i=t.storage.getItem(t.mr);if(i){const r=t.pr(i);r&&t.Ir(r)}for(const r of t.cr)t.ur(r);t.cr=[],t.window.addEventListener("pagehide",()=>t.shutdown()),t.started=!0})()}writeSequenceNumber(t){this.setItem(this.lr,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(t){let e=!1;return this.ar.forEach((i,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.Er(t,"pending")}updateMutationState(t,e,i){this.Er(t,e,i),this.Ar(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const i=this.storage.getItem(xf(this.persistenceKey,t));if(i){const r=gy.tr(t,i);r&&(e=r.state)}}return this.Rr.nr(t),this.yr(),e}removeLocalQueryTarget(t){this.Rr.sr(t),this.yr()}isLocalQueryTarget(t){return this.Rr.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(xf(this.persistenceKey,t))}updateQueryState(t,e,i){this.br(t,e,i)}handleUserChange(t,e,i){e.forEach(r=>{this.Ar(r)}),this.currentUser=t,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.Pr(t)}notifyBundleLoaded(t){this.Vr(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return pt("SharedClientState","READ",t,e),e}setItem(t,e){pt("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){pt("SharedClientState","REMOVE",t),this.storage.removeItem(t)}ur(t){var e=this;const i=t;if(i.storageArea===this.storage){if(pt("SharedClientState","EVENT",i.key,i.newValue),i.key===this.hr)return void Yr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,Pe.Z)(function*(){if(e.started){if(null!==i.key)if(e.dr.test(i.key)){if(null==i.newValue){const r=e.vr(i.key);return e.Sr(r,null)}{const r=e.Dr(i.key,i.newValue);if(r)return e.Sr(r.clientId,r)}}else if(e._r.test(i.key)){if(null!==i.newValue){const r=e.Cr(i.key,i.newValue);if(r)return e.Nr(r)}}else if(e.wr.test(i.key)){if(null!==i.newValue){const r=e.kr(i.key,i.newValue);if(r)return e.Mr(r)}}else if(i.key===e.mr){if(null!==i.newValue){const r=e.pr(i.newValue);if(r)return e.Ir(r)}}else if(i.key===e.lr){const r=function(s){let c=Oa.A;if(null!=s)try{const d=JSON.parse(s);pn("number"==typeof d),c=d}catch(d){Yr("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Oa.A&&e.sequenceNumberHandler(r)}else if(i.key===e.gr){const r=e.Or(i.newValue);yield Promise.all(r.map(s=>e.syncEngine.Fr(s)))}}else e.cr.push(i)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(t,e,i){const r=new nC(this.currentUser,t,e,i),s=ea(this.persistenceKey,this.currentUser,t);this.setItem(s,r.er())}Ar(t){const e=ea(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Pr(t){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:t}))}br(t,e,i){const r=xf(this.persistenceKey,t),s=new gy(t,e,i);this.setItem(r,s.er())}Vr(t){const e=JSON.stringify(Array.from(t));this.setItem(this.gr,e)}vr(t){const e=this.dr.exec(t);return e?e[1]:null}Dr(t,e){const i=this.vr(t);return ZE.tr(i,e)}Cr(t,e){const i=this._r.exec(t),r=Number(i[1]);return nC.tr(new Rs(void 0!==i[2]?i[2]:null),r,e)}kr(t,e){const i=this.wr.exec(t),r=Number(i[1]);return gy.tr(r,e)}pr(t){return ig.tr(t)}Or(t){return JSON.parse(t)}Nr(t){var e=this;return(0,Pe.Z)(function*(){if(t.user.uid===e.currentUser.uid)return e.syncEngine.$r(t.batchId,t.state,t.error);pt("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)})()}Mr(t){return this.syncEngine.Br(t.targetId,t.state,t.error)}Sr(t,e){const i=e?this.ar.insert(t,e):this.ar.remove(t),r=this.Tr(this.ar),s=this.Tr(i),c=[],d=[];return s.forEach(p=>{r.has(p)||c.push(p)}),r.forEach(p=>{s.has(p)||d.push(p)}),this.syncEngine.Lr(c,d).then(()=>{this.ar=i})}Ir(t){this.ar.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Tr(t){let e=zv();return t.forEach((i,r)=>{e=e.unionWith(r.activeTargetIds)}),e}}class OI{constructor(){this.Ur=new YE,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.Ur.nr(t),this.qr[t]||"not-current"}updateQueryState(t,e,i){this.qr[t]=e}removeLocalQueryTarget(t){this.Ur.sr(t)}isLocalQueryTarget(t){return this.Ur.activeTargetIds.has(t)}clearQueryState(t){delete this.qr[t]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(t){return this.Ur.activeTargetIds.has(t)}start(){return this.Ur=new YE,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}class NI{Kr(t){}shutdown(){}}class kI{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(t){this.zr.push(t)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){pt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.zr)t(0)}Wr(){pt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.zr)t(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const FR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class KE{constructor(t){this.Jr=t.Jr,this.Yr=t.Yr}Xr(t){this.Zr=t}eo(t){this.no=t}onMessage(t){this.so=t}close(){this.Yr()}send(t){this.Jr(t)}io(){this.Zr()}ro(t){this.no(t)}oo(t){this.so(t)}}class PI extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.uo=(t.ssl?"https":"http")+"://"+t.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(t,e,i,r,s){const c=this.ho(t,e);pt("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(t,c,d,i).then(p=>(pt("RestConnection","Received: ",p),p),p=>{throw Jd("RestConnection",`${t} failed with error: `,p,"url: ",c,"request:",i),p})}_o(t,e,i,r,s){return this.co(t,e,i,r,s)}lo(t,e,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+vf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach((r,s)=>t[s]=r),i&&i.headers.forEach((r,s)=>t[s]=r)}ho(t,e){return`${this.uo}/v1/${e}:${FR[t]}`}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams}fo(t,e,i,r){return new Promise((s,c)=>{const d=new Kw;d.listenOnce(Yw.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case _f.NO_ERROR:const v=d.getResponseJson();pt("Connection","XHR received:",JSON.stringify(v)),s(v);break;case _f.TIMEOUT:pt("Connection",'RPC "'+t+'" timed out'),c(new ot(ke.DEADLINE_EXCEEDED,"Request time out"));break;case _f.HTTP_ERROR:const E=d.getStatus();if(pt("Connection",'RPC "'+t+'" failed with status:',E,"response text:",d.getResponseText()),E>0){const S=d.getResponseJson().error;if(S&&S.status&&S.message){const N=function(F){const G=F.toLowerCase().replace(/_/g,"-");return Object.values(ke).indexOf(G)>=0?G:ke.UNKNOWN}(S.status);c(new ot(N,S.message))}else c(new ot(ke.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new ot(ke.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{pt("Connection",'RPC "'+t+'" completed.')}});const p=JSON.stringify(r);d.send(e,"POST",p,i,15)})}wo(t,e,i){const r=[this.uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=yb(),c=bb(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new wb({})),this.lo(d.initMessageHeaders,e,i),(0,z.uI)()||(0,z.b$)()||(0,z.d)()||(0,z.w1)()||(0,z.Mn)()||(0,z.ru)()||(d.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");pt("Connection","Creating WebChannel: "+p,d);const v=s.createWebChannel(p,d);let E=!1,S=!1;const N=new KE({Jr:G=>{S?pt("Connection","Not sending because WebChannel is closed:",G):(E||(pt("Connection","Opening WebChannel transport."),v.open(),E=!0),pt("Connection","WebChannel sending:",G),v.send(G))},Yr:()=>v.close()}),F=(G,J,de)=>{G.listen(J,$e=>{try{de($e)}catch(Ke){setTimeout(()=>{throw Ke},0)}})};return F(v,Np.EventType.OPEN,()=>{S||pt("Connection","WebChannel transport opened.")}),F(v,Np.EventType.CLOSE,()=>{S||(S=!0,pt("Connection","WebChannel transport closed"),N.ro())}),F(v,Np.EventType.ERROR,G=>{S||(S=!0,Jd("Connection","WebChannel transport errored:",G),N.ro(new ot(ke.UNAVAILABLE,"The operation could not be completed")))}),F(v,Np.EventType.MESSAGE,G=>{var J;if(!S){const de=G.data[0];pn(!!de);const $e=de,Ke=$e.error||(null===(J=$e[0])||void 0===J?void 0:J.error);if(Ke){pt("Connection","WebChannel received error:",Ke);const st=Ke.status;let et=function(Dt){const $t=Js[Dt];if(void 0!==$t)return NS($t)}(st),Ct=Ke.message;void 0===et&&(et=ke.INTERNAL,Ct="Unknown error status: "+st+" with message "+Ke.message),S=!0,N.ro(new ot(et,Ct)),v.close()}else pt("Connection","WebChannel received:",de),N.oo(de)}}),F(c,Im.STAT_EVENT,G=>{G.stat===Cb.PROXY?pt("Connection","Detected buffering proxy"):G.stat===Cb.NOPROXY&&pt("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.io()},0),N}}function QE(){return"undefined"!=typeof window?window:null}function rg(){return"undefined"!=typeof document?document:null}function sg(n){return new VS(n,!0)}class FI{constructor(t,e,i=1e3,r=1.5,s=6e4){this.Yn=t,this.timerId=e,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(t){this.cancel();const e=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,e-i);r>0&&pt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),t())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class JE{constructor(t,e,i,r,s,c,d,p){this.Yn=t,this.Vo=i,this.vo=r,this.So=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=p,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new FI(t,e)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var t=this;return(0,Pe.Z)(function*(){t.ko()&&(yield t.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(t){this.Uo(),this.stream.send(t)}Bo(){var t=this;return(0,Pe.Z)(function*(){if(t.Mo())return t.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(t,e){var i=this;return(0,Pe.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==t?i.No.reset():e&&e.code===ke.RESOURCE_EXHAUSTED?(Yr(e.toString()),Yr("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):e&&e.code===ke.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=t,yield i.listener.eo(e)})()}Ko(){}auth(){this.state=1;const t=this.Go(this.Do),e=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Do===e&&this.Qo(i,r)},i=>{t(()=>{const r=new ot(ke.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(r)})})}Qo(t,e){const i=this.Go(this.Do);this.stream=this.Wo(t,e),this.stream.Xr(()=>{i(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(r=>{i(()=>this.jo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var t=this;this.state=5,this.No.Ro((0,Pe.Z)(function*(){t.state=0,t.start()}))}jo(t){return pt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}Go(t){return e=>{this.Yn.enqueueAndForget(()=>this.Do===t?e():(pt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LR extends JE{constructor(t,e,i,r,s,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,c),this.M=s}Wo(t,e){return this.So.wo("Listen",t,e)}onMessage(t){this.No.reset();const e=function IP(n,t){let e;if("targetChange"in t){const i="NO_CHANGE"===(p=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:Ht(),r=t.targetChange.targetIds||[],s=function(p,v){return p.N?(pn(void 0===v||"string"==typeof v),Pt.fromBase64String(v||"")):(pn(void 0===v||v instanceof Uint8Array),Pt.fromUint8Array(v||new Uint8Array))}(n,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&function(p){const v=void 0===p.code?ke.UNKNOWN:NS(p.code);return new ot(v,p.message||"")}(c);e=new FS(i,r,s,d||null)}else if("documentChange"in t){const i=t.documentChange,r=ad(n,i.document.name),s=Kr(i.document.updateTime),c=new Xo({mapValue:{fields:i.document.fields}}),d=ur.newFoundDocument(r,s,c);e=new qv(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){const i=t.documentDelete,r=ad(n,i.document),s=i.readTime?Kr(i.readTime):K.min(),c=ur.newNoDocument(r,s);e=new qv([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in t){const i=t.documentRemove,r=ad(n,i.document);e=new qv([],i.removedTargetIds||[],r,null)}else{if(!("filter"in t))return Ht();{const i=t.filter,s=new MS(i.count||0);e=new PS(i.targetId,s)}}var p;return e}(this.M,t),i=function(r){if(!("targetChange"in r))return K.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?K.min():s.readTime?Kr(s.readTime):K.min()}(t);return this.listener.zo(e,i)}Ho(t){const e={};e.database=Gm(this.M),e.addTarget=function(r,s){let c;const d=s.target;return c=Vv(d)?{documents:CE(r,d)}:{query:Kv(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=vE(r,s.resumeToken):s.snapshotVersion.compareTo(K.min())>0&&(c.readTime=jm(r,s.snapshotVersion.toTimestamp())),c}(this.M,t);const i=function aR(n,t){const e=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ht()}}(0,t.purpose);return null==e?null:{"goog-listen-tags":e}}(0,t);i&&(e.labels=i),this.Lo(e)}Jo(t){const e={};e.database=Gm(this.M),e.removeTarget=t,this.Lo(e)}}class LI extends JE{constructor(t,e,i,r,s,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,c),this.M=s,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(t,e){return this.So.wo("Write",t,e)}onMessage(t){if(pn(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Yo){this.No.reset();const e=function AP(n,t){return n&&n.length>0?(pn(void 0!==t),n.map(e=>function(i,r){let s=Kr(i.updateTime?i.updateTime:r);return s.isEqual(K.min())&&(s=Kr(r)),new xS(s,i.transformResults||[])}(e,t))):[]}(t.writeResults,t.commitTime),i=Kr(t.commitTime);return this.listener.tu(i,e)}return pn(!t.writeResults||0===t.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const t={};t.database=Gm(this.M),this.Lo(t)}Zo(t){const e={streamToken:this.lastStreamToken,writes:t.map(i=>$b(this.M,i))};this.Lo(e)}}class iC extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.So=i,this.M=r,this.su=!1}iu(){if(this.su)throw new ot(ke.FAILED_PRECONDITION,"The client has already been terminated.")}co(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So.co(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ot(ke.UNKNOWN,r.toString())})}_o(t,e,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.So._o(t,e,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ke.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ot(ke.UNKNOWN,r.toString())})}terminate(){this.su=!0}}class BI{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(t){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.cu("Offline")))}set(t){this.fu(),this.ru=0,"Online"===t&&(this.uu=!1),this.cu(t)}cu(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}hu(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(Yr(e),this.uu=!1):pt("OnlineStateTracker",e)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class BR{constructor(t,e,i,r,s){var c=this;this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=s,this.gu.Kr(d=>{i.enqueueAndForget((0,Pe.Z)(function*(){var p;Rf(c)&&(pt("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,Pe.Z)(function*(v){const E=At(v);E.wu.add(4),yield vy(E),E.yu.set("Unknown"),E.wu.delete(4),yield og(E)}),function(v){return p.apply(this,arguments)})(c))}))}),this.yu=new BI(i,r)}}function og(n){return _y.apply(this,arguments)}function _y(){return _y=(0,Pe.Z)(function*(n){if(Rf(n))for(const t of n.mu)yield t(!0)}),_y.apply(this,arguments)}function vy(n){return XE.apply(this,arguments)}function XE(){return XE=(0,Pe.Z)(function*(n){for(const t of n.mu)yield t(!1)}),XE.apply(this,arguments)}function rC(n,t){const e=At(n);e._u.has(t.targetId)||(e._u.set(t.targetId,t),aC(e)?oC(e):i_(e).Mo()&&sC(e,t))}function t_(n,t){const e=At(n),i=i_(e);e._u.delete(t),i.Mo()&&UI(e,t),0===e._u.size&&(i.Mo()?i.$o():Rf(e)&&e.yu.set("Unknown"))}function sC(n,t){n.pu.Z(t.targetId),i_(n).Ho(t)}function UI(n,t){n.pu.Z(t),i_(n).Jo(t)}function oC(n){n.pu=new Zv({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>n._u.get(t)||null}),i_(n).start(),n.yu.au()}function aC(n){return Rf(n)&&!i_(n).ko()&&n._u.size>0}function Rf(n){return 0===At(n).wu.size}function VI(n){n.pu=void 0}function HI(n){return eT.apply(this,arguments)}function eT(){return eT=(0,Pe.Z)(function*(n){n._u.forEach((t,e)=>{sC(n,t)})}),eT.apply(this,arguments)}function jI(n,t){return lC.apply(this,arguments)}function lC(){return lC=(0,Pe.Z)(function*(n,t){VI(n),aC(n)?(n.yu.lu(t),oC(n)):n.yu.set("Unknown")}),lC.apply(this,arguments)}function GI(n,t,e){return cC.apply(this,arguments)}function cC(){return cC=(0,Pe.Z)(function*(n,t,e){if(n.yu.set("Online"),t instanceof FS&&2===t.state&&t.cause)try{yield(i=(0,Pe.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r._u.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r._u.delete(d),r.pu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,t)}catch(i){pt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield uC(n,i)}else if(t instanceof qv?n.pu.ut(t):t instanceof PS?n.pu._t(t):n.pu.ht(t),!e.isEqual(K.min()))try{const i=yield VE(n.localStore);e.compareTo(i)>=0&&(yield function(r,s){const c=r.pu.yt(s);return c.targetChanges.forEach((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const v=r._u.get(p);v&&r._u.set(p,v.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const p=r._u.get(d);if(!p)return;r._u.set(d,p.withResumeToken(Pt.EMPTY_BYTE_STRING,p.snapshotVersion)),UI(r,d);const v=new ih(p.target,d,1,p.sequenceNumber);sC(r,v)}),r.remoteSyncer.applyRemoteEvent(c)}(n,e))}catch(i){pt("RemoteStore","Failed to raise snapshot:",i),yield uC(n,i)}var i}),cC.apply(this,arguments)}function uC(n,t,e){return tT.apply(this,arguments)}function tT(){return tT=(0,Pe.Z)(function*(n,t,e){if(!qp(t))throw t;n.wu.add(1),yield vy(n),n.yu.set("Offline"),e||(e=()=>VE(n.localStore)),n.asyncQueue.enqueueRetryable((0,Pe.Z)(function*(){pt("RemoteStore","Retrying IndexedDB access"),yield e(),n.wu.delete(1),yield og(n)}))}),tT.apply(this,arguments)}function UR(n,t){return t().catch(e=>uC(n,e,t))}function ag(n){return $I.apply(this,arguments)}function $I(){return $I=(0,Pe.Z)(function*(n){const t=At(n),e=oh(t);let i=t.du.length>0?t.du[t.du.length-1].batchId:-1;for(;xP(t);)try{const r=yield MR(t.localStore,i);if(null===r){0===t.du.length&&e.$o();break}i=r.batchId,RP(t,r)}catch(r){yield uC(t,r)}VR(t)&&HR(t)}),$I.apply(this,arguments)}function xP(n){return Rf(n)&&n.du.length<10}function RP(n,t){n.du.push(t);const e=oh(n);e.Mo()&&e.Xo&&e.Zo(t.mutations)}function VR(n){return Rf(n)&&!oh(n).ko()&&n.du.length>0}function HR(n){oh(n).start()}function MP(n){return WI.apply(this,arguments)}function WI(){return WI=(0,Pe.Z)(function*(n){oh(n).nu()}),WI.apply(this,arguments)}function OP(n){return n_.apply(this,arguments)}function n_(){return n_=(0,Pe.Z)(function*(n){const t=oh(n);for(const e of n.du)t.Zo(e.mutations)}),n_.apply(this,arguments)}function NP(n,t,e){return dC.apply(this,arguments)}function dC(){return dC=(0,Pe.Z)(function*(n,t,e){const i=n.du.shift(),r=ey.from(i,t,e);yield UR(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ag(n)}),dC.apply(this,arguments)}function nT(n,t){return hC.apply(this,arguments)}function hC(){return hC=(0,Pe.Z)(function*(n,t){var e;t&&oh(n).Xo&&(yield(e=(0,Pe.Z)(function*(i,r){if(OS(s=r.code)&&s!==ke.ABORTED){const c=i.du.shift();oh(i).Fo(),yield UR(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield ag(i)}var s}),function(i,r){return e.apply(this,arguments)})(n,t)),VR(n)&&HR(n)}),hC.apply(this,arguments)}function iT(n,t){return zI.apply(this,arguments)}function zI(){return zI=(0,Pe.Z)(function*(n,t){const e=At(n);e.asyncQueue.verifyOperationInProgress(),pt("RemoteStore","RemoteStore received new credentials");const i=Rf(e);e.wu.add(3),yield vy(e),i&&e.yu.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.wu.delete(3),yield og(e)}),zI.apply(this,arguments)}function yy(n,t){return fC.apply(this,arguments)}function fC(){return fC=(0,Pe.Z)(function*(n,t){const e=At(n);t?(e.wu.delete(2),yield og(e)):t||(e.wu.add(2),yield vy(e),e.yu.set("Unknown"))}),fC.apply(this,arguments)}function i_(n){return n.Iu||(n.Iu=function(t,e,i){const r=At(t);return r.iu(),new LR(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:HI.bind(null,n),eo:jI.bind(null,n),zo:GI.bind(null,n)}),n.mu.push(function(){var t=(0,Pe.Z)(function*(e){e?(n.Iu.Fo(),aC(n)?oC(n):n.yu.set("Unknown")):(yield n.Iu.stop(),VI(n))});return function(e){return t.apply(this,arguments)}}())),n.Iu}function oh(n){return n.Tu||(n.Tu=function(t,e,i){const r=At(t);return r.iu(),new LI(e,r.So,r.authCredentials,r.appCheckCredentials,r.M,i)}(n.datastore,n.asyncQueue,{Xr:MP.bind(null,n),eo:nT.bind(null,n),eu:OP.bind(null,n),tu:NP.bind(null,n)}),n.mu.push(function(){var t=(0,Pe.Z)(function*(e){e?(n.Tu.Fo(),yield ag(n)):(yield n.Tu.stop(),n.du.length>0&&(pt("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(e){return t.apply(this,arguments)}}())),n.Tu}class qI{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Qs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(t,e,i,r,s){const c=Date.now()+i,d=new qI(t,e,c,r,s);return d.start(i),d}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ot(ke.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(n,t){if(Yr("AsyncQueue",`${t}: ${n}`),qp(n))return new ot(ke.UNAVAILABLE,`${t}: ${n}`);throw n}class s_{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Tt.comparator(e.key,i.key):(e,i)=>Tt.comparator(e.key,i.key),this.keyedMap=Um(),this.sortedSet=new dr(this.comparator)}static emptySet(t){return new s_(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof s_)||this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){const r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(e=>{t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const i=new s_;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}}class pC{constructor(){this.Eu=new dr(Tt.comparator)}track(t){const e=t.doc.key,i=this.Eu.get(e);i?0!==t.type&&3===i.type?this.Eu=this.Eu.insert(e,t):3===t.type&&1!==i.type?this.Eu=this.Eu.insert(e,{type:i.type,doc:t.doc}):2===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):2===t.type&&0===i.type?this.Eu=this.Eu.insert(e,{type:0,doc:t.doc}):1===t.type&&0===i.type?this.Eu=this.Eu.remove(e):1===t.type&&2===i.type?this.Eu=this.Eu.insert(e,{type:1,doc:i.doc}):0===t.type&&1===i.type?this.Eu=this.Eu.insert(e,{type:2,doc:t.doc}):Ht():this.Eu=this.Eu.insert(e,t)}Au(){const t=[];return this.Eu.inorderTraversal((e,i)=>{t.push(i)}),t}}class o_{constructor(t,e,i,r,s,c,d,p){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=p}static fromInitialDocuments(t,e,i,r){const s=[];return e.forEach(c=>{s.push({type:0,doc:c})}),new o_(t,e,s_.emptySet(e),s,i,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Pm(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}}class kP{constructor(){this.Ru=void 0,this.listeners=[]}}class PP{constructor(){this.queries=new Tf(t=>pE(t),Pm),this.onlineState="Unknown",this.bu=new Set}}function ZI(n,t){return rT.apply(this,arguments)}function rT(){return rT=(0,Pe.Z)(function*(n,t){const e=At(n),i=t.query;let r=!1,s=e.queries.get(i);if(s||(r=!0,s=new kP),r)try{s.Ru=yield e.onListen(i)}catch(c){const d=r_(c,`Initialization of query '${Nb(t.query)}' failed`);return void t.onError(d)}e.queries.set(i,s),s.listeners.push(t),t.Pu(e.onlineState),s.Ru&&t.Vu(s.Ru)&&by(e)}),rT.apply(this,arguments)}function sT(n,t){return oT.apply(this,arguments)}function oT(){return oT=(0,Pe.Z)(function*(n,t){const e=At(n),i=t.query;let r=!1;const s=e.queries.get(i);if(s){const c=s.listeners.indexOf(t);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return e.queries.delete(i),e.onUnlisten(i)}),oT.apply(this,arguments)}function FP(n,t){const e=At(n);let i=!1;for(const r of t){const c=e.queries.get(r.query);if(c){for(const d of c.listeners)d.Vu(r)&&(i=!0);c.Ru=r}}i&&by(e)}function jR(n,t,e){const i=At(n),r=i.queries.get(t);if(r)for(const s of r.listeners)s.onError(e);i.queries.delete(t)}function by(n){n.bu.forEach(t=>{t.next()})}class aT{constructor(t,e,i){this.query=t,this.vu=e,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}Vu(t){if(!this.options.includeMetadataChanges){const i=[];for(const r of t.docChanges)3!==r.type&&i.push(r);t=new o_(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}let e=!1;return this.Su?this.Cu(t)&&(this.vu.next(t),e=!0):this.xu(t,this.onlineState)&&(this.Nu(t),e=!0),this.Du=t,e}onError(t){this.vu.error(t)}Pu(t){this.onlineState=t;let e=!1;return this.Du&&!this.Su&&this.xu(this.Du,t)&&(this.Nu(this.Du),e=!0),e}xu(t,e){return!t.fromCache||!(this.options.ku&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)}Cu(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(t){t=o_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Su=!0,this.vu.next(t)}}class wu{constructor(t,e){this.payload=t,this.byteLength=e}Mu(){return"metadata"in this.payload}}class YI{constructor(t){this.M=t}wi(t){return ad(this.M,t)}mi(t){return t.metadata.exists?GS(this.M,t.document,!1):ur.newNoDocument(this.wi(t.metadata.name),this.gi(t.metadata.readTime))}gi(t){return Kr(t)}}class lT{constructor(t,e,i){this.Ou=t,this.localStore=e,this.M=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KI(t)}Fu(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;const i=Ve.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}$u(t){const e=new Map,i=new YI(this.M);for(const r of t)if(r.metadata.queries){const s=i.wi(r.metadata.name);for(const c of r.metadata.queries){const d=(e.get(c)||Ni()).add(s);e.set(c,d)}}return e}complete(){var t=this;return(0,Pe.Z)(function*(){const e=yield function OR(n,t,e,i){return $E.apply(this,arguments)}(t.localStore,new YI(t.M),t.documents,t.Ou.id),i=t.$u(t.documents);for(const r of t.queries)yield NR(t.localStore,r,i.get(r.name));return t.progress.taskState="Success",{progress:t.progress,Bu:t.collectionGroups,Lu:e}})()}}function KI(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class QI{constructor(t){this.key=t}}class gC{constructor(t){this.key=t}}class cT{constructor(t,e){this.query=t,this.Uu=e,this.qu=null,this.current=!1,this.Ku=Ni(),this.mutatedKeys=Ni(),this.Gu=bS(t),this.Qu=new s_(this.Gu)}get ju(){return this.Uu}Wu(t,e){const i=e?e.zu:new pC,r=e?e.Qu:this.Qu;let s=e?e.mutatedKeys:this.mutatedKeys,c=r,d=!1;const p="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,v="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((E,S)=>{const N=r.get(E),F=gE(this.query,S)?S:null,G=!!N&&this.mutatedKeys.has(N.key),J=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let de=!1;N&&F?N.data.isEqual(F.data)?G!==J&&(i.track({type:3,doc:F}),de=!0):this.Hu(N,F)||(i.track({type:2,doc:F}),de=!0,(p&&this.Gu(F,p)>0||v&&this.Gu(F,v)<0)&&(d=!0)):!N&&F?(i.track({type:0,doc:F}),de=!0):N&&!F&&(i.track({type:1,doc:N}),de=!0,(p||v)&&(d=!0)),de&&(F?(c=c.add(F),s=J?s.add(E):s.delete(E)):(c=c.delete(E),s=s.delete(E)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const E="F"===this.query.limitType?c.last():c.first();c=c.delete(E.key),s=s.delete(E.key),i.track({type:1,doc:E})}return{Qu:c,zu:i,ii:d,mutatedKeys:s}}Hu(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i){const r=this.Qu;this.Qu=t.Qu,this.mutatedKeys=t.mutatedKeys;const s=t.zu.Au();s.sort((v,E)=>function(S,N){const F=G=>{switch(G){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return F(S)-F(N)}(v.type,E.type)||this.Gu(v.doc,E.doc)),this.Ju(i);const c=e?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,p=d!==this.qu;return this.qu=d,0!==s.length||p?{snapshot:new o_(this.query,t.Qu,r,s,t.mutatedKeys,0===d,p,!1),Xu:c}:{Xu:c}}Pu(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new pC,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(t){return!this.Uu.has(t)&&!!this.Qu.has(t)&&!this.Qu.get(t).hasLocalMutations}Ju(t){t&&(t.addedDocuments.forEach(e=>this.Uu=this.Uu.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Uu=this.Uu.delete(e)),this.current=t.current)}Yu(){if(!this.current)return[];const t=this.Ku;this.Ku=Ni(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const e=[];return t.forEach(i=>{this.Ku.has(i)||e.push(new gC(i))}),this.Ku.forEach(i=>{t.has(i)||e.push(new QI(i))}),e}ta(t){this.Uu=t._i,this.Ku=Ni();const e=this.Wu(t.documents);return this.applyChanges(e,!0)}ea(){return o_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class JI{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}}class GR{constructor(t){this.key=t,this.na=!1}}class XI{constructor(t,e,i,r,s,c){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sa={},this.ia=new Tf(d=>pE(d),Pm),this.ra=new Map,this.oa=new Set,this.ua=new dr(Tt.comparator),this.aa=new Map,this.ca=new eC,this.ha={},this.la=new Map,this.fa=If.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function $R(n,t){return uT.apply(this,arguments)}function uT(){return uT=(0,Pe.Z)(function*(n,t){const e=ET(n);let i,r;const s=e.ia.get(t);if(s)i=s.targetId,e.sharedClientState.addLocalQueryTarget(i),r=s.view.ea();else{const c=yield Xm(e.localStore,Bl(t));e.isPrimaryClient&&rC(e.remoteStore,c);const d=e.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield dT(e,t,i,"current"===d)}return r}),uT.apply(this,arguments)}function dT(n,t,e,i){return Cy.apply(this,arguments)}function Cy(){return Cy=(0,Pe.Z)(function*(n,t,e,i){n._a=(E,S,N)=>{return(F=(0,Pe.Z)(function*(G,J,de,$e){let Ke=J.view.Wu(de);Ke.ii&&(Ke=yield e_(G.localStore,J.query,!1).then(({documents:Ct})=>J.view.Wu(Ct,Ke)));const st=$e&&$e.targetChanges.get(J.targetId),et=J.view.applyChanges(Ke,G.isPrimaryClient,st);return vC(G,J.targetId,et.Xu),et.snapshot}),function(G,J,de,$e){return F.apply(this,arguments)})(n,E,S,N);var F};const r=yield e_(n.localStore,t,!0),s=new cT(t,r._i),c=s.Wu(r.documents),d=Hm.createSynthesizedTargetChangeForCurrentChange(e,i&&"Offline"!==n.onlineState),p=s.applyChanges(c,n.isPrimaryClient,d);vC(n,e,p.Xu);const v=new JI(t,e,s);return n.ia.set(t,v),n.ra.has(e)?n.ra.get(e).push(t):n.ra.set(e,[t]),p.snapshot}),Cy.apply(this,arguments)}function Eu(n,t){return hT.apply(this,arguments)}function hT(){return hT=(0,Pe.Z)(function*(n,t){const e=At(n),i=e.ia.get(t),r=e.ra.get(i.targetId);if(r.length>1)return e.ra.set(i.targetId,r.filter(s=>!Pm(s,t))),void e.ia.delete(t);e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(i.targetId),e.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fy(e.localStore,i.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(i.targetId),t_(e.remoteStore,i.targetId),lg(e,i.targetId)}).catch(eg))):(lg(e,i.targetId),yield fy(e.localStore,i.targetId,!0))}),hT.apply(this,arguments)}function fT(){return fT=(0,Pe.Z)(function*(n,t,e){const i=Sy(n);try{const r=yield function(s,c){const d=At(s),p=$.now(),v=c.reduce((S,N)=>S.add(N.key),Ni());let E;return d.persistence.runTransaction("Locally write mutations","readwrite",S=>d.fi.Ks(S,v).next(N=>{E=N;const F=[];for(const G of c){const J=_E(G,E.get(G.key));null!=J&&F.push(new $p(G.key,J,pS(J.value.mapValue),ds.exists(!0)))}return d.Bs.addMutationBatch(S,p,F,c)})).then(S=>(S.applyToLocalDocumentSet(E),{batchId:S.batchId,changes:E}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let p=s.ha[s.currentUser.toKey()];p||(p=new dr(C)),p=p.insert(c,d),s.ha[s.currentUser.toKey()]=p}(i,r.batchId,e),yield ah(i,r.changes),yield ag(i.remoteStore)}catch(r){const s=r_(r,"Failed to persist write");e.reject(s)}}),fT.apply(this,arguments)}function pT(n,t){return gT.apply(this,arguments)}function gT(){return gT=(0,Pe.Z)(function*(n,t){const e=At(n);try{const i=yield HE(e.localStore,t);t.targetChanges.forEach((r,s)=>{const c=e.aa.get(s);c&&(pn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.na=!0:r.modifiedDocuments.size>0?pn(c.na):r.removedDocuments.size>0&&(pn(c.na),c.na=!1))}),yield ah(e,i,t)}catch(i){yield eg(i)}}),gT.apply(this,arguments)}function e1(n,t,e){const i=At(n);if(i.isPrimaryClient&&0===e||!i.isPrimaryClient&&1===e){const r=[];i.ia.forEach((s,c)=>{const d=c.view.Pu(t);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=At(s);d.onlineState=c;let p=!1;d.queries.forEach((v,E)=>{for(const S of E.listeners)S.Pu(c)&&(p=!0)}),p&&by(d)}(i.eventManager,t),r.length&&i.sa.zo(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function t1(n,t,e){return mT.apply(this,arguments)}function mT(){return mT=(0,Pe.Z)(function*(n,t,e){const i=At(n);i.sharedClientState.updateQueryState(t,"rejected",e);const r=i.aa.get(t),s=r&&r.key;if(s){let c=new dr(Tt.comparator);c=c.insert(s,ur.newNoDocument(s,K.min()));const d=Ni().add(s),p=new Vm(K.min(),new Map,new er(C),c,d);yield pT(i,p),i.ua=i.ua.remove(s),i.aa.delete(t),vT(i)}else yield fy(i.localStore,t,!1).then(()=>lg(i,t,e)).catch(eg)}),mT.apply(this,arguments)}function BP(n,t){return mC.apply(this,arguments)}function mC(){return mC=(0,Pe.Z)(function*(n,t){const e=At(n),i=t.batch.batchId;try{const r=yield SI(e.localStore,t);Ey(e,i,null),wy(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield ah(e,r)}catch(r){yield eg(r)}}),mC.apply(this,arguments)}function WR(n,t,e){return _T.apply(this,arguments)}function _T(){return _T=(0,Pe.Z)(function*(n,t,e){const i=At(n);try{const r=yield function(s,c){const d=At(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let v;return d.Bs.lookupMutationBatch(p,c).next(E=>(pn(null!==E),v=E.keys(),d.Bs.removeMutationBatch(p,E))).next(()=>d.Bs.performConsistencyCheck(p)).next(()=>d.fi.Ks(p,v))})}(i.localStore,t);Ey(i,t,e),wy(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield ah(i,r)}catch(r){yield eg(r)}}),_T.apply(this,arguments)}function _C(){return _C=(0,Pe.Z)(function*(n,t){const e=At(n);Rf(e.remoteStore)||pt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=At(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.Bs.getHighestUnacknowledgedBatchId(d))}(e.localStore);if(-1===i)return void t.resolve();const r=e.la.get(i)||[];r.push(t),e.la.set(i,r)}catch(i){const r=r_(i,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}}),_C.apply(this,arguments)}function wy(n,t){(n.la.get(t)||[]).forEach(e=>{e.resolve()}),n.la.delete(t)}function Ey(n,t,e){const i=At(n);let r=i.ha[i.currentUser.toKey()];if(r){const s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.ha[i.currentUser.toKey()]=r}}function lg(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(const i of n.ra.get(t))n.ia.delete(i),e&&n.sa.wa(i,e);n.ra.delete(t),n.isPrimaryClient&&n.ca.vi(t).forEach(i=>{n.ca.containsKey(i)||n1(n,i)})}function n1(n,t){n.oa.delete(t.path.canonicalString());const e=n.ua.get(t);null!==e&&(t_(n.remoteStore,e),n.ua=n.ua.remove(t),n.aa.delete(e),vT(n))}function vC(n,t,e){for(const i of e)i instanceof QI?(n.ca.addReference(i.key,t),r1(n,i)):i instanceof gC?(pt("SyncEngine","Document no longer in limbo: "+i.key),n.ca.removeReference(i.key,t),n.ca.containsKey(i.key)||n1(n,i.key)):Ht()}function r1(n,t){const e=t.key,i=e.path.canonicalString();n.ua.get(e)||n.oa.has(i)||(pt("SyncEngine","New document in limbo: "+e),n.oa.add(i),vT(n))}function vT(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const t=n.oa.values().next().value;n.oa.delete(t);const e=new Tt(Ve.fromString(t)),i=n.fa.next();n.aa.set(i,new GR(e)),n.ua=n.ua.insert(e,i),rC(n.remoteStore,new ih(Bl(Vp(e.path)),i,2,Oa.A))}}function ah(n,t,e){return s1.apply(this,arguments)}function s1(){return s1=(0,Pe.Z)(function*(n,t,e){const i=At(n),r=[],s=[],c=[];var d;i.ia.isEmpty()||(i.ia.forEach((d,p)=>{c.push(i._a(p,t,e).then(v=>{if(v){i.isPrimaryClient&&i.sharedClientState.updateQueryState(p.targetId,v.fromCache?"not-current":"current"),r.push(v);const E=BE.Ys(p.targetId,v);s.push(E)}}))}),yield Promise.all(c),i.sa.zo(r),yield(d=(0,Pe.Z)(function*(p,v){const E=At(p);try{yield E.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>Le.forEach(v,N=>Le.forEach(N.Hs,F=>E.persistence.referenceDelegate.addReference(S,N.targetId,F)).next(()=>Le.forEach(N.Js,F=>E.persistence.referenceDelegate.removeReference(S,N.targetId,F)))))}catch(S){if(!qp(S))throw S;pt("LocalStore","Failed to update sequence numbers: "+S)}for(const S of v){const N=S.targetId;if(!S.fromCache){const F=E.ui.get(N),J=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);E.ui=E.ui.insert(N,J)}}}),function(p,v){return d.apply(this,arguments)})(i.localStore,s))}),s1.apply(this,arguments)}function UP(n,t){return yC.apply(this,arguments)}function yC(){return yC=(0,Pe.Z)(function*(n,t){const e=At(n);if(!e.currentUser.isEqual(t)){pt("SyncEngine","User change. New user:",t.toKey());const i=yield DI(e.localStore,t);e.currentUser=t,(r=e).la.forEach(c=>{c.forEach(d=>{d.reject(new ot(ke.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.la.clear(),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield ah(e,i.di)}var r}),yC.apply(this,arguments)}function qR(n,t){const e=At(n),i=e.aa.get(t);if(i&&i.na)return Ni().add(i.key);{let r=Ni();const s=e.ra.get(t);if(!s)return r;for(const c of s){const d=e.ia.get(c);r=r.unionWith(d.view.ju)}return r}}function ZR(n,t){return yT.apply(this,arguments)}function yT(){return yT=(0,Pe.Z)(function*(n,t){const e=At(n),i=yield e_(e.localStore,t.query,!0),r=t.view.ta(i);return e.isPrimaryClient&&vC(e,t.targetId,r.Xu),r}),yT.apply(this,arguments)}function VP(n,t){return o1.apply(this,arguments)}function o1(){return o1=(0,Pe.Z)(function*(n,t){const e=At(n);return Jb(e.localStore,t).then(i=>ah(e,i))}),o1.apply(this,arguments)}function HP(n,t,e,i){return a1.apply(this,arguments)}function a1(){return a1=(0,Pe.Z)(function*(n,t,e,i){const r=At(n),s=yield function(c,d){const p=At(c),v=At(p.Bs);return p.persistence.runTransaction("Lookup mutation documents","readonly",E=>v.fn(E,d).next(S=>S?p.fi.Ks(E,S):Le.resolve(null)))}(r.localStore,t);var d;null!==s?("pending"===e?yield ag(r.remoteStore):"acknowledged"===e||"rejected"===e?(Ey(r,t,i||null),wy(r,t),d=t,At(At(r.localStore).Bs)._n(d)):Ht(),yield ah(r,s)):pt("SyncEngine","Cannot apply mutation batch with id: "+t)}),a1.apply(this,arguments)}function bT(){return bT=(0,Pe.Z)(function*(n,t){const e=At(n);if(ET(e),Sy(e),!0===t&&!0!==e.da){const i=e.sharedClientState.getAllActiveQueryTargets(),r=yield Ty(e,i.toArray());e.da=!0,yield yy(e.remoteStore,!0);for(const s of r)rC(e.remoteStore,s)}else if(!1===t&&!1!==e.da){const i=[];let r=Promise.resolve();e.ra.forEach((s,c)=>{e.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(lg(e,c),fy(e.localStore,c,!0))),t_(e.remoteStore,c)}),yield r,yield Ty(e,i),function(s){const c=At(s);c.aa.forEach((d,p)=>{t_(c.remoteStore,p)}),c.ca.Si(),c.aa=new Map,c.ua=new dr(Tt.comparator)}(e),e.da=!1,yield yy(e.remoteStore,!1)}}),bT.apply(this,arguments)}function Ty(n,t,e){return CT.apply(this,arguments)}function CT(){return CT=(0,Pe.Z)(function*(n,t,e){const i=At(n),r=[],s=[];for(const c of t){let d;const p=i.ra.get(c);if(p&&0!==p.length){d=yield Xm(i.localStore,Bl(p[0]));for(const v of p){const E=i.ia.get(v),S=yield ZR(i,E);S.snapshot&&s.push(S.snapshot)}}else{const v=yield GE(i.localStore,c);d=yield Xm(i.localStore,v),yield dT(i,l1(v),c,!1)}r.push(d)}return i.sa.zo(s),r}),CT.apply(this,arguments)}function l1(n){return dE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function c1(n){const t=At(n);return At(At(t.localStore).persistence).Fs()}function cg(n,t,e,i){return bC.apply(this,arguments)}function bC(){return bC=(0,Pe.Z)(function*(n,t,e,i){const r=At(n);if(r.da)return void pt("SyncEngine","Ignoring unexpected query state notification.");const s=r.ra.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{const c=yield Jb(r.localStore,yS(s[0])),d=Vm.createSynthesizedRemoteEventForCurrentChange(t,"current"===e);yield ah(r,c,d);break}case"rejected":yield fy(r.localStore,t,!0),lg(r,t,i);break;default:Ht()}}),bC.apply(this,arguments)}function wT(n,t,e){return Dy.apply(this,arguments)}function Dy(){return Dy=(0,Pe.Z)(function*(n,t,e){const i=ET(n);if(i.da){for(const r of t){if(i.ra.has(r)){pt("SyncEngine","Adding an already active target "+r);continue}const s=yield GE(i.localStore,r),c=yield Xm(i.localStore,s);yield dT(i,l1(s),c.targetId,!1),rC(i.remoteStore,c)}for(const r of e)i.ra.has(r)&&(yield fy(i.localStore,r,!1).then(()=>{t_(i.remoteStore,r),lg(i,r)}).catch(eg))}}),Dy.apply(this,arguments)}function ET(n){const t=At(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=pT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=qR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=t1.bind(null,t),t.sa.zo=FP.bind(null,t.eventManager),t.sa.wa=jR.bind(null,t.eventManager),t}function Sy(n){const t=At(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BP.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=WR.bind(null,t),t}class Iy{constructor(){this.synchronizeTabs=!1}initialize(t){var e=this;return(0,Pe.Z)(function*(){e.M=sg(t.databaseInfo.databaseId),e.sharedClientState=e.ga(t),e.persistence=e.ya(t),yield e.persistence.start(),e.gcScheduler=e.pa(t),e.localStore=e.Ia(t)})()}pa(t){return null}Ia(t){return hy(this.persistence,new TI,t.initialUser,this.M)}ya(t){return new MI(tC.Yi,this.M)}ga(t){return new OI}terminate(){var t=this;return(0,Pe.Z)(function*(){t.gcScheduler&&t.gcScheduler.stop(),yield t.sharedClientState.shutdown(),yield t.persistence.shutdown()})()}}class YR extends Iy{constructor(t,e,i){super(),this.Ta=t,this.cacheSizeBytes=e,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(t){var e=()=>super.initialize,i=this;return(0,Pe.Z)(function*(){yield e().call(i,t),yield i.Ta.initialize(i,t),yield Sy(i.Ta.syncEngine),yield ag(i.Ta.remoteStore),yield i.persistence.Ts(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(i.localStore),Promise.resolve()))})()}Ia(t){return hy(this.persistence,new TI,t.initialUser,this.M)}pa(t){return new _I(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)}ya(t){const e=ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?il.withCacheSize(this.cacheSizeBytes):il.DEFAULT;return new Rc(this.synchronizeTabs,e,t.clientId,i,t.asyncQueue,QE(),rg(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(t){return new OI}}class GP extends YR{constructor(t,e){super(t,e,!1),this.Ta=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){var e=()=>super.initialize,i=this;return(0,Pe.Z)(function*(){yield e().call(i,t);const r=i.Ta.syncEngine;i.sharedClientState instanceof my&&(i.sharedClientState.syncEngine={$r:HP.bind(null,r),Br:cg.bind(null,r),Lr:wT.bind(null,r),Fs:c1.bind(null,r),Fr:VP.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.Ts(function(){var s=(0,Pe.Z)(function*(c){yield function jP(n,t){return bT.apply(this,arguments)}(i.Ta.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start(i.localStore):c||i.gcScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}ga(t){const e=QE();if(!my.vt(e))throw new ot(ke.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=ng(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new my(e,t.asyncQueue,i,t.clientId,t.initialUser)}}class u1{initialize(t,e){var i=this;return(0,Pe.Z)(function*(){i.localStore||(i.localStore=t.localStore,i.sharedClientState=t.sharedClientState,i.datastore=i.createDatastore(e),i.remoteStore=i.createRemoteStore(e),i.eventManager=i.createEventManager(e),i.syncEngine=i.createSyncEngine(e,!t.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>e1(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=UP.bind(null,i.syncEngine),yield yy(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(t){return new PP}createDatastore(t){const e=sg(t.databaseInfo.databaseId),i=new PI(t.databaseInfo);return new iC(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return e=this.localStore,i=this.datastore,r=t.asyncQueue,s=d=>e1(this.syncEngine,d,0),c=kI.vt()?new kI:new NI,new BR(e,i,r,s,c);var e,i,r,s,c}createSyncEngine(t,e){return function(i,r,s,c,d,p,v){const E=new XI(i,r,s,c,d,p);return v&&(E.da=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return(t=(0,Pe.Z)(function*(e){const i=At(e);pt("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield vy(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(e){return t.apply(this,arguments)})(this.remoteStore);var t}}function KR(n,t=10240){let e=0;return{read:()=>(0,Pe.Z)(function*(){if(e<n.byteLength){const i={value:n.slice(e,e+t),done:!1};return e+=t,i}return{done:!0}})(),cancel:()=>(0,Pe.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Ay{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ea(this.observer.next,t)}error(t){this.observer.error?this.Ea(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)}Aa(){this.muted=!0}Ea(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}}class QR{constructor(t,e){this.Ra=t,this.M=e,this.metadata=new Qs,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(i=>{i&&i.Mu()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Ra.cancel()}getMetadata(){var t=this;return(0,Pe.Z)(function*(){return t.metadata.promise})()}ma(){var t=this;return(0,Pe.Z)(function*(){return yield t.getMetadata(),t.Pa()})()}Pa(){var t=this;return(0,Pe.Z)(function*(){const e=yield t.Va();if(null===e)return null;const i=t.ba.decode(e),r=Number(i);isNaN(r)&&t.va(`length string (${i}) is not valid number`);const s=yield t.Sa(r);return new wu(JSON.parse(s),e.length+r)})()}Da(){return this.buffer.findIndex(t=>t==="{".charCodeAt(0))}Va(){var t=this;return(0,Pe.Z)(function*(){for(;t.Da()<0&&!(yield t.Ca()););if(0===t.buffer.length)return null;const e=t.Da();e<0&&t.va("Reached the end of bundle when a length string is expected.");const i=t.buffer.slice(0,e);return t.buffer=t.buffer.slice(e),i})()}Sa(t){var e=this;return(0,Pe.Z)(function*(){for(;e.buffer.length<t;)(yield e.Ca())&&e.va("Reached the end of bundle when more is expected.");const i=e.ba.decode(e.buffer.slice(0,t));return e.buffer=e.buffer.slice(t),i})()}va(t){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${t}`)}Ca(){var t=this;return(0,Pe.Z)(function*(){const e=yield t.Ra.read();if(!e.done){const i=new Uint8Array(t.buffer.length+e.value.length);i.set(t.buffer),i.set(e.value,t.buffer.length),t.buffer=i}return e.done})()}}class JR{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(t){var e=this;return(0,Pe.Z)(function*(){if(e.ensureCommitNotCalled(),e.mutations.length>0)throw new ot(ke.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Pe.Z)(function*(s,c){const d=At(s),p=Gm(d.M)+"/documents",v={documents:c.map(F=>Yv(d.M,F))},E=yield d._o("BatchGetDocuments",p,v),S=new Map;E.forEach(F=>{const G=function oR(n,t){return"found"in t?function(e,i){pn(!!i.found);const r=ad(e,i.found.name),s=Kr(i.found.updateTime),c=new Xo({mapValue:{fields:i.found.fields}});return ur.newFoundDocument(r,s,c)}(n,t):"missing"in t?function(e,i){pn(!!i.missing),pn(!!i.readTime);const r=ad(e,i.missing),s=Kr(i.readTime);return ur.newNoDocument(r,s)}(n,t):Ht()}(d.M,F);S.set(G.key.toString(),G)});const N=[];return c.forEach(F=>{const G=S.get(F.toString());pn(!!G),N.push(G)}),N}),function(s,c){return r.apply(this,arguments)})(e.datastore,t);var r;return i.forEach(r=>e.recordVersion(r)),i})()}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(t.toString())}delete(t){this.write(new Bb(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){var t=this;return(0,Pe.Z)(function*(){if(t.ensureCommitNotCalled(),t.lastWriteError)throw t.lastWriteError;const e=t.readVersions;var i;t.mutations.forEach(i=>{e.delete(i.key.toString())}),e.forEach((i,r)=>{const s=Tt.fromPath(r);t.mutations.push(new Ub(s,t.precondition(s)))}),yield(i=(0,Pe.Z)(function*(r,s){const c=At(r),d=Gm(c.M)+"/documents",p={writes:s.map(v=>$b(c.M,v))};yield c.co("Commit",d,p)}),function(r,s){return i.apply(this,arguments)})(t.datastore,t.mutations),t.committed=!0})()}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Ht();e=K.min()}const i=this.readVersions.get(t.key.toString());if(i){if(!e.isEqual(i))throw new ot(ke.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?ds.updateTime(e):ds.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(K.min()))throw new ot(ke.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ds.updateTime(e)}return ds.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}class XR{constructor(t,e,i,r,s){this.asyncQueue=t,this.datastore=e,this.options=i,this.updateFunction=r,this.deferred=s,this.xa=i.maxAttempts,this.No=new FI(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var t=this;this.No.Ro((0,Pe.Z)(function*(){const e=new JR(t.datastore),i=t.ka(e);i&&i.then(r=>{t.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{t.deferred.resolve(r)}).catch(s=>{t.Ma(s)}))}).catch(r=>{t.Ma(r)})}))}ka(t){try{const e=this.updateFunction(t);return!Am(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ma(t){this.xa>0&&this.Oa(t)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(t)}Oa(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||!OS(e)}return!1}}class eM{constructor(t,e,i,r){var s=this;this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=Rs.UNAUTHENTICATED,this.clientId=m.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Pe.Z)(function*(d){pt("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(pt("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var t=this;return(0,Pe.Z)(function*(){return{asyncQueue:t.asyncQueue,databaseInfo:t.databaseInfo,clientId:t.clientId,authCredentials:t.authCredentials,appCheckCredentials:t.appCheckCredentials,initialUser:t.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ot(ke.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var t=this;this.asyncQueue.enterRestrictedMode();const e=new Qs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Pe.Z)(function*(){try{t.onlineComponents&&(yield t.onlineComponents.terminate()),t.offlineComponents&&(yield t.offlineComponents.terminate()),t.authCredentials.shutdown(),t.appCheckCredentials.shutdown(),e.resolve()}catch(i){const r=r_(i,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}function DT(n,t){return CC.apply(this,arguments)}function CC(){return CC=(0,Pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress(),pt("FirestoreClient","Initializing OfflineComponentProvider");const e=yield n.getConfiguration();yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(function(){var r=(0,Pe.Z)(function*(s){i.isEqual(s)||(yield DI(t.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=t}),CC.apply(this,arguments)}function ST(n,t){return IT.apply(this,arguments)}function IT(){return IT=(0,Pe.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const e=yield AT(n);pt("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield t.initialize(e,i),n.setCredentialChangeListener(r=>iT(t.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>iT(t.remoteStore,s)),n.onlineComponents=t}),IT.apply(this,arguments)}function AT(n){return wC.apply(this,arguments)}function wC(){return wC=(0,Pe.Z)(function*(n){return n.offlineComponents||(pt("FirestoreClient","Using default OfflineComponentProvider"),yield DT(n,new Iy)),n.offlineComponents}),wC.apply(this,arguments)}function a_(n){return d1.apply(this,arguments)}function d1(){return d1=(0,Pe.Z)(function*(n){return n.onlineComponents||(pt("FirestoreClient","Using default OnlineComponentProvider"),yield ST(n,new u1)),n.onlineComponents}),d1.apply(this,arguments)}function xT(n){return AT(n).then(t=>t.persistence)}function xy(n){return AT(n).then(t=>t.localStore)}function h1(n){return a_(n).then(t=>t.remoteStore)}function RT(n){return a_(n).then(t=>t.syncEngine)}function Ry(n){return f1.apply(this,arguments)}function f1(){return f1=(0,Pe.Z)(function*(n){const t=yield a_(n),e=t.eventManager;return e.onListen=$R.bind(null,t.syncEngine),e.onUnlisten=Eu.bind(null,t.syncEngine),e}),f1.apply(this,arguments)}function iM(n,t,e={}){const i=new Qs;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function(r,s,c,d,p){const v=new Ay({next:S=>{s.enqueueAndForget(()=>sT(r,E));const N=S.docs.has(c);!N&&S.fromCache?p.reject(new ot(ke.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&d&&"server"===d.source?p.reject(new ot(ke.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new aT(Vp(c.path),v,{includeMetadataChanges:!0,ku:!0});return ZI(r,E)}(yield Ry(n),n.asyncQueue,t,e,i)})),i.promise}function rM(n,t,e={}){const i=new Qs;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function(r,s,c,d,p){const v=new Ay({next:S=>{s.enqueueAndForget(()=>sT(r,E)),S.fromCache&&"server"===d.source?p.reject(new ot(ke.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(S)},error:S=>p.reject(S)}),E=new aT(c,v,{includeMetadataChanges:!0,ku:!0});return ZI(r,E)}(yield Ry(n),n.asyncQueue,t,e,i)})),i.promise}const oM=new Map;function p1(n,t,e){if(!e)throw new ot(ke.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function a(n,t,e,i){if(!0===t&&!0===i)throw new ot(ke.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function l(n){if(!Tt.isDocumentKey(n))throw new ot(ke.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function u(n){if(Tt.isDocumentKey(n))throw new ot(ke.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function f(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const t=(e=n).constructor?e.constructor.name:null;return t?`a custom ${t} object`:"an object"}}var e;return"function"==typeof n?"a function":Ht()}function g(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new ot(ke.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const e=f(n);throw new ot(ke.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}function _(n,t){if(t<=0)throw new ot(ke.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${t}.`)}class w{constructor(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ot(ke.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ot(ke.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,a("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class D{constructor(t,e,i){this._authCredentials=e,this._appCheckCredentials=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new w({}),this._settingsFrozen=!1,t instanceof nl?this._databaseId=t:(this._app=t,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ot(ke.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nl(r.options.projectId)}(t))}get app(){if(!this._app)throw new ot(ke.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new ot(ke.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new w(t),void 0!==t.credentials&&(this._authCredentials=function(e){if(!e)return new yf;switch(e.type){case"gapi":const i=e.client;return pn(!("object"!=typeof i||null===i||!i.auth||!i.auth.getAuthHeaderValueForFirstParty)),new Db(i,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ot(ke.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=oM.get(t);e&&(pt("ComponentProvider","Removing Datastore"),oM.delete(t),e.terminate())}(this),Promise.resolve()}}class k{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Y(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new k(this.firestore,t,this._key)}}class B{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new B(this.firestore,t,this._query)}}class Y extends B{constructor(t,e,i){super(t,e,Vp(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new k(this.firestore,null,new Tt(t))}withConverter(t){return new Y(this.firestore,t,this._path)}}function re(n,t,...e){if(n=(0,z.m9)(n),p1("collection","path",t),n instanceof D){const i=Ve.fromString(t,...e);return u(i),new Y(n,null,i)}{if(!(n instanceof k||n instanceof Y))throw new ot(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return u(i),new Y(n.firestore,null,i)}}function Ge(n,t,...e){if(n=(0,z.m9)(n),1===arguments.length&&(t=m.R()),p1("doc","path",t),n instanceof D){const i=Ve.fromString(t,...e);return l(i),new k(n,null,new Tt(i))}{if(!(n instanceof k||n instanceof Y))throw new ot(ke.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Ve.fromString(t,...e));return l(i),new k(n.firestore,n instanceof Y?n.converter:null,new Tt(i))}}function gt(n,t){return n=(0,z.m9)(n),t=(0,z.m9)(t),(n instanceof k||n instanceof Y)&&(t instanceof k||t instanceof Y)&&n.firestore===t.firestore&&n.path===t.path&&n.converter===t.converter}function Et(n,t){return n=(0,z.m9)(n),t=(0,z.m9)(t),n instanceof B&&t instanceof B&&n.firestore===t.firestore&&Pm(n._query,t._query)&&n.converter===t.converter}class jt{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new FI(this,"async_queue_retry"),this.Qa=()=>{const e=rg();e&&pt("AsyncQueue","Visibility state changed to "+e.visibilityState),this.No.Po()};const t=rg();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.ja(),this.Wa(t)}enterRestrictedMode(t){if(!this.Ba){this.Ba=!0,this.Ka=t||!1;const e=rg();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Qa)}}enqueue(t){if(this.ja(),this.Ba)return new Promise(()=>{});const e=new Qs;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.$a.push(t),this.za()))}za(){var t=this;return(0,Pe.Z)(function*(){if(0!==t.$a.length){try{yield t.$a[0](),t.$a.shift(),t.No.reset()}catch(e){if(!qp(e))throw e;pt("AsyncQueue","Operation failed with retryable error: "+e)}t.$a.length>0&&t.No.Ro(()=>t.za())}})()}Wa(t){const e=this.Fa.then(()=>(this.qa=!0,t().catch(i=>{throw this.Ua=i,this.qa=!1,Yr("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.qa=!1,i))));return this.Fa=e,e}enqueueAfterDelay(t,e,i){this.ja(),this.Ga.indexOf(t)>-1&&(e=0);const r=qI.createAndSchedule(this,t,e,i,s=>this.Ha(s));return this.La.push(r),r}ja(){this.Ua&&Ht()}verifyOperationInProgress(){}Ja(){var t=this;return(0,Pe.Z)(function*(){let e;do{e=t.Fa,yield e}while(e!==t.Fa)})()}Ya(t){for(const e of this.La)if(e.timerId===t)return!0;return!1}Xa(t){return this.Ja().then(()=>{this.La.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(const e of this.La)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.Ja()})}Za(t){this.Ga.push(t)}Ha(t){const e=this.La.indexOf(t);this.La.splice(e,1)}}function nt(n){return function(t,e){if("object"!=typeof t||null===t)return!1;const i=t;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class en{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qs,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,i){this._progressObserver={next:t,error:e,complete:i}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}class rn extends D{constructor(t,e,i){super(t,e,i),this.type="firestore",this._queue=new jt,this._persistenceKey="name"in t?t.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||EC(this),this._firestoreClient.terminate()}}function Qr(n){return n._firestoreClient||EC(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function EC(n){var t;const e=n._freezeSettings(),i=(s=(null===(t=n._app)||void 0===t?void 0:t.options.appId)||"",new tl(n._databaseId,s,n._persistenceKey,(d=e).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new eM(n._authCredentials,n._appCheckCredentials,n._queue,i)}function TC(n,t,e){const i=new Qs;return n.asyncQueue.enqueue((0,Pe.Z)(function*(){try{yield DT(n,e),yield ST(n,t),i.resolve()}catch(r){if(!("FirebaseError"===(s=r).name?s.code===ke.FAILED_PRECONDITION||s.code===ke.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var s})).then(()=>i.promise)}function YP(n){if(n._initialized||n._terminated)throw new ot(ke.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ug{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new ot(ke.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}class Mf{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mf(Pt.fromBase64String(t))}catch(e){throw new ot(ke.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new Mf(Pt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}class My{constructor(t){this._methodName=t}}class g1{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ot(ke.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ot(ke.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return C(this._lat,t._lat)||C(this._long,t._long)}}const _3=/^__.*__$/;class v3{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return null!==this.fieldMask?new $p(t,this.data,this.fieldMask,e,this.fieldTransforms):new Wv(t,this.data,e,this.fieldTransforms)}}class KP{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new $p(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function QP(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class m1{constructor(t,e,i,r,s,c){this.settings=t,this.databaseId=e,this.M=i,this.ignoreUndefinedProperties=r,void 0===s&&this.tc(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(t){return new m1(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.rc(t),r}oc(t){var e;const i=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.nc({path:i,ic:!1});return r.tc(),r}uc(t){return this.nc({path:void 0,ic:!0})}ac(t){return y1(t,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(t){return void 0!==this.fieldMask.find(e=>t.isPrefixOf(e))||void 0!==this.fieldTransforms.find(e=>t.isPrefixOf(e.field))}tc(){if(this.path)for(let t=0;t<this.path.length;t++)this.rc(this.path.get(t))}rc(t){if(0===t.length)throw this.ac("Document fields must not be empty");if(QP(this.ec)&&_3.test(t))throw this.ac('Document fields cannot begin and end with "__"')}}class y3{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.M=i||sg(t)}lc(t,e,i,r=!1){return new m1({ec:t,methodName:e,hc:i,path:bt.emptyPath(),ic:!1,cc:r},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Oy(n){const t=n._freezeSettings(),e=sg(n._databaseId);return new y3(n._databaseId,!!t.ignoreUndefinedProperties,e)}function _1(n,t,e,i,r,s={}){const c=n.lc(s.merge||s.mergeFields?2:0,t,e,r);uM("Data must be an object, but it was:",c,i);const d=eF(i,c);let p,v;if(s.merge)p=new Kt(c.fieldMask),v=c.fieldTransforms;else if(s.mergeFields){const E=[];for(const S of s.mergeFields){const N=dM(t,S,e);if(!c.contains(N))throw new ot(ke.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);nF(E,N)||E.push(N)}p=new Kt(E),v=c.fieldTransforms.filter(S=>p.covers(S.field))}else p=null,v=c.fieldTransforms;return new v3(new Xo(d),p,v)}class LT extends My{_toFieldTransform(t){if(2!==t.ec)throw t.ac(1===t.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof LT}}function JP(n,t,e){return new m1({ec:3,hc:t.settings.hc,methodName:n._methodName,ic:e},t.databaseId,t.M,t.ignoreUndefinedProperties)}class aM extends My{_toFieldTransform(t){return new Bm(t.path,new Fm)}isEqual(t){return t instanceof aM}}class b3 extends My{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=JP(this,t,!0),i=this.fc.map(s=>Ny(s,e)),r=new jp(i);return new Bm(t.path,r)}isEqual(t){return this===t}}class C3 extends My{constructor(t,e){super(t),this.fc=e}_toFieldTransform(t){const e=JP(this,t,!0),i=this.fc.map(s=>Ny(s,e)),r=new Gp(i);return new Bm(t.path,r)}isEqual(t){return this===t}}class w3 extends My{constructor(t,e){super(t),this.dc=e}_toFieldTransform(t){const e=new Lm(t.M,ES(t.M,this.dc));return new Bm(t.path,e)}isEqual(t){return this===t}}function lM(n,t,e,i){const r=n.lc(1,t,e);uM("Data must be an object, but it was:",r,i);const s=[],c=Xo.empty();fe(i,(p,v)=>{const E=v1(t,p,e);v=(0,z.m9)(v);const S=r.oc(E);if(v instanceof LT)s.push(E);else{const N=Ny(v,S);null!=N&&(s.push(E),c.set(E,N))}});const d=new Kt(s);return new KP(c,d,r.fieldTransforms)}function cM(n,t,e,i,r,s){const c=n.lc(1,t,e),d=[dM(t,i,e)],p=[r];if(s.length%2!=0)throw new ot(ke.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let N=0;N<s.length;N+=2)d.push(dM(t,s[N])),p.push(s[N+1]);const v=[],E=Xo.empty();for(let N=d.length-1;N>=0;--N)if(!nF(v,d[N])){const F=d[N];let G=p[N];G=(0,z.m9)(G);const J=c.oc(F);if(G instanceof LT)v.push(F);else{const de=Ny(G,J);null!=de&&(v.push(F),E.set(F,de))}}const S=new Kt(v);return new KP(E,S,c.fieldTransforms)}function XP(n,t,e,i=!1){return Ny(e,n.lc(i?4:3,t))}function Ny(n,t){if(tF(n=(0,z.m9)(n)))return uM("Unsupported field value:",t,n),eF(n,t);if(n instanceof My)return function(e,i){if(!QP(i.ec))throw i.ac(`${e._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ac(`${e._methodName}() is not currently supported inside arrays`);const r=e._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,t),null;if(void 0===n&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.ic&&4!==t.ec)throw t.ac("Nested arrays are not supported");return function(e,i){const r=[];let s=0;for(const c of e){let d=Ny(c,i.uc(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,t)}return function(e,i){if(null===(e=(0,z.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ES(i.M,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const r=$.fromDate(e);return{timestampValue:jm(i.M,r)}}if(e instanceof $){const r=new $(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jm(i.M,r)}}if(e instanceof g1)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Mf)return{bytesValue:vE(i.M,e._byteString)};if(e instanceof k){const r=i.databaseId,s=e.firestore._databaseId;if(!s.isEqual(r))throw i.ac(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:zp(e.firestore._databaseId||i.databaseId,e._key.path)}}throw i.ac(`Unsupported field value: ${f(e)}`)}(n,t)}function eF(n,t){const e={};return Xe(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):fe(n,(i,r)=>{const s=Ny(r,t.sc(i));null!=s&&(e[i]=s)}),{mapValue:{fields:e}}}function tF(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof $||n instanceof g1||n instanceof Mf||n instanceof k||n instanceof My)}function uM(n,t,e){if(!tF(e)||"object"!=typeof(i=e)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=f(e);throw t.ac("an object"===i?n+" a custom object":n+" "+i)}var i}function dM(n,t,e){if((t=(0,z.m9)(t))instanceof ug)return t._internalPath;if("string"==typeof t)return v1(n,t);throw y1("Field path arguments must be of type string or ",n,!1,void 0,e)}const E3=new RegExp("[~\\*/\\[\\]]");function v1(n,t,e){if(t.search(E3)>=0)throw y1(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new ug(...t.split("."))._internalPath}catch(i){throw y1(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function y1(n,t,e,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${t}() called with invalid data`;e&&(d+=" (via `toFirestore()`)"),d+=". ";let p="";return(s||c)&&(p+=" (found",s&&(p+=` in field ${i}`),c&&(p+=` in document ${r}`),p+=")"),new ot(ke.INVALID_ARGUMENT,d+n+p)}function nF(n,t){return n.some(e=>e.isEqual(t))}class BT{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new k(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new T3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(b1("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class T3 extends BT{data(){return super.data()}}function b1(n,t){return"string"==typeof t?v1(n,t):t instanceof ug?t._internalPath:t._delegate._internalPath}class ky{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dg extends BT{constructor(t,e,i,r,s,c){super(t,e,i,r,c),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new UT(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const i=this._document.data.field(b1("DocumentSnapshot.get",t));if(null!==i)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}}class UT extends dg{data(t={}){return super.data(t)}}class c_{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new ky(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new UT(this._firestore,this._userDataWriter,i.key,i,new ky(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ot(ke.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new UT(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ky(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new UT(i._firestore,i._userDataWriter,c.doc.key,c.doc,new ky(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,v=-1;return 0!==c.type&&(p=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),v=s.indexOf(c.doc.key)),{type:D3(c.type),doc:d,oldIndex:p,newIndex:v}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function D3(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}function iF(n,t){return n instanceof dg&&t instanceof dg?n._firestore===t._firestore&&n._key.isEqual(t._key)&&(null===n._document?null===t._document:n._document.isEqual(t._document))&&n._converter===t._converter:n instanceof c_&&t instanceof c_&&n._firestore===t._firestore&&Et(n.query,t.query)&&n.metadata.isEqual(t.metadata)&&n._snapshot.isEqual(t._snapshot)}function rF(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new ot(ke.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VT{}function u_(n,...t){for(const e of t)n=e._apply(n);return n}class S3 extends VT{constructor(t,e,i){super(),this._c=t,this.wc=e,this.mc=i,this.type="where"}_apply(t){const e=Oy(t.firestore),i=function(r,s,c,d,p,v,E){let S;if(p.isKeyField()){if("array-contains"===v||"array-contains-any"===v)throw new ot(ke.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if("in"===v||"not-in"===v){uF(E,v);const F=[];for(const G of E)F.push(cF(d,r,G));S={arrayValue:{values:F}}}else S=cF(d,r,E)}else"in"!==v&&"not-in"!==v&&"array-contains-any"!==v||uF(E,v),S=XP(c,"where",E,"in"===v||"not-in"===v);const N=co.create(p,v,S);return function(F,G){if(G.S()){const de=Mb(F);if(null!==de&&!de.isEqual(G.field))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${de.toString()}' and '${G.field.toString()}'`);const $e=km(F);null!==$e&&dF(0,G.field,$e)}const J=function(de,$e){for(const Ke of de.filters)if($e.indexOf(Ke.op)>=0)return Ke.op;return null}(F,function(de){switch(de){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(G.op));if(null!==J)throw new ot(ke.INVALID_ARGUMENT,J===G.op?`Invalid query. You cannot use more than one '${G.op.toString()}' filter.`:`Invalid query. You cannot use '${G.op.toString()}' filters with '${J.toString()}' filters.`)}(r,N),N}(t._query,0,e,t.firestore._databaseId,this._c,this.wc,this.mc);return new B(t.firestore,t.converter,function(r,s){const c=r.filters.concat([s]);return new th(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(t._query,i))}}class A3 extends VT{constructor(t,e){super(),this._c=t,this.gc=e,this.type="orderBy"}_apply(t){const e=function(i,r,s){if(null!==i.startAt)throw new ot(ke.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new ot(ke.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new Nm(r,s);return function(d,p){if(null===km(d)){const v=Mb(d);null!==v&&dF(0,v,p.field)}}(i,c),c}(t._query,this._c,this.gc);return new B(t.firestore,t.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new th(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,e))}}class sF extends VT{constructor(t,e,i){super(),this.type=t,this.yc=e,this.Ic=i}_apply(t){return new B(t.firestore,t.converter,fE(t._query,this.yc,this.Ic))}}class oF extends VT{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=lF(t,this.type,this.Tc,this.Ec);return new B(t.firestore,t.converter,(r=e,new th((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class aF extends VT{constructor(t,e,i){super(),this.type=t,this.Tc=e,this.Ec=i}_apply(t){const e=lF(t,this.type,this.Tc,this.Ec);return new B(t.firestore,t.converter,(r=e,new th((i=t._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function lF(n,t,e,i){if(e[0]=(0,z.m9)(e[0]),e[0]instanceof BT)return function(r,s,c,d,p){if(!d)throw new ot(ke.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const v=[];for(const E of Hp(r))if(E.field.isKeyField())v.push(bf(s,d.key));else{const S=d.data.field(E.field);if(Jo(S))throw new ot(ke.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+E.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const N=E.field.canonicalString();throw new ot(ke.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${N}' (used as the orderBy) does not exist.`)}v.push(S)}return new eh(v,p)}(n._query,n.firestore._databaseId,t,e[0]._document,i);{const r=Oy(n.firestore);return function(s,c,d,p,v,E){const S=s.explicitOrderBy;if(v.length>S.length)throw new ot(ke.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const N=[];for(let F=0;F<v.length;F++){const G=v[F];if(S[F].field.isKeyField()){if("string"!=typeof G)throw new ot(ke.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof G}`);if(!Ob(s)&&-1!==G.indexOf("/"))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${G}' contains a slash.`);const J=s.path.child(Ve.fromString(G));if(!Tt.isDocumentKey(J))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${J}' is not because it contains an odd number of segments.`);const de=new Tt(J);N.push(bf(c,de))}else{const J=XP(d,p,G);N.push(J)}}return new eh(N,E)}(n._query,n.firestore._databaseId,r,t,e,i)}}function cF(n,t,e){if("string"==typeof(e=(0,z.m9)(e))){if(""===e)throw new ot(ke.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ob(t)&&-1!==e.indexOf("/"))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);const i=t.path.child(Ve.fromString(e));if(!Tt.isDocumentKey(i))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bf(n,new Tt(i))}if(e instanceof k)return bf(n,e._key);throw new ot(ke.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${f(e)}.`)}function uF(n,t){if(!Array.isArray(n)||0===n.length)throw new ot(ke.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(n.length>10)throw new ot(ke.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function dF(n,t,e){if(!e.isEqual(t))throw new ot(ke.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${e.toString()}' instead.`)}const F3={maxAttempts:5};class hM{convertValue(t,e="none"){switch(Bp(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(vr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ht()}}convertObject(t,e){const i={};return fe(t.fields,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new g1(Hn(t.latitude),Hn(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":const i=Ar(t);return null==i?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(Ms(t));default:return null}}convertTimestamp(t){const e=yn(t);return new $(e.seconds,e.nanos)}convertDocumentKey(t,e){const i=Ve.fromString(t);pn(qS(i));const r=new nl(i.get(1),i.get(3)),s=new Tt(i.popFirst(5));return r.isEqual(e)||Yr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}}function C1(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}class L3 extends hM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new k(this.firestore,null,e)}}class hF{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Oy(t)}set(t,e,i){this._verifyNotCommitted();const r=d_(t,this._firestore),s=C1(r.converter,e,i),c=_1(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,ds.none())),this}update(t,e,i,...r){this._verifyNotCommitted();const s=d_(t,this._firestore);let c;return c="string"==typeof(e=(0,z.m9)(e))||e instanceof ug?cM(this._dataReader,"WriteBatch.update",s._key,e,i,r):lM(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(c.toMutation(s._key,ds.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=d_(t,this._firestore);return this._mutations=this._mutations.concat(new Bb(e._key,ds.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ot(ke.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function d_(n,t){if((n=(0,z.m9)(n)).firestore!==t)throw new ot(ke.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Py extends hM{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mf(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new k(this.firestore,null,e)}}function fF(n,t,e){n=g(n,k);const i=g(n.firestore,rn),r=C1(n.converter,t,e);return DC(i,[_1(Oy(i),"setDoc",n._key,r,null!==n.converter,e).toMutation(n._key,ds.none())])}function pF(n,t,e,...i){n=g(n,k);const r=g(n.firestore,rn),s=Oy(r);let c;return c="string"==typeof(t=(0,z.m9)(t))||t instanceof ug?cM(s,"updateDoc",n._key,t,e,i):lM(s,"updateDoc",n._key,t),DC(r,[c.toMutation(n._key,ds.exists(!0))])}function gF(n,...t){var e,i,r;n=(0,z.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof t[c]||nt(t[c])||(s=t[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(nt(t[c])){const S=t[c];t[c]=null===(e=S.next)||void 0===e?void 0:e.bind(S),t[c+1]=null===(i=S.error)||void 0===i?void 0:i.bind(S),t[c+2]=null===(r=S.complete)||void 0===r?void 0:r.bind(S)}let p,v,E;if(n instanceof k)v=g(n.firestore,rn),E=Vp(n._key.path),p={next:S=>{t[c]&&t[c](fM(v,n,S))},error:t[c+1],complete:t[c+2]};else{const S=g(n,B);v=g(S.firestore,rn),E=S._query;const N=new Py(v);p={next:F=>{t[c]&&t[c](new c_(v,N,S,F))},error:t[c+1],complete:t[c+2]},rF(n._query)}return function(S,N,F,G){const J=new Ay(G),de=new aT(N,J,F);return S.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return ZI(yield Ry(S),de)})),()=>{J.Aa(),S.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return sT(yield Ry(S),de)}))}}(Qr(v),E,d,p)}function DC(n,t){return function(e,i){const r=new Qs;return e.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function LP(n,t,e){return fT.apply(this,arguments)}(yield RT(e),i,r)})),r.promise}(Qr(n),t)}function fM(n,t,e){const i=e.docs.get(t._key),r=new Py(n);return new dg(n,r,t._key,i,new ky(e.hasPendingWrites,e.fromCache),t.converter)}class q3 extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Oy(t)}get(t){const e=d_(t,this._firestore),i=new L3(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||1!==r.length)return Ht();const s=r[0];if(s.isFoundDocument())return new BT(this._firestore,i,s.key,s,e.converter);if(s.isNoDocument())return new BT(this._firestore,i,e._key,null,e.converter);throw Ht()})}set(t,e,i){const r=d_(t,this._firestore),s=C1(r.converter,e,i),c=_1(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(t,e,i,...r){const s=d_(t,this._firestore);let c;return c="string"==typeof(e=(0,z.m9)(e))||e instanceof ug?cM(this._dataReader,"Transaction.update",s._key,e,i,r):lM(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,c),this}delete(t){const e=d_(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=d_(t,this._firestore),i=new Py(this._firestore);return super.get(t).then(r=>new dg(this._firestore,i,e._key,r._document,new ky(!1,!1),e.converter))}}function pM(n,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ot("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return t}function _F(){if("undefined"==typeof Uint8Array)throw new ot("unimplemented","Uint8Arrays are not available in this environment.")}function vF(){if(!function An(){return"undefined"!=typeof atob}())throw new ot("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,t=!0){vf=Io.SDK_VERSION,(0,Io._registerComponent)(new Xa.wA("firestore",(e,{options:i})=>{const r=e.getProvider("app").getImmediate(),s=new rn(r,new Tb(e.getProvider("auth-internal")),new Xw(e.getProvider("app-check-internal")));return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC")),(0,Io.registerVersion)(kv,"3.4.9",n),(0,Io.registerVersion)(kv,"3.4.9","esm2017")}();class HT{constructor(t){this._delegate=t}static fromBase64String(t){return vF(),new HT(Mf.fromBase64String(t))}static fromUint8Array(t){return _F(),new HT(Mf.fromUint8Array(t))}toBase64(){return vF(),this._delegate.toBase64()}toUint8Array(){return _F(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gM(n){return function n$(n,t){if("object"!=typeof n||null===n)return!1;const e=n;for(const i of t)if(i in e&&"function"==typeof e[i])return!0;return!1}(n,["next","error","complete"])}class i${enableIndexedDbPersistence(t,e){return function MT(n,t){YP(n=g(n,rn));const e=Qr(n),i=n._freezeSettings(),r=new u1;return TC(e,r,new YR(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return function OT(n){YP(n=g(n,rn));const t=Qr(n),e=n._freezeSettings(),i=new u1;return TC(t,i,new GP(i,e.cacheSizeBytes))}(t._delegate)}clearIndexedDbPersistence(t){return function NT(n){if(n._initialized&&!n._terminated)throw new ot(ke.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qs;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Pe.Z)(function*(){try{yield(e=(0,Pe.Z)(function*(i){if(!Cu.vt())return Promise.resolve();const r=i+"main";yield Cu.delete(r)}),function(i){return e.apply(this,arguments)})(ng(n._databaseId,n._persistenceKey)),t.resolve()}catch(e){t.reject(e)}var e})),t.promise}(t._delegate)}}class yF{constructor(t,e,i){this._delegate=e,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},t instanceof nl||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Jd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)}useEmulator(t,e,i={}){!function x(n,t,e,i={}){var r;const s=(n=g(n,D))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Jd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${e}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Rs.MOCK_USER;else{c=(0,z.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new ot(ke.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Rs(p)}n._authCredentials=new Qw(new Eb(c,d))}}(this._delegate,t,e,i)}enableNetwork(){return function PT(n){return function tM(n){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){const t=yield xT(n),e=yield h1(n);return t.setNetworkEnabled(!0),function(i){const r=At(i);return r.wu.delete(0),og(r)}(e)}))}(Qr(n=g(n,rn)))}(this._delegate)}disableNetwork(){return function FT(n){return function nM(n){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){const t=yield xT(n),e=yield h1(n);return t.setNetworkEnabled(!1),(i=(0,Pe.Z)(function*(r){const s=At(r);s.wu.add(0),yield vy(s),s.yu.set("Offline")}),function(r){return i.apply(this,arguments)})(e);var i}))}(Qr(n=g(n,rn)))}(this._delegate)}enablePersistence(t){let e=!1,i=!1;return t&&(e=!!t.synchronizeTabs,i=!!t.experimentalForceOwningTab,a("synchronizeTabs",e,"experimentalForceOwningTab",i)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kT(n){return function(t){const e=new Qs;return t.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return function zR(n,t){return _C.apply(this,arguments)}(yield RT(t),e)})),e.promise}(Qr(n=g(n,rn)))}(this._delegate)}onSnapshotsInSync(t){return function z3(n,t){return function zP(n,t){const e=new Ay(t);return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return i=yield Ry(n),r=e,At(i).bu.add(r),void r.next();var i,r})),()=>{e.Aa(),n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return i=yield Ry(n),r=e,void At(i).bu.delete(r);var i,r}))}}(Qr(n=g(n,rn)),nt(t)?t:{next:t})}(this._delegate,t)}get app(){if(!this._appCompat)throw new ot("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new SC(this,re(this._delegate,t))}catch(e){throw Ul(e,"collection()","Firestore.collection()")}}doc(t){try{return new cd(this,Ge(this._delegate,t))}catch(e){throw Ul(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Vl(this,function _e(n,t){if(n=g(n,D),p1("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ot(ke.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new B(n,null,(e=t,new th(Ve.emptyPath(),e)));var e}(this._delegate,t))}catch(e){throw Ul(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return function Z3(n,t,e){n=g(n,rn);const i=Object.assign(Object.assign({},F3),e);return function(r){if(r.maxAttempts<1)throw new ot(ke.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function sM(n,t,e){const i=new Qs;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){const r=yield(s=n,a_(s).then(c=>c.datastore));var s;new XR(n.asyncQueue,r,e,t,i).run()})),i.promise}(Qr(n),r=>t(new q3(n,r)),i)}(this._delegate,e=>t(new bF(this,e)))}batch(){return Qr(this._delegate),new CF(new hF(this._delegate,t=>DC(this._delegate,t)))}loadBundle(t){return function g3(n,t){const e=Qr(n=g(n,rn)),i=new en;return function qP(n,t,e,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,v){if(p instanceof Uint8Array)return KR(p,v);if(p instanceof ArrayBuffer)return KR(new Uint8Array(p),v);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new QR(p,c);var p}(e,sg(t));n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){!function TT(n,t,e){const i=At(n);var r;(r=(0,Pe.Z)(function*(s,c,d){try{const p=yield c.getMetadata();if(yield function(N,F){const G=At(N),J=Kr(F.createTime);return G.persistence.runTransaction("hasNewerBundle","readonly",de=>G._s.getBundleMetadata(de,F.id)).then(de=>!!de&&de.createTime.compareTo(J)>=0)}(s.localStore,p))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(N=p).totalDocuments,bytesLoaded:N.totalBytes,totalDocuments:N.totalDocuments,totalBytes:N.totalBytes}),Promise.resolve(new Set);d._updateProgress(KI(p));const v=new lT(p,s.localStore,c.M);let E=yield c.ma();for(;E;){const N=yield v.Fu(E);N&&d._updateProgress(N),E=yield c.ma()}const S=yield v.complete();return yield ah(s,S.Lu,void 0),yield function(N,F){const G=At(N);return G.persistence.runTransaction("Save bundle","readwrite",J=>G._s.saveBundleMetadata(J,F))}(s.localStore,p),d._completeWith(S.progress),Promise.resolve(S.Bu)}catch(p){return Jd("SyncEngine",`Loading bundle failed with ${p}`),d._failWith(p),Promise.resolve(new Set)}var N}),function(s,c,d){return r.apply(this,arguments)})(i,t,e).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield RT(n),r,i)}))}(e,n._databaseId,t,i),i}(this._delegate,t)}namedQuery(t){return function m3(n,t){return function ZP(n,t){return n.asyncQueue.enqueue((0,Pe.Z)(function*(){return function(e,i){const r=At(e);return r.persistence.runTransaction("Get named query","readonly",s=>r._s.getNamedQuery(s,i))}(yield xy(n),t)}))}(Qr(n=g(n,rn)),t).then(e=>e?new B(n,null,e.query):null)}(this._delegate,t).then(e=>e?new Vl(this,e):null)}}class w1 extends hM{constructor(t){super(),this.firestore=t}convertBytes(t){return new HT(new Mf(t))}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return cd.forKey(e,this.firestore,null)}}class bF{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new w1(t)}get(t){const e=Ly(t);return this._delegate.get(e).then(i=>new jT(this._firestore,new dg(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,e.converter)))}set(t,e,i){const r=Ly(t);return i?(pM("Transaction.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Ly(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Ly(t);return this._delegate.delete(e),this}}class CF{constructor(t){this._delegate=t}set(t,e,i){const r=Ly(t);return i?(pM("WriteBatch.set",i),this._delegate.set(r,e,i)):this._delegate.set(r,e),this}update(t,e,i,...r){const s=Ly(t);return 2===arguments.length?this._delegate.update(s,e):this._delegate.update(s,e,i,...r),this}delete(t){const e=Ly(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}}class Fy{constructor(t,e,i){this._firestore=t,this._userDataWriter=e,this._delegate=i}fromFirestore(t,e){const i=new UT(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new GT(this._firestore,i),null!=e?e:{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){const i=Fy.INSTANCES;let r=i.get(t);r||(r=new WeakMap,i.set(t,r));let s=r.get(e);return s||(s=new Fy(t,new w1(t),e),r.set(e,s)),s}}Fy.INSTANCES=new WeakMap;class cd{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new w1(t)}static forPath(t,e,i){if(t.length%2!=0)throw new ot("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new cd(e,new k(e._delegate,i,new Tt(t)))}static forKey(t,e,i){return new cd(e,new k(e._delegate,i,t))}get id(){return this._delegate.id}get parent(){return new SC(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new SC(this.firestore,re(this._delegate,t))}catch(e){throw Ul(e,"collection()","DocumentReference.collection()")}}isEqual(t){return(t=(0,z.m9)(t))instanceof k&&gt(this._delegate,t)}set(t,e){e=pM("DocumentReference.set",e);try{return e?fF(this._delegate,t,e):fF(this._delegate,t)}catch(i){throw Ul(i,"setDoc()","DocumentReference.set()")}}update(t,e,...i){try{return 1===arguments.length?pF(this._delegate,t):pF(this._delegate,t,e,...i)}catch(r){throw Ul(r,"updateDoc()","DocumentReference.update()")}}delete(){return function $3(n){return DC(g(n.firestore,rn),[new Bb(n._key,ds.none())])}(this._delegate)}onSnapshot(...t){const e=wF(t),i=EF(t,r=>new jT(this.firestore,new dg(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return gF(this._delegate,e,i)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function U3(n){n=g(n,k);const t=g(n.firestore,rn),e=Qr(t),i=new Py(t);return function $P(n,t){const e=new Qs;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return(i=(0,Pe.Z)(function*(r,s,c){try{const d=yield function(p,v){const E=At(p);return E.persistence.runTransaction("read document","readonly",S=>E.fi.Ls(S,v))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new ot(ke.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const p=r_(d,`Failed to get document '${s} from cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield xy(n),t,e);var i})),e.promise}(e,n._key).then(r=>new dg(t,i,n._key,r,new ky(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==t?void 0:t.source)?function V3(n){n=g(n,k);const t=g(n.firestore,rn);return iM(Qr(t),n._key,{source:"server"}).then(e=>fM(t,n,e))}(this._delegate):function B3(n){n=g(n,k);const t=g(n.firestore,rn);return iM(Qr(t),n._key).then(e=>fM(t,n,e))}(this._delegate),e.then(i=>new jT(this.firestore,new dg(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(t){return new cd(this.firestore,this._delegate.withConverter(t?Fy.getInstance(this.firestore,t):null))}}function Ul(n,t,e){return n.message=n.message.replace(t,e),n}function wF(n){for(const t of n)if("object"==typeof t&&!gM(t))return t;return{}}function EF(n,t){var e,i;let r;return r=gM(n[0])?n[0]:gM(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(t(s))},error:null===(e=r.error)||void 0===e?void 0:e.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class jT{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new cd(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return iF(this._delegate,t._delegate)}}class GT extends jT{data(t){const e=this._delegate.data(t);return function dS(n,t){n||Ht()}(void 0!==e),e}}class Vl{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new w1(t)}where(t,e,i){try{return new Vl(this.firestore,u_(this._delegate,function I3(n,t,e){const i=t,r=b1("where",n);return new S3(r,i,e)}(t,e,i)))}catch(r){throw Ul(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new Vl(this.firestore,u_(this._delegate,function x3(n,t="asc"){const e=t,i=b1("orderBy",n);return new A3(i,e)}(t,e)))}catch(i){throw Ul(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Vl(this.firestore,u_(this._delegate,function R3(n){return _("limit",n),new sF("limit",n,"F")}(t)))}catch(e){throw Ul(e,"limit()","Query.limit()")}}limitToLast(t){try{return new Vl(this.firestore,u_(this._delegate,function M3(n){return _("limitToLast",n),new sF("limitToLast",n,"L")}(t)))}catch(e){throw Ul(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Vl(this.firestore,u_(this._delegate,function O3(...n){return new oF("startAt",n,!0)}(...t)))}catch(e){throw Ul(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Vl(this.firestore,u_(this._delegate,function N3(...n){return new oF("startAfter",n,!1)}(...t)))}catch(e){throw Ul(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Vl(this.firestore,u_(this._delegate,function k3(...n){return new aF("endBefore",n,!1)}(...t)))}catch(e){throw Ul(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Vl(this.firestore,u_(this._delegate,function P3(...n){return new aF("endAt",n,!0)}(...t)))}catch(e){throw Ul(e,"endAt()","Query.endAt()")}}isEqual(t){return Et(this._delegate,t._delegate)}get(t){let e;return e="cache"===(null==t?void 0:t.source)?function j3(n){n=g(n,B);const t=g(n.firestore,rn),e=Qr(t),i=new Py(t);return function WP(n,t){const e=new Qs;return n.asyncQueue.enqueueAndForget((0,Pe.Z)(function*(){return(i=(0,Pe.Z)(function*(r,s,c){try{const d=yield e_(r,s,!0),p=new cT(s,d._i),v=p.Wu(d.documents),E=p.applyChanges(v,!1);c.resolve(E.snapshot)}catch(d){const p=r_(d,`Failed to execute query '${s} against cache`);c.reject(p)}}),function(r,s,c){return i.apply(this,arguments)})(yield xy(n),t,e);var i})),e.promise}(e,n._query).then(r=>new c_(t,i,n,r))}(this._delegate):"server"===(null==t?void 0:t.source)?function G3(n){n=g(n,B);const t=g(n.firestore,rn),e=Qr(t),i=new Py(t);return rM(e,n._query,{source:"server"}).then(r=>new c_(t,i,n,r))}(this._delegate):function H3(n){n=g(n,B);const t=g(n.firestore,rn),e=Qr(t),i=new Py(t);return rF(n._query),rM(e,n._query).then(r=>new c_(t,i,n,r))}(this._delegate),e.then(i=>new mM(this.firestore,new c_(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...t){const e=wF(t),i=EF(t,r=>new mM(this.firestore,new c_(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return gF(this._delegate,e,i)}withConverter(t){return new Vl(this.firestore,this._delegate.withConverter(t?Fy.getInstance(this.firestore,t):null))}}class s${constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new GT(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class mM{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Vl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new GT(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new s$(this._firestore,e))}forEach(t,e){this._delegate.forEach(i=>{t.call(e,new GT(this._firestore,i))})}isEqual(t){return iF(this._delegate,t._delegate)}}class SC extends Vl{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new cd(this.firestore,t):null}doc(t){try{return new cd(this.firestore,void 0===t?Ge(this._delegate):Ge(this._delegate,t))}catch(e){throw Ul(e,"doc()","CollectionReference.doc()")}}add(t){return function W3(n,t){const e=g(n.firestore,rn),i=Ge(n),r=C1(n.converter,t);return DC(e,[_1(Oy(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,ds.exists(!1))]).then(()=>i)}(this._delegate,t).then(e=>new cd(this.firestore,e))}isEqual(t){return gt(this._delegate,t._delegate)}withConverter(t){return new SC(this.firestore,this._delegate.withConverter(t?Fy.getInstance(this.firestore,t):null))}}function Ly(n){return g(n,k)}class _M{constructor(...t){this._delegate=new ug(...t)}static documentId(){return new _M(bt.keyField().canonicalString())}isEqual(t){return(t=(0,z.m9)(t))instanceof ug&&this._delegate._internalPath.isEqual(t._internalPath)}}class By{constructor(t){this._delegate=t}static serverTimestamp(){const t=function K3(){return new aM("serverTimestamp")}();return t._methodName="FieldValue.serverTimestamp",new By(t)}static delete(){const t=function Y3(){return new LT("deleteField")}();return t._methodName="FieldValue.delete",new By(t)}static arrayUnion(...t){const e=function Q3(...n){return new b3("arrayUnion",n)}(...t);return e._methodName="FieldValue.arrayUnion",new By(e)}static arrayRemove(...t){const e=function J3(...n){return new C3("arrayRemove",n)}(...t);return e._methodName="FieldValue.arrayRemove",new By(e)}static increment(t){const e=function X3(n){return new w3("increment",n)}(t);return e._methodName="FieldValue.increment",new By(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}}const o$={Firestore:yF,GeoPoint:g1,Timestamp:$,Blob:HT,Transaction:bF,WriteBatch:CF,DocumentReference:cd,DocumentSnapshot:jT,Query:Vl,QueryDocumentSnapshot:GT,QuerySnapshot:mM,CollectionReference:SC,FieldPath:_M,FieldValue:By,setLogLevel:function r$(n){!function Pv(n){vu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function l$(n){(function a$(n,t){n.INTERNAL.registerComponent(new Xa.wA("firestore-compat",e=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(i,r)},"PUBLIC").setServiceProps(Object.assign({},o$)))})(n,(t,e)=>new yF(t,e,new i$)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(av.Z);var IC=W(6451),E1=W(5363),c$=W(6063);class u$ extends an.x{constructor(t=1/0,e=1/0,i=c$.l){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){const{isStopped:e,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;e||(i.push(t),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();const e=this._innerSubscribe(t),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!t.closed;c+=i?1:2)t.next(s[c]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){const{_bufferSize:t,_timestampProvider:e,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*t;if(t<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=e.now();let d=0;for(let p=1;p<i.length&&i[p]<=c;p+=2)d=p;d&&i.splice(0,d+1)}}}var vM=W(3099);function TF(n,t,e){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=n):i=null!=n?n:1/0,(0,vM.B)({connector:()=>new u$(i,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function DF(n,t){return(0,Bn.m)(t)?zi(()=>n,t):zi(()=>n)}var yM=W(9468);W(5867);const IF=new Map,g$={activated:!1,tokenObservers:[]},m$={initialized:!1,enabled:!1};function ta(n){return IF.get(n)||g$}function lh(n,t){IF.set(n,t)}function D1(){return m$}class C${constructor(t,e,i,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){var e=this;return(0,Pe.Z)(function*(){e.stop();try{e.pending=new z.BH,yield function w$(n){return new Promise(t=>{setTimeout(t,n)})}(e.getNextRun(t)),e.pending.resolve(),yield e.pending.promise,e.pending=new z.BH,yield e.operation(),e.pending.resolve(),yield e.pending.promise,e.process(!0).catch(()=>{})}catch(i){e.retryPolicy(i)?e.process(!1).catch(()=>{}):e.stop()}})()}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const Hl=new z.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function xF(n){if(!ta(n).activated)throw Hl.create("use-before-activation",{appName:n.name})}function EM(n,t){return TM.apply(this,arguments)}function TM(){return TM=(0,Pe.Z)(function*({url:n,body:t},e){const i={"Content-Type":"application/json"},r=e.getImmediate({optional:!0});if(r){const S=yield r.getHeartbeatsHeader();S&&(i["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(t),headers:i};let c,d;try{c=yield fetch(n,s)}catch(S){throw Hl.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==c.status)throw Hl.create("fetch-status-error",{httpStatus:c.status});try{d=yield c.json()}catch(S){throw Hl.create("fetch-parse-error",{originalErrorMessage:S.message})}const p=d.ttl.match(/^([\d.]+)(s)$/);if(!p||!p[2]||isNaN(Number(p[1])))throw Hl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const v=1e3*Number(p[1]),E=Date.now();return{token:d.token,expireTimeMillis:E+v,issuedAtTimeMillis:E}}),TM.apply(this,arguments)}function I$(n,t){const{projectId:e,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${e}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:t}}}const $T="firebase-app-check-store";let A1=null;function MF(){return A1||(A1=new Promise((n,t)=>{try{const e=indexedDB.open("firebase-app-check-database",1);e.onsuccess=i=>{n(i.target.result)},e.onerror=i=>{var r;t(Hl.create("storage-open",{originalErrorMessage:null===(r=i.target.error)||void 0===r?void 0:r.message}))},e.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore($T,{keyPath:"compositeKey"})}}catch(e){t(Hl.create("storage-open",{originalErrorMessage:e.message}))}}),A1)}function DM(){return DM=(0,Pe.Z)(function*(n,t){const i=(yield MF()).transaction($T,"readwrite"),s=i.objectStore($T).put({compositeKey:n,value:t});return new Promise((c,d)=>{s.onsuccess=p=>{c()},i.onerror=p=>{var v;d(Hl.create("storage-set",{originalErrorMessage:null===(v=p.target.error)||void 0===v?void 0:v.message}))}})}),DM.apply(this,arguments)}const WT=new Rl.Yd("@firebase/app-check");function PF(n,t){return(0,z.hl)()?function M$(n,t){return function OF(n,t){return DM.apply(this,arguments)}(function kF(n){return`${n.options.appId}-${n.name}`}(n),t)}(n,t).catch(e=>{WT.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function FF(){return D1().enabled}function LF(){return xM.apply(this,arguments)}function xM(){return xM=(0,Pe.Z)(function*(){const n=D1();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),xM.apply(this,arguments)}const L$={error:"UNKNOWN_ERROR"};function B$(n){return z.US.encodeString(JSON.stringify(n),!1)}function x1(n){return RM.apply(this,arguments)}function RM(){return RM=(0,Pe.Z)(function*(n,t=!1){const e=n.app;xF(e);const i=ta(e);let s,r=i.token;if(!r){const p=yield i.cachedTokenPromise;p&&R1(p)&&(r=p)}if(!t&&r&&R1(r))return{token:r.token};let d,c=!1;if(FF()){i.exchangeTokenPromise||(i.exchangeTokenPromise=EM(I$(e,yield LF()),n.heartbeatServiceProvider).then(v=>(i.exchangeTokenPromise=void 0,v)),c=!0);const p=yield i.exchangeTokenPromise;return yield PF(e,p),lh(e,Object.assign(Object.assign({},i),{token:p})),{token:p.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(p=>(i.exchangeTokenPromise=void 0,p)),c=!0),r=yield i.exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?WT.warn(p.message):WT.error(p),s=p}return r?(d={token:r.token},lh(e,Object.assign(Object.assign({},i),{token:r})),yield PF(e,r)):d=V$(s),c&&UF(e,d),d}),RM.apply(this,arguments)}function OM(n,t){const e=ta(n),i=e.tokenObservers.filter(r=>r.next!==t);0===i.length&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),lh(n,Object.assign(Object.assign({},e),{tokenObservers:i}))}function BF(n){const{app:t}=n,e=ta(t);let i=e.tokenRefresher;i||(i=function U$(n){const{app:t}=n;return new C$((0,Pe.Z)(function*(){let i;if(i=ta(t).token?yield x1(n,!0):yield x1(n),i.error)throw i.error}),()=>!0,()=>{const e=ta(t);if(e.token){let i=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,e.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),lh(t,Object.assign(Object.assign({},e),{tokenRefresher:i}))),!i.isRunning()&&e.isTokenAutoRefreshEnabled&&i.start()}function UF(n,t){const e=ta(n).tokenObservers;for(const i of e)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function R1(n){return n.expireTimeMillis-Date.now()>0}function V$(n){return{token:B$(L$),error:n}}class H${constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){const{tokenObservers:t}=ta(this.app);for(const e of t)OM(this.app,e.next);return Promise.resolve()}}const qF="app-check-internal";!function t6(){(0,Io._registerComponent)(new Xa.wA("app-check",n=>function j$(n,t){return new H$(n,t)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,t,e)=>{n.getProvider(qF).initialize()})),(0,Io._registerComponent)(new Xa.wA(qF,n=>function G$(n){return{getToken:t=>x1(n,t),addTokenListener:t=>function MM(n,t,e,i){const{app:r}=n,s=ta(r),c={next:e,error:i,type:t};if(lh(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&R1(s.token)){const d=s.token;Promise.resolve().then(()=>{e({token:d.token}),BF(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>BF(n))}(n,"INTERNAL",t),removeTokenListener:t=>OM(n.app,t)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Io.registerVersion)("@firebase/app-check","0.5.8")}();class zT{constructor(){return(0,di.vb)("app-check")}}"undefined"!=typeof window&&window;var O1=W(127);const LM=new o.OlP("angularfire2.auth.use-emulator"),BM=new o.OlP("angularfire2.auth.settings"),UM=new o.OlP("angularfire2.auth.tenant-id"),VM=new o.OlP("angularfire2.auth.langugage-code"),HM=new o.OlP("angularfire2.auth.use-device-language"),jM=new o.OlP("angularfire.auth.persistence"),GM=(n,t,e,i,r,s,c,d)=>(0,zr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=t.runOutsideAngular(()=>n.auth());if(e&&p.useEmulator(...e),i&&(p.tenantId=i),p.languageCode=r,s&&p.useDeviceLanguage(),c)for(const[v,E]of Object.entries(c))p.settings[v]=E;return d&&p.setPersistence(d),p},[e,i,r,s,c,d]);let qT=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S,N,F){const G=new an.x,J=dt(void 0).pipe((0,E1.Q)(c.outsideAngular),zi(()=>s.runOutsideAngular(()=>Promise.resolve().then(W.bind(W,5881)))),(0,Rt.U)(()=>(0,zr.on)(e,s,i)),(0,Rt.U)(de=>GM(de,s,d,v,E,S,p,N)),TF({bufferSize:1,refCount:!1}));if(rs(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dt(null);else{J.pipe(dc()).subscribe();const $e=J.pipe(zi(et=>et.getRedirectResult().then(Ct=>Ct,()=>null)),di.iC,TF({bufferSize:1,refCount:!1})),Ke=J.pipe(zi(et=>new Di.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>et.onAuthStateChanged(Dt=>Ct.next(Dt),Dt=>Ct.error(Dt),()=>Ct.complete()))})))),st=J.pipe(zi(et=>new Di.y(Ct=>({unsubscribe:s.runOutsideAngular(()=>et.onIdTokenChanged(Dt=>Ct.next(Dt),Dt=>Ct.error(Dt),()=>Ct.complete()))}))));this.authState=$e.pipe(DF(Ke),(0,yM.R)(c.outsideAngular),(0,E1.Q)(c.insideAngular)),this.user=$e.pipe(DF(st),(0,yM.R)(c.outsideAngular),(0,E1.Q)(c.insideAngular)),this.idToken=this.user.pipe(zi(et=>et?(0,Ti.D)(et.getIdToken()):dt(null))),this.idTokenResult=this.user.pipe(zi(et=>et?(0,Ti.D)(et.getIdTokenResult()):dt(null))),this.credential=(0,IC.T)($e,G,this.authState.pipe(zn(et=>!et))).pipe((0,Rt.U)(et=>(null==et?void 0:et.user)?et:null),(0,yM.R)(c.outsideAngular),(0,E1.Q)(c.insideAngular))}return(0,zr.pX)(this,J,s,{spy:{apply:(de,$e,Ke)=>{(de.startsWith("signIn")||de.startsWith("createUser"))&&Ke.then(st=>G.next(st))}}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zr.Dh),o.LFG(zr.xv,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(di.HU),o.LFG(LM,8),o.LFG(BM,8),o.LFG(UM,8),o.LFG(VM,8),o.LFG(HM,8),o.LFG(jM,8),o.LFG(zT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),l6=(()=>{class n{constructor(){O1.Z.registerVersion("angularfire",di.q4.full,"auth-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[qT]}),n})();function YF(n,t){return function c6(n,t=Ju.z){return new Di.y(e=>{let i;return null!=t?t.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},e)}):i=n.onSnapshot({includeMetadataChanges:!0},e),()=>{null!=i&&i()}})}(n,t)}function $M(n,t){return YF(n,t).pipe((0,Rt.U)(e=>({payload:e,type:"query"})))}function N1(n,t){return $M(n,t).pipe(ws(void 0),Aa(),(0,Rt.U)(([e,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const p=r.find(E=>E.doc.ref.isEqual(c.ref)),v=null==e?void 0:e.payload.docs.find(E=>E.ref.isEqual(c.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(c.metadata)||!p&&v&&JSON.stringify(v.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function KF(n,t,e){return N1(n,e).pipe(oo((i,r)=>function d6(n,t,e){return t.forEach(i=>{e.indexOf(i.type)>-1&&(n=function h6(n,t){switch(t.type){case"added":if(!n[t.newIndex]||!n[t.newIndex].doc.ref.isEqual(t.doc.ref))return WM(n,t.newIndex,0,t);break;case"modified":if(null==n[t.oldIndex]||n[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const e=n.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}return WM(n,t.newIndex,1,t)}break;case"removed":if(n[t.oldIndex]&&n[t.oldIndex].doc.ref.isEqual(t.doc.ref))return WM(n,t.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),t),[]),Ld(),(0,Rt.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function WM(n,t,e,...i){const r=n.slice();return r.splice(t,e,...i),r}function QF(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class JF{constructor(t,e,i){this.ref=t,this.query=e,this.afs=i}stateChanges(t){let e=N1(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe((0,Rt.U)(i=>i.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(ws(void 0),Aa(),zn(([i,r])=>r.length>0||!i),(0,Rt.U)(([i,r])=>r),di.iC)}auditTrail(t){return this.stateChanges(t).pipe(oo((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=QF(t);return KF(this.query,e,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(t={}){return $M(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(e=>e.payload.docs.map(i=>t.idField?Object.assign(Object.assign({},i.data()),{[t.idField]:i.id}):i.data())),di.iC)}get(t){return(0,Ti.D)(this.query.get(t)).pipe(di.iC)}add(t){return this.ref.add(t)}doc(t){return new XF(this.ref.doc(t),this.afs)}}class XF{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const i=this.ref.collection(t),{ref:r,query:s}=nL(i,e);return new JF(r,s,this.afs)}snapshotChanges(){return function u6(n,t){return YF(n,t).pipe(ws(void 0),Aa(),(0,Rt.U)(([e,i])=>i.exists?(null==e?void 0:e.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(t={}){return this.snapshotChanges().pipe((0,Rt.U)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return(0,Ti.D)(this.ref.get(t)).pipe(di.iC)}}class f6{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?N1(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(e=>e.filter(i=>t.indexOf(i.type)>-1)),zn(e=>e.length>0),di.iC):N1(this.query,this.afs.schedulers.outsideAngular).pipe(di.iC)}auditTrail(t){return this.stateChanges(t).pipe(oo((e,i)=>[...e,...i],[]))}snapshotChanges(t){const e=QF(t);return KF(this.query,e,this.afs.schedulers.outsideAngular).pipe(di.iC)}valueChanges(t={}){return $M(this.query,this.afs.schedulers.outsideAngular).pipe((0,Rt.U)(i=>i.payload.docs.map(r=>t.idField?Object.assign({[t.idField]:r.id},r.data()):r.data())),di.iC)}get(t){return(0,Ti.D)(this.query.get(t)).pipe(di.iC)}}const eL=new o.OlP("angularfire2.enableFirestorePersistence"),tL=new o.OlP("angularfire2.firestore.persistenceSettings"),p6=new o.OlP("angularfire2.firestore.settings"),g6=new o.OlP("angularfire2.firestore.use-emulator");function nL(n,t=(e=>e)){return{query:t(n),ref:n}}let iL=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S,N,F,G,J,de,$e,Ke){this.schedulers=p;const st=(0,zr.on)(e,d,i),et=E;S&&GM(st,d,N,G,J,de,F,$e),[this.firestore,this.persistenceEnabled$]=(0,zr.cc)(`${st.name}.firestore`,"AngularFirestore",st.name,()=>{const Ct=d.runOutsideAngular(()=>st.firestore());if(s&&Ct.settings(s),et&&Ct.useEmulator(...et),r&&!rs(c)){const Dt=()=>{try{return(0,Ti.D)(Ct.enablePersistence(v||void 0).then(()=>!0,()=>!1))}catch($t){return"undefined"!=typeof console&&console.warn($t),dt(!1)}};return[Ct,d.runOutsideAngular(Dt)]}return[Ct,dt(!1)]},[s,et,r])}collection(e,i){let r;r="string"==typeof e?this.firestore.collection(e):e;const{ref:s,query:c}=nL(r,i),d=this.schedulers.ngZone.run(()=>s);return new JF(d,c,this)}collectionGroup(e,i){const r=i||(c=>c),s=this.firestore.collectionGroup(e);return new f6(r(s),this)}doc(e){let i;i="string"==typeof e?this.firestore.doc(e):e;const r=this.schedulers.ngZone.run(()=>i);return new XF(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zr.Dh),o.LFG(zr.xv,8),o.LFG(eL,8),o.LFG(p6,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(di.HU),o.LFG(tL,8),o.LFG(g6,8),o.LFG(qT,8),o.LFG(LM,8),o.LFG(BM,8),o.LFG(UM,8),o.LFG(VM,8),o.LFG(HM,8),o.LFG(jM,8),o.LFG(zT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),m6=(()=>{class n{constructor(){O1.Z.registerVersion("angularfire",di.q4.full,"fst-compat")}static enablePersistence(e){return{ngModule:n,providers:[{provide:eL,useValue:!0},{provide:tL,useValue:e}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[iL]}),n})(),h_=(()=>{class n{constructor(e,i,r,s){this.afs=e,this.afAuth=i,this.router=r,this.ngZone=s,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(e,i){return this.afAuth.signInWithEmailAndPassword(e,i).then(r=>{this.ngZone.run(()=>{this.router.navigate(["front-page"])}),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SignUp(e,i){return this.afAuth.createUserWithEmailAndPassword(e,i).then(r=>{this.SendVerificationMail(),this.SetUserData(r.user)}).catch(r=>{window.alert(r.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(e=>e.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(e){return this.afAuth.sendPasswordResetEmail(e).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(i=>{window.alert(i)})}get isLoggedIn(){const e=JSON.parse(localStorage.getItem("user"));return null!==e&&!1!==e.emailVerified}GoogleAuth(){return this.AuthLogin(new O0.Q).then(e=>{e&&this.router.navigate(["front-page"])})}AuthLogin(e){return this.afAuth.signInWithPopup(e).then(i=>{this.ngZone.run(()=>{this.router.navigate(["front-page"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i)})}SetUserData(e){return this.afs.doc(`users/${e.uid}`).set({uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["front-page"])})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(iL),o.LFG(qT),o.LFG(Li),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),rL=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}ngOnInit(){}onSignIn(){this.authService.GoogleAuth(),setTimeout(window.location.reload,500)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(h_),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-in"]],decls:7,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","button",2,"width","175px","height","35px",3,"click"],[1,"fab","fa-google-plus-g"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"button",4),o.NdJ("click",function(){return i.onSignIn()}),o._UZ(5,"i",5),o._uU(6," Google Sign-in "),o.qZA()()()()())},styles:[""]}),n})(),_6=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(h_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/front-page",1,"redirect"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),o._uU(4,"Sign Up"),o.qZA(),o.TgZ(5,"div",3),o._UZ(6,"input",4,5),o.qZA(),o.TgZ(8,"div",3),o._UZ(9,"input",6,7),o.qZA(),o.TgZ(11,"div",3)(12,"input",8),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(7),d=o.MAs(10);return i.authService.SignUp(c.value,d.value)}),o.qZA()(),o.TgZ(13,"div",3)(14,"span",9)(15,"span",10),o._uU(16,"Or"),o.qZA()()(),o.TgZ(17,"div",3)(18,"button",11),o.NdJ("click",function(){return i.authService.GoogleAuth()}),o._UZ(19,"i",12),o._uU(20," Continue with Google "),o.qZA()()(),o.TgZ(21,"div",13)(22,"span"),o._uU(23," Already have an account? "),o.TgZ(24,"span",14),o._uU(25,"Log In"),o.qZA()()()()()}},directives:[Qu],styles:[""]}),n})();var v6=W(1144);const y6=["addListener","removeListener"],b6=["addEventListener","removeEventListener"],C6=["on","off"];function rl(n,t,e,i){if((0,Bn.m)(e)&&(i=e,e=void 0),i)return rl(n,t,e).pipe(vl(i));const[r,s]=function T6(n){return(0,Bn.m)(n.addEventListener)&&(0,Bn.m)(n.removeEventListener)}(n)?b6.map(c=>d=>n[c](t,d,e)):function w6(n){return(0,Bn.m)(n.addListener)&&(0,Bn.m)(n.removeListener)}(n)?y6.map(sL(n,t)):function E6(n){return(0,Bn.m)(n.on)&&(0,Bn.m)(n.off)}(n)?C6.map(sL(n,t)):[];if(!r&&(0,v6.z)(n))return(0,Ri.z)(c=>rl(c,t,e))((0,Sr.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new Di.y(c=>{const d=(...p)=>c.next(1<p.length?p:p[0]);return r(d),()=>s(d)})}function sL(n,t){return e=>i=>n[e](t,i)}var D6=W(3532);function ZT(n=0,t,e=Ju.P){let i=-1;return null!=t&&((0,D6.K)(t)?e=t:i=t),new Di.y(r=>{let s=function S6(n){return n instanceof Date&&!isNaN(n)}(n)?+n-e.now():n;s<0&&(s=0);let c=0;return e.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:I6}=Array;function oL(n){return 1===n.length&&I6(n[0])?n[0]:n}var k1=W(5032);function P1(...n){const t=(0,va.jO)(n),e=oL(n);return e.length?new Di.y(i=>{let r=e.map(()=>[]),s=e.map(()=>!1);i.add(()=>{r=s=null});for(let c=0;!i.closed&&c<e.length;c++)(0,Sr.Xf)(e[c]).subscribe((0,xn.x)(i,d=>{if(r[c].push(d),r.every(p=>p.length)){const p=r.map(v=>v.shift());i.next(t?t(...p):p),r.some((v,E)=>!v.length&&s[E])&&i.complete()}},()=>{s[c]=!0,!r[c].length&&i.complete()}));return()=>{r=s=null}}):Cs.E}function xr(n){return(0,vi.e)((t,e)=>{(0,Sr.Xf)(n).subscribe((0,xn.x)(e,()=>e.complete(),k1.Z)),!e.closed&&t.subscribe(e)})}function F1(...n){const t=(0,va.jO)(n);return(0,vi.e)((e,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let p=0;p<r;p++)(0,Sr.Xf)(n[p]).subscribe((0,xn.x)(i,v=>{s[p]=v,!d&&!c[p]&&(c[p]=!0,(d=c.every(bs.y))&&(c=null))},k1.Z));e.subscribe((0,xn.x)(i,p=>{if(d){const v=[p,...s];i.next(t?t(...v):v)}}))})}function dL(...n){const t=(0,va.jO)(n),{args:e,keys:i}=bo(n),r=new Di.y(s=>{const{length:c}=e;if(!c)return void s.complete();const d=new Array(c);let p=c,v=c;for(let E=0;E<c;E++){let S=!1;(0,Sr.Xf)(e[E]).subscribe((0,xn.x)(s,N=>{S||(S=!0,v--),d[E]=N},()=>p--,void 0,()=>{(!p||!S)&&(v||s.next(i?qc(i,d):d),s.complete())}))}});return t?r.pipe(vl(t)):r}new Di.y(k1.Z);let hL=(()=>{class n{constructor(e,i){this._renderer=e,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,i){this._renderer.setProperty(this._elementRef.nativeElement,e,i)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Uy=(()=>{class n extends hL{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const Oc=new o.OlP("NgValueAccessor"),k6={provide:Oc,useExisting:(0,o.Gpc)(()=>YT),multi:!0},F6=new o.OlP("CompositionEventMode");let YT=(()=>{class n extends hL{constructor(e,i,r){super(e,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function P6(){const n=j()?j().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(F6,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,i){1&e&&o.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[o._Bn([k6]),o.qOj]}),n})();function f_(n){return null==n||0===n.length}function pL(n){return null!=n&&"number"==typeof n.length}const sl=new o.OlP("NgValidators"),p_=new o.OlP("NgAsyncValidators"),L6=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class B6{static min(t){return function gL(n){return t=>{if(f_(t.value)||f_(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e<n?{min:{min:n,actual:t.value}}:null}}(t)}static max(t){return function mL(n){return t=>{if(f_(t.value)||f_(n))return null;const e=parseFloat(t.value);return!isNaN(e)&&e>n?{max:{max:n,actual:t.value}}:null}}(t)}static required(t){return function _L(n){return f_(n.value)?{required:!0}:null}(t)}static requiredTrue(t){return function vL(n){return!0===n.value?null:{required:!0}}(t)}static email(t){return function yL(n){return f_(n.value)||L6.test(n.value)?null:{email:!0}}(t)}static minLength(t){return function bL(n){return t=>f_(t.value)||!pL(t.value)?null:t.value.length<n?{minlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static maxLength(t){return function CL(n){return t=>pL(t.value)&&t.value.length>n?{maxlength:{requiredLength:n,actualLength:t.value.length}}:null}(t)}static pattern(t){return function wL(n){if(!n)return L1;let t,e;return"string"==typeof n?(e="","^"!==n.charAt(0)&&(e+="^"),e+=n,"$"!==n.charAt(n.length-1)&&(e+="$"),t=new RegExp(e)):(e=n.toString(),t=n),i=>{if(f_(i.value))return null;const r=i.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return AL(t)}static composeAsync(t){return xL(t)}}function L1(n){return null}function EL(n){return null!=n}function TL(n){const t=(0,o.QGY)(n)?(0,Ti.D)(n):n;return(0,o.CqO)(t),t}function DL(n){let t={};return n.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function SL(n,t){return t.map(e=>e(n))}function IL(n){return n.map(t=>function U6(n){return!n.validate}(t)?t:e=>t.validate(e))}function AL(n){if(!n)return null;const t=n.filter(EL);return 0==t.length?null:function(e){return DL(SL(e,t))}}function zM(n){return null!=n?AL(IL(n)):null}function xL(n){if(!n)return null;const t=n.filter(EL);return 0==t.length?null:function(e){return dL(SL(e,t).map(TL)).pipe((0,Rt.U)(DL))}}function qM(n){return null!=n?xL(IL(n)):null}function RL(n,t){return null===n?[t]:Array.isArray(n)?[...n,t]:[n,t]}function ML(n){return n._rawValidators}function OL(n){return n._rawAsyncValidators}function ZM(n){return n?Array.isArray(n)?n:[n]:[]}function B1(n,t){return Array.isArray(n)?n.includes(t):n===t}function NL(n,t){const e=ZM(t);return ZM(n).forEach(r=>{B1(e,r)||e.push(r)}),e}function kL(n,t){return ZM(t).filter(e=>!B1(n,e))}class PL{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zM(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=qM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}class g_ extends PL{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class jl extends PL{get formDirective(){return null}get path(){return null}}class FL{constructor(t){this._cd=t}is(t){var e,i,r;return"submitted"===t?!!(null===(e=this._cd)||void 0===e?void 0:e.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[t])}}let YM=(()=>{class n extends FL{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(g_,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[o.qOj]}),n})(),KM=(()=>{class n extends FL{constructor(e){super(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(jl,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,i){2&e&&o.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[o.qOj]}),n})();function V1(n,t){return[...t.path,n]}function KT(n,t){XM(n,t),t.valueAccessor.writeValue(n.value),function q6(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&BL(n,t)})}(n,t),function Y6(n,t){const e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}(n,t),function Z6(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&BL(n,t),"submit"!==n.updateOn&&n.markAsTouched()})}(n,t),function z6(n,t){if(t.valueAccessor.setDisabledState){const e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}(n,t)}function H1(n,t,e=!0){const i=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(i),t.valueAccessor.registerOnTouched(i)),G1(n,t),n&&(t._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function j1(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function XM(n,t){const e=ML(n);null!==t.validator?n.setValidators(RL(e,t.validator)):"function"==typeof e&&n.setValidators([e]);const i=OL(n);null!==t.asyncValidator?n.setAsyncValidators(RL(i,t.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();j1(t._rawValidators,r),j1(t._rawAsyncValidators,r)}function G1(n,t){let e=!1;if(null!==n){if(null!==t.validator){const r=ML(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.validator);s.length!==r.length&&(e=!0,n.setValidators(s))}}if(null!==t.asyncValidator){const r=OL(n);if(Array.isArray(r)&&r.length>0){const s=r.filter(c=>c!==t.asyncValidator);s.length!==r.length&&(e=!0,n.setAsyncValidators(s))}}}const i=()=>{};return j1(t._rawValidators,i),j1(t._rawAsyncValidators,i),e}function BL(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function UL(n,t){XM(n,t)}function eO(n,t){if(!n.hasOwnProperty("model"))return!1;const e=n.model;return!!e.isFirstChange()||!Object.is(t,e.currentValue)}function HL(n,t){n._syncPendingControls(),t.forEach(e=>{const i=e.control;"submit"===i.updateOn&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function tO(n,t){if(!t)return null;let e,i,r;return Array.isArray(t),t.forEach(s=>{s.constructor===YT?e=s:function J6(n){return Object.getPrototypeOf(n.constructor)===Uy}(s)?i=s:r=s}),r||i||e||null}function nO(n,t){const e=n.indexOf(t);e>-1&&n.splice(e,1)}const QT="VALID",$1="INVALID",AC="PENDING",JT="DISABLED";function rO(n){return(W1(n)?n.validators:n)||null}function jL(n){return Array.isArray(n)?zM(n):n||null}function sO(n,t){return(W1(t)?t.asyncValidators:n)||null}function GL(n){return Array.isArray(n)?qM(n):n||null}function W1(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const oO=n=>n instanceof lO,z1=n=>n instanceof q1,$L=n=>n instanceof ZL;function WL(n){return oO(n)?n.value:n.getRawValue()}function zL(n,t){const e=z1(n),i=n.controls;if(!(e?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[t])throw new o.vHH(1001,"")}function qL(n,t){z1(n),n._forEachChild((i,r)=>{if(void 0===t[r])throw new o.vHH(1002,"")})}class aO{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=jL(this._rawValidators),this._composedAsyncValidatorFn=GL(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===QT}get invalid(){return this.status===$1}get pending(){return this.status==AC}get disabled(){return this.status===JT}get enabled(){return this.status!==JT}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=jL(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=GL(t)}addValidators(t){this.setValidators(NL(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(NL(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(kL(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(kL(t,this._rawAsyncValidators))}hasValidator(t){return B1(this._rawValidators,t)}hasAsyncValidator(t){return B1(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=AC,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=JT,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=QT,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===QT||this.status===AC)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?JT:QT}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=AC,this._hasOwnPendingAsyncValidator=!0;const e=TL(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function X6(n,t,e){if(null==t||(Array.isArray(t)||(t=t.split(e)),Array.isArray(t)&&0===t.length))return null;let i=n;return t.forEach(r=>{i=z1(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:$L(i)&&i.at(r)||null}),i}(this,t,".")}getError(t,e){const i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?JT:this.errors?$1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(AC)?AC:this._anyControlsHaveStatus($1)?$1:QT}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){W1(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class lO extends aO{constructor(t=null,e,i){super(rO(e),sO(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),W1(e)&&e.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(t)?t.value:t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){nO(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){nO(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class q1 extends aO{constructor(t,e,i){super(rO(e),sO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){qL(this,t),Object.keys(t).forEach(i=>{zL(this,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=WL(e),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>!!i._syncPendingControls()||e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const i=this.controls[e];if(this.contains(e)&&t(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,i)=>((e.enabled||this.disabled)&&(t[i]=e.value),t))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class ZL extends aO{constructor(t,e,i){super(rO(e),sO(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,i={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){qL(this,t),t.forEach((i,r)=>{zL(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((i,r)=>{i.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>WL(t))}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((e,i)=>!!i._syncPendingControls()||e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,i)=>{t(e,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const eW={provide:jl,useExisting:(0,o.Gpc)(()=>Z1)},XT=(()=>Promise.resolve(null))();let Z1=(()=>{class n extends jl{constructor(e,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new o.vpe,this.form=new q1({},zM(e),qM(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){XT.then(()=>{const i=this._findContainer(e.path);e.control=i.registerControl(e.name,e.control),KT(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){XT.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){XT.then(()=>{const i=this._findContainer(e.path),r=new q1({});UL(r,e),i.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){XT.then(()=>{const i=this._findContainer(e.path);i&&i.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,i){XT.then(()=>{this.form.get(e.path).setValue(i)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,HL(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(sl,10),o.Y36(p_,10))},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([eW]),o.qOj]}),n})();const nW={provide:g_,useExisting:(0,o.Gpc)(()=>cO)},QL=(()=>Promise.resolve(null))();let cO=(()=>{class n extends g_{constructor(e,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new lO,this._registered=!1,this.update=new o.vpe,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=tO(0,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){const i=e.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),eO(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){KT(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){QL.then(()=>{var i;this.control.setValue(e,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(e){const i=e.isDisabled.currentValue,r=""===i||i&&"false"!==i;QL.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(e){return this._parent?V1(e,this._parent):[e]}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(jl,9),o.Y36(sl,10),o.Y36(p_,10),o.Y36(Oc,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([nW]),o.qOj,o.TTD]}),n})(),uO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),XL=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const dO=new o.OlP("NgModelWithFormControlWarning"),lW={provide:jl,useExisting:(0,o.Gpc)(()=>Y1)};let Y1=(()=>{class n extends jl{constructor(e,i){super(),this.validators=e,this.asyncValidators=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(e),this._setAsyncValidators(i)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(G1(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const i=this.form.get(e.path);return KT(i,e),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),i}getControl(e){return this.form.get(e.path)}removeControl(e){H1(e.control||null,e,!1),nO(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,i){this.form.get(e.path).setValue(i)}onSubmit(e){return this.submitted=!0,HL(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const i=e.control,r=this.form.get(e.path);i!==r&&(H1(i||null,e),oO(r)&&(KT(r,e),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const i=this.form.get(e.path);UL(i,e),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const i=this.form.get(e.path);i&&function K6(n,t){return G1(n,t)}(i,e)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XM(this.form,this),this._oldForm&&G1(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(sl,10),o.Y36(p_,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(e,i){1&e&&o.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([lW]),o.qOj,o.TTD]}),n})();const dW={provide:g_,useExisting:(0,o.Gpc)(()=>pO)};let pO=(()=>{class n extends g_{constructor(e,i,r,s,c){super(),this._ngModelWarningConfig=c,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=tO(0,s)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),eO(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return V1(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(e){return new(e||n)(o.Y36(jl,13),o.Y36(sl,10),o.Y36(p_,10),o.Y36(Oc,10),o.Y36(dO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([dW]),o.qOj,o.TTD]}),n})();const hW={provide:Oc,useExisting:(0,o.Gpc)(()=>K1),multi:!0};function rB(n,t){return null==n?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let K1=(()=>{class n extends Uy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;const r=rB(this._getOptionId(e),e);this.setProperty("value",r)}registerOnChange(e){this.onChange=i=>{this.value=this._getOptionValue(i),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),e))return i;return null}_getOptionValue(e){const i=function fW(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i):e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([hW]),o.qOj]}),n})(),sB=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){null!=this._select&&(this._select._optionMap.set(this.id,e),this._setElementValue(rB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(K1,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const pW={provide:Oc,useExisting:(0,o.Gpc)(()=>gO),multi:!0};function oB(n,t){return null==n?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${n}: ${t}`.slice(0,50))}let gO=(()=>{class n extends Uy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){let i;if(this.value=e,Array.isArray(e)){const r=e.map(s=>this._getOptionId(s));i=(s,c)=>{s._setSelected(r.indexOf(c.toString())>-1)}}else i=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(e){this.onChange=i=>{const r=[],s=i.selectedOptions;if(void 0!==s){const c=s;for(let d=0;d<c.length;d++){const v=this._getOptionValue(c[d].value);r.push(v)}}else{const c=i.options;for(let d=0;d<c.length;d++){const p=c[d];if(p.selected){const v=this._getOptionValue(p.value);r.push(v)}}}this.value=r,e(r)}}_registerOption(e){const i=(this._idCounter++).toString();return this._optionMap.set(i,e),i}_getOptionId(e){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,e))return i;return null}_getOptionValue(e){const i=function gW(n){return n.split(":")[0]}(e);return this._optionMap.has(i)?this._optionMap.get(i)._value:e}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(e,i){1&e&&o.NdJ("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([pW]),o.qOj]}),n})(),aB=(()=>{class n{constructor(e,i,r){this._element=e,this._renderer=i,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){null!=this._select&&(this._value=e,this._setElementValue(oB(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(oB(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(gO,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),_B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[XL]]}),n})(),Q1=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[_B]}),n})(),vB=(()=>{class n{static withConfig(e){return{ngModule:n,providers:[{provide:dO,useValue:e.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[_B]}),n})(),SW=(()=>{class n{group(e,i=null){const r=this._reduceControls(e);let d,s=null,c=null;return null!=i&&(function DW(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(i)?(s=null!=i.validators?i.validators:null,c=null!=i.asyncValidators?i.asyncValidators:null,d=null!=i.updateOn?i.updateOn:void 0):(s=null!=i.validator?i.validator:null,c=null!=i.asyncValidator?i.asyncValidator:null)),new q1(r,{asyncValidators:c,updateOn:d,validators:s})}control(e,i,r){return new lO(e,i,r)}array(e,i,r){const s=e.map(c=>this._createControl(c));return new ZL(s,i,r)}_reduceControls(e){const i={};return Object.keys(e).forEach(r=>{i[r]=this._createControl(e[r])}),i}_createControl(e){return oO(e)||z1(e)||$L(e)?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:vB}),n})();Math,Math,Math;const Lz=["*"],tq=["dialog"];function Pq(n,t){1&n&&o._uU(0),2&n&&o.Oqu(100===t.fill?"\u2605":"\u2606")}function Fq(n,t){}function Lq(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"span",2),o._uU(1),o.qZA(),o.TgZ(2,"span",3),o.NdJ("mouseenter",function(){const s=o.CHM(e).index;return o.oxw().enter(s+1)})("click",function(){const s=o.CHM(e).index;return o.oxw().handleClick(s+1)}),o.YNc(3,Fq,0,0,"ng-template",4),o.qZA()}if(2&n){const e=t.index,i=o.oxw(),r=o.MAs(1);o.xp6(1),o.hij("(",e<i.nextRate?"*":" ",")"),o.xp6(1),o.Udp("cursor",i.isInteractive()?"pointer":"default"),o.xp6(1),o.Q6J("ngTemplateOutlet",i.starTemplate||i.starTemplateFromContent||r)("ngTemplateOutletContext",i.contexts[e])}}function IO(n,t,e=0){return Math.max(Math.min(n,t),e)}function AO(n){return"string"==typeof n}function jy(n){return null!=n}function kC(n){return(n||document.body).getBoundingClientRect()}const PB={animation:!0,transitionTimerDelayMs:5},Kq=()=>{},{transitionTimerDelayMs:Qq}=PB,oD=new Map,Gl=(n,t,e,i)=>{let r=i.context||{};const s=oD.get(t);if(s)switch(i.runningTransition){case"continue":return Cs.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),oD.delete(t)}const c=e(t,i.animation,r)||Kq;if(!i.animation||"none"===window.getComputedStyle(t).transitionProperty)return n.run(()=>c()),dt(void 0).pipe(function Zq(n){return t=>new Di.y(e=>t.subscribe({next:c=>n.run(()=>e.next(c)),error:c=>n.run(()=>e.error(c)),complete:()=>n.run(()=>e.complete())}))}(n));const d=new an.x,p=new an.x,v=d.pipe(function x6(...n){return t=>Ca(t,dt(...n))}(!0));oD.set(t,{transition$:d,complete:()=>{p.next(),p.complete()},context:r});const E=function Yq(n){const{transitionDelay:t,transitionDuration:e}=window.getComputedStyle(n);return 1e3*(parseFloat(t)+parseFloat(e))}(t);return n.runOutsideAngular(()=>{const S=rl(t,"transitionend").pipe(xr(v),zn(({target:F})=>F===t));(function aL(...n){return 1===(n=oL(n)).length?(0,Sr.Xf)(n[0]):new Di.y(function A6(n){return t=>{let e=[];for(let i=0;e&&!t.closed&&i<n.length;i++)e.push((0,Sr.Xf)(n[i]).subscribe((0,xn.x)(t,r=>{if(e){for(let s=0;s<e.length;s++)s!==i&&e[s].unsubscribe();e=null}t.next(r)})))}}(n))})(ZT(E+Qq).pipe(xr(v)),S,p).pipe(xr(v)).subscribe(()=>{oD.delete(t),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let iA=(()=>{class n{constructor(){this.animation=PB.animation}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),jB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),$B=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),qB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),ZB=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();var jr=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(jr||(jr={})),jr))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const KB=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function QB(n){const t=Array.from(n.querySelectorAll(KB)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let o2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,Q1]]}),n})(),FO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275dir=o.lG2({type:n,selectors:[["",8,"navbar"]]}),n})(),c2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();class zy{constructor(t,e,i){this.nodes=t,this.viewRef=e,this.componentRef=i}}let W8=(()=>{class n{constructor(e,i){this._el=e,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,ui.q)(1)).subscribe(()=>{Gl(this._zone,this._el.nativeElement,(e,i)=>{i&&kC(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Gl(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(e,i){2&e&&(o.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),o.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,i){},encapsulation:2}),n})();class u2{close(t){}dismiss(t){}}class z8{constructor(t,e,i,r){this._windowCmptRef=t,this._contentRef=e,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new an.x,this._dismissed=new an.x,this._hidden=new an.x,t.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(xr(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(xr(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(t){this._windowCmptRef&&(this._closed.next(t),this._resolve(t),this._removeModalElements())}_dismiss(t){this._dismissed.next(t),this._reject(t),this._removeModalElements()}dismiss(t){if(this._windowCmptRef)if(this._beforeDismiss){const e=this._beforeDismiss();!function kB(n){return n&&n.then}(e)?!1!==e&&this._dismiss(t):e.then(i=>{!1!==i&&this._dismiss(t)},()=>{})}else this._dismiss(t)}_removeModalElements(){const t=this._windowCmptRef.instance.hide(),e=this._backdropCmptRef?this._backdropCmptRef.instance.hide():dt(void 0);t.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),e.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),P1(t,e).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var uD=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(uD||(uD={})),uD))();let q8=(()=>{class n{constructor(e,i,r){this._document=e,this._elRef=i,this._zone=r,this._closed$=new an.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new o.vpe,this.shown=new an.x,this.hidden=new an.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":AO(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,ui.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=P1(Gl(this._zone,e,()=>e.classList.remove("show"),i),Gl(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const e={animation:this.animation,runningTransition:"continue"};P1(Gl(this._zone,this._elRef.nativeElement,(s,c)=>{c&&kC(s),s.classList.add("show")},e),Gl(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{rl(e,"keydown").pipe(xr(this._closed$),zn(r=>r.which===jr.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(uD.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;rl(this._dialogEl.nativeElement,"mousedown").pipe(xr(this._closed$),(0,gr.b)(()=>i=!1),zi(()=>rl(e,"mouseup").pipe(xr(this._closed$),(0,ui.q)(1))),zn(({target:r})=>e===r)).subscribe(()=>{i=!0}),rl(e,"click").pipe(xr(this._closed$)).subscribe(({target:r})=>{e===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(uD.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const i=e.querySelector("[ngbAutofocus]"),r=QB(e)[0];(i||r||e).focus()}}_restoreFocus(){const e=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&e.contains(i)?i:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Gl(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(ve),o.Y36(o.SBq),o.Y36(o.R0b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(e,i){if(1&e&&o.Gf(tq,7),2&e){let r;o.iGM(r=o.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),o.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),o.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:Lz,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,i){1&e&&(o.F$t(),o.TgZ(0,"div",0,1)(2,"div",2),o.Hsn(3),o.qZA()()),2&e&&o.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),Z8=(()=>{class n{constructor(e){this._document=e}hide(){const e=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:c}=r;if(e>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+e}px`}return r.overflow="hidden",()=>{e>0&&(r.paddingRight=c),r.overflow=s}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Y8=(()=>{class n{constructor(e,i,r,s,c,d){this._applicationRef=e,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new an.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new o.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const p=this._windowCmpts[this._windowCmpts.length-1];((n,t,e,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=rl(t,"focusin").pipe(xr(e),(0,Rt.U)(s=>s.target));rl(t,"keydown").pipe(xr(e),zn(s=>s.which===jr.Tab),F1(r)).subscribe(([s,c])=>{const[d,p]=QB(t);(c===d||c===t)&&s.shiftKey&&(p.focus(),s.preventDefault()),c===p&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&rl(t,"click").pipe(xr(e),F1(r),(0,Rt.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,p.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(p.location.nativeElement)}})}_restoreScrollBar(){const e=this._scrollBarRestoreFn;e&&(this._scrollBarRestoreFn=null,e())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(e,i,r,s){const c=s.container instanceof HTMLElement?s.container:jy(s.container)?this._document.querySelector(s.container):this._document.body,d=this._rendererFactory.createRenderer(null,null);if(!c)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const p=new u2,v=this._getContentRef(e,s.injector||i,r,p,s);let E=!1!==s.backdrop?this._attachBackdrop(e,c):void 0,S=this._attachWindowComponent(e,c,v),N=new z8(S,v,E,s.beforeDismiss);return this._registerModalRef(N),this._registerWindowCmpt(S),N.hidden.pipe((0,ui.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(d.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),p.close=F=>{N.close(F)},p.dismiss=F=>{N.dismiss(F)},this._applyWindowOptions(S.instance,s),1===this._modalRefs.length&&d.addClass(this._document.body,"modal-open"),E&&E.instance&&(this._applyBackdropOptions(E.instance,s),E.changeDetectorRef.detectChanges()),S.changeDetectorRef.detectChanges(),N}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(i=>i.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,i){let s=e.resolveComponentFactory(W8).create(this._injector);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(e,i,r){let c=e.resolveComponentFactory(q8).create(this._injector,r.nodes);return this._applicationRef.attachView(c.hostView),i.appendChild(c.location.nativeElement),c}_applyWindowOptions(e,i){this._windowAttributes.forEach(r=>{jy(i[r])&&(e[r]=i[r])})}_applyBackdropOptions(e,i){this._backdropAttributes.forEach(r=>{jy(i[r])&&(e[r]=i[r])})}_getContentRef(e,i,r,s,c){return r?r instanceof o.Rgc?this._createFromTemplateRef(r,s):AO(r)?this._createFromString(r):this._createFromComponent(e,i,r,s,c):new zy([])}_createFromTemplateRef(e,i){const s=e.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(s),new zy([s.rootNodes],s)}_createFromString(e){const i=this._document.createTextNode(`${e}`);return new zy([[i]])}_createFromComponent(e,i,r,s,c){const d=e.resolveComponentFactory(r),p=o.zs3.create({providers:[{provide:u2,useValue:s}],parent:i}),v=d.create(p),E=v.location.nativeElement;return c.scrollable&&E.classList.add("component-host-scrollable"),this._applicationRef.attachView(v.hostView),new zy([[E]],v.hostView,v)}_setAriaHidden(e){const i=e.parentElement;i&&e!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==e&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,i)=>{e?i.setAttribute("aria-hidden",e):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const i=()=>{const r=this._modalRefs.indexOf(e);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(i,i)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const i=this._windowCmpts.indexOf(e);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.z2F),o.LFG(o.zs3),o.LFG(ve),o.LFG(Z8),o.LFG(o.FYo),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),K8=(()=>{class n{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(iA))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Q8=(()=>{class n{constructor(e,i,r,s){this._moduleCFR=e,this._injector=i,this._modalStack=r,this._config=s}open(e,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,e,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o._Vd),o.LFG(o.zs3),o.LFG(Y8),o.LFG(K8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),d2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Q8]}),n})(),g2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),E2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),D2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),S2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),c4=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),u4=(()=>{class n{constructor(e,i){this._changeDetectorRef=i,this.contexts=[],this.disabled=!1,this.hover=new o.vpe,this.leave=new o.vpe,this.rateChange=new o.vpe(!0),this.onChange=r=>{},this.onTouched=()=>{},this.max=e.max,this.readonly=e.readonly}ariaValueText(){return`${this.nextRate} out of ${this.max}`}isInteractive(){return!this.readonly&&!this.disabled}enter(e){this.isInteractive()&&this._updateState(e),this.hover.emit(e)}handleBlur(){this.onTouched()}handleClick(e){this.isInteractive()&&this.update(this.resettable&&this.rate===e?0:e)}handleKeyDown(e){switch(e.which){case jr.ArrowDown:case jr.ArrowLeft:this.update(this.rate-1);break;case jr.ArrowUp:case jr.ArrowRight:this.update(this.rate+1);break;case jr.Home:this.update(0);break;case jr.End:this.update(this.max);break;default:return}e.preventDefault()}ngOnChanges(e){e.rate&&this.update(this.rate),e.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(e){this.disabled=e}update(e,i=!0){const r=IO(e,this.max,0);this.isInteractive()&&this.rate!==r&&(this.rate=r,this.rateChange.emit(this.rate)),i&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(e){this.update(e,!1),this._changeDetectorRef.markForCheck()}_updateState(e){this.nextRate=e,this.contexts.forEach((i,r)=>i.fill=Math.round(100*IO(e-r,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(e,i)=>({fill:0,index:i}))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(c4),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(e,i,r){if(1&e&&o.Suo(r,o.Rgc,5),2&e){let s;o.iGM(s=o.CRH())&&(i.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(e,i){1&e&&o.NdJ("blur",function(){return i.handleBlur()})("keydown",function(s){return i.handleKeyDown(s)})("mouseleave",function(){return i.reset()}),2&e&&(o.Ikx("tabindex",i.disabled?-1:0),o.uIk("aria-valuemax",i.max)("aria-valuenow",i.nextRate)("aria-valuetext",i.ariaValueText())("aria-disabled",!!i.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},features:[o._Bn([{provide:Oc,useExisting:(0,o.Gpc)(()=>n),multi:!0}]),o.TTD],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(e,i){1&e&&(o.YNc(0,Pq,1,1,"ng-template",null,0,o.W1O),o.YNc(2,Lq,4,5,"ng-template",1)),2&e&&(o.xp6(2),o.Q6J("ngForOf",i.contexts))},directives:[ri,ua],encapsulation:2,changeDetection:0}),n})(),I2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),A2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),x2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),R2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();new o.OlP("live announcer delay",{providedIn:"root",factory:function f4(){return 100}});let M2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),O2=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const p4=[HB,jB,$B,qB,ZB,o2,c2,d2,g2,O2,E2,D2,S2,I2,A2,x2,R2,M2];let g4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[p4,HB,jB,$B,qB,ZB,o2,c2,d2,g2,O2,E2,D2,S2,I2,A2,x2,R2,M2]}),n})();function m4(n,t){if(1&n&&(o.TgZ(0,"div",4)(1,"div",18)(2,"div",19),o._UZ(3,"img",20),o.TgZ(4,"div",21)(5,"h1"),o._uU(6,"Hello: "),o.TgZ(7,"strong"),o._uU(8),o.qZA()(),o.TgZ(9,"p"),o._uU(10,"User ID: "),o.TgZ(11,"strong"),o._uU(12),o.qZA()(),o.TgZ(13,"p"),o._uU(14,"Email: "),o.TgZ(15,"strong"),o._uU(16),o.qZA()(),o.TgZ(17,"p"),o._uU(18,"Email Verified: "),o.TgZ(19,"strong"),o._uU(20),o.qZA()()()()()()),2&n){const e=t.ngIf;o.xp6(3),o.s9C("src",e.photoURL?e.photoURL:"/assets/dummy-user.png",o.LSH),o.s9C("alt",e.displayName),o.xp6(5),o.Oqu(e.displayName?e.displayName:"User"),o.xp6(4),o.Oqu(e.uid),o.xp6(4),o.Oqu(e.email),o.xp6(4),o.Oqu(e.emailVerified)}}let _4=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(h_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard"]],decls:22,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],["src","assets/logo-positronx-white.svg","alt","positronX.io Logo",1,"brand-logo"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(e,i){1&e&&(o.TgZ(0,"nav",0)(1,"a",1),o._UZ(2,"img",2),o.qZA()(),o.TgZ(3,"div",3)(4,"div",4)(5,"nav",5)(6,"div",6)(7,"ul",7)(8,"li",8)(9,"a",9),o._UZ(10,"i",10),o._uU(11,"User Profile "),o.qZA()(),o.TgZ(12,"li",8)(13,"a",11),o.NdJ("click",function(){return i.authService.SignOut()}),o._UZ(14,"i",12),o._uU(15,"Log out "),o.qZA()()()()(),o.TgZ(16,"main",13)(17,"div",14)(18,"div",15)(19,"h1",16),o._uU(20,"User Profile"),o.qZA()(),o.YNc(21,m4,21,6,"div",17),o.qZA()()()()),2&e&&(o.xp6(21),o.Q6J("ngIf",i.authService.userData))},directives:[FO,si],styles:[""]}),n})(),v4=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(h_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/front-page",1,"redirect"]],template:function(e,i){if(1&e){const r=o.EpF();o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),o._uU(4,"Reset Password"),o.qZA(),o.TgZ(5,"p",3),o._uU(6,"Please enter your email address to request a password reset."),o.qZA(),o.TgZ(7,"div",4),o._UZ(8,"input",5,6),o.qZA(),o.TgZ(10,"div",4)(11,"input",7),o.NdJ("click",function(){o.CHM(r);const c=o.MAs(9);return i.authService.ForgotPassword(c.value)}),o.qZA()()(),o.TgZ(12,"div",8)(13,"span"),o._uU(14,"Go back to ? "),o.TgZ(15,"span",9),o._uU(16,"Log In"),o.qZA()()()()()}},directives:[Qu],styles:[""]}),n})();function y4(n,t){if(1&n&&(o.TgZ(0,"div",4)(1,"p",9),o._uU(2,"We have sent a confirmation email to "),o.TgZ(3,"strong"),o._uU(4),o.qZA(),o._uU(5,"."),o.qZA(),o.TgZ(6,"p",9),o._uU(7,"Please check your email and click on the link to verfiy your email address."),o.qZA()()),2&n){const e=t.ngIf;o.xp6(4),o.Oqu(e.email)}}let b4=(()=>{class n{constructor(e){this.authService=e}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(h_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/front-page",1,"redirect"],[1,"text-center"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),o._uU(4,"Thank You for Registering"),o.qZA(),o.YNc(5,y4,8,1,"div",3),o.TgZ(6,"div",4)(7,"button",5),o.NdJ("click",function(){return i.authService.SendVerificationMail()}),o._UZ(8,"i",6),o._uU(9," Resend Verification Email "),o.qZA()()(),o.TgZ(10,"div",7)(11,"span"),o._uU(12,"Go back to?"),o.TgZ(13,"span",8),o._uU(14," Sign in"),o.qZA()()()()()),2&e&&(o.xp6(5),o.Q6J("ngIf",i.authService.userData))},directives:[si,Qu],styles:[""]}),n})(),C4=(()=>{class n{constructor(e,i){this.authService=e,this.router=i}canActivate(e,i){return!0!==this.authService.isLoggedIn&&this.router.navigate(["front-page"]),!0}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(h_),o.LFG(Li))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ro(n=1/0){let t;t=n&&"object"==typeof n?n:{count:n};const{count:e=1/0,delay:i,resetOnSuccess:r=!1}=t;return e<=0?bs.y:(0,vi.e)((s,c)=>{let p,d=0;const v=()=>{let E=!1;p=s.subscribe((0,xn.x)(c,S=>{r&&(d=0),c.next(S)},void 0,S=>{if(d++<e){const N=()=>{p?(p.unsubscribe(),p=null,v()):E=!0};if(null!=i){const F="number"==typeof i?ZT(i):(0,Sr.Xf)(i(S,d)),G=(0,xn.x)(c,()=>{G.unsubscribe(),N()},()=>{c.complete()});F.subscribe(G)}else N()}else c.error(S)})),E&&(p.unsubscribe(),p=null,v())};v()})}class N2{}class k2{}class pg{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(e=>{const i=e.indexOf(":");if(i>0){const r=e.slice(0,i),s=r.toLowerCase(),c=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let i=t[e];const r=e.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof pg?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new pg;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof pg?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":const s=t.value;if(s){let c=this.headers.get(e);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,c)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class w4{encodeKey(t){return P2(t)}encodeValue(t){return P2(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const T4=/%(\d[a-f0-9])/gi,D4={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function P2(n){return encodeURIComponent(n).replace(T4,(t,e)=>{var i;return null!==(i=D4[e])&&void 0!==i?i:t})}function F2(n){return`${n}`}class v_{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new w4,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function E4(n,t){const e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],p=e.get(c)||[];p.push(d),e.set(c,p)}),e}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const i=t.fromObject[e];this.map.set(e,Array.isArray(i)?i:[i])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(i=>{const r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new v_({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(F2(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let i=this.map.get(t.param)||[];const r=i.indexOf(F2(t.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class S4{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}}function L2(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function B2(n){return"undefined"!=typeof Blob&&n instanceof Blob}function U2(n){return"undefined"!=typeof FormData&&n instanceof FormData}class dD{constructor(t,e,i,r){let s;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function I4(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new pg),this.context||(this.context=new S4),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=e;else{const d=e.indexOf("?");this.urlWithParams=e+(-1===d?"?":d<e.length-1?"&":"")+c}}else this.params=new v_,this.urlWithParams=e}serializeBody(){return null===this.body?null:L2(this.body)||B2(this.body)||U2(this.body)||function A4(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof v_?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||U2(this.body)?null:B2(this.body)?this.body.type||null:L2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof v_?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const i=t.method||this.method,r=t.url||this.url,s=t.responseType||this.responseType,c=void 0!==t.body?t.body:this.body,d=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,p=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let v=t.headers||this.headers,E=t.params||this.params;const S=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(v=Object.keys(t.setHeaders).reduce((N,F)=>N.set(F,t.setHeaders[F]),v)),t.setParams&&(E=Object.keys(t.setParams).reduce((N,F)=>N.set(F,t.setParams[F]),E)),new dD(i,r,c,{params:E,headers:v,context:S,reportProgress:p,responseType:s,withCredentials:d})}}var ho=(()=>((ho=ho||{})[ho.Sent=0]="Sent",ho[ho.UploadProgress=1]="UploadProgress",ho[ho.ResponseHeader=2]="ResponseHeader",ho[ho.DownloadProgress=3]="DownloadProgress",ho[ho.Response=4]="Response",ho[ho.User=5]="User",ho))();class VO{constructor(t,e=200,i="OK"){this.headers=t.headers||new pg,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class HO extends VO{constructor(t={}){super(t),this.type=ho.ResponseHeader}clone(t={}){return new HO({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class dA extends VO{constructor(t={}){super(t),this.type=ho.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new dA({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class V2 extends VO{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function jO(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let qy=(()=>{class n{constructor(e){this.handler=e}request(e,i,r={}){let s;if(e instanceof dD)s=e;else{let p,v;p=r.headers instanceof pg?r.headers:new pg(r.headers),r.params&&(v=r.params instanceof v_?r.params:new v_({fromObject:r.params})),s=new dD(e,i,void 0!==r.body?r.body:null,{headers:p,context:r.context,params:v,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=dt(s).pipe(H(p=>this.handler.handle(p)));if(e instanceof dD||"events"===r.observe)return c;const d=c.pipe(zn(p=>p instanceof dA));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,Rt.U)(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return d.pipe((0,Rt.U)(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return d.pipe((0,Rt.U)(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));default:return d.pipe((0,Rt.U)(p=>p.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,i={}){return this.request("DELETE",e,i)}get(e,i={}){return this.request("GET",e,i)}head(e,i={}){return this.request("HEAD",e,i)}jsonp(e,i){return this.request("JSONP",e,{params:(new v_).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,i={}){return this.request("OPTIONS",e,i)}patch(e,i,r={}){return this.request("PATCH",e,jO(r,i))}post(e,i,r={}){return this.request("POST",e,jO(r,i))}put(e,i,r={}){return this.request("PUT",e,jO(r,i))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(N2))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class H2{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const j2=new o.OlP("HTTP_INTERCEPTORS");let x4=(()=>{class n{intercept(e,i){return i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const R4=/^\)\]\}',?\n/;let G2=(()=>{class n{constructor(e){this.xhrFactory=e}handle(e){if("JSONP"===e.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Di.y(i=>{const r=this.xhrFactory.build();if(r.open(e.method,e.urlWithParams),e.withCredentials&&(r.withCredentials=!0),e.headers.forEach((F,G)=>r.setRequestHeader(F,G.join(","))),e.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){const F=e.detectContentTypeHeader();null!==F&&r.setRequestHeader("Content-Type",F)}if(e.responseType){const F=e.responseType.toLowerCase();r.responseType="json"!==F?F:"text"}const s=e.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const F=r.statusText||"OK",G=new pg(r.getAllResponseHeaders()),J=function M4(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||e.url;return c=new HO({headers:G,status:r.status,statusText:F,url:J}),c},p=()=>{let{headers:F,status:G,statusText:J,url:de}=d(),$e=null;204!==G&&($e=void 0===r.response?r.responseText:r.response),0===G&&(G=$e?200:0);let Ke=G>=200&&G<300;if("json"===e.responseType&&"string"==typeof $e){const st=$e;$e=$e.replace(R4,"");try{$e=""!==$e?JSON.parse($e):null}catch(et){$e=st,Ke&&(Ke=!1,$e={error:et,text:$e})}}Ke?(i.next(new dA({body:$e,headers:F,status:G,statusText:J,url:de||void 0})),i.complete()):i.error(new V2({error:$e,headers:F,status:G,statusText:J,url:de||void 0}))},v=F=>{const{url:G}=d(),J=new V2({error:F,status:r.status||0,statusText:r.statusText||"Unknown Error",url:G||void 0});i.error(J)};let E=!1;const S=F=>{E||(i.next(d()),E=!0);let G={type:ho.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(G.total=F.total),"text"===e.responseType&&!!r.responseText&&(G.partialText=r.responseText),i.next(G)},N=F=>{let G={type:ho.UploadProgress,loaded:F.loaded};F.lengthComputable&&(G.total=F.total),i.next(G)};return r.addEventListener("load",p),r.addEventListener("error",v),r.addEventListener("timeout",v),r.addEventListener("abort",v),e.reportProgress&&(r.addEventListener("progress",S),null!==s&&r.upload&&r.upload.addEventListener("progress",N)),r.send(s),i.next({type:ho.Sent}),()=>{r.removeEventListener("error",v),r.removeEventListener("abort",v),r.removeEventListener("load",p),r.removeEventListener("timeout",v),e.reportProgress&&(r.removeEventListener("progress",S),null!==s&&r.upload&&r.upload.removeEventListener("progress",N)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(fi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const GO=new o.OlP("XSRF_COOKIE_NAME"),$O=new o.OlP("XSRF_HEADER_NAME");class $2{}let O4=(()=>{class n{constructor(e,i,r){this.doc=e,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fa(e,this.cookieName),this.lastCookieString=e),this.lastToken}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(o.Lbi),o.LFG(GO))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),WO=(()=>{class n{constructor(e,i){this.tokenService=e,this.headerName=i}intercept(e,i){const r=e.url.toLowerCase();if("GET"===e.method||"HEAD"===e.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(e);const s=this.tokenService.getToken();return null!==s&&!e.headers.has(this.headerName)&&(e=e.clone({headers:e.headers.set(this.headerName,s)})),i.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG($2),o.LFG($O))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),N4=(()=>{class n{constructor(e,i){this.backend=e,this.injector=i,this.chain=null}handle(e){if(null===this.chain){const i=this.injector.get(j2,[]);this.chain=i.reduceRight((r,s)=>new H2(r,s),this.backend)}return this.chain.handle(e)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(k2),o.LFG(o.zs3))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),k4=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:WO,useClass:x4}]}}static withOptions(e={}){return{ngModule:n,providers:[e.cookieName?{provide:GO,useValue:e.cookieName}:[],e.headerName?{provide:$O,useValue:e.headerName}:[]]}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[WO,{provide:j2,useExisting:WO,multi:!0},{provide:$2,useClass:O4},{provide:GO,useValue:"XSRF-TOKEN"},{provide:$O,useValue:"X-XSRF-TOKEN"}]}),n})(),P4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[qy,{provide:N2,useClass:N4},G2,{provide:k2,useExisting:G2}],imports:[[k4.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),hD=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://sep6-movies-cloud.lm.r.appspot.com"}getMovies(){return this.http.get(this.apiUrl+"/api/v1/movie/title/Titanic").pipe(Ro(1),Un(this.handleError))}getMoviesWithPoster(e){return this.http.get(this.apiUrl+"/api/v1/movie/titleandposter/"+e).pipe(Ro(1),Un(this.handleError))}checkFavorite(e,i){return console.log("HER"),this.http.get(this.apiUrl+"/api/v1/movie/checkFavorite/"+e+"/"+i).pipe(Ro(1),Un(this.handleError))}getFavorites(e){return this.http.get(this.apiUrl+"/api/v1/movie/getFavorites/"+e).pipe(Ro(1),Un(this.handleError))}changeFavorite(e,i,r){return this.http.post(this.apiUrl+"/api/v1/movie/setFavorite",{favorite:e,username:i,movieId:r})}getFullMovie(e){return this.http.get(this.apiUrl+"/api/v1/movie/full/"+e).pipe(Ro(1),Un(this.handleError))}getMostPopularMovies(){return this.http.get(this.apiUrl+"/api/v1/movie/discovery/popularity").pipe(Ro(1),Un(this.handleError))}getUpcommingMovies(){return this.http.get(this.apiUrl+"/api/v1/movie/discovery/upcomming").pipe(Ro(1),Un(this.handleError))}getInTheaters(){return this.http.get(this.apiUrl+"/api/v1/movie/discovery/theaters").pipe(Ro(1),Un(this.handleError))}getMostPopularSeries(){return this.http.get(this.apiUrl+"/api/v1/movie/discovery/seriespopular").pipe(Ro(1),Un(this.handleError))}handleError(e){let i="";return i=e.error instanceof ErrorEvent?e.error.message:`errorstatus: ${e.status}. Errormessage: ${e.message}`,window.alert(i),_i(()=>i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var zO=W(655);let F4=(()=>{class n{constructor(e){this.opt=e,this.dataTableChanged=new o.vpe,e&&this._setDataTable(e.dataTable,e.firstRowIsData)}send(){void 0!==this.query&&this.query.send(e=>{this.setDataTable(e.getDataTable()),this.opt.queryCallback&&this.opt.queryCallback(e)})}init(e){e&&(this.opt=e),void 0!==this.tid&&(window.clearInterval(this.tid),this.tid=void 0),this.opt.dataSourceUrl?(this.query=new google.visualization.Query(this.opt.dataSourceUrl),this.opt.query&&this.query.setQuery(this.opt.query),void 0!==this.opt.timeout&&this.query.setTimeout(this.opt.timeout),this.opt.refreshInterval&&(this.tid=window.setInterval(()=>{this.send()},1e3*this.opt.refreshInterval)),this.send()):this.setDataTable(this.opt.dataTable)}getDataTable(){return this.dataTable}setDataTable(e,i){void 0===i&&(i=this.opt.firstRowIsData),this._setDataTable(e,i),this.dataTableChanged.emit(this.dataTable)}_setDataTable(e,i){Array.isArray(e)&&(e=google.visualization.arrayToDataTable(e,i)),this.dataTable=e,this.reformat()}reformat(){const e=this.dataTable;if(void 0!==e&&void 0!==this.opt.formatters)for(const i of this.opt.formatters){let r;if("PatternFormat"===i.type){const d=i.options;r=new google.visualization.PatternFormat(d.pattern),r.format(e,i.columns,d.dstColumnIndex);continue}const s=google.visualization[i.type],c=i.options;if(r=new s(c),"ColorFormat"===i.type&&c){const d=c;if(d.ranges)for(const p of d.ranges)void 0!==p.fromBgColor&&void 0!==p.toBgColor?r.addGradientRange(p.from,p.to,p.color,p.fromBgColor,p.toBgColor):r.addRange(p.from,p.to,p.color,p.bgcolor)}for(const d of i.columns)r.format(e,d)}}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n,outputs:{dataTableChanged:"dataTableChanged"}}),n})(),L4=(()=>{class n{constructor(e){this.el=e}setPosition(e,i){this.el.nativeElement.style.left=e+n.PIXELS,this.el.nativeElement.style.top=i+n.PIXELS}getDOMElement(){return this.el}}return n.PIXELS="px",n})(),W2=(()=>{class n{constructor(e,i){this.googleChartsSettings=i,this.loadedPackages=[],this.loaded=!1,this.googleChartsSettings=Object.assign(Object.assign({},{googleChartsVersion:"50",language:e}),this.googleChartsSettings),this.googleScriptLoadingNotifier=new o.vpe,this.googleChartLoadingNotifier=new o.vpe,this.googleScriptIsLoading=!1,this.googleChartIsLoading=!1,this.loadGoogleChartsScriptPromise=new Promise((s,c)=>{if("undefined"!=typeof google&&google.charts)s();else if(this.googleScriptIsLoading)this.googleScriptLoadingNotifier.subscribe(d=>{d?s():c()});else{this.googleScriptIsLoading=!0;const d=document.createElement("script");d.type="text/javascript",d.src="https://www.gstatic.com/charts/loader.js",d.async=!0,d.defer=!0,d.onload=()=>{this.googleScriptIsLoading=!1,this.googleScriptLoadingNotifier.emit(!0),s()},d.onerror=()=>{this.googleScriptIsLoading=!1,this.googleScriptLoadingNotifier.emit(!1),c()},document.getElementsByTagName("head")[0].appendChild(d)}})}load(e){return(0,zO.mG)(this,void 0,void 0,function*(){yield this.loadGoogleChartsScriptPromise,yield new Promise(i=>{this.googleChartIsLoading?this.googleChartLoadingNotifier.subscribe(()=>{this.doLoad(i,e)}):this.doLoad(i,e)})})}doLoad(e,i){if(!(i=Object.assign(Object.assign({},this.googleChartsSettings),i)).packages&&this.loaded)return void e();if(i.packages){let s=i.packages.filter(c=>this.loadedPackages.indexOf(c)<0);if(0==s.length&&this.loaded)return void e();i.packages=s}const r=i;r.callback=()=>{this.googleChartIsLoading=!1,void 0!==r.packages&&(this.loadedPackages=this.loadedPackages.concat(r.packages)),this.loaded=!0,this.googleChartLoadingNotifier.emit(),e()},this.googleChartIsLoading=!0,google.charts.load(i.googleChartsVersion,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.soG),o.LFG("googleChartsSettings",8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var FC=(()=>(function(n){n.AnnotationChart="AnnotationChart",n.AreaChart="AreaChart",n.BarChart="BarChart",n.BubbleChart="BubbleChart",n.Calendar="Calendar",n.CandlestickChart="CandlestickChart",n.ColumnChart="ColumnChart",n.ComboChart="ComboChart",n.Gantt="Gantt",n.Gauge="Gauge",n.GeoChart="GeoChart",n.Histogram="Histogram",n.LineChart="LineChart",n.Map="Map",n.OrgChart="OrgChart",n.PieChart="PieChart",n.Sankey="Sankey",n.ScatterChart="ScatterChart",n.SteppedAreaChart="SteppedAreaChart",n.Table="Table",n.Timeline="Timeline",n.TreeMap="TreeMap",n.VegaChart="VegaChart",n.WordTree="WordTree"}(FC||(FC={})),FC))();let B4=(()=>{class n{constructor(e,i){this.el=e,this.loaderService=i,this.selectListener=()=>{const r={message:"select",row:null,column:null,selectedRowValues:[],selectedRowFormattedValues:[],columnLabel:""},s=this.wrapper.visualization.getSelection(),c=s[s.length-1];if(!c)return r.message="deselect",r;const d=c;if(null!=c.row){r.row=d.row;const p=[],v=[],E=this.wrapper.getDataTable(),S=E.getNumberOfColumns();for(let N=0;N<S;N++)p.push(E.getValue(d.row,N)),v.push(E.getFormattedValue(d.row,N));r.selectedRowValues=p,r.selectedRowFormattedValues=v}return null!=d.column&&(r.column=d.column,r.columnLabel=this.getColumnLabelAtPosition(d)),c.name&&(r.columnLabel=c.name),r},this.chartSelect=new o.vpe,this.chartSelectOneTime=new o.vpe,this.chartReady=new o.vpe,this.chartReadyOneTime=new o.vpe,this.chartError=new o.vpe,this.chartErrorOneTime=new o.vpe,this.mouseOver=new o.vpe,this.mouseOverOneTime=new o.vpe,this.mouseOut=new o.vpe,this.mouseOutOneTime=new o.vpe,this.regionClick=new o.vpe,this.regionClickOneTime=new o.vpe}ngOnInit(){this.HTMLel=this.el.nativeElement.querySelector("div"),Object.isExtensible(this.data)&&(this.data.component=this),this.options=this.data.options,this.init().then(()=>{this.draw()})}init(){return(0,zO.mG)(this,void 0,void 0,function*(){yield this.loaderService.load(),this.recreateWrapper()})}recreateWrapper(){if(void 0===this.wrapper||this.wrapper.getChartType()!==this.data.chartType){this.dataTable=new F4(this.data),this.dataTable.dataTableChanged.subscribe(i=>{this._draw()});let e=this.data;if(this.data.firstRowIsData&&(e=Object.assign(e,this.data),e.dataTable=this.dataTable.getDataTable()),this.wrapper=new google.visualization.ChartWrapper(e),this.registerChartWrapperEvents(),void 0===e.dataTable&&void 0===e.dataSourceUrl)try{this.wrapper.draw(this.HTMLel)}catch(i){}}}_draw(){return(0,zO.mG)(this,void 0,void 0,function*(){const e=this.dataTable.getDataTable();void 0!==e&&(this.convertOptions(),this.recreateWrapper(),this.wrapper.setOptions(this.options),this.wrapper.setDataTable(e),this.wrapper.draw(this.HTMLel))})}getDataTable(){return this.dataTable}draw(e){void 0===e&&(e=this.data),this.options=e.options,this.dataTable.init(e)}getSelectorBySeriesType(e){return{bars:"bar#%s#%r",haxis:"hAxis#0#label",line:"point#%s#%r",legend:"legendentry#%s",area:"point#%s#%r"}[e]}getSeriesByColumn(e){let i=0;const r=this.wrapper.getDataTable();for(let s=e-1;s>=0;s--){const c=r.getColumnRole(s),d=r.getColumnType(s);("data"===c||"number"===d)&&i++}return i}getBoundingBoxForItem(e){let i={top:0,left:0,width:0,height:0};if(this.cli){const r=e.column,s=this.getSeriesByColumn(r),c=e.row;let d=this.options.seriesType;if(this.options.series&&this.options.series[s]&&this.options.series[s].type&&(d=this.options.series[s].type),d){let p=this.getSelectorBySeriesType(d);if(p){p=p.replace("%s",s+"").replace("%c",r+"").replace("%r",c+"");const v=this.cli.getBoundingBox(p);v&&(i=v)}}}return i}getValueAtPosition(e){return null==e.row?null:this.wrapper.getDataTable().getValue(e.row,e.column)}getColumnTypeAtPosition(e){return this.wrapper.getDataTable().getColumnType(e.column)||""}getColumnLabelAtPosition(e){return this.wrapper.getDataTable().getColumnLabel(e.column)||""}getHTMLTooltip(){const e=new o.SBq(this.el.nativeElement.querySelector(".google-visualization-tooltip"));return new L4(e)}parseMouseEvent(e){const i=this.wrapper.getChartType();let r=e.column;null==r&&(r="Timeline"===i?3===this.wrapper.getDataTable().getNumberOfColumns()?0:1:0);const c={row:e.row,column:r};return{position:e,boundingBox:this.getBoundingBoxForItem(c),value:this.getValueAtPosition(c),columnType:this.getColumnTypeAtPosition(c),columnLabel:this.getColumnLabelAtPosition(c)}}registerChartEvents(){const e=this.wrapper.getChart();this.cli=e.getChartLayoutInterface?e.getChartLayoutInterface():null,this.mouseOver.observers.length>0&&google.visualization.events.addListener(e,"onmouseover",i=>{const r=this.parseMouseEvent(i);r.tooltip=this.getHTMLTooltip(),this.mouseOver.emit(r)}),this.mouseOverOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"onmouseover",i=>{const r=this.parseMouseEvent(i);r.tooltip=this.getHTMLTooltip(),this.mouseOverOneTime.emit(r)}),this.mouseOut.observers.length>0&&google.visualization.events.addListener(e,"onmouseout",i=>{const r=this.parseMouseEvent(i);this.mouseOut.emit(r)}),this.mouseOutOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"onmouseout",i=>{const r=this.parseMouseEvent(i);this.mouseOutOneTime.emit(r)}),"GeoChart"===this.data.chartType&&(this.regionClick.observers.length>0&&google.visualization.events.addListener(e,"regionClick",i=>{this.regionClick.emit(i)}),this.regionClickOneTime.observers.length>0&&google.visualization.events.addOneTimeListener(e,"regionClick",i=>{this.regionClick.emit(i)}))}registerChartWrapperEvents(){google.visualization.events.addListener(this.wrapper,"ready",()=>{this.chartReady.emit({message:"Chart ready"})}),google.visualization.events.addOneTimeListener(this.wrapper,"ready",()=>{this.chartReadyOneTime.emit({message:"Chart ready (one time)"}),this.registerChartEvents()}),google.visualization.events.addListener(this.wrapper,"error",e=>{this.chartError.emit(e)}),google.visualization.events.addOneTimeListener(this.wrapper,"error",e=>{this.chartErrorOneTime.emit(e)}),this.addListener(this.wrapper,"select",this.selectListener,this.chartSelect),this.addOneTimeListener(this.wrapper,"select",this.selectListener,this.chartSelectOneTime)}addListener(e,i,r,s){google.visualization.events.addListener(e,i,()=>{s.emit(r())})}addOneTimeListener(e,i,r,s){google.visualization.events.addOneTimeListener(e,i,()=>{s.emit(r())})}convertOptions(){try{this.options=google.charts[this.data.chartType].convertOptions(this.options)}catch(e){return}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(W2))},n.\u0275cmp=o.Xpm({type:n,selectors:[["google-chart"]],inputs:{data:"data"},outputs:{chartReady:"chartReady",chartReadyOneTime:"chartReadyOneTime",chartError:"chartError",chartErrorOneTime:"chartErrorOneTime",chartSelect:"chartSelect",chartSelectOneTime:"chartSelectOneTime",mouseOver:"mouseOver",mouseOverOneTime:"mouseOverOneTime",mouseOut:"mouseOut",mouseOutOneTime:"mouseOutOneTime",regionClick:"regionClick",regionClickOneTime:"regionClickOneTime"},decls:1,vars:0,template:function(e,i){1&e&&o._UZ(0,"div")},encapsulation:2}),n})(),U4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[W2]}),n})(),hA=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://sep6-movies-cloud.lm.r.appspot.com"}getActors(e){return this.http.get(this.apiUrl+"/api/v1/actor/nameandbirth/"+e).pipe(Ro(1),Un(this.handleError))}getPeople(e){return this.http.get(this.apiUrl+"/api/v1/actor/search/"+e).pipe(Ro(1),Un(this.handleError))}getPersonById(e){return this.http.get(this.apiUrl+"/api/v1/actor/searchpersonbyid/"+e).pipe(Ro(1),Un(this.handleError))}getFullCreditId(e){return this.http.get(this.apiUrl+"/api/v1/actor/fullcredits/"+e).pipe(Ro(1),Un(this.handleError))}getPopularActors(){return this.http.get(this.apiUrl+"/api/v1/actor/people/popular").pipe(Ro(1),Un(this.handleError))}handleError(e){let i="";return i=e.error instanceof ErrorEvent?e.error.message:`errorstatus: ${e.status}. Errormessage: ${e.message}`,window.alert(i),_i(()=>i)}getStats(e){console.log("work");let r=[["hello","Career"],[e[0].original_title,e[0].vote_average]];for(let s=1;s<e.length;s++)r.push([e[s].original_title,e[s].vote_average]);return{chartType:FC.LineChart,dataTable:r,options:{title:"Career Development"}}}getStats2(e){console.log("STtATS");let r=e[0].median,s=[["Title","Score","Average"],[e[0].original_title,e[0].vote_average,r]];for(let c=1;c<e.length;c++)s.push([e[c].title,e[c].vote_average,r]);return{chartType:FC.LineChart,dataTable:s,options:{title:"Career Development"}}}getFullCreditCrew(e){return this.http.get(this.apiUrl+"/api/v1/actor/fullcredits/crew/"+e).pipe(Ro(1),Un(this.handleError))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const z2=["*"];let ol=(()=>{class n{}return n.STARTS_WITH="startsWith",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.ENDS_WITH="endsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.IN="in",n.LESS_THAN="lt",n.LESS_THAN_OR_EQUAL_TO="lte",n.GREATER_THAN="gt",n.GREATER_THAN_OR_EQUAL_TO="gte",n.BETWEEN="between",n.IS="is",n.IS_NOT="isNot",n.BEFORE="before",n.AFTER="after",n.DATE_IS="dateIs",n.DATE_IS_NOT="dateIsNot",n.DATE_BEFORE="dateBefore",n.DATE_AFTER="dateAfter",n})(),V4=(()=>{class n{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[ol.STARTS_WITH,ol.CONTAINS,ol.NOT_CONTAINS,ol.ENDS_WITH,ol.EQUALS,ol.NOT_EQUALS],numeric:[ol.EQUALS,ol.NOT_EQUALS,ol.LESS_THAN,ol.LESS_THAN_OR_EQUAL_TO,ol.GREATER_THAN,ol.GREATER_THAN_OR_EQUAL_TO],date:[ol.DATE_IS,ol.DATE_IS_NOT,ol.DATE_BEFORE,ol.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dateFormat:"mm/dd/yy",firstDayOfWeek:0,today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password",emptyMessage:"No results found",emptyFilterMessage:"No results found"},this.zIndex={modal:1100,overlay:1e3,menu:1e3,tooltip:1100},this.translationSource=new an.x,this.translationObserver=this.translationSource.asObservable()}getTranslation(e){return this.translation[e]}setTranslation(e){this.translation=Object.assign(Object.assign({},this.translation),e),this.translationSource.next(this.translation)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-header"]],ngContentSelectors:z2,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),j4=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-footer"]],ngContentSelectors:z2,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2}),n})(),q2=(()=>{class n{constructor(e){this.template=e}getType(){return this.name}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","pTemplate",""]],inputs:{type:"type",name:["pTemplate","name"]}}),n})(),qO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})(),Su=(()=>{class n{static addClass(e,i){e.classList?e.classList.add(i):e.className+=" "+i}static addMultipleClasses(e,i){if(e.classList){let r=i.trim().split(" ");for(let s=0;s<r.length;s++)e.classList.add(r[s])}else{let r=i.split(" ");for(let s=0;s<r.length;s++)e.className+=" "+r[s]}}static removeClass(e,i){e.classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")}static hasClass(e,i){return e.classList?e.classList.contains(i):new RegExp("(^| )"+i+"( |$)","gi").test(e.className)}static siblings(e){return Array.prototype.filter.call(e.parentNode.children,function(i){return i!==e})}static find(e,i){return Array.from(e.querySelectorAll(i))}static findSingle(e,i){return e?e.querySelector(i):null}static index(e){let i=e.parentNode.childNodes,r=0;for(var s=0;s<i.length;s++){if(i[s]==e)return r;1==i[s].nodeType&&r++}return-1}static indexWithinGroup(e,i){let r=e.parentNode?e.parentNode.childNodes:[],s=0;for(var c=0;c<r.length;c++){if(r[c]==e)return s;r[c].attributes&&r[c].attributes[i]&&1==r[c].nodeType&&s++}return-1}static relativePosition(e,i){let r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e);const s=i.offsetHeight,c=i.getBoundingClientRect(),d=this.getViewport();let p,v;c.top+s+r.height>d.height?(p=-1*r.height,e.style.transformOrigin="bottom",c.top+p<0&&(p=-1*c.top)):(p=s,e.style.transformOrigin="top"),v=r.width>d.width?-1*c.left:c.left+r.width>d.width?-1*(c.left+r.width-d.width):0,e.style.top=p+"px",e.style.left=v+"px"}static absolutePosition(e,i){let F,G,r=e.offsetParent?{width:e.offsetWidth,height:e.offsetHeight}:this.getHiddenElementDimensions(e),s=r.height,c=r.width,d=i.offsetHeight,p=i.offsetWidth,v=i.getBoundingClientRect(),E=this.getWindowScrollTop(),S=this.getWindowScrollLeft(),N=this.getViewport();v.top+d+s>N.height?(F=v.top+E-s,e.style.transformOrigin="bottom",F<0&&(F=E)):(F=d+v.top+E,e.style.transformOrigin="top"),G=v.left+c>N.width?Math.max(0,v.left+S+p-c):v.left+S,e.style.top=F+"px",e.style.left=G+"px"}static getParents(e,i=[]){return null===e.parentNode?i:this.getParents(e.parentNode,i.concat([e.parentNode]))}static getScrollableParents(e){let i=[];if(e){let r=this.getParents(e);const s=/(auto|scroll)/,c=d=>{let p=window.getComputedStyle(d,null);return s.test(p.getPropertyValue("overflow"))||s.test(p.getPropertyValue("overflowX"))||s.test(p.getPropertyValue("overflowY"))};for(let d of r){let p=1===d.nodeType&&d.dataset.scrollselectors;if(p){let v=p.split(",");for(let E of v){let S=this.findSingle(d,E);S&&c(S)&&i.push(S)}}9!==d.nodeType&&c(d)&&i.push(d)}}return i}static getHiddenElementOuterHeight(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetHeight;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementOuterWidth(e){e.style.visibility="hidden",e.style.display="block";let i=e.offsetWidth;return e.style.display="none",e.style.visibility="visible",i}static getHiddenElementDimensions(e){let i={};return e.style.visibility="hidden",e.style.display="block",i.width=e.offsetWidth,i.height=e.offsetHeight,e.style.display="none",e.style.visibility="visible",i}static scrollInView(e,i){let r=getComputedStyle(e).getPropertyValue("borderTopWidth"),s=r?parseFloat(r):0,c=getComputedStyle(e).getPropertyValue("paddingTop"),d=c?parseFloat(c):0,p=e.getBoundingClientRect(),E=i.getBoundingClientRect().top+document.body.scrollTop-(p.top+document.body.scrollTop)-s-d,S=e.scrollTop,N=e.clientHeight,F=this.getOuterHeight(i);E<0?e.scrollTop=S+E:E+F>N&&(e.scrollTop=S+E-N+F)}static fadeIn(e,i){e.style.opacity=0;let r=+new Date,s=0,c=function(){s=+e.style.opacity.replace(",",".")+((new Date).getTime()-r)/i,e.style.opacity=s,r=+new Date,+s<1&&(window.requestAnimationFrame&&requestAnimationFrame(c)||setTimeout(c,16))};c()}static fadeOut(e,i){var r=1,d=50/i;let p=setInterval(()=>{(r-=d)<=0&&(r=0,clearInterval(p)),e.style.opacity=r},50)}static getWindowScrollTop(){let e=document.documentElement;return(window.pageYOffset||e.scrollTop)-(e.clientTop||0)}static getWindowScrollLeft(){let e=document.documentElement;return(window.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}static matches(e,i){var r=Element.prototype;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(c){return-1!==[].indexOf.call(document.querySelectorAll(c),this)}).call(e,i)}static getOuterWidth(e,i){let r=e.offsetWidth;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginLeft)+parseFloat(s.marginRight)}return r}static getHorizontalPadding(e){let i=getComputedStyle(e);return parseFloat(i.paddingLeft)+parseFloat(i.paddingRight)}static getHorizontalMargin(e){let i=getComputedStyle(e);return parseFloat(i.marginLeft)+parseFloat(i.marginRight)}static innerWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i+=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static width(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight),i}static getInnerHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i+=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom),i}static getOuterHeight(e,i){let r=e.offsetHeight;if(i){let s=getComputedStyle(e);r+=parseFloat(s.marginTop)+parseFloat(s.marginBottom)}return r}static getHeight(e){let i=e.offsetHeight,r=getComputedStyle(e);return i-=parseFloat(r.paddingTop)+parseFloat(r.paddingBottom)+parseFloat(r.borderTopWidth)+parseFloat(r.borderBottomWidth),i}static getWidth(e){let i=e.offsetWidth,r=getComputedStyle(e);return i-=parseFloat(r.paddingLeft)+parseFloat(r.paddingRight)+parseFloat(r.borderLeftWidth)+parseFloat(r.borderRightWidth),i}static getViewport(){let e=window,i=document,r=i.documentElement,s=i.getElementsByTagName("body")[0];return{width:e.innerWidth||r.clientWidth||s.clientWidth,height:e.innerHeight||r.clientHeight||s.clientHeight}}static getOffset(e){var i=e.getBoundingClientRect();return{top:i.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:i.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0)}}static replaceElementWith(e,i){let r=e.parentNode;if(!r)throw"Can't replace element";return r.replaceChild(i,e)}static getUserAgent(){return navigator.userAgent}static isIE(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||(e.indexOf("Trident/")>0?(e.indexOf("rv:"),!0):e.indexOf("Edge/")>0)}static isIOS(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}static isAndroid(){return/(android)/i.test(navigator.userAgent)}static isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0}static appendChild(e,i){if(this.isElement(i))i.appendChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot append "+i+" to "+e;i.el.nativeElement.appendChild(e)}}static removeChild(e,i){if(this.isElement(i))i.removeChild(e);else{if(!i.el||!i.el.nativeElement)throw"Cannot remove "+e+" from "+i;i.el.nativeElement.removeChild(e)}}static removeElement(e){"remove"in Element.prototype?e.remove():e.parentNode.removeChild(e)}static isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}static calculateScrollbarWidth(e){if(e){let i=getComputedStyle(e);return e.offsetWidth-e.clientWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.borderRightWidth)}{if(null!==this.calculatedScrollbarWidth)return this.calculatedScrollbarWidth;let i=document.createElement("div");i.className="p-scrollbar-measure",document.body.appendChild(i);let r=i.offsetWidth-i.clientWidth;return document.body.removeChild(i),this.calculatedScrollbarWidth=r,r}}static calculateScrollbarHeight(){if(null!==this.calculatedScrollbarHeight)return this.calculatedScrollbarHeight;let e=document.createElement("div");e.className="p-scrollbar-measure",document.body.appendChild(e);let i=e.offsetHeight-e.clientHeight;return document.body.removeChild(e),this.calculatedScrollbarWidth=i,i}static invokeElementMethod(e,i,r){e[i].apply(e,r)}static clearSelection(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().rangeCount>0&&window.getSelection().getRangeAt(0).getClientRects().length>0&&window.getSelection().removeAllRanges();else if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(e){}}static getBrowser(){if(!this.browser){let e=this.resolveUserAgent();this.browser={},e.browser&&(this.browser[e.browser]=!0,this.browser.version=e.version),this.browser.chrome?this.browser.webkit=!0:this.browser.webkit&&(this.browser.safari=!0)}return this.browser}static resolveUserAgent(){let e=navigator.userAgent.toLowerCase(),i=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:i[1]||"",version:i[2]||"0"}}static isInteger(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}static isHidden(e){return null===e.offsetParent}static getFocusableElements(e){let i=n.find(e,'button:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [href][clientHeight][clientWidth]:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                input:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), select:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                textarea:not([tabindex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]), [tabIndex]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]),\n                [contenteditable]:not([tabIndex = "-1"]):not([disabled]):not([style*="display:none"]):not([hidden]):not(.p-disabled)'),r=[];for(let s of i)"none"!=getComputedStyle(s).display&&"hidden"!=getComputedStyle(s).visibility&&r.push(s);return r}static generateZIndex(){return this.zindex=this.zindex||999,++this.zindex}}return n.zindex=1e3,n.calculatedScrollbarWidth=null,n.calculatedScrollbarHeight=null,n})(),G4=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.config=r}ngAfterViewInit(){this.config&&this.config.ripple&&this.zone.runOutsideAngular(()=>{this.create(),this.mouseDownListener=this.onMouseDown.bind(this),this.el.nativeElement.addEventListener("mousedown",this.mouseDownListener)})}onMouseDown(e){let i=this.getInk();if(!i||"none"===getComputedStyle(i,null).display)return;if(Su.removeClass(i,"p-ink-active"),!Su.getHeight(i)&&!Su.getWidth(i)){let d=Math.max(Su.getOuterWidth(this.el.nativeElement),Su.getOuterHeight(this.el.nativeElement));i.style.height=d+"px",i.style.width=d+"px"}let r=Su.getOffset(this.el.nativeElement),s=e.pageX-r.left+document.body.scrollTop-Su.getWidth(i)/2,c=e.pageY-r.top+document.body.scrollLeft-Su.getHeight(i)/2;i.style.top=c+"px",i.style.left=s+"px",Su.addClass(i,"p-ink-active")}getInk(){for(let e=0;e<this.el.nativeElement.children.length;e++)if(-1!==this.el.nativeElement.children[e].className.indexOf("p-ink"))return this.el.nativeElement.children[e];return null}resetInk(){let e=this.getInk();e&&Su.removeClass(e,"p-ink-active")}onAnimationEnd(e){Su.removeClass(e.currentTarget,"p-ink-active")}create(){let e=document.createElement("span");e.className="p-ink",this.el.nativeElement.appendChild(e),this.animationListener=this.onAnimationEnd.bind(this),e.addEventListener("animationend",this.animationListener)}remove(){let e=this.getInk();e&&(this.el.nativeElement.removeEventListener("mousedown",this.mouseDownListener),e.removeEventListener("animationend",this.animationListener),Su.removeElement(e))}ngOnDestroy(){this.config&&this.config.ripple&&this.remove()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(V4,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","pRipple",""]],hostAttrs:[1,"p-ripple","p-element"]}),n})(),ZO=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn]]}),n})();var Z2=0;!function W4(){let n=[];const r=s=>s&&parseInt(s.style.zIndex,10)||0}();const z4=["itemsContainer"];function q4(n,t){1&n&&o.GkF(0)}function Z4(n,t){if(1&n&&(o.TgZ(0,"div",11),o.Hsn(1),o.YNc(2,q4,1,0,"ng-container",12),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngTemplateOutlet",e.headerTemplate)}}const Y4=function(n){return{"p-carousel-prev p-link":!0,"p-disabled":n}},K4=function(n,t){return{"p-carousel-prev-icon pi":!0,"pi-chevron-left":n,"pi-chevron-up":t}};function Q4(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(r){return o.CHM(e),o.oxw().navBackward(r)}),o._UZ(1,"span",2),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(3,Y4,e.isBackwardNavDisabled()))("disabled",e.isBackwardNavDisabled()),o.xp6(1),o.Q6J("ngClass",o.WLB(5,K4,!e.isVertical(),e.isVertical()))}}function J4(n,t){1&n&&o.GkF(0)}const Y2=function(n,t,e){return{"p-carousel-item p-carousel-item-cloned":!0,"p-carousel-item-active":n,"p-carousel-item-start":t,"p-carousel-item-end":e}},YO=function(n){return{$implicit:n}};function X4(n,t){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,J4,1,0,"ng-container",14),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("ngClass",o.kEZ(3,Y2,-1*r.totalShiftedItems===r.value.length,0===i,r.clonedItemsForStarting.length-1===i)),o.xp6(1),o.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",o.VKq(7,YO,e))}}function e5(n,t){1&n&&o.GkF(0)}const t5=function(n,t,e){return{"p-carousel-item":!0,"p-carousel-item-active":n,"p-carousel-item-start":t,"p-carousel-item-end":e}};function n5(n,t){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,e5,1,0,"ng-container",14),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("ngClass",o.kEZ(3,t5,r.firstIndex()<=i&&r.lastIndex()>=i,r.firstIndex()===i,r.lastIndex()===i)),o.xp6(1),o.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",o.VKq(7,YO,e))}}function r5(n,t){1&n&&o.GkF(0)}function s5(n,t){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,r5,1,0,"ng-container",14),o.qZA()),2&n){const e=t.$implicit,i=t.index,r=o.oxw();o.Q6J("ngClass",o.kEZ(3,Y2,-1*r.totalShiftedItems===r.numVisible,0===i,r.clonedItemsForFinishing.length-1===i)),o.xp6(1),o.Q6J("ngTemplateOutlet",r.itemTemplate)("ngTemplateOutletContext",o.VKq(7,YO,e))}}const o5=function(n){return{"p-carousel-next p-link":!0,"p-disabled":n}},a5=function(n,t){return{"p-carousel-prev-icon pi":!0,"pi-chevron-right":n,"pi-chevron-down":t}};function l5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",13),o.NdJ("click",function(r){return o.CHM(e),o.oxw().navForward(r)}),o._UZ(1,"span",2),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("ngClass",o.VKq(3,o5,e.isForwardNavDisabled()))("disabled",e.isForwardNavDisabled()),o.xp6(1),o.Q6J("ngClass",o.WLB(5,a5,!e.isVertical(),e.isVertical()))}}const c5=function(n){return{"p-carousel-indicator":!0,"p-highlight":n}};function u5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",2)(1,"button",15),o.NdJ("click",function(r){const c=o.CHM(e).index;return o.oxw(2).onDotClick(r,c)}),o.qZA()()}if(2&n){const e=t.index,i=o.oxw(2);o.Q6J("ngClass",o.VKq(5,c5,i._page===e)),o.xp6(1),o.Tol(i.indicatorStyleClass),o.Q6J("ngClass","p-link")("ngStyle",i.indicatorStyle)}}function d5(n,t){if(1&n&&(o.TgZ(0,"ul",0),o.YNc(1,u5,2,7,"li",8),o.qZA()),2&n){const e=o.oxw();o.Tol(e.indicatorsContentClass),o.Q6J("ngClass","p-carousel-indicators p-reset")("ngStyle",e.indicatorsContentStyle),o.xp6(1),o.Q6J("ngForOf",e.totalDotsArray())}}function h5(n,t){1&n&&o.GkF(0)}function f5(n,t){if(1&n&&(o.TgZ(0,"div",16),o.Hsn(1,1),o.YNc(2,h5,1,0,"ng-container",12),o.qZA()),2&n){const e=o.oxw();o.xp6(2),o.Q6J("ngTemplateOutlet",e.footerTemplate)}}const p5=[[["p-header"]],[["p-footer"]]],g5=function(n,t){return{"p-carousel p-component":!0,"p-carousel-vertical":n,"p-carousel-horizontal":t}},m5=function(n){return{height:n}},_5=["p-header","p-footer"];let v5=(()=>{class n{constructor(e,i,r){this.el=e,this.zone=i,this.cd=r,this.orientation="horizontal",this.verticalViewPortHeight="300px",this.contentClass="",this.indicatorsContentClass="",this.indicatorStyleClass="",this.circular=!1,this.showIndicators=!0,this.showNavigators=!0,this.autoplayInterval=0,this.onPage=new o.vpe,this._numVisible=1,this._numScroll=1,this._oldNumScroll=0,this.prevState={numScroll:0,numVisible:0,value:[]},this.defaultNumScroll=1,this.defaultNumVisible=1,this._page=0,this.isRemainingItemsAdded=!1,this.remainingItems=0,this.swipeThreshold=20,this.totalShiftedItems=this.page*this.numScroll*-1}get page(){return this._page}set page(e){this.isCreated&&e!==this._page&&(this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e>this._page&&e<=this.totalDots()-1?this.step(-1,e):e<this._page&&this.step(1,e)),this._page=e}get numVisible(){return this._numVisible}set numVisible(e){this._numVisible=e}get numScroll(){return this._numVisible}set numScroll(e){this._numScroll=e}get value(){return this._value}set value(e){this._value=e}ngOnChanges(e){e.value&&this.circular&&this._value&&this.setCloneItems(),this.isCreated&&(e.numVisible&&(this.responsiveOptions&&(this.defaultNumVisible=this.numVisible),this.isCircular()&&this.setCloneItems(),this.createStyle(),this.calculatePosition()),e.numScroll&&this.responsiveOptions&&(this.defaultNumScroll=this.numScroll))}ngAfterContentInit(){this.id=function $4(){return"pr_id_"+ ++Z2}(),this.allowAutoplay=!!this.autoplayInterval,this.circular&&this.setCloneItems(),this.responsiveOptions&&(this.defaultNumScroll=this._numScroll,this.defaultNumVisible=this._numVisible),this.createStyle(),this.calculatePosition(),this.responsiveOptions&&this.bindDocumentListeners(),this.templates.forEach(e=>{switch(e.getType()){case"item":default:this.itemTemplate=e.template;break;case"header":this.headerTemplate=e.template;break;case"footer":this.footerTemplate=e.template}})}ngAfterContentChecked(){const e=this.isCircular();let i=this.totalShiftedItems;if(this.value&&this.itemsContainer&&(this.prevState.numScroll!==this._numScroll||this.prevState.numVisible!==this._numVisible||this.prevState.value.length!==this.value.length)){this.autoplayInterval&&this.stopAutoplay(),this.remainingItems=(this.value.length-this._numVisible)%this._numScroll;let r=this._page;0!==this.totalDots()&&r>=this.totalDots()&&(r=this.totalDots()-1,this._page=r,this.onPage.emit({page:this.page})),i=r*this._numScroll*-1,e&&(i-=this._numVisible),r===this.totalDots()-1&&this.remainingItems>0?(i+=-1*this.remainingItems+this._numScroll,this.isRemainingItemsAdded=!0):this.isRemainingItemsAdded=!1,i!==this.totalShiftedItems&&(this.totalShiftedItems=i),this._oldNumScroll=this._numScroll,this.prevState.numScroll=this._numScroll,this.prevState.numVisible=this._numVisible,this.prevState.value=[...this._value],this.totalDots()>0&&this.itemsContainer.nativeElement&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${i*(100/this._numVisible)}%, 0)`:`translate3d(${i*(100/this._numVisible)}%, 0, 0)`),this.isCreated=!0,this.autoplayInterval&&this.isAutoplay()&&this.startAutoplay()}e&&(0===this.page?i=-1*this._numVisible:0===i&&(i=-1*this.value.length,this.remainingItems>0&&(this.isRemainingItemsAdded=!0)),i!==this.totalShiftedItems&&(this.totalShiftedItems=i))}createStyle(){this.carouselStyle||(this.carouselStyle=document.createElement("style"),this.carouselStyle.type="text/css",document.body.appendChild(this.carouselStyle));let e=`\n            #${this.id} .p-carousel-item {\n\t\t\t\tflex: 1 0 ${100/this.numVisible}%\n\t\t\t}\n        `;if(this.responsiveOptions){this.responsiveOptions.sort((i,r)=>{const s=i.breakpoint,c=r.breakpoint;let d=null;return d=null==s&&null!=c?-1:null!=s&&null==c?1:null==s&&null==c?0:"string"==typeof s&&"string"==typeof c?s.localeCompare(c,void 0,{numeric:!0}):s<c?-1:s>c?1:0,-1*d});for(let i=0;i<this.responsiveOptions.length;i++){let r=this.responsiveOptions[i];e+=`\n                    @media screen and (max-width: ${r.breakpoint}) {\n                        #${this.id} .p-carousel-item {\n                            flex: 1 0 ${100/r.numVisible}%\n                        }\n                    }\n                `}}this.carouselStyle.innerHTML=e}calculatePosition(){if(this.responsiveOptions){let e=window.innerWidth,i={numVisible:this.defaultNumVisible,numScroll:this.defaultNumScroll};for(let r=0;r<this.responsiveOptions.length;r++){let s=this.responsiveOptions[r];parseInt(s.breakpoint,10)>=e&&(i=s)}if(this._numScroll!==i.numScroll){let r=this._page;r=Math.floor(r*this._numScroll/i.numScroll);let s=i.numScroll*this.page*-1;this.isCircular()&&(s-=i.numVisible),this.totalShiftedItems=s,this._numScroll=i.numScroll,this._page=r,this.onPage.emit({page:this.page})}this._numVisible!==i.numVisible&&(this._numVisible=i.numVisible,this.setCloneItems()),this.cd.markForCheck()}}setCloneItems(){this.clonedItemsForStarting=[],this.clonedItemsForFinishing=[],this.isCircular()&&(this.clonedItemsForStarting.push(...this.value.slice(-1*this._numVisible)),this.clonedItemsForFinishing.push(...this.value.slice(0,this._numVisible)))}firstIndex(){return this.isCircular()?-1*(this.totalShiftedItems+this.numVisible):-1*this.totalShiftedItems}lastIndex(){return this.firstIndex()+this.numVisible-1}totalDots(){return this.value?Math.ceil((this.value.length-this._numVisible)/this._numScroll)+1:0}totalDotsArray(){const e=this.totalDots();return e<=0?[]:Array(e).fill(0)}isVertical(){return"vertical"===this.orientation}isCircular(){return this.circular&&this.value&&this.value.length>=this.numVisible}isAutoplay(){return this.autoplayInterval&&this.allowAutoplay}isForwardNavDisabled(){return this.isEmpty()||this._page>=this.totalDots()-1&&!this.isCircular()}isBackwardNavDisabled(){return this.isEmpty()||this._page<=0&&!this.isCircular()}isEmpty(){return!this.value||0===this.value.length}navForward(e,i){(this.isCircular()||this._page<this.totalDots()-1)&&this.step(-1,i),this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e&&e.cancelable&&e.preventDefault()}navBackward(e,i){(this.isCircular()||0!==this._page)&&this.step(1,i),this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),e&&e.cancelable&&e.preventDefault()}onDotClick(e,i){let r=this._page;this.autoplayInterval&&(this.stopAutoplay(),this.allowAutoplay=!1),i>r?this.navForward(e,i):i<r&&this.navBackward(e,i)}step(e,i){let r=this.totalShiftedItems;const s=this.isCircular();null!=i?(r=this._numScroll*i*-1,s&&(r-=this._numVisible),this.isRemainingItemsAdded=!1):(r+=this._numScroll*e,this.isRemainingItemsAdded&&(r+=this.remainingItems-this._numScroll*e,this.isRemainingItemsAdded=!1),i=Math.abs(Math.floor((s?r+this._numVisible:r)/this._numScroll))),s&&this.page===this.totalDots()-1&&-1===e?(r=-1*(this.value.length+this._numVisible),i=0):s&&0===this.page&&1===e?(r=0,i=this.totalDots()-1):i===this.totalDots()-1&&this.remainingItems>0&&(r+=-1*this.remainingItems-this._numScroll*e,this.isRemainingItemsAdded=!0),this.itemsContainer&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${r*(100/this._numVisible)}%, 0)`:`translate3d(${r*(100/this._numVisible)}%, 0, 0)`,this.itemsContainer.nativeElement.style.transition="transform 500ms ease 0s"),this.totalShiftedItems=r,this._page=i,this.onPage.emit({page:this.page})}startAutoplay(){this.interval=setInterval(()=>{this.totalDots()>0&&(this.page===this.totalDots()-1?this.step(-1,0):this.step(-1,this.page+1))},this.autoplayInterval)}stopAutoplay(){this.interval&&clearInterval(this.interval)}onTransitionEnd(){this.itemsContainer&&(this.itemsContainer.nativeElement.style.transition="",(0===this.page||this.page===this.totalDots()-1)&&this.isCircular()&&(this.itemsContainer.nativeElement.style.transform=this.isVertical()?`translate3d(0, ${this.totalShiftedItems*(100/this._numVisible)}%, 0)`:`translate3d(${this.totalShiftedItems*(100/this._numVisible)}%, 0, 0)`))}onTouchStart(e){let i=e.changedTouches[0];this.startPos={x:i.pageX,y:i.pageY}}onTouchMove(e){e.cancelable&&e.preventDefault()}onTouchEnd(e){let i=e.changedTouches[0];this.isVertical()?this.changePageOnTouch(e,i.pageY-this.startPos.y):this.changePageOnTouch(e,i.pageX-this.startPos.x)}changePageOnTouch(e,i){Math.abs(i)>this.swipeThreshold&&(i<0?this.navForward(e):this.navBackward(e))}bindDocumentListeners(){this.documentResizeListener||(this.documentResizeListener=e=>{this.calculatePosition()},window.addEventListener("resize",this.documentResizeListener))}unbindDocumentListeners(){this.documentResizeListener&&(window.removeEventListener("resize",this.documentResizeListener),this.documentResizeListener=null)}ngOnDestroy(){this.responsiveOptions&&this.unbindDocumentListeners(),this.autoplayInterval&&this.stopAutoplay()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["p-carousel"]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,H4,5),o.Suo(r,j4,5),o.Suo(r,q2,4)),2&e){let s;o.iGM(s=o.CRH())&&(i.headerFacet=s.first),o.iGM(s=o.CRH())&&(i.footerFacet=s.first),o.iGM(s=o.CRH())&&(i.templates=s)}},viewQuery:function(e,i){if(1&e&&o.Gf(z4,5),2&e){let r;o.iGM(r=o.CRH())&&(i.itemsContainer=r.first)}},hostAttrs:[1,"p-element"],inputs:{page:"page",numVisible:"numVisible",numScroll:"numScroll",responsiveOptions:"responsiveOptions",orientation:"orientation",verticalViewPortHeight:"verticalViewPortHeight",contentClass:"contentClass",indicatorsContentClass:"indicatorsContentClass",indicatorsContentStyle:"indicatorsContentStyle",indicatorStyleClass:"indicatorStyleClass",indicatorStyle:"indicatorStyle",value:"value",circular:"circular",showIndicators:"showIndicators",showNavigators:"showNavigators",autoplayInterval:"autoplayInterval",style:"style",styleClass:"styleClass"},outputs:{onPage:"onPage"},features:[o.TTD],ngContentSelectors:_5,decls:14,vars:22,consts:[[3,"ngClass","ngStyle"],["class","p-carousel-header",4,"ngIf"],[3,"ngClass"],[1,"p-carousel-container"],["type","button","pRipple","",3,"ngClass","disabled","click",4,"ngIf"],[1,"p-carousel-items-content",3,"ngStyle"],[1,"p-carousel-items-container",3,"transitionend","touchend","touchstart","touchmove"],["itemsContainer",""],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass","class","ngStyle",4,"ngIf"],["class","p-carousel-footer",4,"ngIf"],[1,"p-carousel-header"],[4,"ngTemplateOutlet"],["type","button","pRipple","",3,"ngClass","disabled","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",3,"ngClass","ngStyle","click"],[1,"p-carousel-footer"]],template:function(e,i){1&e&&(o.F$t(p5),o.TgZ(0,"div",0),o.YNc(1,Z4,3,1,"div",1),o.TgZ(2,"div",2)(3,"div",3),o.YNc(4,Q4,2,8,"button",4),o.TgZ(5,"div",5)(6,"div",6,7),o.NdJ("transitionend",function(){return i.onTransitionEnd()})("touchend",function(s){return i.onTouchEnd(s)})("touchstart",function(s){return i.onTouchStart(s)})("touchmove",function(s){return i.onTouchMove(s)}),o.YNc(8,X4,2,9,"div",8),o.YNc(9,n5,2,9,"div",8),o.YNc(10,s5,2,9,"div",8),o.qZA()(),o.YNc(11,l5,2,8,"button",4),o.qZA(),o.YNc(12,d5,2,5,"ul",9),o.qZA(),o.YNc(13,f5,3,1,"div",10),o.qZA()),2&e&&(o.Tol(i.styleClass),o.Q6J("ngClass",o.WLB(17,g5,i.isVertical(),!i.isVertical()))("ngStyle",i.style),o.uIk("id",i.id),o.xp6(1),o.Q6J("ngIf",i.headerFacet||i.headerTemplate),o.xp6(1),o.Tol(i.contentClass),o.Q6J("ngClass","p-carousel-content"),o.xp6(2),o.Q6J("ngIf",i.showNavigators),o.xp6(1),o.Q6J("ngStyle",o.VKq(20,m5,i.isVertical()?i.verticalViewPortHeight:"auto")),o.xp6(3),o.Q6J("ngForOf",i.clonedItemsForStarting),o.xp6(1),o.Q6J("ngForOf",i.value),o.xp6(1),o.Q6J("ngForOf",i.clonedItemsForFinishing),o.xp6(1),o.Q6J("ngIf",i.showNavigators),o.xp6(1),o.Q6J("ngIf",i.showIndicators),o.xp6(1),o.Q6J("ngIf",i.footerFacet||i.footerTemplate))},directives:[ul,Eh,si,ua,G4,ri],styles:[".p-carousel{display:flex;flex-direction:column}.p-carousel-content{display:flex;flex-direction:column;overflow:auto}.p-carousel-prev,.p-carousel-next{align-self:center;flex-grow:0;flex-shrink:0;display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative}.p-carousel-container{display:flex;flex-direction:row}.p-carousel-items-content{overflow:hidden;width:100%}.p-carousel-items-container{display:flex;flex-direction:row}.p-carousel-indicators{display:flex;flex-direction:row;justify-content:center;flex-wrap:wrap}.p-carousel-indicator>button{display:flex;align-items:center;justify-content:center}.p-carousel-vertical .p-carousel-container{flex-direction:column}.p-carousel-vertical .p-carousel-items-container{flex-direction:column;height:100%}.p-items-hidden .p-carousel-item{visibility:hidden}.p-items-hidden .p-carousel-item.p-carousel-item-active{visibility:visible}\n"],encapsulation:2,changeDetection:0}),n})(),y5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,qO,ZO],Wn,qO]}),n})();function b5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",5),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).SelectMovie(s)}),o._UZ(1,"img",6),o.TgZ(2,"div",7)(3,"h5",8),o._uU(4),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(1),o.s9C("src",e.poster_path,o.LSH),o.xp6(3),o.Oqu(e.original_title)}}function C5(n,t){if(1&n&&(o.TgZ(0,"div")(1,"h1"),o._uU(2),o.qZA(),o.TgZ(3,"div",1)(4,"div",2)(5,"p-carousel",3),o.YNc(6,b5,5,2,"ng-template",4),o.qZA()()()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.headline),o.xp6(3),o.Q6J("value",e.movieList)("numVisible",5)("numScroll",1)("circular",!0)("autoplayInterval",0)("responsiveOptions",e.responsiveOptions)}}function w5(n,t){if(1&n&&(o.TgZ(0,"div",9),o._UZ(1,"img",6),o.TgZ(2,"div",7)(3,"h5",8),o._uU(4),o.qZA()()()),2&n){const e=t.$implicit;o.xp6(1),o.s9C("src",e.poster_path,o.LSH),o.xp6(3),o.Oqu(e.original_name)}}function E5(n,t){if(1&n&&(o.TgZ(0,"div")(1,"h1"),o._uU(2),o.qZA(),o.TgZ(3,"div",1)(4,"div",2)(5,"p-carousel",3),o.YNc(6,w5,5,2,"ng-template",4),o.qZA()()()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.headline),o.xp6(3),o.Q6J("value",e.seriesList)("numVisible",5)("numScroll",1)("circular",!0)("autoplayInterval",0)("responsiveOptions",e.responsiveOptions)}}function T5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",5),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).SelectActor(s)}),o._UZ(1,"img",6),o.TgZ(2,"div",7)(3,"h5",8),o._uU(4),o.qZA()()()}if(2&n){const e=t.$implicit;o.xp6(1),o.s9C("src",e.profile_path,o.LSH),o.xp6(3),o.Oqu(e.name)}}function D5(n,t){if(1&n&&(o.TgZ(0,"div")(1,"h1"),o._uU(2),o.qZA(),o.TgZ(3,"div",1)(4,"div",2)(5,"p-carousel",3),o.YNc(6,T5,5,2,"ng-template",4),o.qZA()()()()),2&n){const e=o.oxw();o.xp6(2),o.Oqu(e.headline),o.xp6(3),o.Q6J("value",e.actorList)("numVisible",5)("numScroll",1)("circular",!0)("autoplayInterval",0)("responsiveOptions",e.responsiveOptions)}}let S5=(()=>{class n{constructor(e,i,r){this.service=e,this.actorService=i,this.router=r,this.movie=!1,this.series=!1,this.actors=!1,this.responsiveOptions=[{breakpoint:"1024px",numVisible:3,numScroll:3},{breakpoint:"768px",numVisible:2,numScroll:2},{breakpoint:"560px",numVisible:1,numScroll:1}]}ngOnInit(){if("popular"==this.direction&&(this.movie=!0,this.headline="Best Ranked Movies",this.service.getMostPopularMovies().subscribe(e=>{this.root=e,this.movieList=e.results;for(let i=0;i<this.movieList.length;i++)this.movieList[i].poster_path="https://image.tmdb.org/t/p/original/"+this.movieList[i].poster_path})),"upcomming"==this.direction&&(this.movie=!0,this.headline="Upcomming Movies",this.service.getUpcommingMovies().subscribe(e=>{this.root=e,this.movieList=e.results;for(let i=0;i<this.movieList.length;i++)this.movieList[i].poster_path="https://image.tmdb.org/t/p/original/"+this.movieList[i].poster_path})),"theaters"==this.direction&&(this.movie=!0,this.headline="In Theaters Now",this.service.getUpcommingMovies().subscribe(e=>{this.root=e,this.movieList=e.results})),"series"==this.direction&&(this.series=!0,this.headline="Most Popular Series",this.service.getMostPopularSeries().subscribe(e=>{this.rootSeries=e,this.seriesList=e.results;for(let i=0;i<this.seriesList.length;i++)this.seriesList[i].poster_path="https://image.tmdb.org/t/p/original/"+this.seriesList[i].poster_path})),this.direction.includes("knownfor")){this.movie=!0,this.headline="Has had a role in following movies";let i,e=this.direction.split(",")[1];this.actorService.getPersonById(e).subscribe(r=>{i=r,"Directing"==i.known_for_department?this.actorService.getFullCreditCrew(e).subscribe(s=>{this.movieList=s;for(let c=0;c<this.movieList.length;c++)this.movieList[c].poster_path="https://image.tmdb.org/t/p/original/"+this.movieList[c].poster_path}):"Acting"==i.known_for_department&&this.actorService.getFullCreditId(e).subscribe(s=>{this.movieList=s;for(let c=0;c<this.movieList.length;c++)this.movieList[c].poster_path="https://image.tmdb.org/t/p/original/"+this.movieList[c].poster_path})})}this.direction.includes("popular/actors")&&(this.actors=!0,this.headline="Popular Actors",this.actorService.getPopularActors().subscribe(e=>{this.actorList=e;for(let i=0;i<this.movieList.length;i++)this.actorList[i].profile_path="https://image.tmdb.org/t/p/original/"+this.movieList[i].poster_path}))}SelectMovie(e){this.router.navigate(["/movie",e.imdb_id])}SelectActor(e){this.router.navigate(["/Person",e.id])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hD),o.Y36(hA),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-carousel-image"]],inputs:{direction:"direction"},decls:3,vars:3,consts:[[4,"ngIf"],[1,"content-section","col-md-6"],[1,"card"],[3,"value","numVisible","numScroll","circular","autoplayInterval","responsiveOptions"],["pTemplate","item"],[1,"item","card",3,"click"],["alt","...",1,"card-img-top",2,"max-height","300px","margin","0 auto",3,"src"],[1,"card-body"],[1,"card-title",2,"color","black"],[1,"item","card"]],template:function(e,i){1&e&&(o.YNc(0,C5,7,7,"div",0),o.YNc(1,E5,7,7,"div",0),o.YNc(2,D5,7,7,"div",0)),2&e&&(o.Q6J("ngIf",i.movie),o.xp6(1),o.Q6J("ngIf",i.series),o.xp6(1),o.Q6J("ngIf",i.actors))},directives:[si,v5,q2],styles:[""]}),n})(),I5=(()=>{class n{constructor(e,i){this.service=e,this.router=i,this.popular="popular",this.upcomming="upcomming",this.theaters="theaters",this.series="series",this.actors="popular/actors",this.loggedIn=!1}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),null!=this.user&&(this.loggedIn=!0)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hD),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-front-page"]],decls:14,vars:4,consts:[[2,"background-color","darkslategray","display","flex"],[2,"padding-top","5px","padding-left","10px"],[2,"height","150px"],["href","https://www.themoviedb.org/documentation/api"],["src","https://www.themoviedb.org/assets/2/v4/logos/v2/blue_long_1-8ba2ac31f354005783fab473602c34c3f4fd207150182061e425d366e4f34596.svg",2,"max-width","250px"],[2,"align-content","center"],[3,"direction"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),o._uU(4,"Welcome"),o.qZA(),o.TgZ(5,"p"),o._uU(6,"this webpage uses The Movie DB API for data"),o.qZA(),o.TgZ(7,"a",3),o._UZ(8,"img",4),o.qZA()(),o.TgZ(9,"div",5),o._UZ(10,"app-carousel-image",6)(11,"app-carousel-image",6)(12,"app-carousel-image",6)(13,"app-carousel-image",6),o.qZA()()()),2&e&&(o.xp6(10),o.Q6J("direction",i.popular),o.xp6(1),o.Q6J("direction",i.actors),o.xp6(1),o.Q6J("direction",i.upcomming),o.xp6(1),o.Q6J("direction",i.series))},directives:[S5],styles:[""]}),n})();function A5(n,t){if(1&n&&(o.TgZ(0,"li")(1,"a"),o._uU(2),o.qZA()()),2&n){const e=t.$implicit;o.xp6(2),o.hij("",e.title," ")}}let K2=(()=>{class n{constructor(e,i,r){this.activated=e,this.router=i,this.service=r}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),this.activated.paramMap.subscribe(e=>{this.userProfile=e.get("userEmail"),this.service.getFavorites(this.userProfile).subscribe(i=>this.favList=i)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($o),o.Y36(Li),o.Y36(hD))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-profile"]],decls:7,vars:2,consts:[[2,"padding-top","20px"],[4,"ngFor","ngForOf"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"p"),o._uU(2),o.qZA(),o.TgZ(3,"h3"),o._uU(4,"Favorite Movies:"),o.qZA(),o.TgZ(5,"ul"),o.YNc(6,A5,3,1,"li",1),o.qZA()()),2&e&&(o.xp6(2),o.hij(" User: ",i.userProfile,""),o.xp6(4),o.Q6J("ngForOf",i.favList))},directives:[ri],styles:[""]}),n})();const x5=[{path:"",redirectTo:"front-page",pathMatch:"full"},{path:"front-page",component:I5},{path:"sign-in",component:rL},{path:"register-user",component:_6},{path:"dashboard",component:_4,canActivate:[C4]},{path:"forgot-password",component:v4},{path:"verify-email-address",component:b4},{path:"profile",component:K2}];let R5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Yh.forRoot(x5)],Yh]}),n})();const KO={production:!0,webapiurl:window.envconfig.apiurl||"default",firebase:{apiKey:"AIzaSyDQZ-hDvaNH8wTRvtUkLjdDIIJYczxvNqA",authDomain:"banded-ridge-348912.firebaseapp.com",projectId:"banded-ridge-348912",storageBucket:"banded-ridge-348912.appspot.com",messagingSenderId:"264714425371",appId:"1:264714425371:web:5e161673f3a36d9a9b94be"}};var Q2=W(7489);let M5=(()=>{class n{constructor(){}getDropDownText(e,i){return Q2.filter(i,function(r){return Q2.includes(e,r.id)})}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function O5(n,t){if(1&n&&(o.TgZ(0,"option",6),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.Q6J("value",e.id),o.xp6(1),o.hij(" ",e.name," ")}}let N5=(()=>{class n{constructor(e,i){this.router=e,this.dropdown=i,this.searchText="",this.loggedIn=!1,this.category="1",this.selectedCategory="",this.categories=[{id:1,name:"Movies"},{id:2,name:"Actors"},{id:3,name:"Producers"}]}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),null!=this.user&&(this.loggedIn=!0)}selectCategory(){this.selectedCategory=this.dropdown.getDropDownText(this.category,this.categories)[0].name}search(){""==this.selectedCategory||"Movies"==this.selectedCategory?this.router.navigate(["Movies/SearchResults",this.searchText]):"Actors"==this.selectedCategory&&this.router.navigate(["Actors/SearchResults",this.searchText])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Li),o.Y36(M5))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-search-bar"]],decls:8,vars:3,consts:[[2,"display","flex","padding","11px 0px","margin-left","50%"],["name","my-select",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],["action","action_page.php",1,"example"],["type","text","id","searchText","name","searchText","placeholder","Search..",2,"width","400px",3,"ngModel","ngModelChange"],["type","submit",2,"width","100px",3,"click"],[3,"value"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"select",1),o.NdJ("ngModelChange",function(s){return i.category=s})("change",function(){return i.selectCategory()}),o.YNc(2,O5,2,2,"option",2),o.qZA(),o.TgZ(3,"form",3)(4,"input",4),o.NdJ("ngModelChange",function(s){return i.searchText=s}),o.qZA()(),o.TgZ(5,"form",3)(6,"button",5),o.NdJ("click",function(){return i.search()}),o._uU(7,"Search"),o.qZA()()()),2&e&&(o.xp6(1),o.Q6J("ngModel",i.category),o.xp6(1),o.Q6J("ngForOf",i.categories),o.xp6(2),o.Q6J("ngModel",i.searchText))},directives:[K1,YM,cO,ri,sB,aB,uO,KM,Z1,YT],styles:['*[_ngcontent-%COMP%]{box-sizing:border-box}form.example[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{padding:10px;font-size:17px;border:1px solid grey;float:left;background:#f1f1f1}form.example[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:left;width:20%;padding:10px;background:#2196F3;color:#fff;font-size:17px;border:1px solid grey;border-left:none;cursor:pointer}form.example[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#0b7dda}form.example[_ngcontent-%COMP%]:after{content:"";clear:both;display:table}']}),n})();function k5(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",6)(1,"button",7),o.NdJ("click",function(){return o.CHM(e),o.oxw().logout()}),o._uU(2," Logout "),o.qZA(),o.TgZ(3,"button",8),o.NdJ("click",function(){return o.CHM(e),o.oxw().redirectToProfile()}),o._uU(4," Profile "),o.qZA()()}}function P5(n,t){1&n&&(o.TgZ(0,"div",9),o._UZ(1,"app-sign-in"),o.qZA())}let F5=(()=>{class n{constructor(e,i){this.router=e,this.authService=i,this.loggedIn=!1,this.routes=this.router.config.map(r=>(null==r?void 0:r.path)||"Home")}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),null!=this.user&&(this.loggedIn=!0)}logout(){this.authService.SignOut()}redirectToProfile(){this.router.navigate(["/profile",this.user.email])}toFrontPage(){console.log("toFrontpage"),this.router.navigate(["/front-page"])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Li),o.Y36(h_))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-tool-bar"]],decls:8,vars:2,consts:[[1,"tool-bar-container"],[2,"display","flex"],[2,"margin","auto"],[3,"click"],["style","float: left; padding: 11px 0px; right: 50px",4,"ngIf"],["style","float: left; padding: 11px 0px; right: 50px; margin-left: 300px",4,"ngIf"],[2,"float","left","padding","11px 0px","right","50px"],[1,"btnLogout",3,"click"],[1,"btnProfile",3,"click"],[2,"float","left","padding","11px 0px","right","50px","margin-left","300px"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),o.NdJ("click",function(){return i.toFrontPage()}),o._uU(4,"SEP6"),o.qZA()(),o._UZ(5,"app-search-bar"),o.YNc(6,k5,5,0,"div",4),o.YNc(7,P5,2,0,"div",5),o.qZA()()),2&e&&(o.xp6(6),o.Q6J("ngIf",i.loggedIn),o.xp6(1),o.Q6J("ngIf",!i.loggedIn))},directives:[N5,si,rL],styles:[".app-wrapper[_ngcontent-%COMP%]{background-color:#000c;width:100%;height:100%;display:flex;flex-direction:column;grid-gap:20px}.tool-bar-container[_ngcontent-%COMP%]{width:100%;height:70px;background-color:#000;position:fixed;top:0px;display:grid;grid-template-columns:40% 50%}.Image-toolbar[_ngcontent-%COMP%]{height:70px;width:120px;display:flex}.nav-container[_ngcontent-%COMP%]{display:flex;align-items:center}.page-title[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-end;align-items:center}.btnLogout[_ngcontent-%COMP%]{float:right;position:absolute;width:150px;right:15px;padding:10px;background:#2196F3;color:#fff;font-size:17px;border:1px solid grey;border-left:none;cursor:pointer}.btnProfile[_ngcontent-%COMP%]{float:left;position:absolute;width:150px;right:155px;padding:10px;background:#2196F3;color:#fff;font-size:17px;border:1px solid grey;border-left:none;cursor:pointer}"]}),n})(),L5=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-footer"]],decls:26,vars:0,consts:[[1,"text-center"],[1,"text-center","p-3",2,"display","inline-block"],[2,"font-weight","bold","font-size","16px"],[1,"text-center","p-3",2,"display","inline-block","height","152px","width","152.13px","bottom","5px"],["href","https://github.com/Sjunne/SEP6-Frontend.git"]],template:function(e,i){1&e&&(o.TgZ(0,"footer")(1,"div")(2,"div",0)(3,"div",1)(4,"p",2),o._uU(5,"Study Number: "),o.qZA(),o.TgZ(6,"div")(7,"p"),o._uU(8,"Mattias: 293124"),o.qZA(),o.TgZ(9,"p"),o._uU(10,"Maria: 293197"),o.qZA()()(),o.TgZ(11,"div",3)(12,"p",2),o._uU(13,"Github: "),o.qZA(),o.TgZ(14,"div")(15,"div")(16,"a",4),o._uU(17,"Frontend "),o.qZA()(),o.TgZ(18,"div")(19,"a",4),o._uU(20,"Backend "),o.qZA()()()()(),o.TgZ(21,"div",0)(22,"div",0),o._uU(23," \xa9 2022 Copyright: "),o.TgZ(24,"a",0),o._uU(25,"Mattias Leth Sjunnesson & Maria Frandsen"),o.qZA()()()()())},styles:[""]}),n})(),B5=(()=>{class n{constructor(){this.title="SEP6-Frontend",this.webapiurl=KO.webapiurl}reload(){window}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"app-wrapper"],["fxFlex","",1,"content"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0),o._UZ(1,"app-tool-bar"),o.TgZ(2,"main",1),o._UZ(3,"router-outlet"),o.qZA(),o._UZ(4,"app-footer"),o.qZA())},directives:[F5,zu,L5],styles:[""]}),n})(),U5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[]]}),n})(),V5=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,Q1]]}),n})();const J2="firebasestorage.googleapis.com",X2="storageBucket";class Os extends z.ZR{constructor(t,e){super(QO(t),`Firebase Storage: ${e} (${QO(t)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Os.prototype)}_codeEquals(t){return QO(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function QO(n){return"storage/"+n}function JO(){return new Os("unknown","An unknown error occurred, please check the error payload for server response.")}function eU(){return new Os("canceled","User canceled the upload/download.")}function tU(){return new Os("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function LC(n){return new Os("invalid-argument",n)}function nU(){return new Os("app-deleted","The Firebase app was deleted.")}function iU(n){return new Os("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fD(n,t){return new Os("invalid-format","String does not match format '"+n+"': "+t)}function pD(n){throw new Os("internal-error","Internal error: "+n)}class al{constructor(t,e){this.bucket=t,this.path_=e}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,e){let i;try{i=al.makeFromUrl(t,e)}catch(r){return new al(t,"")}if(""===i.path)return i;throw function Q5(n){return new Os("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(t)}static makeFromUrl(t,e){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function v(et){et.path_=decodeURIComponent(et.path)}const S=e.replace(/[.]/g,"\\."),st=[{regex:d,indices:{bucket:1,path:3},postModify:function s(et){"/"===et.path.charAt(et.path.length-1)&&(et.path_=et.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:v},{regex:new RegExp(`^https?://${e===J2?"(?:storage.googleapis.com|storage.cloud.google.com)":e}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:v}];for(let et=0;et<st.length;et++){const Ct=st[et],Dt=Ct.regex.exec(t);if(Dt){let un=Dt[Ct.indices.path];un||(un=""),i=new al(Dt[Ct.indices.bucket],un),Ct.postModify(i);break}}if(null==i)throw function K5(n){return new Os("invalid-url","Invalid URL '"+n+"'.")}(t);return i}}class tZ{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}function fA(n){return"string"==typeof n||n instanceof String}function rU(n){return XO()&&n instanceof Blob}function XO(){return"undefined"!=typeof Blob}function eN(n,t,e,i){if(i<t)throw LC(`Invalid value for '${n}'. Expected ${t} or greater.`);if(i>e)throw LC(`Invalid value for '${n}'. Expected ${e} or less.`)}function gg(n,t,e){let i=t;return null==e&&(i=`https://${t}`),`${e}://${i}/v0${n}`}function sU(n){const t=encodeURIComponent;let e="?";for(const i in n)n.hasOwnProperty(i)&&(e=e+(t(i)+"=")+t(n[i])+"&");return e=e.slice(0,-1),e}var y_=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(y_||(y_={})),y_))();class aZ{constructor(t,e,i,r,s,c,d,p,v,E,S){this.url_=t,this.method_=e,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=E,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,F)=>{this.resolve_=N,this.reject_=F,this.start_()})}start_(){const e=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const p=this.callback_(d,d.getResponse());!function rZ(n){return void 0!==n}(p)?s():s(p)}catch(p){c(p)}else if(null!==d){const p=JO();p.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,p):p)}else c(r.canceled?this.appDelete_?nU():eU():function Y5(){return new Os("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?e(0,new pA(!1,null,!0)):this.backoffId_=function nZ(n,t,e){let i=1,r=null,s=null,c=!1,d=0;function p(){return 2===d}let v=!1;function E(...de){v||(v=!0,t.apply(null,de))}function S(de){r=setTimeout(()=>{r=null,n(F,p())},de)}function N(){s&&clearTimeout(s)}function F(de,...$e){if(v)return void N();if(de)return N(),void E.call(null,de,...$e);if(p()||c)return N(),void E.call(null,de,...$e);let st;i<64&&(i*=2),1===d?(d=2,st=0):st=1e3*(i+Math.random()),S(st)}let G=!1;function J(de){G||(G=!0,N(),!v&&(null!==r?(de||(d=2),clearTimeout(r),S(0)):de||(d=1)))}return S(0),s=setTimeout(()=>{c=!0,J(!0)},e),J}((i,r)=>{if(r)return void i(!1,new pA(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===y_.NO_ERROR,p=s.getStatus();if(!d||this.isRetryStatusCode_(p)){const E=s.getErrorCode()===y_.ABORT;return void i(!1,new pA(!1,null,E))}const v=-1!==this.successCodes_.indexOf(p);i(!0,new pA(v,s))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function iZ(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(t){const e=t>=500&&t<600,r=-1!==[408,429].indexOf(t),s=-1!==this.additionalRetryCodes_.indexOf(t);return e||r||s}}class pA{constructor(t,e,i){this.wasSuccessCode=t,this.connection=e,this.canceled=!!i}}function pZ(...n){const t=function fZ(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==t){const e=new t;for(let i=0;i<n.length;i++)e.append(n[i]);return e.getBlob()}if(XO())return new Blob(n);throw new Os("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Iu={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tN{constructor(t,e){this.data=t,this.contentType=e||null}}function nN(n,t){switch(n){case Iu.RAW:return new tN(oU(t));case Iu.BASE64:case Iu.BASE64URL:return new tN(aU(n,t));case Iu.DATA_URL:return new tN(function vZ(n){const t=new lU(n);return t.base64?aU(Iu.BASE64,t.rest):function _Z(n){let t;try{t=decodeURIComponent(n)}catch(e){throw fD(Iu.DATA_URL,"Malformed data URL.")}return oU(t)}(t.rest)}(t),function yZ(n){return new lU(n).contentType}(t))}throw JO()}function oU(n){const t=[];for(let e=0;e<n.length;e++){let i=n.charCodeAt(e);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):55296==(64512&i)?e<n.length-1&&56320==(64512&n.charCodeAt(e+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++e),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):56320==(64512&i)?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function aU(n,t){switch(n){case Iu.BASE64:{const r=-1!==t.indexOf("-"),s=-1!==t.indexOf("_");if(r||s)throw fD(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Iu.BASE64URL:{const r=-1!==t.indexOf("+"),s=-1!==t.indexOf("/");if(r||s)throw fD(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let e;try{e=function mZ(n){return atob(n)}(t)}catch(r){throw fD(n,"Invalid character found")}const i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}class lU{constructor(t){this.base64=!1,this.contentType=null;const e=t.match(/^data:([^,]+)?,/);if(null===e)throw fD(Iu.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=e[1]||null;null!=i&&(this.base64=function bZ(n,t){return n.length>=t.length&&n.substring(n.length-t.length)===t}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}class Pf{constructor(t,e){let i=0,r="";rU(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,e){if(rU(this.data_)){const r=function gZ(n,t,e){return n.webkitSlice?n.webkitSlice(t,e):n.mozSlice?n.mozSlice(t,e):n.slice?n.slice(t,e):null}(this.data_,t,e);return null===r?null:new Pf(r)}{const i=new Uint8Array(this.data_.buffer,t,e-t);return new Pf(i,!0)}}static getBlob(...t){if(XO()){const e=t.map(i=>i instanceof Pf?i.data_:i);return new Pf(pZ.apply(null,e))}{const e=t.map(c=>fA(c)?nN(Iu.RAW,c).data:c.data_);let i=0;e.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return e.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new Pf(r,!0)}}uploadData(){return this.data_}}function iN(n){let t;try{t=JSON.parse(n)}catch(e){return null}return function oZ(n){return"object"==typeof n&&!Array.isArray(n)}(t)?t:null}function cU(n){const t=n.lastIndexOf("/",n.length-2);return-1===t?n:n.slice(t+1)}function EZ(n,t){return t}class $l{constructor(t,e,i,r){this.server=t,this.local=e||t,this.writable=!!i,this.xform=r||EZ}}let gA=null;function gD(){if(gA)return gA;const n=[];n.push(new $l("bucket")),n.push(new $l("generation")),n.push(new $l("metageneration")),n.push(new $l("name","fullPath",!0));const e=new $l("name");e.xform=function t(s,c){return function TZ(n){return!fA(n)||n.length<2?n:cU(n)}(c)},n.push(e);const r=new $l("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new $l("timeCreated")),n.push(new $l("updated")),n.push(new $l("md5Hash",null,!0)),n.push(new $l("cacheControl",null,!0)),n.push(new $l("contentDisposition",null,!0)),n.push(new $l("contentEncoding",null,!0)),n.push(new $l("contentLanguage",null,!0)),n.push(new $l("contentType",null,!0)),n.push(new $l("metadata","customMetadata",!0)),gA=n,gA}function uU(n,t,e){const i=iN(t);return null===i?null:function SZ(n,t,e){const i={type:"file"},r=e.length;for(let s=0;s<r;s++){const c=e[s];i[c.local]=c.xform(i,t[c.server])}return function DZ(n,t){Object.defineProperty(n,"ref",{get:function e(){const s=new al(n.bucket,n.fullPath);return t._makeStorageReference(s)}})}(i,n),i}(n,i,e)}function rN(n,t){const e={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(e[s.server]=n[s.local])}return JSON.stringify(e)}const dU="prefixes";class Ff{constructor(t,e,i,r){this.url=t,this.method=e,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Lf(n){if(!n)throw JO()}function mA(n,t){return function e(i,r){const s=uU(n,r,t);return Lf(null!==s),s}}function BC(n){return function t(e,i){let r;return r=401===e.getStatus()?e.getErrorText().includes("Firebase App Check token is invalid")?function q5(){return new Os("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function z5(){return new Os("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===e.getStatus()?function W5(n){return new Os("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===e.getStatus()?function Z5(n){return new Os("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.serverResponse=i.serverResponse,r}}function mD(n){const t=BC(n);return function e(i,r){let s=t(i,r);return 404===i.getStatus()&&(s=function $5(n){return new Os("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function fU(n,t,e){const r=gg(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Ff(r,"GET",mA(n,e),c);return d.errorHandler=mD(t),d}function OZ(n,t,e,i,r){const s={};s.prefix=t.isRoot?"":t.path+"/",e&&e.length>0&&(s.delimiter=e),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=gg(t.bucketOnlyServerUrl(),n.host,n._protocol),v=n.maxOperationRetryTime,E=new Ff(d,"GET",function RZ(n,t){return function e(i,r){const s=function xZ(n,t,e){const i=iN(e);return null===i?null:function AZ(n,t,e){const i={prefixes:[],items:[],nextPageToken:e.nextPageToken};if(e[dU])for(const r of e[dU]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new al(t,s));i.prefixes.push(c)}if(e.items)for(const r of e.items){const s=n._makeStorageReference(new al(t,r.name));i.items.push(s)}return i}(n,t,i)}(n,t,r);return Lf(null!==s),s}}(n,t.bucket),v);return E.urlParams=s,E.errorHandler=BC(t),E}function gU(n,t,e){const i=Object.assign({},e);return i.fullPath=n.path,i.size=t.size(),i.contentType||(i.contentType=function FZ(n,t){return n&&n.contentType||t&&t.type()||"application/octet-stream"}(null,t)),i}class _A{constructor(t,e,i,r){this.current=t,this.total=e,this.finalized=!!i,this.metadata=r||null}}function sN(n,t){let e=null;try{e=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){Lf(!1)}return Lf(!!e&&-1!==(t||["active"]).indexOf(e)),e}const VZ={STATE_CHANGED:"state_changed"},Wl={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oN(n){switch(n){case"running":case"pausing":case"canceling":return Wl.RUNNING;case"paused":return Wl.PAUSED;case"success":return Wl.SUCCESS;case"canceled":return Wl.CANCELED;default:return Wl.ERROR}}class HZ{constructor(t,e,i){if(function sZ(n){return"function"==typeof n}(t)||null!=e||null!=i)this.next=t,this.error=null!=e?e:void 0,this.complete=null!=i?i:void 0;else{const s=t;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function UC(n){return(...t)=>{Promise.resolve().then(()=>n(...t))}}class GZ extends class jZ{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=y_.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=y_.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=y_.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,e,i,r){if(this.sent_)throw pD("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw pD("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw pD("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw pD("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw pD("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)}}{initXhr(){this.xhr_.responseType="text"}}function fh(){return new GZ}class yU{constructor(t,e,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=i,this._mappings=gD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=r,this._transition("error"))},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const t=this._transferred;return e=>this._updateProgress(t+e)}_shouldDoResumable(t){return t.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([e,i])=>{switch(this._state){case"running":t(e,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((t,e)=>{const i=function LZ(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c=gU(t,i,r),d={name:c.fullPath},p=gg(s,n.host,n._protocol),E={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},S=rN(c,e),G=new Ff(p,"POST",function F(J){let de;sN(J);try{de=J.getResponseHeader("X-Goog-Upload-URL")}catch($e){Lf(!1)}return Lf(fA(de)),de},n.maxUploadRetryTime);return G.urlParams=d,G.headers=E,G.body=S,G.errorHandler=BC(t),G}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fh,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((e,i)=>{const r=function BZ(n,t,e,i){const p=new Ff(e,"POST",function s(v){const E=sN(v,["active","final"]);let S=null;try{S=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch(F){Lf(!1)}S||Lf(!1);const N=Number(S);return Lf(!isNaN(N)),new _A(N,i.size(),"final"===E)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=BC(t),p}(this._ref.storage,this._ref._location,t,this._blob),s=this._ref.storage._makeRequest(r,fh,e,i);this._request=s,s.getPromise().then(c=>{c=c,this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=262144*this._chunkMultiplier,e=new _A(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function UZ(n,t,e,i,r,s,c,d){const p=new _A(0,0);if(c?(p.current=c.current,p.total=c.total):(p.current=0,p.total=i.size()),i.size()!==p.total)throw function X5(){return new Os("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const v=p.total-p.current;let E=v;r>0&&(E=Math.min(E,r));const S=p.current,G={"X-Goog-Upload-Command":E===v?"upload, finalize":"upload","X-Goog-Upload-Offset":`${p.current}`},J=i.slice(S,S+E);if(null===J)throw tU();const st=new Ff(e,"POST",function de(et,Ct){const Dt=sN(et,["active","final"]),$t=p.current+E,un=i.size();let Vi;return Vi="final"===Dt?mA(t,s)(et,Ct):null,new _A($t,un,"final"===Dt,Vi)},t.maxUploadRetryTime);return st.headers=G,st.body=J.uploadData(),st.progressCallback=d||null,st.errorHandler=BC(n),st}(this._ref._location,this._ref.storage,i,this._blob,t,this._mappings,e,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const d=this._ref.storage._makeRequest(c,fh,r,s);this._request=d,d.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,e)=>{const i=fU(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,fh,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,e)=>{const i=function mU(n,t,e,i,r){const s=t.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},p=function d(){let st="";for(let et=0;et<2;et++)st+=Math.random().toString().slice(2);return st}();c["Content-Type"]="multipart/related; boundary="+p;const v=gU(t,i,r),E=rN(v,e),F=Pf.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+E+"\r\n--"+p+"\r\nContent-Type: "+v.contentType+"\r\n\r\n",i,"\r\n--"+p+"--");if(null===F)throw tU();const G={name:v.fullPath},J=gg(s,n.host,n._protocol),$e=n.maxUploadRetryTime,Ke=new Ff(J,"POST",mA(n,e),$e);return Ke.urlParams=G,Ke.headers=c,Ke.body=F.uploadData(),Ke.errorHandler=BC(t),Ke}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,fh,t,e);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":const e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=eU(),this._state=t,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const t=oN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,e,i,r){const s=new HZ(e||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(t,e){return this._promise.then(t,e)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(e=>{this._notifyObserver(e)})}_finishPromise(){if(void 0!==this._resolve){let t=!0;switch(oN(this._state)){case Wl.SUCCESS:UC(this._resolve.bind(null,this.snapshot))();break;case Wl.CANCELED:case Wl.ERROR:UC(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(oN(this._state)){case Wl.RUNNING:case Wl.PAUSED:t.next&&UC(t.next.bind(t,this.snapshot))();break;case Wl.SUCCESS:t.complete&&UC(t.complete.bind(t))();break;default:t.error&&UC(t.error.bind(t,this._error))()}}resume(){const t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t}pause(){const t="running"===this._state;return t&&this._transition("pausing"),t}cancel(){const t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t}}class Zy{constructor(t,e){this._service=t,this._location=e instanceof al?e:al.makeFromUrl(e,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,e){return new Zy(t,e)}get root(){const t=new al(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return cU(this._location.path)}get storage(){return this._service}get parent(){const t=function CZ(n){if(0===n.length)return null;const t=n.lastIndexOf("/");return-1===t?"":n.slice(0,t)}(this._location.path);if(null===t)return null;const e=new al(this._location.bucket,t);return new Zy(this._service,e)}_throwIfRoot(t){if(""===this._location.path)throw iU(t)}}function CU(n,t,e){return aN.apply(this,arguments)}function aN(){return aN=(0,Pe.Z)(function*(n,t,e){const r=yield wU(n,{pageToken:e});t.prefixes.push(...r.prefixes),t.items.push(...r.items),null!=r.nextPageToken&&(yield CU(n,t,r.nextPageToken))}),aN.apply(this,arguments)}function wU(n,t){null!=t&&"number"==typeof t.maxResults&&eN("options.maxResults",1,1e3,t.maxResults);const e=t||{},i=OZ(n.storage,n._location,"/",e.pageToken,e.maxResults);return n.storage.makeRequestWithTokens(i,fh)}function tY(n){n._throwIfRoot("getDownloadURL");const t=function NZ(n,t,e){const r=gg(t.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new Ff(r,"GET",function MZ(n,t){return function e(i,r){const s=uU(n,r,t);return Lf(null!==s),function IZ(n,t,e,i){const r=iN(t);if(null===r||!fA(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(v=>{const S=n.fullPath;return gg("/b/"+c(n.bucket)+"/o/"+c(S),e,i)+sU({alt:"media",token:v})})[0]}(s,r,n.host,n._protocol)}}(n,e),c);return d.errorHandler=mD(t),d}(n.storage,n._location,gD());return n.storage.makeRequestWithTokens(t,fh).then(e=>{if(null===e)throw function eZ(){return new Os("no-download-url","The given file does not have any download URLs.")}();return e})}function EU(n,t){const e=function wZ(n,t){const e=t.split("/").filter(i=>i.length>0).join("/");return 0===n.length?e:n+"/"+e}(n._location.path,t),i=new al(n._location.bucket,e);return new Zy(n.storage,i)}function TU(n,t){if(n instanceof lN){const e=n;if(null==e._bucket)throw function J5(){return new Os("no-default-bucket","No default bucket found. Did you set the '"+X2+"' property when initializing the app?")}();const i=new Zy(e,e._bucket);return null!=t?TU(i,t):i}return void 0!==t?EU(n,t):n}function sY(n,t){if(t&&function iY(n){return/^[A-Za-z]+:\/\//.test(n)}(t)){if(n instanceof lN)return function rY(n,t){return new Zy(n,t)}(n,t);throw LC("To use ref(service, url), the first argument must be a Storage instance.")}return TU(n,t)}function DU(n,t){const e=null==t?void 0:t[X2];return null==e?null:al.makeFromBucketSpec(e,n)}class lN{constructor(t,e,i,r,s){this.app=t,this._authProvider=e,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=J2,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?al.makeFromBucketSpec(r,this._host):DU(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._bucket=null!=this._url?al.makeFromBucketSpec(this._url,t):DU(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){eN("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){eN("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}_getAuthToken(){var t=this;return(0,Pe.Z)(function*(){if(t._overrideAuthToken)return t._overrideAuthToken;const e=t._authProvider.getImmediate({optional:!0});if(e){const i=yield e.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var t=this;return(0,Pe.Z)(function*(){const e=t._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new Zy(this,t)}_makeRequest(t,e,i,r){if(this._deleted)return new tZ(nU());{const s=function hZ(n,t,e,i,r,s){const c=sU(n.urlParams),d=n.url+c,p=Object.assign({},n.headers);return function uZ(n,t){t&&(n["X-Firebase-GMPID"]=t)}(p,t),function lZ(n,t){null!==t&&t.length>0&&(n.Authorization="Firebase "+t)}(p,e),function cZ(n,t){n["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(p,s),function dZ(n,t){null!==t&&(n["X-Firebase-AppCheck"]=t)}(p,i),new aZ(d,n.method,p,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r)}(t,this._appId,i,r,e,this._firebaseVersion);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}makeRequestWithTokens(t,e){var i=this;return(0,Pe.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(t,e,r,s).getPromise()})()}}const SU="@firebase/storage";function xU(n,t){return sY(n=(0,z.m9)(n),t)}function mY(n,{instanceIdentifier:t}){const e=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new lN(e,i,r,t,Io.SDK_VERSION)}!function _Y(){(0,Io._registerComponent)(new Xa.wA("storage",mY,"PUBLIC").setMultipleInstances(!0)),(0,Io.registerVersion)(SU,"0.9.6",""),(0,Io.registerVersion)(SU,"0.9.6","esm2017")}();class vA{constructor(t,e,i){this._delegate=t,this.task=e,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class RU{constructor(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new vA(this._delegate.snapshot,this,this._ref)}then(t,e){return this._delegate.then(i=>{if(t)return t(new vA(i,this,this._ref))},e)}on(t,e,i,r){let s;return e&&(s="function"==typeof e?c=>e(new vA(c,this,this._ref)):{next:e.next?c=>e.next(new vA(c,this,this._ref)):void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,s,i||void 0,r||void 0)}}class MU{constructor(t,e){this._delegate=t,this._service=e}get prefixes(){return this._delegate.prefixes.map(t=>new mg(t,this._service))}get items(){return this._delegate.items.map(t=>new mg(t,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class mg{constructor(t,e){this._delegate=t,this.storage=e}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(t){const e=function pY(n,t){return EU(n,t)}(this._delegate,t);return new mg(e,this.storage)}get root(){return new mg(this._delegate.root,this.storage)}get parent(){const t=this._delegate.parent;return null==t?null:new mg(t,this.storage)}put(t,e){return this._throwIfRoot("put"),new RU(function aY(n,t,e){return function KZ(n,t,e){return n._throwIfRoot("uploadBytesResumable"),new yU(n,new Pf(t),e)}(n=(0,z.m9)(n),t,e)}(this._delegate,t,e),this)}putString(t,e=Iu.RAW,i){this._throwIfRoot("putString");const r=nN(e,t),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new RU(new yU(this._delegate,new Pf(r.data,!0),s),this)}listAll(){return function dY(n){return function JZ(n){const t={prefixes:[],items:[]};return CU(n,t).then(()=>t)}(n=(0,z.m9)(n))}(this._delegate).then(t=>new MU(t,this.storage))}list(t){return function uY(n,t){return wU(n=(0,z.m9)(n),t)}(this._delegate,t||void 0).then(e=>new MU(e,this.storage))}getMetadata(){return function lY(n){return function XZ(n){n._throwIfRoot("getMetadata");const t=fU(n.storage,n._location,gD());return n.storage.makeRequestWithTokens(t,fh)}(n=(0,z.m9)(n))}(this._delegate)}updateMetadata(t){return function cY(n,t){return function eY(n,t){n._throwIfRoot("updateMetadata");const e=function kZ(n,t,e,i){const s=gg(t.fullServerUrl(),n.host,n._protocol),d=rN(e,i),v=n.maxOperationRetryTime,E=new Ff(s,"PATCH",mA(n,i),v);return E.headers={"Content-Type":"application/json; charset=utf-8"},E.body=d,E.errorHandler=mD(t),E}(n.storage,n._location,t,gD());return n.storage.makeRequestWithTokens(e,fh)}(n=(0,z.m9)(n),t)}(this._delegate,t)}getDownloadURL(){return function hY(n){return tY(n=(0,z.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function fY(n){return function nY(n){n._throwIfRoot("deleteObject");const t=function PZ(n,t){const i=gg(t.fullServerUrl(),n.host,n._protocol),d=new Ff(i,"DELETE",function c(p,v){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=mD(t),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(t,fh)}(n=(0,z.m9)(n))}(this._delegate)}_throwIfRoot(t){if(""===this._delegate._location.path)throw iU(t)}}class OU{constructor(t,e){this.app=t,this._delegate=e}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(t){if(NU(t))throw LC("ref() expected a child path but got a URL, use refFromURL instead.");return new mg(xU(this._delegate,t),this)}refFromURL(t){if(!NU(t))throw LC("refFromURL() expected a full URL but got a child path, use ref() instead.");try{al.makeFromUrl(t,this._delegate.host)}catch(e){throw LC("refFromUrl() expected a valid full URL but got an invalid one.")}return new mg(xU(this._delegate,t),this)}setMaxUploadRetryTime(t){this._delegate.maxUploadRetryTime=t}setMaxOperationRetryTime(t){this._delegate.maxOperationRetryTime=t}useEmulator(t,e,i={}){!function gY(n,t,e,i={}){!function oY(n,t,e,i={}){n.host=`${t}:${e}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,z.Sg)(r,n.app.options.projectId))}(n,t,e,i)}(this._delegate,t,e,i)}}function NU(n){return/^[A-Za-z]+:\/\//.test(n)}function CY(n,{instanceIdentifier:t}){const e=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:t});return new OU(e,i)}function kU(n){const t=function EY(n){return new Di.y(t=>{const e=c=>t.next(c);e(n.snapshot);const s=n.on("state_changed",e);return n.then(c=>{e(c),t.complete()},c=>{e(n.snapshot),(c=>{t.error(c)})(c)}),function(){s()}}).pipe(function H5(n,t=Ju.z){return(0,vi.e)((e,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const v=s;s=null,i.next(v)}};function p(){const v=c+n,E=t.now();if(E<v)return r=this.schedule(void 0,v-E),void i.add(r);d()}e.subscribe((0,xn.x)(i,v=>{s=v,c=t.now(),r||(r=t.schedule(p,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>t,percentageChanges:()=>t.pipe((0,Rt.U)(e=>e.bytesTransferred/e.totalBytes*100))}}function yA(n){return{getDownloadURL:()=>dt(void 0).pipe(di.fc,zi(()=>n.getDownloadURL()),di.iC),getMetadata:()=>dt(void 0).pipe(di.fc,zi(()=>n.getMetadata()),di.iC),delete:()=>(0,Ti.D)(n.delete()),child:t=>yA(n.child(t)),updateMetadata:t=>(0,Ti.D)(n.updateMetadata(t)),put:(t,e)=>kU(n.put(t,e)),putString:(t,e,i)=>kU(n.putString(t,e,i)),list:t=>(0,Ti.D)(n.list(t)),listAll:()=>(0,Ti.D)(n.listAll())}}!function wY(n){const t={TaskState:Wl,TaskEvent:VZ,StringFormat:Iu,Storage:OU,Reference:mg};n.INTERNAL.registerComponent(new Xa.wA("storage-compat",CY,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(av.Z);const TY=new o.OlP("angularfire2.storageBucket"),DY=new o.OlP("angularfire2.storage.maxUploadRetryTime"),SY=new o.OlP("angularfire2.storage.maxOperationRetryTime"),IY=new o.OlP("angularfire2.storage.use-emulator");let AY=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S){const N=(0,zr.on)(e,c,i);this.storage=(0,zr.cc)(`${N.name}.storage.${r}`,"AngularFireStorage",N.name,()=>{const F=c.runOutsideAngular(()=>N.storage(r||void 0)),G=E;return G&&F.useEmulator(...G),p&&F.setMaxUploadRetryTime(p),v&&F.setMaxOperationRetryTime(v),F},[p,v])}ref(e){return yA(this.storage.ref(e))}refFromURL(e){return yA(this.storage.refFromURL(e))}upload(e,i,r){return yA(this.storage.ref(e)).put(i,r)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zr.Dh),o.LFG(zr.xv,8),o.LFG(TY,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(di.HU),o.LFG(DY,8),o.LFG(SY,8),o.LFG(IY,8),o.LFG(zT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xY=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),RY=(()=>{class n{constructor(){O1.Z.registerVersion("angularfire",di.q4.full,"gcs-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[AY],imports:[xY]}),n})();const PU="@firebase/database";let cN="";function LU(n){cN=n}class OY{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),(0,z.Pz)(e))}get(t){const e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:(0,z.cI)(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}}class NY{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e}get(t){return(0,z.r3)(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}}const BU=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const t=window[n];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new OY(t)}}catch(t){}return new NY},Yy=BU("localStorage"),uN=BU("sessionStorage"),VC=new Rl.Yd("@firebase/database"),UU=function(){let n=1;return function(){return n++}}(),VU=function(n){const t=(0,z.dS)(n),e=new z.gQ;e.update(t);const i=e.digest();return z.US.encodeByteArray(i)},_D=function(...n){let t="";for(let e=0;e<n.length;e++){const i=n[e];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?t+=_D.apply(null,i):t+="object"==typeof i?(0,z.Pz)(i):i,t+=" "}return t};let Ky=null,HU=!0;const jU=function(n,t){(0,z.hu)(!t||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(VC.logLevel=Rl.in.VERBOSE,Ky=VC.log.bind(VC),t&&uN.set("logging_enabled",!0)):"function"==typeof n?Ky=n:(Ky=null,uN.remove("logging_enabled"))},na=function(...n){if(!0===HU&&(HU=!1,null===Ky&&!0===uN.get("logging_enabled")&&jU(!0)),Ky){const t=_D.apply(null,n);Ky(t)}},vD=function(n){return function(...t){na(n,...t)}},dN=function(...n){const t="FIREBASE INTERNAL ERROR: "+_D(...n);VC.error(t)},Bf=function(...n){const t=`FIREBASE FATAL ERROR: ${_D(...n)}`;throw VC.error(t),new Error(t)},ll=function(...n){const t="FIREBASE WARNING: "+_D(...n);VC.warn(t)},bA=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},_g="[MIN_NAME]",Uf="[MAX_NAME]",Qy=function(n,t){if(n===t)return 0;if(n===_g||t===Uf)return-1;if(t===_g||n===Uf)return 1;{const e=CA(n),i=CA(t);return null!==e?null!==i?e-i==0?n.length-t.length:e-i:-1:null!==i?1:n<t?-1:1}},FY=function(n,t){return n===t?0:n<t?-1:1},yD=function(n,t){if(t&&n in t)return t[n];throw new Error("Missing required key ("+n+") in object: "+(0,z.Pz)(t))},hN=function(n){if("object"!=typeof n||null===n)return(0,z.Pz)(n);const t=[];for(const i in n)t.push(i);t.sort();let e="{";for(let i=0;i<t.length;i++)0!==i&&(e+=","),e+=(0,z.Pz)(t[i]),e+=":",e+=hN(n[t[i]]);return e+="}",e},GU=function(n,t){const e=n.length;if(e<=t)return[n];const i=[];for(let r=0;r<e;r+=t)i.push(n.substring(r,r+t>e?e:r+t));return i};function ia(n,t){for(const e in n)n.hasOwnProperty(e)&&t(e,n[e])}const $U=function(n){(0,z.hu)(!bA(n),"Invalid JSON number");const i=1023;let r,s,c,d,p;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const v=[];for(p=52;p;p-=1)v.push(c%2?1:0),c=Math.floor(c/2);for(p=11;p;p-=1)v.push(s%2?1:0),s=Math.floor(s/2);v.push(r?1:0),v.reverse();const E=v.join("");let S="";for(p=0;p<64;p+=8){let N=parseInt(E.substr(p,8),2).toString(16);1===N.length&&(N="0"+N),S+=N}return S.toLowerCase()},VY=new RegExp("^-?(0*)\\d{1,10}$"),WU=-2147483648,fN=2147483647,CA=function(n){if(VY.test(n)){const t=Number(n);if(t>=WU&&t<=fN)return t}return null},HC=function(n){try{n()}catch(t){setTimeout(()=>{throw ll("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},bD=function(n,t){const e=setTimeout(n,t);return"object"==typeof e&&e.unref&&e.unref(),e};class jY{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(i=>this.appCheck=i)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,i)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(i=>i.addTokenListener(t))}notifyForInvalidToken(){ll(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class GY{constructor(t,e,i){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&"auth/token-not-initialized"===e.code?(na("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,i)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,i):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ll(t)}}let CD=(()=>{class n{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const KU=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XU="websocket",eV="long_polling";class gN{constructor(t,e,i,r,s=!1,c="",d=!1){this.secure=e,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Yy.get("host:"+t)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Yy.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tV(n,t,e){let i;if((0,z.hu)("string"==typeof t,"typeof type must == string"),(0,z.hu)("object"==typeof e,"typeof params must == object"),t===XU)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(t!==eV)throw new Error("Unknown connection type: "+t);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function $Y(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(e.ns=n.namespace);const r=[];return ia(e,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class WY{constructor(){this.counters_={}}incrementCounter(t,e=1){(0,z.r3)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return(0,z.p$)(this.counters_)}}const mN={},_N={};function vN(n){const t=n.toString();return mN[t]||(mN[t]=new WY),mN[t]}class qY{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&HC(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class b_{constructor(t,e,i,r,s,c,d){this.connId=t,this.repoInfo=e,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=vD(t),this.stats_=vN(e),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),tV(e,eV,p))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new qY(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,z.Yr)()||"complete"===document.readyState)n();else{let t=!1;const e=function(){document.body?t||(t=!0,n()):setTimeout(e,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&e()}),window.attachEvent("onload",e))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new yN((...s)=>{const[c,d,p,v,E]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=p;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&KU.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){b_.forceAllow_=!0}static forceDisallow(){b_.forceDisallow_=!0}static isAvailable(){return!((0,z.Yr)()||!b_.forceAllow_&&(b_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){const e=(0,z.Pz)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);const i=(0,z.h$)(e),r=GU(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if((0,z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=t,i.pw=e,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){const e=(0,z.Pz)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}}class yN{constructor(t,e,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,z.Yr)())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=UU(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=yN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){na("frame writing exception"),d.stack&&na(d.stack),na(d)}}}static createIFrame_(){const t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||na("No IE domain setting required")}catch(e){const i=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;let e=this.urlFn(t),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return e+=i,this.addLongPollTag_(e,this.currentSerial),!0}return!1}enqueueSegment(t,e,i){this.pendingSegs.push({seg:t,ts:e,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);const i=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(t,()=>{clearTimeout(r),i()})}addTag(t,e){(0,z.Yr)()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),e())},i.onerror=()=>{na("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let EA=null;"undefined"!=typeof MozWebSocket?EA=MozWebSocket:"undefined"!=typeof WebSocket&&(EA=WebSocket);let jC=(()=>{class n{constructor(e,i,r,s,c,d,p){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=vD(this.connId),this.stats_=vN(i),this.connURL=n.connectionURL_(i,d,p,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(e,i,r,s,c){const d={v:"5"};return!(0,z.Yr)()&&"undefined"!=typeof location&&location.hostname&&KU.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),tV(e,XU,d)}open(e,i){this.onDisconnect=i,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Yy.set("previous_websocket_failure",!0);try{let r;if((0,z.Yr)()){const c={headers:{"User-Agent":`Firebase/5/${cN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(c.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(c.headers["X-Firebase-AppCheck"]=this.appCheckToken);const d=process.env,p=0===this.connURL.indexOf("wss://")?d.HTTPS_PROXY||d.https_proxy:d.HTTP_PROXY||d.http_proxy;p&&(c.proxy={origin:p})}this.mySock=new EA(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&null!==EA&&!n.forceDisallow_}static previouslyFailed(){return Yy.isInMemoryStorage||!0===Yy.get("previous_websocket_failure")}markConnectionHealthy(){Yy.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,z.cI)(i);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,z.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const i=Number(e);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const i=e.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const i=(0,z.Pz)(e);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=GU(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),lV=(()=>{class n{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[b_,jC]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const i=jC&&jC.isAvailable();let r=i&&!jC.previouslyFailed();if(e.webSocketOnly&&(i||ll("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[jC];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class gV{constructor(t,e,i,r,s,c,d,p,v,E){this.id=t,this.repoInfo_=e,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=p,this.onKill_=v,this.lastSessionId=E,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=vD("c:"+this.id+":"),this.transportManager_=new lV(e),this.log_("Connection created"),this.start_()}start_(){const t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,i)},Math.floor(0));const r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=bD(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{2!==this.state_&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){this.sendData_({t:"d",d:t})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if("t"in t){const e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){const e=yD("t",t),i=yD("d",t);if("c"===e)this.onSecondaryControl_(i);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){const e=yD("t",t),i=yD("d",t);"c"===e?this.onControl_(i):"d"===e&&this.onDataMessage_(i)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){const e=yD("t",t);if("d"in t){const i=t.d;if("h"===e)this.onHandshake_(i);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(i):"r"===e?this.onReset_(i):"e"===e?dN("Server Error: "+i):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dN("Unknown control packet command: "+e)}}onHandshake_(t){const e=t.ts,i=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==i&&ll("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;const e=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,i),bD(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):bD(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Yy.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class mV{put(t,e,i,r){}merge(t,e,i,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,i){}onDisconnectMerge(t,e,i){}onDisconnectCancel(t,e){}reportStats(t){}}class _V{constructor(t){this.allowedEvents_=t,this.listeners_={},(0,z.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){const i=[...this.listeners_[t]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,e)}}on(t,e,i){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:i});const r=this.getInitialEvent(t);r&&e.apply(i,r)}off(t,e,i){this.validateEventType_(t);const r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(t){(0,z.hu)(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}}class TA extends _V{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new TA}getInitialEvent(t){return(0,z.hu)("online"===t,"Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}}class Zi{constructor(t,e){if(void 0===e){this.pieces_=t.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"}}function ki(){return new Zi("")}function Yn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function C_(n){return n.pieces_.length-n.pieceNum_}function yr(n){let t=n.pieceNum_;return t<n.pieces_.length&&t++,new Zi(n.pieces_,t)}function CN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function wD(n,t=0){return n.pieces_.slice(n.pieceNum_+t)}function bV(n){if(n.pieceNum_>=n.pieces_.length)return null;const t=[];for(let e=n.pieceNum_;e<n.pieces_.length-1;e++)t.push(n.pieces_[e]);return new Zi(t,0)}function Xr(n,t){const e=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)e.push(n.pieces_[i]);if(t instanceof Zi)for(let i=t.pieceNum_;i<t.pieces_.length;i++)e.push(t.pieces_[i]);else{const i=t.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&e.push(i[r])}return new Zi(e,0)}function Kn(n){return n.pieceNum_>=n.pieces_.length}function zl(n,t){const e=Yn(n),i=Yn(t);if(null===e)return t;if(e===i)return zl(yr(n),yr(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+n+")")}function gK(n,t){const e=wD(n,0),i=wD(t,0);for(let r=0;r<e.length&&r<i.length;r++){const s=Qy(e[r],i[r]);if(0!==s)return s}return e.length===i.length?0:e.length<i.length?-1:1}function wN(n,t){if(C_(n)!==C_(t))return!1;for(let e=n.pieceNum_,i=t.pieceNum_;e<=n.pieces_.length;e++,i++)if(n.pieces_[e]!==t.pieces_[i])return!1;return!0}function dd(n,t){let e=n.pieceNum_,i=t.pieceNum_;if(C_(n)>C_(t))return!1;for(;e<n.pieces_.length;){if(n.pieces_[e]!==t.pieces_[i])return!1;++e,++i}return!0}class mK{constructor(t,e){this.errorPrefix_=e,this.parts_=wD(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,z.ug)(this.parts_[i]);CV(this)}}function CV(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Jy(n))}function Jy(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class EN extends _V{constructor(){let t,e;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{const i=!document[t];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new EN}getInitialEvent(t){return(0,z.hu)("visible"===t,"Unknown event type: "+t),[this.visible_]}}const ED=1e3;let SA,Xy=(()=>{class n extends mV{constructor(e,i,r,s,c,d,p,v){if(super(),this.repoInfo_=e,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=p,this.authOverride_=v,this.id=n.nextPersistentConnectionId_++,this.log_=vD("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ED,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,v&&!(0,z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");EN.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&TA.getInstance().on("online",this.onOnline_,this)}sendRequest(e,i,r){const s=++this.requestNumber_,c={r:s,a:e,b:i};this.log_((0,z.Pz)(c)),(0,z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();const i=new z.BH,r={p:e._path.toString(),q:e._queryObject},s={action:"g",request:r,onComplete:d=>{const p=d.d;"ok"===d.s?(this.onDataUpdate_(r.p,p,!1,null),i.resolve(p)):i.reject(p)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const d=this.outstandingGets_[c];void 0===d||s!==d||(delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+c+" timed out on connection"),i.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(c),i.promise}listen(e,i,r,s){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,z.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,z.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:i,query:e,tag:r};this.listens.get(d).set(c,p),this.connected_&&this.sendListen_(p)}sendGet_(e){const i=this.outstandingGets_[e];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(e){const i=e.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};e.tag&&(c.q=i._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest("q",c,p=>{const v=p.d,E=p.s;n.warnOnListenWarnings_(v,i),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",p),"ok"!==E&&this.removeListen_(r,s),e.onComplete&&e.onComplete(E,v))})}static warnOnListenWarnings_(e,i){if(e&&"object"==typeof e&&(0,z.r3)(e,"w")){const r=(0,z.DV)(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();ll(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,z.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,i=(0,z.w9)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===e&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const i=e.s,r=e.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(e,i){const r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,z.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,i)}sendUnlisten_(e,i,r,s){this.log_("Unlisten on "+e+" for "+i);const c={p:e};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:i,onComplete:r})}onDisconnectMerge(e,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,i,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:i,onComplete:r})}onDisconnectCancel(e,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(e,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(e,i,r,s){this.putInternal("p",e,i,r,s)}merge(e,i,r,s){this.putInternal("m",e,i,r,s)}putInternal(e,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(e){const i=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(e){if(this.connected_){const i={c:e};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,z.Pz)(e));const i=e.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,i){this.log_("handleServerMessage",e,i),"d"===e?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===e?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===e?this.onListenRevoked_(i.p,i.q):"ac"===e?this.onAuthRevoked_(i.s,i.d):"apc"===e?this.onAppCheckRevoked_(i.s,i.d):"sd"===e?this.onSecurityDebugPacket_(i):dN("Unrecognized action received from server: "+(0,z.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ED,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ED,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ED),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-e);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var e=this;return(0,Pe.Z)(function*(){if(e.shouldReconnect_()){e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null;const i=e.onDataMessage_.bind(e),r=e.onReady_.bind(e),s=e.onRealtimeDisconnect_.bind(e),c=e.id+":"+n.nextConnectionId_++,d=e.lastSessionId;let p=!1,v=null;const E=function(){v?v.close():(p=!0,s())};e.realtime_={close:E,sendRequest:function(F){(0,z.hu)(v,"sendRequest call when we're not connected not allowed."),v.sendRequest(F)}};const N=e.forceTokenRefresh_;e.forceTokenRefresh_=!1;try{const[F,G]=yield Promise.all([e.authTokenProvider_.getToken(N),e.appCheckTokenProvider_.getToken(N)]);p?na("getToken() completed but was canceled"):(na("getToken() completed. Creating connection."),e.authToken_=F&&F.accessToken,e.appCheckToken_=G&&G.token,v=new gV(c,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,r,s,J=>{ll(J+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},d))}catch(F){e.log_("Failed to get token: "+F),p||(e.repoInfo_.nodeAdmin&&ll(F),E())}}})()}interrupt(e){na("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){na("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ED,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const i=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const i=this.outstandingPuts_[e];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,i){let r;r=i?i.map(c=>hN(c)).join("$"):"default";const s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,i){const r=new Zi(e).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,i){na("Auth token revoked: "+e+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,i){na("App check token revoked: "+e+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const i of e.values())this.sendListen_(i);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let i="js";(0,z.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+i+"."+cN.replace(/\./g,"-")]=1,(0,z.uI)()?e["framework.cordova"]=1:(0,z.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=TA.getInstance().currentlyOnline();return(0,z.xb)(this.interruptReasons_)&&e}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class ti{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new ti(t,e)}}class DA{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){const i=new ti(_g,t),r=new ti(_g,e);return 0!==this.compare(i,r)}minPost(){return ti.MIN}}class TV extends DA{static get __EMPTY_NODE(){return SA}static set __EMPTY_NODE(t){SA=t}compare(t,e){return Qy(t.name,e.name)}isDefinedOn(t){throw(0,z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ti.MIN}maxPost(){return new ti(Uf,SA)}makePost(t,e){return(0,z.hu)("string"==typeof t,"KeyIndex indexValue must always be a string."),new ti(t,SA)}toString(){return".key"}}const Vf=new TV;class IA{constructor(t,e,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!t.isEmpty();)if(t=t,c=e?i(t.key,e):1,r&&(c*=-1),c<0)t=this.isReverse_?t.left:t.right;else{if(0===c){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}}let DN,ph=(()=>{class n{constructor(e,i,r,s,c){this.key=e,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Nc.EMPTY_NODE,this.right=null!=c?c:Nc.EMPTY_NODE}copy(e,i,r,s,c){return new n(null!=e?e:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,i,r){let s=this;const c=r(e,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(e,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(e,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Nc.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,i){let r,s;if(r=this,i(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(e,r.key)){if(r.right.isEmpty())return Nc.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,i)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Nc{constructor(t,e=Nc.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new Nc(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,ph.BLACK,null,null))}remove(t){return new Nc(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ph.BLACK,null,null))}get(t){let e,i=this.root_;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e)return i.value;e<0?i=i.left:e>0&&(i=i.right)}return null}getPredecessorKey(t){let e,i=this.root_,r=null;for(;!i.isEmpty();){if(e=this.comparator_(t,i.key),0===e){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}e<0?i=i.left:e>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new IA(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new IA(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new IA(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new IA(this.root_,null,this.comparator_,!0,t)}}function DK(n,t){return Qy(n.name,t.name)}function TN(n,t){return Qy(n,t)}Nc.EMPTY_NODE=new class TK{copy(t,e,i,r,s){return this}insert(t,e,i){return new ph(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const DV=function(n){return"number"==typeof n?"number:"+$U(n):"string:"+n},SV=function(n){if(n.isLeafNode()){const t=n.val();(0,z.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,z.r3)(t,".sv"),"Priority must be a string or number.")}else(0,z.hu)(n===DN||n.isEmpty(),"priority of unexpected type.");(0,z.hu)(n===DN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let IV,AV,xV,GC=(()=>{class n{constructor(e,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=i,this.lazyHash_=null,(0,z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),SV(this.priorityNode_)}static set __childrenNodeConstructor(e){IV=e}static get __childrenNodeConstructor(){return IV}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new n(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Kn(e)?this:".priority"===Yn(e)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,i){return null}updateImmediateChild(e,i){return".priority"===e?this.updatePriority(i):i.isEmpty()&&".priority"!==e?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,i).updatePriority(this.priorityNode_)}updateChild(e,i){const r=Yn(e);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,z.hu)(".priority"!==r||1===C_(e),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(yr(e),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,i){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+DV(this.priorityNode_.val())+":");const i=typeof this.value_;e+=i+":",e+="number"===i?$U(this.value_):this.value_,this.lazyHash_=VU(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===n.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof n.__childrenNodeConstructor?-1:((0,z.hu)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const i=typeof e.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,z.hu)(s>=0,"Unknown leaf type: "+i),(0,z.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const i=e;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Rr=new class xK extends DA{compare(t,e){const i=t.node.getPriority(),r=e.node.getPriority(),s=i.compareTo(r);return 0===s?Qy(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ti.MIN}maxPost(){return new ti(Uf,new GC("[PRIORITY-POST]",xV))}makePost(t,e){const i=AV(t);return new ti(e,new GC("[PRIORITY-POST]",i))}toString(){return".priority"}},RK=Math.log(2);class MK{constructor(t){this.count=parseInt(Math.log(t+1)/RK,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=t+1&r}nextBitIsOne(){const t=!(this.bits_&1<<this.current_);return this.current_--,t}}const AA=function(n,t,e,i){n.sort(t);const r=function(p,v){const E=v-p;let S,N;if(0===E)return null;if(1===E)return S=n[p],N=e?e(S):S,new ph(N,S.node,ph.BLACK,null,null);{const F=parseInt(E/2,10)+p,G=r(p,F),J=r(F+1,v);return S=n[F],N=e?e(S):S,new ph(N,S.node,ph.BLACK,G,J)}},d=function(p){let v=null,E=null,S=n.length;const N=function(G,J){const de=S-G,$e=S;S-=G;const Ke=r(de+1,$e),st=n[de],et=e?e(st):st;F(new ph(et,st.node,J,null,Ke))},F=function(G){v?(v.left=G,v=G):(E=G,v=G)};for(let G=0;G<p.count;++G){const J=p.nextBitIsOne(),de=Math.pow(2,p.count-(G+1));J?N(de,ph.BLACK):(N(de,ph.BLACK),N(de,ph.RED))}return E}(new MK(n.length));return new Nc(i||t,d)};let SN;const $C={};class vg{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return(0,z.hu)($C&&Rr,"ChildrenNode.ts has not been loaded"),SN=SN||new vg({".priority":$C},{".priority":Rr}),SN}get(t){const e=(0,z.DV)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Nc?e:null}hasIndex(t){return(0,z.r3)(this.indexSet_,t.toString())}addIndex(t,e){(0,z.hu)(t!==Vf,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=e.getIterator(ti.Wrap);let d,c=s.getNext();for(;c;)r=r||t.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?AA(i,t.getCompare()):$C;const p=t.toString(),v=Object.assign({},this.indexSet_);v[p]=t;const E=Object.assign({},this.indexes_);return E[p]=d,new vg(E,v)}addToIndexes(t,e){const i=(0,z.UI)(this.indexes_,(r,s)=>{const c=(0,z.DV)(this.indexSet_,s);if((0,z.hu)(c,"Missing index implementation for "+s),r===$C){if(c.isDefinedOn(t.node)){const d=[],p=e.getIterator(ti.Wrap);let v=p.getNext();for(;v;)v.name!==t.name&&d.push(v),v=p.getNext();return d.push(t),AA(d,c.getCompare())}return $C}{const d=e.get(t.name);let p=r;return d&&(p=p.remove(new ti(t.name,d))),p.insert(t,t.node)}});return new vg(i,this.indexSet_)}removeFromIndexes(t,e){const i=(0,z.UI)(this.indexes_,r=>{if(r===$C)return r;{const s=e.get(t.name);return s?r.remove(new ti(t.name,s)):r}});return new vg(i,this.indexSet_)}}let TD,Fn=(()=>{class n{constructor(e,i,r){this.children_=e,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&SV(this.priorityNode_),this.children_.isEmpty()&&(0,z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return TD||(TD=new n(new Nc(TN),null,vg.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||TD}updatePriority(e){return this.children_.isEmpty()?this:new n(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const i=this.children_.get(e);return null===i?TD:i}}getChild(e){const i=Yn(e);return null===i?this:this.getImmediateChild(i).getChild(yr(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,i){if((0,z.hu)(i,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(i);{const r=new ti(e,i);let s,c;i.isEmpty()?(s=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?TD:this.priorityNode_;return new n(s,d,c)}}updateChild(e,i){const r=Yn(e);if(null===r)return i;{(0,z.hu)(".priority"!==Yn(e)||1===C_(e),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(yr(e),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(Rr,(d,p)=>{i[d]=p.val(e),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!e&&c&&s<2*r){const d=[];for(const p in i)d[p]=i[p];return d}return e&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+DV(this.getPriority().val())+":"),this.forEachChild(Rr,(i,r)=>{const s=r.hash();""!==s&&(e+=":"+i+":"+s)}),this.lazyHash_=""===e?"":VU(e)}return this.lazyHash_}getPredecessorChildName(e,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new ti(e,i));return c?c.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(e){const i=this.getFirstChildName(e);return i?new ti(i,this.children_.get(i)):null}getLastChildName(e){const i=this.resolveIndex_(e);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(e){const i=this.getLastChildName(e);return i?new ti(i,this.children_.get(i)):null}forEachChild(e,i){const r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(e,s=>s);{const s=this.children_.getIteratorFrom(e.name,ti.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(e,s=>s);{const s=this.children_.getReverseIteratorFrom(e.name,ti.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,e)>0;)s.getNext(),c=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===DD?-1:0}withIndex(e){if(e===Vf||this.indexMap_.hasIndex(e))return this;{const i=this.indexMap_.addIndex(e,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(e){return e===Vf||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const i=e;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(Rr),s=i.getIterator(Rr);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(e){return e===Vf?null:this.indexMap_.get(e.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const DD=new class OK extends Fn{constructor(){super(new Nc(TN),Fn.EMPTY_NODE,vg.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Fn.EMPTY_NODE}isEmpty(){return!1}};function hs(n,t=null){if(null===n)return Fn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),(0,z.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new GC(n,hs(t));if(n instanceof Array){let e=Fn.EMPTY_NODE;return ia(n,(i,r)=>{if((0,z.r3)(n,i)&&"."!==i.substring(0,1)){const s=hs(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(i,s))}}),e.updatePriority(hs(t))}{const e=[];let i=!1;if(ia(n,(c,d)=>{if("."!==c.substring(0,1)){const p=hs(d);p.isEmpty()||(i=i||!p.getPriority().isEmpty(),e.push(new ti(c,p)))}}),0===e.length)return Fn.EMPTY_NODE;const s=AA(e,DK,c=>c.name,TN);if(i){const c=AA(e,Rr.getCompare());return new Fn(s,hs(t),new vg({".priority":c},{".priority":Rr}))}return new Fn(s,hs(t),vg.Default)}}Object.defineProperties(ti,{MIN:{value:new ti(_g,Fn.EMPTY_NODE)},MAX:{value:new ti(Uf,DD)}}),TV.__EMPTY_NODE=Fn.EMPTY_NODE,GC.__childrenNodeConstructor=Fn,function SK(n){DN=n}(DD),function AK(n){xV=n}(DD),function IK(n){AV=n}(hs);class IN extends DA{constructor(t){super(),this.indexPath_=t,(0,z.hu)(!Kn(t)&&".priority"!==Yn(t),"Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){const i=this.extractChild(t.node),r=this.extractChild(e.node),s=i.compareTo(r);return 0===s?Qy(t.name,e.name):s}makePost(t,e){const i=hs(t),r=Fn.EMPTY_NODE.updateChild(this.indexPath_,i);return new ti(e,r)}maxPost(){const t=Fn.EMPTY_NODE.updateChild(this.indexPath_,DD);return new ti(Uf,t)}toString(){return wD(this.indexPath_,0).join("/")}}const AN=new class kK extends DA{compare(t,e){const i=t.node.compareTo(e.node);return 0===i?Qy(t.name,e.name):i}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ti.MIN}maxPost(){return ti.MAX}makePost(t,e){const i=hs(t);return new ti(e,i)}toString(){return".value"}},WC="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",PK=function(){let n=0;const t=[];return function(e){const i=e===n;let r;n=e;const s=new Array(8);for(r=7;r>=0;r--)s[r]=WC.charAt(e%64),e=Math.floor(e/64);(0,z.hu)(0===e,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=WC.charAt(t[r]);return(0,z.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),OV=function(n){if(n===""+fN)return"-";const t=CA(n);if(null!=t)return""+(t+1);const e=new Array(n.length);for(let c=0;c<e.length;c++)e[c]=n.charAt(c);if(e.length<786)return e.push("-"),e.join("");let i=e.length-1;for(;i>=0&&"z"===e[i];)i--;if(-1===i)return Uf;const s=WC.charAt(WC.indexOf(e[i])+1);return e[i]=s,e.slice(0,i+1).join("")},NV=function(n){if(n===""+WU)return _g;const t=CA(n);if(null!=t)return""+(t-1);const e=new Array(n.length);for(let i=0;i<e.length;i++)e[i]=n.charAt(i);return"-"===e[e.length-1]?1===e.length?""+fN:(delete e[e.length-1],e.join("")):(e[e.length-1]=WC.charAt(WC.indexOf(e[e.length-1])-1),e.join("")+"z".repeat(786-e.length))};function kV(n){return{type:"value",snapshotNode:n}}function zC(n,t){return{type:"child_added",snapshotNode:t,childName:n}}function SD(n,t){return{type:"child_removed",snapshotNode:t,childName:n}}function ID(n,t,e){return{type:"child_changed",snapshotNode:t,childName:n,oldSnap:e}}class RN{constructor(t){this.index_=t}updateChild(t,e,i,r,s,c){(0,z.hu)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=t.getImmediateChild(e);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?t.hasChild(e)?c.trackChildChange(SD(e,d)):(0,z.hu)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(zC(e,i)):c.trackChildChange(ID(e,i,d))),t.isLeafNode()&&i.isEmpty())?t:t.updateImmediateChild(e,i).withIndex(this.index_)}updateFullNode(t,e,i){return null!=i&&(t.isLeafNode()||t.forEachChild(Rr,(r,s)=>{e.hasChild(r)||i.trackChildChange(SD(r,s))}),e.isLeafNode()||e.forEachChild(Rr,(r,s)=>{if(t.hasChild(r)){const c=t.getImmediateChild(r);c.equals(s)||i.trackChildChange(ID(r,s,c))}else i.trackChildChange(zC(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Fn.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class AD{constructor(t){this.indexedFilter_=new RN(t.getIndex()),this.index_=t.getIndex(),this.startPost_=AD.getStartPost_(t),this.endPost_=AD.getEndPost_(t)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0}updateChild(t,e,i,r,s,c){return this.matches(new ti(e,i))||(i=Fn.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,i,r,s,c)}updateFullNode(t,e,i){e.isLeafNode()&&(e=Fn.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Fn.EMPTY_NODE);const s=this;return e.forEachChild(Rr,(c,d)=>{s.matches(new ti(c,d))||(r=r.updateImmediateChild(c,Fn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){const e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){const e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()}}class LK{constructor(t){this.rangedFilter_=new AD(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}updateChild(t,e,i,r,s,c){return this.rangedFilter_.matches(new ti(e,i))||(i=Fn.EMPTY_NODE),t.getImmediateChild(e).equals(i)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,i,r,s,c):this.fullLimitUpdateChild_(t,e,i,s,c)}updateFullNode(t,e,i){let r;if(e.isLeafNode()||e.isEmpty())r=Fn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){let s;r=Fn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!p)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,p;if(r=e.withIndex(this.index_),r=r.updatePriority(Fn.EMPTY_NODE),this.reverse_){p=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();d=(N,F)=>S(F,N)}else p=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let v=0,E=!1;for(;p.hasNext();){const S=p.getNext();!E&&d(s,S)<=0&&(E=!0),E&&v<this.limit_&&d(S,c)<=0?v++:r=r.updateImmediateChild(S.name,Fn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,i)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,i,r,s){let c;if(this.reverse_){const S=this.index_.getCompare();c=(N,F)=>S(F,N)}else c=this.index_.getCompare();const d=t;(0,z.hu)(d.numChildren()===this.limit_,"");const p=new ti(e,i),v=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),E=this.rangedFilter_.matches(p);if(d.hasChild(e)){const S=d.getImmediateChild(e);let N=r.getChildAfterChild(this.index_,v,this.reverse_);for(;null!=N&&(N.name===e||d.hasChild(N.name));)N=r.getChildAfterChild(this.index_,N,this.reverse_);const F=null==N?1:c(N,p);if(E&&!i.isEmpty()&&F>=0)return null!=s&&s.trackChildChange(ID(e,i,S)),d.updateImmediateChild(e,i);{null!=s&&s.trackChildChange(SD(e,S));const J=d.updateImmediateChild(e,Fn.EMPTY_NODE);return null!=N&&this.rangedFilter_.matches(N)?(null!=s&&s.trackChildChange(zC(N.name,N.node)),J.updateImmediateChild(N.name,N.node)):J}}return i.isEmpty()?t:E&&c(v,p)>=0?(null!=s&&(s.trackChildChange(SD(v.name,v.node)),s.trackChildChange(zC(e,i))),d.updateImmediateChild(e,i).updateImmediateChild(v.name,Fn.EMPTY_NODE)):t}}class xA{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Rr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:_g}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Uf}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Rr}copy(){const t=new xA;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}function MN(n,t,e){const i=n.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=e?(i.startNameSet_=!0,i.indexStartName_=e):(i.startNameSet_=!1,i.indexStartName_=""),i}function ON(n,t,e){const i=n.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==e?(i.endNameSet_=!0,i.indexEndName_=e):(i.endNameSet_=!1,i.indexEndName_=""),i}function RA(n,t){const e=n.copy();return e.index_=t,e}function PV(n){const t={};if(n.isDefault())return t;let e;return n.index_===Rr?e="$priority":n.index_===AN?e="$value":n.index_===Vf?e="$key":((0,z.hu)(n.index_ instanceof IN,"Unrecognized index type!"),e=n.index_.toString()),t.orderBy=(0,z.Pz)(e),n.startSet_&&(t.startAt=(0,z.Pz)(n.indexStartValue_),n.startNameSet_&&(t.startAt+=","+(0,z.Pz)(n.indexStartName_))),n.endSet_&&(t.endAt=(0,z.Pz)(n.indexEndValue_),n.endNameSet_&&(t.endAt+=","+(0,z.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?t.limitToFirst=n.limit_:t.limitToLast=n.limit_),t}function FV(n){const t={};if(n.startSet_&&(t.sp=n.indexStartValue_,n.startNameSet_&&(t.sn=n.indexStartName_)),n.endSet_&&(t.ep=n.indexEndValue_,n.endNameSet_&&(t.en=n.indexEndName_)),n.limitSet_){t.l=n.limit_;let e=n.viewFrom_;""===e&&(e=n.isViewFromLeft()?"l":"r"),t.vf=e}return n.index_!==Rr&&(t.i=n.index_.toString()),t}class MA extends mV{constructor(t,e,i,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=vD("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return void 0!==e?"tag$"+e:((0,z.hu)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,i,r){const s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);const c=MA.getListenId_(t,i),d={};this.listens_[c]=d;const p=PV(t._queryParams);this.restRequest_(s+".json",p,(v,E)=>{let S=E;if(404===v&&(S=null,v=null),null===v&&this.onDataUpdate_(s,S,!1,i),(0,z.DV)(this.listens_,c)===d){let N;N=v?401===v?"permission_denied":"rest_error:"+v:"ok",r(N,null)}})}unlisten(t,e){const i=MA.getListenId_(t,e);delete this.listens_[i]}get(t){const e=PV(t._queryParams),i=t._path.toString(),r=new z.BH;return this.restRequest_(i+".json",e,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},i){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+(0,z.xO)(e);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let p=null;if(d.status>=200&&d.status<300){try{p=(0,z.cI)(d.responseText)}catch(v){ll("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,p)}else 401!==d.status&&404!==d.status&&ll("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class GK{constructor(){this.rootNode_=Fn.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}}function OA(){return{value:null,children:new Map}}function qC(n,t,e){if(Kn(t))n.value=e,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(t,e);else{const i=Yn(t);n.children.has(i)||n.children.set(i,OA()),qC(n.children.get(i),t=yr(t),e)}}function NN(n,t){if(Kn(t))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const e=n.value;return n.value=null,e.forEachChild(Rr,(i,r)=>{qC(n,new Zi(i),r)}),NN(n,t)}}if(n.children.size>0){const e=Yn(t);return t=yr(t),n.children.has(e)&&NN(n.children.get(e),t)&&n.children.delete(e),0===n.children.size}return!0}function kN(n,t,e){null!==n.value?e(t,n.value):function $K(n,t){n.children.forEach((e,i)=>{t(i,e)})}(n,(i,r)=>{kN(r,new Zi(t.toString()+"/"+i),e)})}class WK{constructor(t){this.collection_=t,this.last_=null}get(){const t=this.collection_.get(),e=Object.assign({},t);return this.last_&&ia(this.last_,(i,r)=>{e[i]=e[i]-r}),this.last_=t,e}}class ZK{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new WK(t);const i=1e4+2e4*Math.random();bD(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const t=this.statsListener_.get(),e={};let i=!1;ia(t,(r,s)=>{s>0&&(0,z.r3)(this.statsToReport_,r)&&(e[r]=s,i=!0)}),i&&this.server_.reportStats(e),bD(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var hd=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(hd||(hd={})),hd))();function LN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class NA{constructor(t,e,i){this.path=t,this.affectedTree=e,this.revert=i,this.type=hd.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(t){if(Kn(this.path)){if(null!=this.affectedTree.value)return(0,z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const e=this.affectedTree.subtree(new Zi(t));return new NA(ki(),e,this.revert)}}return(0,z.hu)(Yn(this.path)===t,"operationForChild called for unrelated child."),new NA(yr(this.path),this.affectedTree,this.revert)}}class xD{constructor(t,e){this.source=t,this.path=e,this.type=hd.LISTEN_COMPLETE}operationForChild(t){return Kn(this.path)?new xD(this.source,ki()):new xD(this.source,yr(this.path))}}class e0{constructor(t,e,i){this.source=t,this.path=e,this.snap=i,this.type=hd.OVERWRITE}operationForChild(t){return Kn(this.path)?new e0(this.source,ki(),this.snap.getImmediateChild(t)):new e0(this.source,yr(this.path),this.snap)}}class ZC{constructor(t,e,i){this.source=t,this.path=e,this.children=i,this.type=hd.MERGE}operationForChild(t){if(Kn(this.path)){const e=this.children.subtree(new Zi(t));return e.isEmpty()?null:e.value?new e0(this.source,ki(),e.value):new ZC(this.source,ki(),e)}return(0,z.hu)(Yn(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new ZC(this.source,yr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class w_{constructor(t,e,i){this.node_=t,this.fullyInitialized_=e,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(Kn(t))return this.isFullyInitialized()&&!this.filtered_;const e=Yn(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}}class YK{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}function RD(n,t,e,i,r,s){const c=i.filter(d=>d.type===e);c.sort((d,p)=>function JK(n,t,e){if(null==t.childName||null==e.childName)throw(0,z.g5)("Should only compare child_ events.");const i=new ti(t.childName,t.snapshotNode),r=new ti(e.childName,e.snapshotNode);return n.index_.compare(i,r)}(n,d,p)),c.forEach(d=>{const p=function QK(n,t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,n.index_)),t}(n,d,s);r.forEach(v=>{v.respondsTo(d.type)&&t.push(v.createEvent(p,n.query_))})})}function kA(n,t){return{eventCache:n,serverCache:t}}function MD(n,t,e,i){return kA(new w_(t,e,i),n.serverCache)}function BV(n,t,e,i){return kA(n.eventCache,new w_(t,e,i))}function PA(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function t0(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let BN;class Mr{constructor(t,e=(()=>(BN||(BN=new Nc(FY)),BN))()){this.value=t,this.children=e}static fromObject(t){let e=new Mr(null);return ia(t,(i,r)=>{e=e.set(new Zi(i),r)}),e}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(null!=this.value&&e(this.value))return{path:ki(),value:this.value};if(Kn(t))return null;{const i=Yn(t),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(yr(t),e);return null!=s?{path:Xr(new Zi(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(Kn(t))return this;{const e=Yn(t),i=this.children.get(e);return null!==i?i.subtree(yr(t)):new Mr(null)}}set(t,e){if(Kn(t))return new Mr(e,this.children);{const i=Yn(t),s=(this.children.get(i)||new Mr(null)).set(yr(t),e),c=this.children.insert(i,s);return new Mr(this.value,c)}}remove(t){if(Kn(t))return this.children.isEmpty()?new Mr(null):new Mr(null,this.children);{const e=Yn(t),i=this.children.get(e);if(i){const r=i.remove(yr(t));let s;return s=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&s.isEmpty()?new Mr(null):new Mr(this.value,s)}return this}}get(t){if(Kn(t))return this.value;{const e=Yn(t),i=this.children.get(e);return i?i.get(yr(t)):null}}setTree(t,e){if(Kn(t))return e;{const i=Yn(t),s=(this.children.get(i)||new Mr(null)).setTree(yr(t),e);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new Mr(this.value,c)}}fold(t){return this.fold_(ki(),t)}fold_(t,e){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(Xr(t,r),e)}),e(t,this.value,i)}findOnPath(t,e){return this.findOnPath_(t,ki(),e)}findOnPath_(t,e,i){const r=!!this.value&&i(e,this.value);if(r)return r;if(Kn(t))return null;{const s=Yn(t),c=this.children.get(s);return c?c.findOnPath_(yr(t),Xr(e,s),i):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,ki(),e)}foreachOnPath_(t,e,i){if(Kn(t))return this;{this.value&&i(e,this.value);const r=Yn(t),s=this.children.get(r);return s?s.foreachOnPath_(yr(t),Xr(e,r),i):new Mr(null)}}foreach(t){this.foreach_(ki(),t)}foreach_(t,e){this.children.inorderTraversal((i,r)=>{r.foreach_(Xr(t,i),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,i)=>{i.value&&t(e,i.value)})}}class gh{constructor(t){this.writeTree_=t}static empty(){return new gh(new Mr(null))}}function OD(n,t,e){if(Kn(t))return new gh(new Mr(e));{const i=n.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const c=zl(r,t);return s=s.updateChild(c,e),new gh(n.writeTree_.set(r,s))}{const r=new Mr(e),s=n.writeTree_.setTree(t,r);return new gh(s)}}}function UN(n,t,e){let i=n;return ia(e,(r,s)=>{i=OD(i,Xr(t,r),s)}),i}function UV(n,t){if(Kn(t))return gh.empty();{const e=n.writeTree_.setTree(t,new Mr(null));return new gh(e)}}function VN(n,t){return null!=n0(n,t)}function n0(n,t){const e=n.writeTree_.findRootMostValueAndPath(t);return null!=e?n.writeTree_.get(e.path).getChild(zl(e.path,t)):null}function VV(n){const t=[],e=n.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Rr,(i,r)=>{t.push(new ti(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&t.push(new ti(i,r.value))}),t}function E_(n,t){if(Kn(t))return n;{const e=n0(n,t);return new gh(null!=e?new Mr(e):n.writeTree_.subtree(t))}}function HN(n){return n.writeTree_.isEmpty()}function YC(n,t){return HV(ki(),n.writeTree_,t)}function HV(n,t,e){if(null!=t.value)return e.updateChild(n,t.value);{let i=null;return t.children.inorderTraversal((r,s)=>{".priority"===r?((0,z.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):e=HV(Xr(n,r),s,e)}),!e.getChild(n).isEmpty()&&null!==i&&(e=e.updateChild(Xr(n,".priority"),i)),e}}function FA(n,t){return zV(t,n)}function s7(n,t){if(n.snap)return dd(n.path,t);for(const e in n.children)if(n.children.hasOwnProperty(e)&&dd(Xr(n.path,e),t))return!0;return!1}function a7(n){return n.visible}function jV(n,t,e){let i=gh.empty();for(let r=0;r<n.length;++r){const s=n[r];if(t(s)){const c=s.path;let d;if(s.snap)dd(e,c)?(d=zl(e,c),i=OD(i,d,s.snap)):dd(c,e)&&(d=zl(c,e),i=OD(i,ki(),s.snap.getChild(d)));else{if(!s.children)throw(0,z.g5)("WriteRecord should have .snap or .children");if(dd(e,c))d=zl(e,c),i=UN(i,d,s.children);else if(dd(c,e))if(d=zl(c,e),Kn(d))i=UN(i,ki(),s.children);else{const p=(0,z.DV)(s.children,Yn(d));if(p){const v=p.getChild(yr(d));i=OD(i,ki(),v)}}}}}return i}function GV(n,t,e,i,r){if(i||r){const s=E_(n.visibleWrites,t);return!r&&HN(s)?e:r||null!=e||VN(s,ki())?YC(jV(n.allWrites,function(v){return(v.visible||r)&&(!i||!~i.indexOf(v.writeId))&&(dd(v.path,t)||dd(t,v.path))},t),e||Fn.EMPTY_NODE):null}{const s=n0(n.visibleWrites,t);if(null!=s)return s;{const c=E_(n.visibleWrites,t);return HN(c)?e:null!=e||VN(c,ki())?YC(c,e||Fn.EMPTY_NODE):null}}}function LA(n,t,e,i){return GV(n.writeTree,n.treePath,t,e,i)}function jN(n,t){return function l7(n,t,e){let i=Fn.EMPTY_NODE;const r=n0(n.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Rr,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(e){const s=E_(n.visibleWrites,t);return e.forEachChild(Rr,(c,d)=>{const p=YC(E_(s,new Zi(c)),d);i=i.updateImmediateChild(c,p)}),VV(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return VV(E_(n.visibleWrites,t)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,t)}function $V(n,t,e,i){return function c7(n,t,e,i,r){(0,z.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=Xr(t,e);if(VN(n.visibleWrites,s))return null;{const c=E_(n.visibleWrites,s);return HN(c)?r.getChild(e):YC(c,r.getChild(e))}}(n.writeTree,n.treePath,t,e,i)}function BA(n,t){return function d7(n,t){return n0(n.visibleWrites,t)}(n.writeTree,Xr(n.treePath,t))}function GN(n,t,e){return function u7(n,t,e,i){const r=Xr(t,e),s=n0(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(e)?YC(E_(n.visibleWrites,r),i.getNode().getImmediateChild(e)):null}(n.writeTree,n.treePath,t,e)}function WV(n,t){return zV(Xr(n.treePath,t),n.writeTree)}function zV(n,t){return{treePath:n,writeTree:t}}class g7{constructor(){this.changeMap=new Map}trackChildChange(t){const e=t.type,i=t.childName;(0,z.hu)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),(0,z.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===e&&"child_removed"===s)this.changeMap.set(i,ID(i,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===e&&"child_changed"===s)this.changeMap.set(i,SD(i,r.oldSnap));else if("child_changed"===e&&"child_added"===s)this.changeMap.set(i,zC(i,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==s)throw(0,z.g5)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(i,ID(i,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,t)}getChanges(){return Array.from(this.changeMap.values())}}const qV=new class m7{getCompleteChild(t){return null}getChildAfterChild(t,e,i){return null}};class $N{constructor(t,e,i=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=i}getCompleteChild(t){const e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{const i=null!=this.optCompleteServerCache_?new w_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return GN(this.writes_,t,i)}}getChildAfterChild(t,e,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:t0(this.viewCache_),s=function p7(n,t,e,i,r,s){return function h7(n,t,e,i,r,s,c){let d;const p=E_(n.visibleWrites,t),v=n0(p,ki());if(null!=v)d=v;else{if(null==e)return[];d=YC(p,e)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const E=[],S=c.getCompare(),N=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let F=N.getNext();for(;F&&E.length<r;)0!==S(F,i)&&E.push(F),F=N.getNext();return E}}(n.writeTree,n.treePath,t,e,i,r,s)}(this.writes_,r,e,1,i,t);return 0===s.length?null:s[0]}}function ZV(n,t,e,i,r,s){const c=t.eventCache;if(null!=BA(i,e))return t;{let d,p;if(Kn(e))if((0,z.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const v=t0(t),S=jN(i,v instanceof Fn?v:Fn.EMPTY_NODE);d=n.filter.updateFullNode(t.eventCache.getNode(),S,s)}else{const v=LA(i,t0(t));d=n.filter.updateFullNode(t.eventCache.getNode(),v,s)}else{const v=Yn(e);if(".priority"===v){(0,z.hu)(1===C_(e),"Can't have a priority with additional path components");const E=c.getNode();p=t.serverCache.getNode();const S=$V(i,e,E,p);d=null!=S?n.filter.updatePriority(E,S):c.getNode()}else{const E=yr(e);let S;if(c.isCompleteForChild(v)){p=t.serverCache.getNode();const N=$V(i,e,c.getNode(),p);S=null!=N?c.getNode().getImmediateChild(v).updateChild(E,N):c.getNode().getImmediateChild(v)}else S=GN(i,v,t.serverCache);d=null!=S?n.filter.updateChild(c.getNode(),v,S,E,r,s):c.getNode()}}return MD(t,d,c.isFullyInitialized()||Kn(e),n.filter.filtersNodes())}}function UA(n,t,e,i,r,s,c,d){const p=t.serverCache;let v;const E=c?n.filter:n.filter.getIndexedFilter();if(Kn(e))v=E.updateFullNode(p.getNode(),i,null);else if(E.filtersNodes()&&!p.isFiltered()){const F=p.getNode().updateChild(e,i);v=E.updateFullNode(p.getNode(),F,null)}else{const F=Yn(e);if(!p.isCompleteForPath(e)&&C_(e)>1)return t;const G=yr(e),de=p.getNode().getImmediateChild(F).updateChild(G,i);v=".priority"===F?E.updatePriority(p.getNode(),de):E.updateChild(p.getNode(),F,de,G,qV,null)}const S=BV(t,v,p.isFullyInitialized()||Kn(e),E.filtersNodes());return ZV(n,S,e,r,new $N(r,S,s),d)}function WN(n,t,e,i,r,s,c){const d=t.eventCache;let p,v;const E=new $N(r,t,s);if(Kn(e))v=n.filter.updateFullNode(t.eventCache.getNode(),i,c),p=MD(t,v,!0,n.filter.filtersNodes());else{const S=Yn(e);if(".priority"===S)v=n.filter.updatePriority(t.eventCache.getNode(),i),p=MD(t,v,d.isFullyInitialized(),d.isFiltered());else{const N=yr(e),F=d.getNode().getImmediateChild(S);let G;if(Kn(N))G=i;else{const J=E.getCompleteChild(S);G=null!=J?".priority"===CN(N)&&J.getChild(bV(N)).isEmpty()?J:J.updateChild(N,i):Fn.EMPTY_NODE}p=F.equals(G)?t:MD(t,n.filter.updateChild(d.getNode(),S,G,N,E,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return p}function YV(n,t){return n.eventCache.isCompleteForChild(t)}function KV(n,t,e){return e.foreach((i,r)=>{t=t.updateChild(i,r)}),t}function zN(n,t,e,i,r,s,c,d){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let v,p=t;v=Kn(e)?i:new Mr(null).setTree(e,i);const E=t.serverCache.getNode();return v.children.inorderTraversal((S,N)=>{if(E.hasChild(S)){const G=KV(0,t.serverCache.getNode().getImmediateChild(S),N);p=UA(n,p,new Zi(S),G,r,s,c,d)}}),v.children.inorderTraversal((S,N)=>{const F=!t.serverCache.isCompleteForChild(S)&&void 0===N.value;if(!E.hasChild(S)&&!F){const J=KV(0,t.serverCache.getNode().getImmediateChild(S),N);p=UA(n,p,new Zi(S),J,r,s,c,d)}}),p}class D7{constructor(t,e){this.query_=t,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new RN(i.getIndex()),s=function BK(n){return n.loadsAllData()?new RN(n.getIndex()):n.hasLimit()?new LK(n):new AD(n)}(i);this.processor_=function _7(n){return{filter:n}}(s);const c=e.serverCache,d=e.eventCache,p=r.updateFullNode(Fn.EMPTY_NODE,c.getNode(),null),v=s.updateFullNode(Fn.EMPTY_NODE,d.getNode(),null),E=new w_(p,c.isFullyInitialized(),r.filtersNodes()),S=new w_(v,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=kA(S,E),this.eventGenerator_=new YK(this.query_)}get query(){return this.query_}}function A7(n,t){const e=t0(n.viewCache_);return e&&(n.query._queryParams.loadsAllData()||!Kn(t)&&!e.getImmediateChild(Yn(t)).isEmpty())?e.getChild(t):null}function QV(n){return 0===n.eventRegistrations_.length}function JV(n,t,e){const i=[];if(e){(0,z.hu)(null==t,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(e,r);c&&i.push(c)})}if(t){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(t)){if(t.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function XV(n,t,e,i){t.type===hd.MERGE&&null!==t.source.queryId&&((0,z.hu)(t0(n.viewCache_),"We should always have a full cache before handling merges"),(0,z.hu)(PA(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function y7(n,t,e,i,r){const s=new g7;let c,d;if(e.type===hd.OVERWRITE){const v=e;v.source.fromUser?c=WN(n,t,v.path,v.snap,i,r,s):((0,z.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||t.serverCache.isFiltered()&&!Kn(v.path),c=UA(n,t,v.path,v.snap,i,r,d,s))}else if(e.type===hd.MERGE){const v=e;v.source.fromUser?c=function C7(n,t,e,i,r,s,c){let d=t;return i.foreach((p,v)=>{const E=Xr(e,p);YV(t,Yn(E))&&(d=WN(n,d,E,v,r,s,c))}),i.foreach((p,v)=>{const E=Xr(e,p);YV(t,Yn(E))||(d=WN(n,d,E,v,r,s,c))}),d}(n,t,v.path,v.children,i,r,s):((0,z.hu)(v.source.fromServer,"Unknown source."),d=v.source.tagged||t.serverCache.isFiltered(),c=zN(n,t,v.path,v.children,i,r,d,s))}else if(e.type===hd.ACK_USER_WRITE){const v=e;c=v.revert?function T7(n,t,e,i,r,s){let c;if(null!=BA(i,e))return t;{const d=new $N(i,t,r),p=t.eventCache.getNode();let v;if(Kn(e)||".priority"===Yn(e)){let E;if(t.serverCache.isFullyInitialized())E=LA(i,t0(t));else{const S=t.serverCache.getNode();(0,z.hu)(S instanceof Fn,"serverChildren would be complete if leaf node"),E=jN(i,S)}E=E,v=n.filter.updateFullNode(p,E,s)}else{const E=Yn(e);let S=GN(i,E,t.serverCache);null==S&&t.serverCache.isCompleteForChild(E)&&(S=p.getImmediateChild(E)),v=null!=S?n.filter.updateChild(p,E,S,yr(e),d,s):t.eventCache.getNode().hasChild(E)?n.filter.updateChild(p,E,Fn.EMPTY_NODE,yr(e),d,s):p,v.isEmpty()&&t.serverCache.isFullyInitialized()&&(c=LA(i,t0(t)),c.isLeafNode()&&(v=n.filter.updateFullNode(v,c,s)))}return c=t.serverCache.isFullyInitialized()||null!=BA(i,ki()),MD(t,v,c,n.filter.filtersNodes())}}(n,t,v.path,i,r,s):function w7(n,t,e,i,r,s,c){if(null!=BA(r,e))return t;const d=t.serverCache.isFiltered(),p=t.serverCache;if(null!=i.value){if(Kn(e)&&p.isFullyInitialized()||p.isCompleteForPath(e))return UA(n,t,e,p.getNode().getChild(e),r,s,d,c);if(Kn(e)){let v=new Mr(null);return p.getNode().forEachChild(Vf,(E,S)=>{v=v.set(new Zi(E),S)}),zN(n,t,e,v,r,s,d,c)}return t}{let v=new Mr(null);return i.foreach((E,S)=>{const N=Xr(e,E);p.isCompleteForPath(N)&&(v=v.set(E,p.getNode().getChild(N)))}),zN(n,t,e,v,r,s,d,c)}}(n,t,v.path,v.affectedTree,i,r,s)}else{if(e.type!==hd.LISTEN_COMPLETE)throw(0,z.g5)("Unknown operation type: "+e.type);c=function E7(n,t,e,i,r){const s=t.serverCache;return ZV(n,BV(t,s.getNode(),s.isFullyInitialized()||Kn(e),s.isFiltered()),e,i,qV,r)}(n,t,e.path,i,s)}const p=s.getChanges();return function b7(n,t,e){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=PA(n);(e.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&e.push(kV(PA(t)))}}(t,c,p),{viewCache:c,changes:p}}(n.processor_,r,t,e,i);return function v7(n,t){(0,z.hu)(t.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,z.hu)(t.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,z.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,eH(n,s.changes,s.viewCache.eventCache.getNode(),null)}function eH(n,t,e,i){return function KK(n,t,e,i){const r=[],s=[];return t.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function FK(n,t){return{type:"child_moved",snapshotNode:t,childName:n}}(c.childName,c.snapshotNode))}),RD(n,r,"child_removed",t,i,e),RD(n,r,"child_added",t,i,e),RD(n,r,"child_moved",s,i,e),RD(n,r,"child_changed",t,i,e),RD(n,r,"value",t,i,e),r}(n.eventGenerator_,t,e,i?[i]:n.eventRegistrations_)}let VA,jA;class tH{constructor(){this.views=new Map}}function qN(n,t,e,i){const r=t.source.queryId;if(null!==r){const s=n.views.get(r);return(0,z.hu)(null!=s,"SyncTree gave us an op for an invalid query."),XV(s,t,e,i)}{let s=[];for(const c of n.views.values())s=s.concat(XV(c,t,e,i));return s}}function nH(n,t,e,i,r){const c=n.views.get(t._queryIdentifier);if(!c){let d=LA(e,r?i:null),p=!1;d?p=!0:i instanceof Fn?(d=jN(e,i),p=!1):(d=Fn.EMPTY_NODE,p=!1);const v=kA(new w_(d,p,!1),new w_(i,r,!1));return new D7(t,v)}return c}function iH(n){const t=[];for(const e of n.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function T_(n,t){let e=null;for(const i of n.views.values())e=e||A7(i,t);return e}function rH(n,t){return t._queryParams.loadsAllData()?HA(n):n.views.get(t._queryIdentifier)}function sH(n,t){return null!=rH(n,t)}function D_(n){return null!=HA(n)}function HA(n){for(const t of n.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let B7=1;class oH{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Mr(null),this.pendingWriteTree_=function f7(){return{visibleWrites:gh.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ZN(n,t,e,i,r){return function e7(n,t,e,i,r){(0,z.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:t,snap:e,writeId:i,visible:r}),r&&(n.visibleWrites=OD(n.visibleWrites,t,e)),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i,r),r?KC(n,new e0({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,e)):[]}function S_(n,t,e=!1){const i=function n7(n,t){for(let e=0;e<n.allWrites.length;e++){const i=n.allWrites[e];if(i.writeId===t)return i}return null}(n.pendingWriteTree_,t);if(function r7(n,t){const e=n.allWrites.findIndex(d=>d.writeId===t);(0,z.hu)(e>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[e];n.allWrites.splice(e,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=e&&s7(d,i.path)?r=!1:dd(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function o7(n){n.visibleWrites=jV(n.allWrites,a7,ki()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=UV(n.visibleWrites,i.path):ia(i.children,p=>{n.visibleWrites=UV(n.visibleWrites,Xr(i.path,p))}),!0))}(n.pendingWriteTree_,t)){let s=new Mr(null);return null!=i.snap?s=s.set(ki(),!0):ia(i.children,c=>{s=s.set(new Zi(c),!0)}),KC(n,new NA(i.path,s,e))}return[]}function ND(n,t,e){return KC(n,new e0({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,e))}function YN(n,t,e,i){const r=t._path,s=n.syncPointTree_.get(r);let c=[];if(s&&("default"===t._queryIdentifier||sH(s,t))){const d=function P7(n,t,e,i){const r=t._queryIdentifier,s=[];let c=[];const d=D_(n);if("default"===r)for(const[p,v]of n.views.entries())c=c.concat(JV(v,e,i)),QV(v)&&(n.views.delete(p),v.query._queryParams.loadsAllData()||s.push(v.query));else{const p=n.views.get(r);p&&(c=c.concat(JV(p,e,i)),QV(p)&&(n.views.delete(r),p.query._queryParams.loadsAllData()||s.push(p.query)))}return d&&!D_(n)&&s.push(new(function O7(){return(0,z.hu)(VA,"Reference.ts has not been loaded"),VA}())(t._repo,t._path)),{removed:s,events:c}}(s,t,e,i);(function N7(n){return 0===n.views.size})(s)&&(n.syncPointTree_=n.syncPointTree_.remove(r));const p=d.removed;c=d.events;const v=-1!==p.findIndex(S=>S._queryParams.loadsAllData()),E=n.syncPointTree_.findOnPath(r,(S,N)=>D_(N));if(v&&!E){const S=n.syncPointTree_.subtree(r);if(!S.isEmpty()){const N=function z7(n){return n.fold((t,e,i)=>{if(e&&D_(e))return[HA(e)];{let r=[];return e&&(r=iH(e)),ia(i,(s,c)=>{r=r.concat(c)}),r}})}(S);for(let F=0;F<N.length;++F){const G=N[F],J=G.query,de=uH(n,G);n.listenProvider_.startListening(kD(J),$A(n,J),de.hashFn,de.onComplete)}}}!E&&p.length>0&&!i&&(v?n.listenProvider_.stopListening(kD(t),null):p.forEach(S=>{const N=n.queryToTagMap.get(WA(S));n.listenProvider_.stopListening(kD(S),N)})),function q7(n,t){for(let e=0;e<t.length;++e){const i=t[e];if(!i._queryParams.loadsAllData()){const r=WA(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,p)}return c}function aH(n,t,e){const i=t._path;let r=null,s=!1;n.syncPointTree_.foreachOnPath(i,(S,N)=>{const F=zl(S,i);r=r||T_(N,F),s=s||D_(N)});let d,c=n.syncPointTree_.get(i);c?(s=s||D_(c),r=r||T_(c,ki())):(c=new tH,n.syncPointTree_=n.syncPointTree_.set(i,c)),null!=r?d=!0:(d=!1,r=Fn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((N,F)=>{const G=T_(F,ki());G&&(r=r.updateImmediateChild(N,G))}));const p=sH(c,t);if(!p&&!t._queryParams.loadsAllData()){const S=WA(t);(0,z.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function Z7(){return B7++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let E=function k7(n,t,e,i,r,s){const c=nH(n,t,i,r,s);return n.views.has(t._queryIdentifier)||n.views.set(t._queryIdentifier,c),function x7(n,t){n.eventRegistrations_.push(t)}(c,e),function R7(n,t){const e=n.viewCache_.eventCache,i=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Rr,(s,c)=>{i.push(zC(s,c))}),e.isFullyInitialized()&&i.push(kV(e.getNode())),eH(n,i,e.getNode(),t)}(c,e)}(c,t,e,FA(n.pendingWriteTree_,i),r,d);if(!p&&!s){const S=rH(c,t);E=E.concat(function Y7(n,t,e){const i=t._path,r=$A(n,t),s=uH(n,e),c=n.listenProvider_.startListening(kD(t),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,z.hu)(!D_(d.value),"If we're adding a query, it shouldn't be shadowed");else{const p=d.fold((v,E,S)=>{if(!Kn(v)&&E&&D_(E))return[HA(E).query];{let N=[];return E&&(N=N.concat(iH(E).map(F=>F.query))),ia(S,(F,G)=>{N=N.concat(G)}),N}});for(let v=0;v<p.length;++v){const E=p[v];n.listenProvider_.stopListening(kD(E),$A(n,E))}}return c}(n,t,S))}return E}function GA(n,t,e){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(t,(c,d)=>{const v=T_(d,zl(c,t));if(v)return v});return GV(r,t,s,e,!0)}function KC(n,t){return lH(t,n.syncPointTree_,null,FA(n.pendingWriteTree_,ki()))}function lH(n,t,e,i){if(Kn(n.path))return cH(n,t,e,i);{const r=t.get(ki());null==e&&null!=r&&(e=T_(r,ki()));let s=[];const c=Yn(n.path),d=n.operationForChild(c),p=t.children.get(c);if(p&&d){const v=e?e.getImmediateChild(c):null,E=WV(i,c);s=s.concat(lH(d,p,v,E))}return r&&(s=s.concat(qN(r,n,i,e))),s}}function cH(n,t,e,i){const r=t.get(ki());null==e&&null!=r&&(e=T_(r,ki()));let s=[];return t.children.inorderTraversal((c,d)=>{const p=e?e.getImmediateChild(c):null,v=WV(i,c),E=n.operationForChild(c);E&&(s=s.concat(cH(E,d,p,v)))}),r&&(s=s.concat(qN(r,n,i,e))),s}function uH(n,t){const e=t.query,i=$A(n,e);return{hashFn:()=>(function S7(n){return n.viewCache_.serverCache.getNode()}(t)||Fn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function j7(n,t,e){const i=KN(n,e);if(i){const r=QN(i),s=r.path,c=r.queryId,d=zl(s,t);return JN(n,s,new xD(LN(c),d))}return[]}(n,e._path,i):function H7(n,t){return KC(n,new xD({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(n,e._path);{const s=function UY(n,t){let e="Unknown Error";"too_big"===n?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?e="Client doesn't have permission to access the desired data.":"unavailable"===n&&(e="The service is unavailable");const i=new Error(n+" at "+t._path.toString()+": "+e);return i.code=n.toUpperCase(),i}(r,e);return YN(n,e,null,s)}}}}function $A(n,t){const e=WA(t);return n.queryToTagMap.get(e)}function WA(n){return n._path.toString()+"$"+n._queryIdentifier}function KN(n,t){return n.tagToQueryMap.get(t)}function QN(n){const t=n.indexOf("$");return(0,z.hu)(-1!==t&&t<n.length-1,"Bad queryKey."),{queryId:n.substr(t+1),path:new Zi(n.substr(0,t))}}function JN(n,t,e){const i=n.syncPointTree_.get(t);return(0,z.hu)(i,"Missing sync point for query tag that we're tracking"),qN(i,e,FA(n.pendingWriteTree_,t),null)}function kD(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function L7(){return(0,z.hu)(jA,"Reference.ts has not been loaded"),jA}())(n._repo,n._path):n}class XN{constructor(t){this.node_=t}getImmediateChild(t){const e=this.node_.getImmediateChild(t);return new XN(e)}node(){return this.node_}}class ek{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){const e=Xr(this.path_,t);return new ek(this.syncTree_,e)}node(){return GA(this.syncTree_,this.path_)}}const dH=function(n,t,e){return n&&"object"==typeof n?((0,z.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Q7(n[".sv"],t,e):"object"==typeof n[".sv"]?J7(n[".sv"],t):void(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Q7=function(n,t,e){if("timestamp"===n)return e.timestamp;(0,z.hu)(!1,"Unexpected server value: "+n)},J7=function(n,t,e){n.hasOwnProperty("increment")||(0,z.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,z.hu)(!1,"Unexpected increment value: "+i);const r=t.node();if((0,z.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},hH=function(n,t,e,i){return nk(t,new ek(e,n),i)},tk=function(n,t,e){return nk(n,new XN(t),e)};function nk(n,t,e){const i=n.getPriority().val(),r=dH(i,t.getImmediateChild(".priority"),e);let s;if(n.isLeafNode()){const c=n,d=dH(c.getValue(),t,e);return d!==c.getValue()||r!==c.getPriority().val()?new GC(d,hs(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new GC(r))),c.forEachChild(Rr,(d,p)=>{const v=nk(p,t.getImmediateChild(d),e);v!==p&&(s=s.updateImmediateChild(d,v))}),s}}class ik{constructor(t="",e=null,i={children:{},childCount:0}){this.name=t,this.parent=e,this.node=i}}function zA(n,t){let e=t instanceof Zi?t:new Zi(t),i=n,r=Yn(e);for(;null!==r;){const s=(0,z.DV)(i.node.children,r)||{children:{},childCount:0};i=new ik(r,i,s),e=yr(e),r=Yn(e)}return i}function r0(n){return n.node.value}function rk(n,t){n.node.value=t,sk(n)}function fH(n){return n.node.childCount>0}function qA(n,t){ia(n.node.children,(e,i)=>{t(new ik(e,n,i))})}function pH(n,t,e,i){e&&!i&&t(n),qA(n,r=>{pH(r,t,!0,i)}),e&&i&&t(n)}function PD(n){return new Zi(null===n.parent?n.name:PD(n.parent)+"/"+n.name)}function sk(n){null!==n.parent&&function t9(n,t,e){const i=function X7(n){return void 0===r0(n)&&!fH(n)}(e),r=(0,z.r3)(n.node.children,t);i&&r?(delete n.node.children[t],n.node.childCount--,sk(n)):!i&&!r&&(n.node.children[t]=e.node,n.node.childCount++,sk(n))}(n.parent,n.name,n)}const n9=/[\[\].#$\/\u0000-\u001F\u007F]/,i9=/[\[\].#$\u0000-\u001F\u007F]/,ok=10485760,ZA=function(n){return"string"==typeof n&&0!==n.length&&!n9.test(n)},gH=function(n){return"string"==typeof n&&0!==n.length&&!i9.test(n)},FD=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bA(n)||n&&"object"==typeof n&&(0,z.r3)(n,".sv")},Hf=function(n,t,e,i){i&&void 0===t||LD((0,z.gK)(n,"value"),t,e)},LD=function(n,t,e){const i=e instanceof Zi?new mK(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+Jy(i));if("function"==typeof t)throw new Error(n+"contains a function "+Jy(i)+" with contents = "+t.toString());if(bA(t))throw new Error(n+"contains "+t.toString()+" "+Jy(i));if("string"==typeof t&&t.length>ok/3&&(0,z.ug)(t)>ok)throw new Error(n+"contains a string greater than "+ok+" utf8 bytes "+Jy(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let r=!1,s=!1;if(ia(t,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!ZA(c)))throw new Error(n+" contains an invalid key ("+c+") "+Jy(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function _K(n,t){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(t),n.byteLength_+=(0,z.ug)(t),CV(n)})(i,c),LD(n,d,i),function vK(n){const t=n.parts_.pop();n.byteLength_-=(0,z.ug)(t),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Jy(i)+" in addition to actual children.")}},mH=function(n,t,e,i){if(i&&void 0===t)return;const r=(0,z.gK)(n,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");const s=[];ia(t,(c,d)=>{const p=new Zi(c);if(LD(r,d,Xr(e,p)),".priority"===CN(p)&&!FD(d))throw new Error(r+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,t){let e,i;for(e=0;e<t.length;e++){i=t[e];const s=wD(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!ZA(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(gK);let r=null;for(e=0;e<t.length;e++){if(i=t[e],null!==r&&dd(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},ak=function(n,t,e){if(!e||void 0!==t){if(bA(t))throw new Error((0,z.gK)(n,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!FD(t))throw new Error((0,z.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},BD=function(n,t,e,i){if(!(i&&void 0===e||ZA(e)))throw new Error((0,z.gK)(n,t)+'was an invalid key = "'+e+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},UD=function(n,t,e,i){if(!(i&&void 0===e||gH(e)))throw new Error((0,z.gK)(n,t)+'was an invalid path = "'+e+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},fd=function(n,t){if(".info"===Yn(t))throw new Error(n+" failed = Can't modify data under /.info/")},_H=function(n,t){const e=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!ZA(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==e.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),gH(n)}(e))throw new Error((0,z.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class a9{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function YA(n,t){let e=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null!==e&&!wN(s,e.path)&&(n.eventLists_.push(e),e=null),null===e&&(e={events:[],path:s}),e.events.push(r)}e&&n.eventLists_.push(e)}function lk(n,t,e){YA(n,e),vH(n,i=>wN(i,t))}function pd(n,t,e){YA(n,e),vH(n,i=>dd(i,t)||dd(t,i))}function vH(n,t){n.recursionDepth_++;let e=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(t(r.path)?(l9(n.eventLists_[i]),n.eventLists_[i]=null):e=!1)}e&&(n.eventLists_=[]),n.recursionDepth_--}function l9(n){for(let t=0;t<n.events.length;t++){const e=n.events[t];if(null!==e){n.events[t]=null;const i=e.getEventRunner();Ky&&na("event: "+e.toString()),HC(i)}}}const yH="repo_interrupt";class u9{constructor(t,e,i,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new a9,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=OA(),this.transactionQueueTree_=new ik,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function bH(n){const e=n.infoData_.getNode(new Zi(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function VD(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:bH(n)})}function CH(n,t,e,i,r){n.dataUpdateCount++;const s=new Zi(t);e=n.interceptServerDataCallback_?n.interceptServerDataCallback_(t,e):e;let c=[];if(r)if(i){const p=(0,z.UI)(e,v=>hs(v));c=function $7(n,t,e,i){const r=KN(n,i);if(r){const s=QN(r),c=s.path,d=s.queryId,p=zl(c,t),v=Mr.fromObject(e);return JN(n,c,new ZC(LN(d),p,v))}return[]}(n.serverSyncTree_,s,p,r)}else{const p=hs(e);c=function G7(n,t,e,i){const r=KN(n,i);if(null!=r){const s=QN(r),c=s.path,d=s.queryId,p=zl(c,t);return JN(n,c,new e0(LN(d),p,e))}return[]}(n.serverSyncTree_,s,p,r)}else if(i){const p=(0,z.UI)(e,v=>hs(v));c=function V7(n,t,e){const i=Mr.fromObject(e);return KC(n,new ZC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(n.serverSyncTree_,s,p)}else{const p=hs(e);c=ND(n.serverSyncTree_,s,p)}let d=s;c.length>0&&(d=JC(n,s)),pd(n.eventQueue_,d,c)}function wH(n,t){ck(n,"connected",t),!1===t&&function g9(n){QC(n,"onDisconnectEvents");const t=VD(n),e=OA();kN(n.onDisconnect_,ki(),(r,s)=>{const c=hH(r,s,n.serverSyncTree_,t);qC(e,r,c)});let i=[];kN(e,ki(),(r,s)=>{i=i.concat(ND(n.serverSyncTree_,r,s));const c=fk(n,r);JC(n,c)}),n.onDisconnect_=OA(),pd(n.eventQueue_,ki(),i)}(n)}function ck(n,t,e){const i=new Zi("/.info/"+t),r=hs(e);n.infoData_.updateSnapshot(i,r);const s=ND(n.infoSyncTree_,i,r);pd(n.eventQueue_,i,s)}function KA(n){return n.nextWriteId_++}function uk(n,t,e,i,r){QC(n,"set",{path:t.toString(),value:e,priority:i});const s=VD(n),c=hs(e,i),d=GA(n.serverSyncTree_,t),p=tk(c,d,s),v=KA(n),E=ZN(n.serverSyncTree_,t,p,v,!0);YA(n.eventQueue_,E),n.server_.put(t.toString(),c.val(!0),(N,F)=>{const G="ok"===N;G||ll("set at "+t+" failed: "+N);const J=S_(n.serverSyncTree_,v,!G);pd(n.eventQueue_,t,J),I_(0,r,N,F)});const S=fk(n,t);JC(n,S),pd(n.eventQueue_,S,[])}function m9(n,t,e){n.server_.onDisconnectCancel(t.toString(),(i,r)=>{"ok"===i&&NN(n.onDisconnect_,t),I_(0,e,i,r)})}function EH(n,t,e,i){const r=hs(e);n.server_.onDisconnectPut(t.toString(),r.val(!0),(s,c)=>{"ok"===s&&qC(n.onDisconnect_,t,r),I_(0,i,s,c)})}function dk(n,t,e){let i;i=".info"===Yn(t._path)?YN(n.infoSyncTree_,t,e):YN(n.serverSyncTree_,t,e),lk(n.eventQueue_,t._path,i)}function TH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(yH)}function QC(n,...t){let e="";n.persistentConnection_&&(e=n.persistentConnection_.id+":"),na(e,...t)}function I_(n,t,e,i){t&&HC(()=>{if("ok"===e)t(null);else{const r=(e||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,t(c)}})}function hk(n,t,e){return GA(n.serverSyncTree_,t,e)||Fn.EMPTY_NODE}function QA(n,t=n.transactionQueueTree_){if(t||JA(n,t),r0(t)){const e=SH(n,t);(0,z.hu)(e.length>0,"Sending zero length transaction queue"),e.every(r=>0===r.status)&&function w9(n,t,e){const i=e.map(v=>v.currentWriteId),r=hk(n,t,i);let s=r;const c=r.hash();for(let v=0;v<e.length;v++){const E=e[v];(0,z.hu)(0===E.status,"tryToSendTransactionQueue_: items in queue should all be run."),E.status=1,E.retryCount++;const S=zl(t,E.path);s=s.updateChild(S,E.currentOutputSnapshotRaw)}const d=s.val(!0),p=t;n.server_.put(p.toString(),d,v=>{QC(n,"transaction put response",{path:p.toString(),status:v});let E=[];if("ok"===v){const S=[];for(let N=0;N<e.length;N++)e[N].status=2,E=E.concat(S_(n.serverSyncTree_,e[N].currentWriteId)),e[N].onComplete&&S.push(()=>e[N].onComplete(null,!0,e[N].currentOutputSnapshotResolved)),e[N].unwatcher();JA(n,zA(n.transactionQueueTree_,t)),QA(n,n.transactionQueueTree_),pd(n.eventQueue_,t,E);for(let N=0;N<S.length;N++)HC(S[N])}else{if("datastale"===v)for(let S=0;S<e.length;S++)e[S].status=3===e[S].status?4:0;else{ll("transaction at "+p.toString()+" failed: "+v);for(let S=0;S<e.length;S++)e[S].status=4,e[S].abortReason=v}JC(n,t)}},c)}(n,PD(t),e)}else fH(t)&&qA(t,e=>{QA(n,e)})}function JC(n,t){const e=DH(n,t),i=PD(e);return function E9(n,t,e){if(0===t.length)return;const i=[];let r=[];const c=t.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<t.length;d++){const p=t[d],v=zl(e,p.path);let S,E=!1;if((0,z.hu)(null!==v,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)E=!0,S=p.abortReason,r=r.concat(S_(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)E=!0,S="maxretry",r=r.concat(S_(n.serverSyncTree_,p.currentWriteId,!0));else{const N=hk(n,p.path,c);p.currentInputSnapshot=N;const F=t[d].update(N.val());if(void 0!==F){LD("transaction failed: Data returned ",F,p.path);let G=hs(F);"object"==typeof F&&null!=F&&(0,z.r3)(F,".priority")||(G=G.updatePriority(N.getPriority()));const de=p.currentWriteId,$e=VD(n),Ke=tk(G,N,$e);p.currentOutputSnapshotRaw=G,p.currentOutputSnapshotResolved=Ke,p.currentWriteId=KA(n),c.splice(c.indexOf(de),1),r=r.concat(ZN(n.serverSyncTree_,p.path,Ke,p.currentWriteId,p.applyLocally)),r=r.concat(S_(n.serverSyncTree_,de,!0))}else E=!0,S="nodata",r=r.concat(S_(n.serverSyncTree_,p.currentWriteId,!0))}pd(n.eventQueue_,e,r),r=[],E&&(t[d].status=2,setTimeout(t[d].unwatcher,Math.floor(0)),t[d].onComplete&&i.push("nodata"===S?()=>t[d].onComplete(null,!1,t[d].currentInputSnapshot):()=>t[d].onComplete(new Error(S),!1,null)))}JA(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)HC(i[d]);QA(n,n.transactionQueueTree_)}(n,SH(n,e),i),i}function DH(n,t){let e,i=n.transactionQueueTree_;for(e=Yn(t);null!==e&&void 0===r0(i);)i=zA(i,e),e=Yn(t=yr(t));return i}function SH(n,t){const e=[];return IH(n,t,e),e.sort((i,r)=>i.order-r.order),e}function IH(n,t,e){const i=r0(t);if(i)for(let r=0;r<i.length;r++)e.push(i[r]);qA(t,r=>{IH(n,r,e)})}function JA(n,t){const e=r0(t);if(e){let i=0;for(let r=0;r<e.length;r++)2!==e[r].status&&(e[i]=e[r],i++);e.length=i,rk(t,e.length>0?e:void 0)}qA(t,i=>{JA(n,i)})}function fk(n,t){const e=PD(DH(n,t)),i=zA(n.transactionQueueTree_,t);return function e9(n,t,e){let i=e?n:n.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,r=>{pk(n,r)}),pk(n,i),pH(i,r=>{pk(n,r)}),e}function pk(n,t){const e=r0(t);if(e){const i=[];let r=[],s=-1;for(let c=0;c<e.length;c++)3===e[c].status||(1===e[c].status?((0,z.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,e[c].status=3,e[c].abortReason="set"):((0,z.hu)(0===e[c].status,"Unexpected transaction status in abort"),e[c].unwatcher(),r=r.concat(S_(n.serverSyncTree_,e[c].currentWriteId,!0)),e[c].onComplete&&i.push(e[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?rk(t,void 0):e.length=s+1,pd(n.eventQueue_,PD(t),r);for(let c=0;c<i.length;c++)HC(i[c])}}const gk=function(n,t){const e=S9(n),i=e.namespace;return"firebase.com"===e.domain&&Bf(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==e.domain&&Bf("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ll("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gN(e.host,e.secure,i,"ws"===e.scheme||"wss"===e.scheme,t,"",i!==e.subdomain),path:new Zi(e.pathString)}},S9=function(n){let t="",e="",i="",r="",s="",c=!0,d="https",p=443;if("string"==typeof n){let v=n.indexOf("//");v>=0&&(d=n.substring(0,v-1),n=n.substring(v+2));let E=n.indexOf("/");-1===E&&(E=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),t=n.substring(0,Math.min(E,S)),E<S&&(r=function T9(n){let t="";const e=n.split("/");for(let i=0;i<e.length;i++)if(e[i].length>0){let r=e[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}t+="/"+r}return t}(n.substring(E,S)));const N=function D9(n){const t={};"?"===n.charAt(0)&&(n=n.substring(1));for(const e of n.split("&")){if(0===e.length)continue;const i=e.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):ll(`Invalid query segment '${e}' in query '${n}'`)}return t}(n.substring(Math.min(n.length,S)));v=t.indexOf(":"),v>=0?(c="https"===d||"wss"===d,p=parseInt(t.substring(v+1),10)):v=t.length;const F=t.slice(0,v);if("localhost"===F.toLowerCase())e="localhost";else if(F.split(".").length<=2)e=F;else{const G=t.indexOf(".");i=t.substring(0,G).toLowerCase(),e=t.substring(G+1),s=i}"ns"in N&&(s=N.ns)}return{host:t,port:p,domain:e,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class AH{constructor(t,e,i,r){this.eventType=t,this.eventRegistration=e,this.snapshot=i,this.prevName=r}getPath(){const t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,z.Pz)(this.snapshot.exportVal())}}class xH{constructor(t,e,i){this.eventRegistration=t,this.error=e,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class RH{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return(0,z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}}class MH{constructor(t,e){this._repo=t,this._path=e}cancel(){const t=new z.BH;return m9(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){fd("OnDisconnect.remove",this._path);const t=new z.BH;return EH(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){fd("OnDisconnect.set",this._path),Hf("OnDisconnect.set",t,this._path,!1);const e=new z.BH;return EH(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){fd("OnDisconnect.setWithPriority",this._path),Hf("OnDisconnect.setWithPriority",t,this._path,!1),ak("OnDisconnect.setWithPriority",e,!1);const i=new z.BH;return function _9(n,t,e,i,r){const s=hs(e,i);n.server_.onDisconnectPut(t.toString(),s.val(!0),(c,d)=>{"ok"===c&&qC(n.onDisconnect_,t,s),I_(0,r,c,d)})}(this._repo,this._path,t,e,i.wrapCallback(()=>{})),i.promise}update(t){fd("OnDisconnect.update",this._path),mH("OnDisconnect.update",t,this._path,!1);const e=new z.BH;return function v9(n,t,e,i){if((0,z.xb)(e))return na("onDisconnect().update() called with empty data.  Don't do anything."),void I_(0,i,"ok",void 0);n.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{"ok"===r&&ia(e,(c,d)=>{const p=hs(d);qC(n.onDisconnect_,Xr(t,c),p)}),I_(0,i,r,s)})}(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}}class kc{constructor(t,e,i,r){this._repo=t,this._path=e,this._queryParams=i,this._orderByCalled=r}get key(){return Kn(this._path)?null:CN(this._path)}get ref(){return new gd(this._repo,this._path)}get _queryIdentifier(){const t=FV(this._queryParams),e=hN(t);return"{}"===e?"default":e}get _queryObject(){return FV(this._queryParams)}isEqual(t){if(!((t=(0,z.m9)(t))instanceof kc))return!1;const e=this._repo===t._repo,i=wN(this._path,t._path);return e&&i&&this._queryIdentifier===t._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function pK(n){let t="";for(let e=n.pieceNum_;e<n.pieces_.length;e++)""!==n.pieces_[e]&&(t+="/"+encodeURIComponent(String(n.pieces_[e])));return t||"/"}(this._path)}}function XA(n,t){if(!0===n._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function A_(n){let t=null,e=null;if(n.hasStart()&&(t=n.getIndexStartValue()),n.hasEnd()&&(e=n.getIndexEndValue()),n.getIndex()===Vf){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==_g)throw new Error(i);if("string"!=typeof t)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Uf)throw new Error(i);if("string"!=typeof e)throw new Error(r)}}else if(n.getIndex()===Rr){if(null!=t&&!FD(t)||null!=e&&!FD(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,z.hu)(n.getIndex()instanceof IN||n.getIndex()===AN,"unknown index type."),null!=t&&"object"==typeof t||null!=e&&"object"==typeof e)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ex(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class gd extends kc{constructor(t,e){super(t,e,new xA,!1)}get parent(){const t=bV(this._path);return null===t?null:new gd(this._repo,t)}get root(){let t=this;for(;null!==t.parent;)t=t.parent;return t}}class s0{constructor(t,e,i){this._node=t,this.ref=e,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){const e=new Zi(t),i=o0(this.ref,t);return new s0(this._node.getChild(e),i,Rr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>t(new s0(r,o0(this.ref,i),Rr)))}hasChild(t){const e=new Zi(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function OH(n,t){return(n=(0,z.m9)(n))._checkNotDeleted("ref"),void 0!==t?o0(n._root,t):n._root}function NH(n,t){(n=(0,z.m9)(n))._checkNotDeleted("refFromURL");const e=gk(t,n._repo.repoInfo_.nodeAdmin);_H("refFromURL",e);const i=e.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Bf("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),OH(n,e.path.toString())}function o0(n,t){return null===Yn((n=(0,z.m9)(n))._path)?(e=t,e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),UD("child","path",e,!1)):UD("child","path",t,!1),new gd(n._repo,Xr(n._path,t));var e}function mk(n,t){n=(0,z.m9)(n),fd("set",n._path),Hf("set",t,n._path,!1);const e=new z.BH;return uk(n._repo,n._path,t,null,e.wrapCallback(()=>{})),e.promise}function M9(n,t){mH("update",t,n._path,!1);const e=new z.BH;return function p9(n,t,e,i){QC(n,"update",{path:t.toString(),value:e});let r=!0;const s=VD(n),c={};if(ia(e,(d,p)=>{r=!1,c[d]=hH(Xr(t,d),hs(p),n.serverSyncTree_,s)}),r)na("update() called with empty data.  Don't do anything."),I_(0,i,"ok",void 0);else{const d=KA(n),p=function U7(n,t,e,i){!function t7(n,t,e,i){(0,z.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:t,children:e,writeId:i,visible:!0}),n.visibleWrites=UN(n.visibleWrites,t,e),n.lastWriteId=i}(n.pendingWriteTree_,t,e,i);const r=Mr.fromObject(e);return KC(n,new ZC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,r))}(n.serverSyncTree_,t,c,d);YA(n.eventQueue_,p),n.server_.merge(t.toString(),e,(v,E)=>{const S="ok"===v;S||ll("update at "+t+" failed: "+v);const N=S_(n.serverSyncTree_,d,!S),F=N.length>0?JC(n,t):t;pd(n.eventQueue_,F,N),I_(0,i,v,E)}),ia(e,v=>{const E=fk(n,Xr(t,v));JC(n,E)}),pd(n.eventQueue_,t,[])}}(n._repo,n._path,t,e.wrapCallback(()=>{})),e.promise}function O9(n){return function f9(n,t){const e=function W7(n,t){const e=t._path;let i=null;n.syncPointTree_.foreachOnPath(e,(v,E)=>{const S=zl(v,e);i=i||T_(E,S)});let r=n.syncPointTree_.get(e);r?i=i||T_(r,ki()):(r=new tH,n.syncPointTree_=n.syncPointTree_.set(e,r));const s=null!=i,c=s?new w_(i,!0,!1):null;return function I7(n){return PA(n.viewCache_)}(nH(r,t,FA(n.pendingWriteTree_,t._path),s?c.getNode():Fn.EMPTY_NODE,s))}(n.serverSyncTree_,t);return null!=e?Promise.resolve(e):n.server_.get(t).then(i=>{const r=hs(i).withIndex(t._queryParams.getIndex()),s=ND(n.serverSyncTree_,t._path,r);return lk(n.eventQueue_,t._path,s),Promise.resolve(r)},i=>(QC(n,"get for query "+(0,z.Pz)(t)+" failed: "+i),Promise.reject(new Error(i))))}((n=(0,z.m9)(n))._repo,n).then(t=>new s0(t,new gd(n._repo,n._path),n._queryParams.getIndex()))}class tx{constructor(t){this.callbackContext=t}respondsTo(t){return"value"===t}createEvent(t,e){const i=e._queryParams.getIndex();return new AH("value",this,new s0(t.snapshotNode,new gd(e._repo,e._path),i))}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new xH(this,t,e):null}matches(t){return t instanceof tx&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class nx{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new xH(this,t,e):null}createEvent(t,e){(0,z.hu)(null!=t.childName,"Child events should have a childName.");const i=o0(new gd(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new AH(t.type,this,new s0(t.snapshotNode,i,r),t.prevName)}getEventRunner(t){return"cancel"===t.getEventType()?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof nx&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function HD(n,t,e,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const p=e,v=(E,S)=>{dk(n._repo,n,d),p(E,S)};v.userCallback=e.userCallback,v.context=e.context,e=v}const c=new RH(e,s||void 0),d="value"===t?new tx(c):new nx(t,c);return function y9(n,t,e){let i;i=".info"===Yn(t._path)?aH(n.infoSyncTree_,t,e):aH(n.serverSyncTree_,t,e),lk(n.eventQueue_,t._path,i)}(n._repo,n,d),()=>dk(n._repo,n,d)}function _k(n,t,e,i){return HD(n,"value",t,e,i)}function kH(n,t,e,i){return HD(n,"child_added",t,e,i)}function PH(n,t,e,i){return HD(n,"child_changed",t,e,i)}function FH(n,t,e,i){return HD(n,"child_moved",t,e,i)}function LH(n,t,e,i){return HD(n,"child_removed",t,e,i)}function BH(n,t,e){let i=null;const r=e?new RH(e):null;"value"===t?i=new tx(r):t&&(i=new nx(t,r)),dk(n._repo,n,i)}class mh{}class UH extends mh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Hf("endAt",this._value,t._path,!0);const e=ON(t._queryParams,this._value,this._key);if(ex(e),A_(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kc(t._repo,t._path,e,t._orderByCalled)}}class k9 extends mh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Hf("endBefore",this._value,t._path,!1);const e=function jK(n,t,e){let i,r;return n.index_===Vf?("string"==typeof t&&(t=NV(t)),r=ON(n,t,e)):(i=null==e?_g:NV(e),r=ON(n,t,i)),r.endBeforeSet_=!0,r}(t._queryParams,this._value,this._key);if(ex(e),A_(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new kc(t._repo,t._path,e,t._orderByCalled)}}class VH extends mh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Hf("startAt",this._value,t._path,!0);const e=MN(t._queryParams,this._value,this._key);if(ex(e),A_(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new kc(t._repo,t._path,e,t._orderByCalled)}}class L9 extends mh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){Hf("startAfter",this._value,t._path,!1);const e=function HK(n,t,e){let i;if(n.index_===Vf)"string"==typeof t&&(t=OV(t)),i=MN(n,t,e);else{let r;r=null==e?Uf:OV(e),i=MN(n,t,r)}return i.startAfterSet_=!0,i}(t._queryParams,this._value,this._key);if(ex(e),A_(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new kc(t._repo,t._path,e,t._orderByCalled)}}class U9 extends mh{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new kc(t._repo,t._path,function UK(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}(t._queryParams,this._limit),t._orderByCalled)}}class H9 extends mh{constructor(t){super(),this._limit=t}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new kc(t._repo,t._path,function VK(n,t){const e=n.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}(t._queryParams,this._limit),t._orderByCalled)}}class G9 extends mh{constructor(t){super(),this._path=t}_apply(t){XA(t,"orderByChild");const e=new Zi(this._path);if(Kn(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new IN(e),r=RA(t._queryParams,i);return A_(r),new kc(t._repo,t._path,r,!0)}}class W9 extends mh{_apply(t){XA(t,"orderByKey");const e=RA(t._queryParams,Vf);return A_(e),new kc(t._repo,t._path,e,!0)}}class q9 extends mh{_apply(t){XA(t,"orderByPriority");const e=RA(t._queryParams,Rr);return A_(e),new kc(t._repo,t._path,e,!0)}}class Y9 extends mh{_apply(t){XA(t,"orderByValue");const e=RA(t._queryParams,AN);return A_(e),new kc(t._repo,t._path,e,!0)}}class Q9 extends mh{constructor(t,e){super(),this._value=t,this._key=e}_apply(t){if(Hf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new UH(this._value,this._key)._apply(new VH(this._value,this._key)._apply(t))}}function _h(n,...t){let e=(0,z.m9)(n);for(const i of t)e=i._apply(e);return e}(function M7(n){(0,z.hu)(!VA,"__referenceConstructor has already been defined"),VA=n})(gd),function F7(n){(0,z.hu)(!jA,"__referenceConstructor has already been defined"),jA=n}(gd);const vk={};function jH(n,t,e,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Bf("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),na("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,v,c=gk(s,r),d=c.repoInfo;"undefined"!=typeof process&&process.env&&(v=process.env.FIREBASE_DATABASE_EMULATOR_HOST),v?(p=!0,s=`http://${v}?ns=${d.namespace}`,c=gk(s,r),d=c.repoInfo):p=!c.repoInfo.secure;const E=r&&p?new CD(CD.OWNER):new GY(n.name,n.options,t);_H("Invalid Firebase Database URL",c),Kn(c.path)||Bf("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function nQ(n,t,e,i){let r=vk[t.name];r||(r={},vk[t.name]=r);let s=r[n.toURLString()];return s&&Bf("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new u9(n,false,e,i),r[n.toURLString()]=s,s}(d,n,E,new jY(n.name,e));return new rQ(S,n)}class rQ{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function d9(n,t,e){if(n.stats_=vN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new MA(n.repoInfo_,(i,r,s,c)=>{CH(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wH(n,!0),0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,z.Pz)(e)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Xy(n.repoInfo_,t,(i,r,s,c)=>{CH(n,i,r,s,c)},i=>{wH(n,i)},i=>{!function h9(n,t){ia(t,(e,i)=>{ck(n,e,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,e),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function zY(n,t){const e=n.toString();return _N[e]||(_N[e]=t()),_N[e]}(n.repoInfo_,()=>new ZK(n.stats_,n.server_)),n.infoData_=new GK,n.infoSyncTree_=new oH({startListening:(i,r,s,c)=>{let d=[];const p=n.infoData_.getNode(i._path);return p.isEmpty()||(d=ND(n.infoSyncTree_,i._path,p),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),ck(n,"connected",!1),n.serverSyncTree_=new oH({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,p)=>{const v=c(d,p);pd(n.eventQueue_,i._path,v)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new gd(this._repo,ki())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function tQ(n,t){const e=vk[t];(!e||e[n.key]!==n)&&Bf(`Database ${t}(${n.repoInfo_}) has already been deleted.`),TH(n),delete e[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){null===this._rootInternal&&Bf("Cannot call "+t+" on a deleted database.")}}function GH(){lV.IS_TRANSPORT_INITIALIZED&&ll("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function sQ(){GH(),b_.forceDisallow()}function oQ(){GH(),jC.forceDisallow(),b_.forceAllow()}function uQ(n,t){jU(n,t)}const hQ={".sv":"timestamp"};class gQ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xy.prototype.simpleListen=function(n,t){this.sendRequest("q",{p:n},t)},Xy.prototype.echo=function(n,t){this.sendRequest("echo",{d:n},t)},function dQ(n){LU(Io.SDK_VERSION),(0,Io._registerComponent)(new Xa.wA("database",(t,{instanceIdentifier:e})=>jH(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),t.getProvider("app-check-internal"),e),"PUBLIC").setMultipleInstances(!0)),(0,Io.registerVersion)(PU,"0.13.0",n),(0,Io.registerVersion)(PU,"0.13.0","esm2017")}();const yQ=new Rl.Yd("@firebase/database-compat"),$H=function(n){yQ.warn("FIREBASE WARNING: "+n)};class wQ{constructor(t){this._delegate=t}cancel(t){(0,z.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,z.Wj)("OnDisconnect.cancel","onComplete",t,!0);const e=this._delegate.cancel();return t&&e.then(()=>t(null),i=>t(i)),e}remove(t){(0,z.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,z.Wj)("OnDisconnect.remove","onComplete",t,!0);const e=this._delegate.remove();return t&&e.then(()=>t(null),i=>t(i)),e}set(t,e){(0,z.Dv)("OnDisconnect.set",1,2,arguments.length),(0,z.Wj)("OnDisconnect.set","onComplete",e,!0);const i=this._delegate.set(t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,z.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,z.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(t,e);return i&&r.then(()=>i(null),s=>i(s)),r}update(t,e){if((0,z.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,$H("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,z.Wj)("OnDisconnect.update","onComplete",e,!0);const i=this._delegate.update(t);return e&&i.then(()=>e(null),r=>e(r)),i}}class EQ{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return(0,z.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class x_{constructor(t,e){this._database=t,this._delegate=e}val(){return(0,z.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,z.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,z.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,z.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return(0,z.Dv)("DataSnapshot.child",0,1,arguments.length),t=String(t),UD("DataSnapshot.child","path",t,!1),new x_(this._database,this._delegate.child(t))}hasChild(t){return(0,z.Dv)("DataSnapshot.hasChild",1,1,arguments.length),UD("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return(0,z.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return(0,z.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,z.Wj)("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new x_(this._database,e)))}hasChildren(){return(0,z.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,z.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,z.Dv)("DataSnapshot.ref",0,0,arguments.length),new Au(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ka{constructor(t,e){this.database=t,this._delegate=e}on(t,e,i,r){var s;(0,z.Dv)("Query.on",2,4,arguments.length),(0,z.Wj)("Query.on","callback",e,!1);const c=ka.getCancelAndContextArgs_("Query.on",i,r),d=(v,E)=>{e.call(c.context,new x_(this.database,v),E)};d.userCallback=e,d.context=c.context;const p=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(t){case"value":return _k(this._delegate,d,p),e;case"child_added":return kH(this._delegate,d,p),e;case"child_removed":return LH(this._delegate,d,p),e;case"child_changed":return PH(this._delegate,d,p),e;case"child_moved":return FH(this._delegate,d,p),e;default:throw new Error((0,z.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,i){if((0,z.Dv)("Query.off",0,3,arguments.length),function(n,t,e){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,z.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),(0,z.Wj)("Query.off","callback",e,!0),(0,z.lb)("Query.off","context",i,!0),e){const r=()=>{};r.userCallback=e,r.context=i,BH(this._delegate,t,r)}else BH(this._delegate,t)}get(){return O9(this._delegate).then(t=>new x_(this.database,t))}once(t,e,i,r){(0,z.Dv)("Query.once",1,4,arguments.length),(0,z.Wj)("Query.once","callback",e,!0);const s=ka.getCancelAndContextArgs_("Query.once",i,r),c=new z.BH,d=(v,E)=>{const S=new x_(this.database,v);e&&e.call(s.context,S,E),c.resolve(S)};d.userCallback=e,d.context=s.context;const p=v=>{s.cancel&&s.cancel.call(s.context,v),c.reject(v)};switch(t){case"value":_k(this._delegate,d,p,{onlyOnce:!0});break;case"child_added":kH(this._delegate,d,p,{onlyOnce:!0});break;case"child_removed":LH(this._delegate,d,p,{onlyOnce:!0});break;case"child_changed":PH(this._delegate,d,p,{onlyOnce:!0});break;case"child_moved":FH(this._delegate,d,p,{onlyOnce:!0});break;default:throw new Error((0,z.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(t){return(0,z.Dv)("Query.limitToFirst",1,1,arguments.length),new ka(this.database,_h(this._delegate,function V9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new U9(n)}(t)))}limitToLast(t){return(0,z.Dv)("Query.limitToLast",1,1,arguments.length),new ka(this.database,_h(this._delegate,function j9(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new H9(n)}(t)))}orderByChild(t){return(0,z.Dv)("Query.orderByChild",1,1,arguments.length),new ka(this.database,_h(this._delegate,function $9(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return UD("orderByChild","path",n,!1),new G9(n)}(t)))}orderByKey(){return(0,z.Dv)("Query.orderByKey",0,0,arguments.length),new ka(this.database,_h(this._delegate,function z9(){return new W9}()))}orderByPriority(){return(0,z.Dv)("Query.orderByPriority",0,0,arguments.length),new ka(this.database,_h(this._delegate,function Z9(){return new q9}()))}orderByValue(){return(0,z.Dv)("Query.orderByValue",0,0,arguments.length),new ka(this.database,_h(this._delegate,function K9(){return new Y9}()))}startAt(t=null,e){return(0,z.Dv)("Query.startAt",0,2,arguments.length),new ka(this.database,_h(this._delegate,function F9(n=null,t){return BD("startAt","key",t,!0),new VH(n,t)}(t,e)))}startAfter(t=null,e){return(0,z.Dv)("Query.startAfter",0,2,arguments.length),new ka(this.database,_h(this._delegate,function B9(n,t){return BD("startAfter","key",t,!0),new L9(n,t)}(t,e)))}endAt(t=null,e){return(0,z.Dv)("Query.endAt",0,2,arguments.length),new ka(this.database,_h(this._delegate,function N9(n,t){return BD("endAt","key",t,!0),new UH(n,t)}(t,e)))}endBefore(t=null,e){return(0,z.Dv)("Query.endBefore",0,2,arguments.length),new ka(this.database,_h(this._delegate,function P9(n,t){return BD("endBefore","key",t,!0),new k9(n,t)}(t,e)))}equalTo(t,e){return(0,z.Dv)("Query.equalTo",1,2,arguments.length),new ka(this.database,_h(this._delegate,function J9(n,t){return BD("equalTo","key",t,!0),new Q9(n,t)}(t,e)))}toString(){return(0,z.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,z.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if((0,z.Dv)("Query.isEqual",1,1,arguments.length),!(t instanceof ka))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,i){const r={cancel:void 0,context:void 0};if(e&&i)r.cancel=e,(0,z.Wj)(t,"cancel",r.cancel,!0),r.context=i,(0,z.lb)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error((0,z.gK)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r}get ref(){return new Au(this.database,new gd(this._delegate._repo,this._delegate._path))}}class Au extends ka{constructor(t,e){super(t,new kc(e._repo,e._path,new xA,!1)),this.database=t,this._delegate=e}getKey(){return(0,z.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return(0,z.Dv)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Au(this.database,o0(this._delegate,t))}getParent(){(0,z.Dv)("Reference.parent",0,0,arguments.length);const t=this._delegate.parent;return t?new Au(this.database,t):null}getRoot(){return(0,z.Dv)("Reference.root",0,0,arguments.length),new Au(this.database,this._delegate.root)}set(t,e){(0,z.Dv)("Reference.set",1,2,arguments.length),(0,z.Wj)("Reference.set","onComplete",e,!0);const i=mk(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}update(t,e){if((0,z.Dv)("Reference.update",1,2,arguments.length),Array.isArray(t)){const r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,$H("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}fd("Reference.update",this._delegate._path),(0,z.Wj)("Reference.update","onComplete",e,!0);const i=M9(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}setWithPriority(t,e,i){(0,z.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,z.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function R9(n,t,e){if(fd("setWithPriority",n._path),Hf("setWithPriority",t,n._path,!1),ak("setWithPriority",e,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new z.BH;return uk(n._repo,n._path,t,e,i.wrapCallback(()=>{})),i.promise}(this._delegate,t,e);return i&&r.then(()=>i(null),s=>i(s)),r}remove(t){(0,z.Dv)("Reference.remove",0,1,arguments.length),(0,z.Wj)("Reference.remove","onComplete",t,!0);const e=function A9(n){return fd("remove",n._path),mk(n,null)}(this._delegate);return t&&e.then(()=>t(null),i=>t(i)),e}transaction(t,e,i){(0,z.Dv)("Reference.transaction",1,3,arguments.length),(0,z.Wj)("Reference.transaction","transactionUpdate",t,!1),(0,z.Wj)("Reference.transaction","onComplete",e,!0),function(n,t,e,i){if(void 0!==e&&"boolean"!=typeof e)throw new Error((0,z.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function mQ(n,t,e){var i;if(n=(0,z.m9)(n),fd("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==e?void 0:e.applyLocally)||void 0===i||i,s=new z.BH,d=_k(n,()=>{});return function C9(n,t,e,i,r,s){QC(n,"transaction on "+t);const c={path:t,update:e,onComplete:i,status:null,order:UU(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=hk(n,t,void 0);c.currentInputSnapshot=d;const p=c.update(d.val());if(void 0===p)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{LD("transaction failed: Data returned ",p,c.path),c.status=0;const v=zA(n.transactionQueueTree_,t),E=r0(v)||[];let S;E.push(c),rk(v,E),"object"==typeof p&&null!==p&&(0,z.r3)(p,".priority")?(S=(0,z.DV)(p,".priority"),(0,z.hu)(FD(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(GA(n.serverSyncTree_,t)||Fn.EMPTY_NODE).getPriority().val();const N=VD(n),F=hs(p,S),G=tk(F,d,N);c.currentOutputSnapshotRaw=F,c.currentOutputSnapshotResolved=G,c.currentWriteId=KA(n);const J=ZN(n.serverSyncTree_,t,G,c.currentWriteId,c.applyLocally);pd(n.eventQueue_,t,J),QA(n,n.transactionQueueTree_)}}(n._repo,n._path,t,(p,v,E)=>{let S=null;p?s.reject(p):(S=new s0(E,new gd(n._repo,n._path),Rr),s.resolve(new gQ(v,S)))},d,r),s.promise}(this._delegate,t,{applyLocally:i}).then(s=>new EQ(s.committed,new x_(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){(0,z.Dv)("Reference.setPriority",1,2,arguments.length),(0,z.Wj)("Reference.setPriority","onComplete",e,!0);const i=function x9(n,t){n=(0,z.m9)(n),fd("setPriority",n._path),ak("setPriority",t,!1);const e=new z.BH;return uk(n._repo,Xr(n._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}(this._delegate,t);return e&&i.then(()=>e(null),r=>e(r)),i}push(t,e){(0,z.Dv)("Reference.push",0,2,arguments.length),(0,z.Wj)("Reference.push","onComplete",e,!0);const i=function I9(n,t){n=(0,z.m9)(n),fd("push",n._path),Hf("push",t,n._path,!0);const e=bH(n._repo),i=PK(e),r=o0(n,i),s=o0(n,i);let c;return c=null!=t?mk(s,t).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,t),r=i.then(c=>new Au(this.database,c));e&&r.then(()=>e(null),c=>e(c));const s=new Au(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return fd("Reference.onDisconnect",this._delegate._path),new wQ(new MH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class jD{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:sQ,forceLongPolling:oQ}}useEmulator(t,e,i={}){!function aQ(n,t,e,i={}){(n=(0,z.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Bf("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Bf('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new CD(CD.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,z.Sg)(i.mockUserToken,n.app.options.projectId);s=new CD(c)}!function eQ(n,t,e,i){n.repoInfo_=new gN(`${t}:${e}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,t,e,s)}(this._delegate,t,e,i)}ref(t){if((0,z.Dv)("database.ref",0,1,arguments.length),t instanceof Au){const e=NH(this._delegate,t.toString());return new Au(this,e)}{const e=OH(this._delegate,t);return new Au(this,e)}}refFromURL(t){(0,z.Dv)("database.refFromURL",1,1,arguments.length);const i=NH(this._delegate,t);return new Au(this,i)}goOffline(){return(0,z.Dv)("database.goOffline",0,0,arguments.length),function lQ(n){(n=(0,z.m9)(n))._checkNotDeleted("goOffline"),TH(n._repo)}(this._delegate)}goOnline(){return(0,z.Dv)("database.goOnline",0,0,arguments.length),function cQ(n){(n=(0,z.m9)(n))._checkNotDeleted("goOnline"),function b9(n){n.persistentConnection_&&n.persistentConnection_.resume(yH)}(n._repo)}(this._delegate)}}jD.ServerValue={TIMESTAMP:function fQ(){return hQ}(),increment:n=>function pQ(n){return{".sv":{increment:n}}}(n)};var DQ=Object.freeze({__proto__:null,initStandalone:function TQ({app:n,url:t,version:e,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){LU(e);const c=new Xa.zt("auth-internal",new Xa.H0("database-standalone"));return c.setComponent(new Xa.wA("auth-internal",()=>i,"PRIVATE")),{instance:new jD(jH(n,c,void 0,t,s),n),namespace:r}}});const SQ=jD.ServerValue;function WH(n){return null==n}function zH(n){return"function"==typeof n.set}function qH(n,t){return zH(t)?t:n.ref(t)}function ZH(n,t){if(function AQ(n){return"string"==typeof n}(n))return t.stringCase();if(zH(n))return t.firebaseCase();if(function xQ(n){return"function"==typeof n.exportVal}(n))return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function GD(n,t,e="on",i=Ju.z){return new Di.y(r=>{let s=null;return s=n[e](t,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===e&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===e?{unsubscribe(){null!=s&&n.off(t,s)}}:{unsubscribe(){}}}).pipe((0,Rt.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:t,payload:s,prevKey:c,key:d}}),(0,vM.B)())}function YH(n,t){const e=n.length;for(let i=0;i<e;i++)if(n[i].payload.key===t)return i;return-1}function OQ(n,t){const{payload:e,prevKey:i,key:r}=t,s=YH(n,r),c=function MQ(n,t){if(WH(t))return 0;{const e=YH(n,t);return-1===e?n.length:e+1}}(n,i);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let d=null;t.payload.forEach(p=>{const v={payload:p,type:"value",prevKey:d,key:p.key};return d=p.key,n=[...n,v],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(p=>p.payload.key!==e.key)).splice(c,0,t)}else{if(null==i)return[t,...n];(n=n.slice()).splice(c,0,t)}return n;case"child_removed":return n.filter(d=>d.payload.key!==e.key);case"child_changed":return n.map(d=>d.payload.key===r?t:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function KH(n){return(WH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function QH(n,t,e){return function RQ(n,t,e){return GD(n,"value","once",e).pipe(zi(i=>{const r=[dt(i)];return t.forEach(s=>r.push(GD(n,s,"on",e))),(0,IC.T)(...r).pipe(oo(OQ,[]))}),Ld())}(n,t=KH(t),e)}function JH(n,t,e){const i=(t=KH(t)).map(r=>GD(n,r,"on",e));return(0,IC.T)(...i)}function XH(n,t){return function(i,r){return ZH(i,{stringCase:()=>n.child(i)[t](r),firebaseCase:()=>i[t](r),snapshotCase:()=>i.ref[t](r)})}}function FQ(n){return function(e){return e?ZH(e,{stringCase:()=>n.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):n.remove()}}function ej(n,t){return function(){return GD(n,"value","on",t)}}!function IQ(n){n.INTERNAL.registerComponent(new Xa.wA("database-compat",(t,{instanceIdentifier:e})=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new jD(r,i)},"PUBLIC").setServiceProps({Reference:Au,Query:ka,Database:jD,DataSnapshot:x_,enableLogging:uQ,INTERNAL:DQ,ServerValue:SQ}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(av.Z);const UQ=new o.OlP("angularfire2.realtimeDatabaseURL"),VQ=new o.OlP("angularfire2.database.use-emulator");let HQ=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S,N,F,G,J,de){this.schedulers=d;const $e=p,Ke=(0,zr.on)(e,c,i);v&&GM(Ke,c,E,N,F,G,S,J),this.database=(0,zr.cc)(`${Ke.name}.database.${r}`,"AngularFireDatabase",Ke.name,()=>{const st=c.runOutsideAngular(()=>Ke.database(r||void 0));return $e&&st.useEmulator(...$e),st},[$e])}list(e,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,e));let s=r;return i&&(s=i(r)),function LQ(n,t){const e=t.schedulers.outsideAngular,i=t.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XH(i,"update"),set:XH(i,"set"),push:r=>i.push(r),remove:FQ(i),snapshotChanges:r=>QH(n,r,e).pipe(di.iC),stateChanges:r=>JH(n,r,e).pipe(di.iC),auditTrail:r=>function NQ(n,t,e){return function PQ(n,t,e){return function kQ(n,t){return GD(n,"value","on",t).pipe((0,Rt.U)(e=>{let i;return e.payload.forEach(r=>(i=r.key,!1)),{data:e,lastKeyToLoad:i}}))}(n,e).pipe(F1(t),(0,Rt.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(p=>p.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function MY(n){return(0,vi.e)((t,e)=>{let i=!1,r=0;t.subscribe((0,xn.x)(e,s=>(i||(i=!n(s,r++)))&&e.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Rt.U)(r=>r.actions))}(n,JH(n,t).pipe(oo((r,s)=>[...r,s],[])),e)}(n,r,e).pipe(di.iC),valueChanges:(r,s)=>QH(n,r,e).pipe((0,Rt.U)(d=>d.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),di.iC)}}(s,this)}object(e){return function BQ(n,t){return{query:n,snapshotChanges:()=>ej(n,t.schedulers.outsideAngular)().pipe(di.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>ej(n,t.schedulers.outsideAngular)().pipe(di.iC,(0,Rt.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qH(this.database,e)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(zr.Dh),o.LFG(zr.xv,8),o.LFG(UQ,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(di.HU),o.LFG(VQ,8),o.LFG(qT,8),o.LFG(LM,8),o.LFG(BM,8),o.LFG(UM,8),o.LFG(VM,8),o.LFG(HM,8),o.LFG(jM,8),o.LFG(zT,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jQ=(()=>{class n{constructor(){O1.Z.registerVersion("angularfire",di.q4.full,"rtdb-compat")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[HQ]}),n})(),$Q=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,ZO]]}),n})(),zQ=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,ZO],qO]}),n})(),qQ=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://sep6-movies-cloud.lm.r.appspot.com"}getCurrentRating(e,i){return console.log("henter rating"),this.http.get(this.apiUrl+"/api/v1/movie/getrating/"+i+","+e).pipe(Ro(1),Un(this.handleError))}handleError(e){let i="";return i=e.error instanceof ErrorEvent?e.error.message:`errorstatus: ${e.status}. Errormessage: ${e.message}`,window.alert(i),_i(()=>i)}rate(e,i,r){return this.http.post(this.apiUrl+"/api/v1/movie/rating/",{gmail:e,id:i,rating:r})}Unrate(e,i){return this.http.delete(this.apiUrl+"/api/v1/movie/deleterating/"+i+","+e).pipe(Ro(1),Un(this.handleError))}averageRating(e){return this.http.get(this.apiUrl+"/api/v1/movie/averagerating/"+e).pipe(Ro(1),Un(this.handleError))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function vh(n){return null!=n&&"false"!=`${n}`}function nj(n){return Array.isArray(n)?n:[n]}function fo(n){return null==n?"":"string"==typeof n?n:`${n}px`}function XC(n){return n instanceof o.SBq?n.nativeElement:n}function yk(n){return n&&"function"==typeof n.connect}class ij{applyChanges(t,e,i,r,s){t.forEachOperation((c,d,p)=>{let v,E;if(null==c.previousIndex){const S=i(c,d,p);v=e.createEmbeddedView(S.templateRef,S.context,S.index),E=1}else null==p?(e.remove(d),E=3):(v=e.get(d),e.move(v,p),E=2);s&&s({context:null==v?void 0:v.context,operation:E,record:c})})}detach(){}}const $D=new o.OlP("_ViewRepeater"),KQ=new o.OlP("cdk-dir-doc",{providedIn:"root",factory:function QQ(){return(0,o.f3M)(ve)}}),JQ=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let bk,ix=(()=>{class n{constructor(e){if(this.value="ltr",this.change=new o.vpe,e){const r=e.documentElement?e.documentElement.dir:null;this.value=function XQ(n){const t=(null==n?void 0:n.toLowerCase())||"";return"auto"===t&&"undefined"!=typeof navigator&&(null==navigator?void 0:navigator.language)?JQ.test(navigator.language)?"rtl":"ltr":"rtl"===t?"rtl":"ltr"}((e.body?e.body.dir:null)||r||"ltr")}}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(KQ,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),WD=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();try{bk="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){bk=!1}let zD,a0,Ck,yh=(()=>{class n{constructor(e){this._platformId=e,this.isBrowser=this._platformId?function wr(n){return n===Dh}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!bk)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.Lbi))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function qD(n){return function eJ(){if(null==zD&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>zD=!0}))}finally{zD=zD||!1}return zD}()?n:!!n.capture}function tJ(){if(null==a0){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return a0=!1,a0;if("scrollBehavior"in document.documentElement.style)a0=!0;else{const n=Element.prototype.scrollTo;a0=!!n&&!/\{\s*\[native code\]\s*\}/.test(n.toString())}}return a0}function wk(){let n="undefined"!=typeof document&&document?document.activeElement:null;for(;n&&n.shadowRoot;){const t=n.shadowRoot.activeElement;if(t===n)break;n=t}return n}function l0(n){return n.composedPath?n.composedPath()[0]:n.target}function Ek(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}let dJ=(()=>{class n{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),aj=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[dJ]}),n})(),uj=(()=>{class n{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return function gJ(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(e)&&"visible"===getComputedStyle(e).visibility}isTabbable(e){if(!this._platform.isBrowser)return!1;const i=function pJ(n){try{return n.frameElement}catch(t){return null}}(function EJ(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(e));if(i&&(-1===hj(i)||!this.isVisible(i)))return!1;let r=e.nodeName.toLowerCase(),s=hj(e);return e.hasAttribute("contenteditable")?-1!==s:!("iframe"===r||"object"===r||this._platform.WEBKIT&&this._platform.IOS&&!function CJ(n){let t=n.nodeName.toLowerCase(),e="input"===t&&n.type;return"text"===e||"password"===e||"select"===t||"textarea"===t}(e))&&("audio"===r?!!e.hasAttribute("controls")&&-1!==s:"video"===r?-1!==s&&(null!==s||this._platform.FIREFOX||e.hasAttribute("controls")):e.tabIndex>=0)}isFocusable(e,i){return function wJ(n){return!function _J(n){return function yJ(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function mJ(n){let t=n.nodeName.toLowerCase();return"input"===t||"select"===t||"button"===t||"textarea"===t}(n)||function vJ(n){return function bJ(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||dj(n))}(e)&&!this.isDisabled(e)&&((null==i?void 0:i.ignoreVisibility)||this.isVisible(e))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dj(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let t=n.getAttribute("tabindex");return!(!t||isNaN(parseInt(t,10)))}function hj(n){if(!dj(n))return null;const t=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}class TJ{constructor(t,e,i,r,s=!1){this._element=t,this._checker=e,this._ngZone=i,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){const e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){const i=this._getFirstTabbableElement(e);return null==i||i.focus(t),!!i}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=0;i<e.length;i++){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[i]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;const e=t.children;for(let i=e.length-1;i>=0;i--){const r=e[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[i]):null;if(r)return r}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe((0,ui.q)(1)).subscribe(t)}}let DJ=(()=>{class n{constructor(e,i,r){this._checker=e,this._ngZone=i,this._document=r}create(e,i=!1){return new TJ(e,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(uj),o.LFG(o.R0b),o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function fj(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}function pj(n){const t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!t||-1!==t.identifier||null!=t.radiusX&&1!==t.radiusX||null!=t.radiusY&&1!==t.radiusY)}const SJ=new o.OlP("cdk-input-modality-detector-options"),IJ={ignoreKeys:[18,17,224,91,16]},tw=qD({passive:!0,capture:!0});let AJ=(()=>{class n{constructor(e,i,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new gi(null),this._lastTouchMs=0,this._onKeydown=c=>{var d,p;(null===(p=null===(d=this._options)||void 0===d?void 0:d.ignoreKeys)||void 0===p?void 0:p.some(v=>v===c.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=l0(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<650||(this._modality.next(fj(c)?"keyboard":"mouse"),this._mostRecentTarget=l0(c))},this._onTouchstart=c=>{pj(c)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=l0(c))},this._options=Object.assign(Object.assign({},IJ),s),this.modalityDetected=this._modality.pipe(function uL(n){return zn((t,e)=>n<=e)}(1)),this.modalityChanged=this.modalityDetected.pipe(Ld()),e.isBrowser&&i.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,tw),r.addEventListener("mousedown",this._onMousedown,tw),r.addEventListener("touchstart",this._onTouchstart,tw)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,tw),document.removeEventListener("mousedown",this._onMousedown,tw),document.removeEventListener("touchstart",this._onTouchstart,tw))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yh),o.LFG(o.R0b),o.LFG(ve),o.LFG(SJ,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const RJ=new o.OlP("cdk-focus-monitor-default-options"),sx=qD({passive:!0,capture:!0});let mj=(()=>{class n{constructor(e,i,r,s,c){this._ngZone=e,this._platform=i,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new an.x,this._rootNodeFocusAndBlurListener=d=>{const p=l0(d),v="focus"===d.type?this._onFocus:this._onBlur;for(let E=p;E;E=E.parentElement)v.call(this,d,E)},this._document=s,this._detectionMode=(null==c?void 0:c.detectionMode)||0}monitor(e,i=!1){const r=XC(e);if(!this._platform.isBrowser||1!==r.nodeType)return dt(null);const s=function iJ(n){if(function nJ(){if(null==Ck){const n="undefined"!=typeof document?document.head:null;Ck=!(!n||!n.createShadowRoot&&!n.attachShadow)}return Ck}()){const t=n.getRootNode?n.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}(r)||this._getDocument(),c=this._elementInfo.get(r);if(c)return i&&(c.checkChildren=!0),c.subject;const d={checkChildren:i,subject:new an.x,rootNode:s};return this._elementInfo.set(r,d),this._registerGlobalListeners(d),d.subject}stopMonitoring(e){const i=XC(e),r=this._elementInfo.get(i);r&&(r.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(r))}focusVia(e,i,r){const s=XC(e);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([d,p])=>this._originChanged(d,i,p)):(this._setOrigin(i),"function"==typeof s.focus&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(e){return 1===this._detectionMode||!!(null==e?void 0:e.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(e,i){e.classList.toggle("cdk-focused",!!i),e.classList.toggle("cdk-touch-focused","touch"===i),e.classList.toggle("cdk-keyboard-focused","keyboard"===i),e.classList.toggle("cdk-mouse-focused","mouse"===i),e.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(e,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=e,this._originFromTouchInteraction="touch"===e&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(e,i){const r=this._elementInfo.get(i),s=l0(e);!r||!r.checkChildren&&i!==s||this._originChanged(i,this._getFocusOrigin(s),r)}_onBlur(e,i){const r=this._elementInfo.get(i);!r||r.checkChildren&&e.relatedTarget instanceof Node&&i.contains(e.relatedTarget)||(this._setClasses(i),this._emitOrigin(r.subject,null))}_emitOrigin(e,i){this._ngZone.run(()=>e.next(i))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;const i=e.rootNode,r=this._rootNodeFocusListenerCount.get(i)||0;r||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,sx),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,sx)}),this._rootNodeFocusListenerCount.set(i,r+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xr(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){const i=e.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const r=this._rootNodeFocusListenerCount.get(i);r>1?this._rootNodeFocusListenerCount.set(i,r-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,sx),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,sx),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,i,r){this._setClasses(e,i),this._emitOrigin(r.subject,i),this._lastFocusOrigin=i}_getClosestElementsInfo(e){const i=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&i.push([s,r])}),i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(yh),o.LFG(AJ),o.LFG(ve,8),o.LFG(RJ,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const _j="cdk-high-contrast-black-on-white",vj="cdk-high-contrast-white-on-black",Tk="cdk-high-contrast-active";let yj=(()=>{class n{constructor(e,i){this._platform=e,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const e=this._document.body.classList;e.remove(Tk),e.remove(_j),e.remove(vj),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(e.add(Tk),e.add(_j)):2===i&&(e.add(Tk),e.add(vj))}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yh),o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),MJ=(()=>{class n{constructor(e){e._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yj))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[aj]]}),n})();class bj{}const yg="*";function ZD(n,t){return{type:7,name:n,definitions:t,options:{}}}function c0(n,t=null){return{type:4,styles:t,timings:n}}function Cj(n,t=null){return{type:3,steps:n,options:t}}function wj(n,t=null){return{type:2,steps:n,options:t}}function ra(n){return{type:6,styles:n,offset:null}}function R_(n,t,e){return{type:0,name:n,styles:t,options:e}}function M_(n,t,e=null){return{type:1,expr:n,animation:t,options:e}}function Dk(n=null){return{type:9,options:n}}function Sk(n,t,e=null){return{type:11,selector:n,animation:t,options:e}}function Ej(n){Promise.resolve(null).then(n)}class YD{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){Ej(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class Tj{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,i=0,r=0;const s=this.players.length;0==s?Ej(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++e==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,e/i.totalTime):1;i.setPosition(r)})}getPosition(){const t=this.players.reduce((e,i)=>null===e||i.totalTime>e.totalTime?i:e,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}const mi=!1;function Dj(n){return new o.vHH(3e3,mi)}function fX(){return"undefined"!=typeof window&&void 0!==window.document}function Ak(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function O_(n){switch(n.length){case 0:return new YD;case 1:return n[0];default:return new Tj(n)}}function Sj(n,t,e,i,r={},s={}){const c=[],d=[];let p=-1,v=null;if(i.forEach(E=>{const S=E.offset,N=S==p,F=N&&v||{};Object.keys(E).forEach(G=>{let J=G,de=E[G];if("offset"!==G)switch(J=t.normalizePropertyName(J,c),de){case"!":de=r[G];break;case yg:de=s[G];break;default:de=t.normalizeStyleValue(G,J,de,c)}F[J]=de}),N||d.push(F),v=F,p=S}),c.length)throw function nX(n){return new o.vHH(3502,mi)}();return d}function xk(n,t,e,i){switch(t){case"start":n.onStart(()=>i(e&&Rk(e,"start",n)));break;case"done":n.onDone(()=>i(e&&Rk(e,"done",n)));break;case"destroy":n.onDestroy(()=>i(e&&Rk(e,"destroy",n)))}}function Rk(n,t,e){const i=e.totalTime,s=Mk(n.element,n.triggerName,n.fromState,n.toState,t||n.phaseName,null==i?n.totalTime:i,!!e.disabled),c=n._data;return null!=c&&(s._data=c),s}function Mk(n,t,e,i,r="",s=0,c){return{element:n,triggerName:t,fromState:e,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function xu(n,t,e){let i;return n instanceof Map?(i=n.get(t),i||n.set(t,i=e)):(i=n[t],i||(i=n[t]=e)),i}function Ij(n){const t=n.indexOf(":");return[n.substring(1,t),n.substr(t+1)]}let Ok=(n,t)=>!1,Aj=(n,t,e)=>[],xj=null;function Nk(n){const t=n.parentNode||n.host;return t===xj?null:t}(Ak()||"undefined"!=typeof Element)&&(fX()?(xj=(()=>document.documentElement)(),Ok=(n,t)=>{for(;t;){if(t===n)return!0;t=Nk(t)}return!1}):Ok=(n,t)=>n.contains(t),Aj=(n,t,e)=>{if(e)return Array.from(n.querySelectorAll(t));const i=n.querySelector(t);return i?[i]:[]});let u0=null,Rj=!1;function Mj(n){u0||(u0=function gX(){return"undefined"!=typeof document?document.body:null}()||{},Rj=!!u0.style&&"WebkitAppearance"in u0.style);let t=!0;return u0.style&&!function pX(n){return"ebkit"==n.substring(1,6)}(n)&&(t=n in u0.style,!t&&Rj&&(t="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in u0.style)),t}const Oj=Ok,Nj=Aj;let kj=(()=>{class n{validateStyleProperty(e){return Mj(e)}matchesElement(e,i){return!1}containsElement(e,i){return Oj(e,i)}getParentElement(e){return Nk(e)}query(e,i,r){return Nj(e,i,r)}computeStyle(e,i,r){return r||""}animate(e,i,r,s,c,d=[],p){return new YD(r,s)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),kk=(()=>{class n{}return n.NOOP=new kj,n})();const Pk="ng-enter",ax="ng-leave",lx="ng-trigger",cx=".ng-trigger",Fj="ng-animating",Fk=".ng-animating";function d0(n){if("number"==typeof n)return n;const t=n.match(/^(-?[\.\d]+)(m?s)/);return!t||t.length<2?0:Lk(parseFloat(t[1]),t[2])}function Lk(n,t){return"s"===t?1e3*n:n}function ux(n,t,e){return n.hasOwnProperty("duration")?n:function vX(n,t,e){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return t.push(Dj()),{duration:0,delay:0,easing:""};r=Lk(parseFloat(d[1]),d[2]);const p=d[3];null!=p&&(s=Lk(parseFloat(p),d[4]));const v=d[5];v&&(c=v)}else r=n;if(!e){let d=!1,p=t.length;r<0&&(t.push(function kJ(){return new o.vHH(3100,mi)}()),d=!0),s<0&&(t.push(function PJ(){return new o.vHH(3101,mi)}()),d=!0),d&&t.splice(p,0,Dj())}return{duration:r,delay:s,easing:c}}(n,t,e)}function nw(n,t={}){return Object.keys(n).forEach(e=>{t[e]=n[e]}),t}function N_(n,t,e={}){if(t)for(let i in n)e[i]=n[i];else nw(n,e);return e}function Bj(n,t,e){return e?t+":"+e+";":""}function Uj(n){let t="";for(let e=0;e<n.style.length;e++){const i=n.style.item(e);t+=Bj(0,i,n.style.getPropertyValue(i))}for(const e in n.style)n.style.hasOwnProperty(e)&&!e.startsWith("_")&&(t+=Bj(0,CX(e),n.style[e]));n.setAttribute("style",t)}function jf(n,t,e){n.style&&(Object.keys(t).forEach(i=>{const r=Uk(i);e&&!e.hasOwnProperty(i)&&(e[i]=n.style[r]),n.style[r]=t[i]}),Ak()&&Uj(n))}function h0(n,t){n.style&&(Object.keys(t).forEach(e=>{const i=Uk(e);n.style[i]=""}),Ak()&&Uj(n))}function KD(n){return Array.isArray(n)?1==n.length?n[0]:wj(n):n}const Bk=new RegExp("{{\\s*(.+?)\\s*}}","g");function Vj(n){let t=[];if("string"==typeof n){let e;for(;e=Bk.exec(n);)t.push(e[1]);Bk.lastIndex=0}return t}function dx(n,t,e){const i=n.toString(),r=i.replace(Bk,(s,c)=>{let d=t[c];return t.hasOwnProperty(c)||(e.push(function LJ(n){return new o.vHH(3003,mi)}()),d=""),d.toString()});return r==i?n:r}function hx(n){const t=[];let e=n.next();for(;!e.done;)t.push(e.value),e=n.next();return t}const bX=/-+([a-z0-9])/g;function Uk(n){return n.replace(bX,(...t)=>t[1].toUpperCase())}function CX(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Ru(n,t,e){switch(t.type){case 7:return n.visitTrigger(t,e);case 0:return n.visitState(t,e);case 1:return n.visitTransition(t,e);case 2:return n.visitSequence(t,e);case 3:return n.visitGroup(t,e);case 4:return n.visitAnimate(t,e);case 5:return n.visitKeyframes(t,e);case 6:return n.visitStyle(t,e);case 8:return n.visitReference(t,e);case 9:return n.visitAnimateChild(t,e);case 10:return n.visitAnimateRef(t,e);case 11:return n.visitQuery(t,e);case 12:return n.visitStagger(t,e);default:throw function BJ(n){return new o.vHH(3004,mi)}()}}function Hj(n,t){return window.getComputedStyle(n)[t]}function IX(n,t){const e=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function AX(n,t,e){if(":"==n[0]){const p=function xX(n,t){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(e,i)=>parseFloat(i)>parseFloat(e);case":decrement":return(e,i)=>parseFloat(i)<parseFloat(e);default:return t.push(function JJ(n){return new o.vHH(3016,mi)}()),"* => *"}}(n,e);if("function"==typeof p)return void t.push(p);n=p}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return e.push(function QJ(n){return new o.vHH(3015,mi)}()),t;const r=i[1],s=i[2],c=i[3];t.push(jj(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&t.push(jj(c,r))}(i,e,t)):e.push(n),e}const mx=new Set(["true","1"]),_x=new Set(["false","0"]);function jj(n,t){const e=mx.has(n)||_x.has(n),i=mx.has(t)||_x.has(t);return(r,s)=>{let c="*"==n||n==r,d="*"==t||t==s;return!c&&e&&"boolean"==typeof r&&(c=r?mx.has(n):_x.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?mx.has(t):_x.has(t)),c&&d}}const RX=new RegExp("s*:selfs*,?","g");function Vk(n,t,e,i){return new MX(n).build(t,e,i)}class MX{constructor(t){this._driver=t}build(t,e,i){const r=new kX(e);this._resetContextStyleTimingState(r);const s=Ru(this,KD(t),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let i=e.queryCount=0,r=e.depCount=0;const s=[],c=[];return"@"==t.name.charAt(0)&&e.errors.push(function VJ(){return new o.vHH(3006,mi)}()),t.definitions.forEach(d=>{if(this._resetContextStyleTimingState(e),0==d.type){const p=d,v=p.name;v.toString().split(/\s*,\s*/).forEach(E=>{p.name=E,s.push(this.visitState(p,e))}),p.name=v}else if(1==d.type){const p=this.visitTransition(d,e);i+=p.queryCount,r+=p.depCount,c.push(p)}else e.errors.push(function HJ(){return new o.vHH(3007,mi)}())}),{type:7,name:t.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(t,e){const i=this.visitStyle(t.styles,e),r=t.options&&t.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{if(vx(d)){const p=d;Object.keys(p).forEach(v=>{Vj(p[v]).forEach(E=>{c.hasOwnProperty(E)||s.add(E)})})}}),s.size&&(hx(s.values()),e.errors.push(function jJ(n,t){return new o.vHH(3008,mi)}()))}return{type:0,name:t.name,style:i,options:r?{params:r}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const i=Ru(this,KD(t.animation),e);return{type:1,matchers:IX(t.expr,e.errors),animation:i,queryCount:e.queryCount,depCount:e.depCount,options:f0(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(i=>Ru(this,i,e)),options:f0(t.options)}}visitGroup(t,e){const i=e.currentTime;let r=0;const s=t.steps.map(c=>{e.currentTime=i;const d=Ru(this,c,e);return r=Math.max(r,e.currentTime),d});return e.currentTime=r,{type:3,steps:s,options:f0(t.options)}}visitAnimate(t,e){const i=function FX(n,t){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return Hk(ux(n,t).duration,0,"");const e=n;if(e.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Hk(0,0,"");return s.dynamic=!0,s.strValue=e,s}const r=ux(e,t);return Hk(r.duration,r.delay,r.easing)}(t.timings,e.errors);e.currentAnimateTimings=i;let r,s=t.styles?t.styles:ra({});if(5==s.type)r=this.visitKeyframes(s,e);else{let c=t.styles,d=!1;if(!c){d=!0;const v={};i.easing&&(v.easing=i.easing),c=ra(v)}e.currentTime+=i.duration+i.delay;const p=this.visitStyle(c,e);p.isEmptyStep=d,r=p}return e.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(t,e){const i=this._makeStyleAst(t,e);return this._validateStyleAst(i,e),i}_makeStyleAst(t,e){const i=[];Array.isArray(t.styles)?t.styles.forEach(c=>{"string"==typeof c?c==yg?i.push(c):e.errors.push(function GJ(n){return new o.vHH(3002,mi)}()):i.push(c)}):i.push(t.styles);let r=!1,s=null;return i.forEach(c=>{if(vx(c)){const d=c,p=d.easing;if(p&&(s=p,delete d.easing),!r)for(let v in d)if(d[v].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:t.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(t,e){const i=e.currentAnimateTimings;let r=e.currentTime,s=e.currentTime;i&&s>0&&(s-=i.duration+i.delay),t.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete c[d],void e.unsupportedCSSPropertiesFound.add(d);const p=e.collectedStyles[e.currentQuerySelector],v=p[d];let E=!0;v&&(s!=r&&s>=v.startTime&&r<=v.endTime&&(e.errors.push(function $J(n,t,e,i,r){return new o.vHH(3010,mi)}()),E=!1),s=v.startTime),E&&(p[d]={startTime:s,endTime:r}),e.options&&function yX(n,t,e){const i=t.params||{},r=Vj(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||e.push(function FJ(n){return new o.vHH(3001,mi)}())})}(c[d],e.options,e.errors)})})}visitKeyframes(t,e){const i={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push(function WJ(){return new o.vHH(3011,mi)}()),i;let s=0;const c=[];let d=!1,p=!1,v=0;const E=t.steps.map($e=>{const Ke=this._makeStyleAst($e,e);let st=null!=Ke.offset?Ke.offset:function PX(n){if("string"==typeof n)return null;let t=null;if(Array.isArray(n))n.forEach(e=>{if(vx(e)&&e.hasOwnProperty("offset")){const i=e;t=parseFloat(i.offset),delete i.offset}});else if(vx(n)&&n.hasOwnProperty("offset")){const e=n;t=parseFloat(e.offset),delete e.offset}return t}(Ke.styles),et=0;return null!=st&&(s++,et=Ke.offset=st),p=p||et<0||et>1,d=d||et<v,v=et,c.push(et),Ke});p&&e.errors.push(function zJ(){return new o.vHH(3012,mi)}()),d&&e.errors.push(function qJ(){return new o.vHH(3200,mi)}());const S=t.steps.length;let N=0;s>0&&s<S?e.errors.push(function ZJ(){return new o.vHH(3202,mi)}()):0==s&&(N=1/(S-1));const F=S-1,G=e.currentTime,J=e.currentAnimateTimings,de=J.duration;return E.forEach(($e,Ke)=>{const st=N>0?Ke==F?1:N*Ke:c[Ke],et=st*de;e.currentTime=G+J.delay+et,J.duration=et,this._validateStyleAst($e,e),$e.offset=st,i.styles.push($e)}),i}visitReference(t,e){return{type:8,animation:Ru(this,KD(t.animation),e),options:f0(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:f0(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:f0(t.options)}}visitQuery(t,e){const i=e.currentQuerySelector,r=t.options||{};e.queryCount++,e.currentQuery=t;const[s,c]=function OX(n){const t=!!n.split(/\s*,\s*/).find(e=>":self"==e);return t&&(n=n.replace(RX,"")),n=n.replace(/@\*/g,cx).replace(/@\w+/g,e=>cx+"-"+e.substr(1)).replace(/:animating/g,Fk),[n,t]}(t.selector);e.currentQuerySelector=i.length?i+" "+s:s,xu(e.collectedStyles,e.currentQuerySelector,{});const d=Ru(this,KD(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:t.selector,options:f0(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push(function YJ(){return new o.vHH(3013,mi)}());const i="full"===t.timings?{duration:0,delay:0,easing:"full"}:ux(t.timings,e.errors,!0);return{type:12,animation:Ru(this,KD(t.animation),e),timings:i,options:null}}}class kX{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function vx(n){return!Array.isArray(n)&&"object"==typeof n}function f0(n){return n?(n=nw(n)).params&&(n.params=function NX(n){return n?nw(n):null}(n.params)):n={},n}function Hk(n,t,e){return{duration:n,delay:t,easing:e}}function jk(n,t,e,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:t,preStyleProps:e,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class yx{constructor(){this._map=new Map}get(t){return this._map.get(t)||[]}append(t,e){let i=this._map.get(t);i||this._map.set(t,i=[]),i.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const UX=new RegExp(":enter","g"),HX=new RegExp(":leave","g");function Gk(n,t,e,i,r,s={},c={},d,p,v=[]){return(new jX).buildKeyframes(n,t,e,i,r,s,c,d,p,v)}class jX{buildKeyframes(t,e,i,r,s,c,d,p,v,E=[]){v=v||new yx;const S=new $k(t,e,v,r,s,E,[]);S.options=p,S.currentTimeline.setStyles([c],null,S.errors,p),Ru(this,i,S);const N=S.timelines.filter(F=>F.containsAnimation());if(Object.keys(d).length){let F;for(let G=N.length-1;G>=0;G--){const J=N[G];if(J.element===e){F=J;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,S.errors,p)}return N.length?N.map(F=>F.buildKeyframes()):[jk(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const i=e.subInstructions.get(e.element);if(i){const r=e.createSubContext(t.options),s=e.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&e.transformIntoNewTimeline(c)}e.previousNode=t}visitAnimateRef(t,e){const i=e.createSubContext(t.options);i.transformIntoNewTimeline(),this.visitReference(t.animation,i),e.transformIntoNewTimeline(i.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,i){let s=e.currentTimeline.currentTime;const c=null!=i.duration?d0(i.duration):null,d=null!=i.delay?d0(i.delay):null;return 0!==c&&t.forEach(p=>{const v=e.appendInstructionToTimeline(p,c,d);s=Math.max(s,v.duration+v.delay)}),s}visitReference(t,e){e.updateOptions(t.options,!0),Ru(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const i=e.subContextCount;let r=e;const s=t.options;if(s&&(s.params||s.delay)&&(r=e.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=bx);const c=d0(s.delay);r.delayNextStep(c)}t.steps.length&&(t.steps.forEach(c=>Ru(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const i=[];let r=e.currentTimeline.currentTime;const s=t.options&&t.options.delay?d0(t.options.delay):0;t.steps.forEach(c=>{const d=e.createSubContext(t.options);s&&d.delayNextStep(s),Ru(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>e.currentTimeline.mergeTimelineCollectedStyles(c)),e.transformIntoNewTimeline(r),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const i=t.strValue;return ux(e.params?dx(i,e.params,e.errors):i,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const i=e.currentAnimateTimings=this._visitTiming(t.timings,e),r=e.currentTimeline;i.delay&&(e.incrementTime(i.delay),r.snapshotCurrentStyles());const s=t.style;5==s.type?this.visitKeyframes(s,e):(e.incrementTime(i.duration),this.visitStyle(s,e),r.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const i=e.currentTimeline,r=e.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||t.easing;t.isEmptyStep?i.applyEmptyStep(s):i.setStyles(t.styles,s,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const i=e.currentAnimateTimings,r=e.currentTimeline.duration,s=i.duration,d=e.createSubContext().currentTimeline;d.easing=i.easing,t.styles.forEach(p=>{d.forwardTime((p.offset||0)*s),d.setStyles(p.styles,p.easing,e.errors,e.options),d.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(d),e.transformIntoNewTimeline(r+s),e.previousNode=t}visitQuery(t,e){const i=e.currentTimeline.currentTime,r=t.options||{},s=r.delay?d0(r.delay):0;s&&(6===e.previousNode.type||0==i&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=bx);let c=i;const d=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!r.optional,e.errors);e.currentQueryTotal=d.length;let p=null;d.forEach((v,E)=>{e.currentQueryIndex=E;const S=e.createSubContext(t.options,v);s&&S.delayNextStep(s),v===e.element&&(p=S.currentTimeline),Ru(this,t.animation,S),S.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,S.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(c),p&&(e.currentTimeline.mergeTimelineCollectedStyles(p),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const i=e.parentContext,r=e.currentTimeline,s=t.timings,c=Math.abs(s.duration),d=c*(e.currentQueryTotal-1);let p=c*e.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=d-p;break;case"full":p=i.currentStaggerTime}const E=e.currentTimeline;p&&E.delayNextStep(p);const S=E.currentTime;Ru(this,t.animation,e),e.previousNode=t,i.currentStaggerTime=r.currentTime-S+(r.startTime-i.currentTimeline.startTime)}}const bx={};class $k{constructor(t,e,i,r,s,c,d,p){this._driver=t,this.element=e,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=bx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new Cx(this._driver,e,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const i=t;let r=this.options;null!=i.duration&&(r.duration=d0(i.duration)),null!=i.delay&&(r.delay=d0(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!e||!c.hasOwnProperty(d))&&(c[d]=dx(s[d],c,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const i=t.params={};Object.keys(e).forEach(r=>{i[r]=e[r]})}}return t}createSubContext(t=null,e,i){const r=e||this.element,s=new $k(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(t),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(t){return this.previousNode=bx,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,i){const r={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+t.delay,easing:""},s=new GX(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,r,t.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,i,r,s,c){let d=[];if(r&&d.push(this.element),t.length>0){t=(t=t.replace(UX,"."+this._enterClassName)).replace(HX,"."+this._leaveClassName);let v=this._driver.query(this.element,t,1!=i);0!==i&&(v=i<0?v.slice(v.length+i,v.length):v.slice(0,i)),d.push(...v)}return!s&&0==d.length&&c.push(function KJ(n){return new o.vHH(3014,mi)}()),d}}class Cx{constructor(t,e,i,r){this._driver=t,this.element=e,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new Cx(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(e=>{this._backFill[e]=this._globalTimelineStyles[e]||yg,this._currentKeyframe[e]=yg}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,i,r){e&&(this._previousKeyframe.easing=e);const s=r&&r.params||{},c=function $X(n,t){const e={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(t),i.forEach(s=>{e[s]=yg})):N_(r,!1,e)}),e}(t,this._globalTimelineStyles);Object.keys(c).forEach(d=>{const p=dx(c[d],s,i);this._pendingStyles[d]=p,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:yg),this._updateStyle(d,p)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(i=>{this._currentKeyframe[i]=t[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const i=this._styleSummary[e],r=t._styleSummary[e];(!i||r.time>i.time)&&this._updateStyle(e,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,p)=>{const v=N_(d,!0);Object.keys(v).forEach(E=>{const S=v[E];"!"==S?t.add(E):S==yg&&e.add(E)}),i||(v.offset=p/this.duration),r.push(v)});const s=t.size?hx(t.values()):[],c=e.size?hx(e.values()):[];if(i){const d=r[0],p=nw(d);d.offset=0,p.offset=1,r=[d,p]}return jk(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class GX extends Cx{constructor(t,e,i,r,s,c,d=!1){super(t,e,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&e){const s=[],c=i+e,d=e/c,p=N_(t[0],!1);p.offset=0,s.push(p);const v=N_(t[0],!1);v.offset=Wj(d),s.push(v);const E=t.length-1;for(let S=1;S<=E;S++){let N=N_(t[S],!1);N.offset=Wj((e+N.offset*i)/c),s.push(N)}i=c,e=0,r="",t=s}return jk(this.element,t,this.preStyleProps,this.postStyleProps,i,e,r,!0)}}function Wj(n,t=3){const e=Math.pow(10,t-1);return Math.round(n*e)/e}class Wk{}class WX extends Wk{normalizePropertyName(t,e){return Uk(t)}normalizeStyleValue(t,e,i,r){let s="";const c=i.toString().trim();if(zX[e]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function UJ(n,t){return new o.vHH(3005,mi)}())}return c+s}}const zX=(()=>function qX(n){const t={};return n.forEach(e=>t[e]=!0),t}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function zj(n,t,e,i,r,s,c,d,p,v,E,S,N){return{type:0,element:n,triggerName:t,isRemovalTransition:r,fromState:e,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:p,preStyleProps:v,postStyleProps:E,totalTime:S,errors:N}}const zk={};class qj{constructor(t,e,i){this._triggerName=t,this.ast=e,this._stateStyles=i}match(t,e,i,r){return function ZX(n,t,e,i,r){return n.some(s=>s(t,e,i,r))}(this.ast.matchers,t,e,i,r)}buildStyles(t,e,i){const r=this._stateStyles["*"],s=this._stateStyles[t],c=r?r.buildStyles(e,i):{};return s?s.buildStyles(e,i):c}build(t,e,i,r,s,c,d,p,v,E){const S=[],N=this.ast.options&&this.ast.options.params||zk,G=this.buildStyles(i,d&&d.params||zk,S),J=p&&p.params||zk,de=this.buildStyles(r,J,S),$e=new Set,Ke=new Map,st=new Map,et="void"===r,Ct={params:Object.assign(Object.assign({},N),J)},Dt=E?[]:Gk(t,e,this.ast.animation,s,c,G,de,Ct,v,S);let $t=0;if(Dt.forEach(Vi=>{$t=Math.max(Vi.duration+Vi.delay,$t)}),S.length)return zj(e,this._triggerName,i,r,et,G,de,[],[],Ke,st,$t,S);Dt.forEach(Vi=>{const br=Vi.element,Gr=xu(Ke,br,{});Vi.preStyleProps.forEach(to=>Gr[to]=!0);const Pa=xu(st,br,{});Vi.postStyleProps.forEach(to=>Pa[to]=!0),br!==e&&$e.add(br)});const un=hx($e.values());return zj(e,this._triggerName,i,r,et,G,de,Dt,un,Ke,st,$t)}}class YX{constructor(t,e,i){this.styles=t,this.defaultParams=e,this.normalizer=i}buildStyles(t,e){const i={},r=nw(this.defaultParams);return Object.keys(t).forEach(s=>{const c=t[s];null!=c&&(r[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(d=>{let p=c[d];p.length>1&&(p=dx(p,r,e));const v=this.normalizer.normalizePropertyName(d,e);p=this.normalizer.normalizeStyleValue(d,v,p,e),i[v]=p})}}),i}}class QX{constructor(t,e,i){this.name=t,this.ast=e,this._normalizer=i,this.transitionFactories=[],this.states={},e.states.forEach(r=>{this.states[r.name]=new YX(r.style,r.options&&r.options.params||{},i)}),Zj(this.states,"true","1"),Zj(this.states,"false","0"),e.transitions.forEach(r=>{this.transitionFactories.push(new qj(t,r,this.states))}),this.fallbackTransition=function JX(n,t,e){return new qj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},t)}(t,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,i,r){return this.transitionFactories.find(c=>c.match(t,e,i,r))||null}matchStyles(t,e,i){return this.fallbackTransition.buildStyles(t,e,i)}}function Zj(n,t,e){n.hasOwnProperty(t)?n.hasOwnProperty(e)||(n[e]=n[t]):n.hasOwnProperty(e)&&(n[t]=n[e])}const XX=new yx;class eee{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(t,e){const i=[],s=Vk(this._driver,e,i,[]);if(i.length)throw function iX(n){return new o.vHH(3503,mi)}();this._animations[t]=s}_buildPlayer(t,e,i){const r=t.element,s=Sj(0,this._normalizer,0,t.keyframes,e,i);return this._driver.animate(r,s,t.duration,t.delay,t.easing,[],!0)}create(t,e,i={}){const r=[],s=this._animations[t];let c;const d=new Map;if(s?(c=Gk(this._driver,e,s,Pk,ax,{},{},i,XX,r),c.forEach(E=>{const S=xu(d,E.element,{});E.postStyleProps.forEach(N=>S[N]=null)})):(r.push(function rX(){return new o.vHH(3300,mi)}()),c=[]),r.length)throw function sX(n){return new o.vHH(3504,mi)}();d.forEach((E,S)=>{Object.keys(E).forEach(N=>{E[N]=this._driver.computeStyle(S,N,yg)})});const v=O_(c.map(E=>{const S=d.get(E.element);return this._buildPlayer(E,{},S)}));return this._playersById[t]=v,v.onDestroy(()=>this.destroy(t)),this.players.push(v),v}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const i=this.players.indexOf(e);i>=0&&this.players.splice(i,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw function oX(n){return new o.vHH(3301,mi)}();return e}listen(t,e,i,r){const s=Mk(e,"","","");return xk(this._getPlayer(t),i,s,r),()=>{}}command(t,e,i,r){if("register"==i)return void this.register(t,r[0]);if("create"==i)return void this.create(t,e,r[0]||{});const s=this._getPlayer(t);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(t)}}}const Yj="ng-animate-queued",qk="ng-animate-disabled",see=[],Kj={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},oee={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},md="__ng_removed";class Zk{constructor(t,e=""){this.namespaceId=e;const i=t&&t.hasOwnProperty("value");if(this.value=function uee(n){return null!=n?n:null}(i?t.value:t),i){const s=nw(t);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const i=this.options.params;Object.keys(e).forEach(r=>{null==i[r]&&(i[r]=e[r])})}}}const QD="void",Yk=new Zk(QD);class aee{constructor(t,e,i){this.id=t,this.hostElement=e,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,_d(e,this._hostClassName)}listen(t,e,i,r){if(!this._triggers.hasOwnProperty(e))throw function aX(n,t){return new o.vHH(3302,mi)}();if(null==i||0==i.length)throw function lX(n){return new o.vHH(3303,mi)}();if(!function dee(n){return"start"==n||"done"==n}(i))throw function cX(n,t){return new o.vHH(3400,mi)}();const s=xu(this._elementListeners,t,[]),c={name:e,phase:i,callback:r};s.push(c);const d=xu(this._engine.statesByElement,t,{});return d.hasOwnProperty(e)||(_d(t,lx),_d(t,lx+"-"+e),d[e]=Yk),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(c);p>=0&&s.splice(p,1),this._triggers[e]||delete d[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw function uX(n){return new o.vHH(3401,mi)}();return e}trigger(t,e,i,r=!0){const s=this._getTrigger(e),c=new Kk(this.id,e,t);let d=this._engine.statesByElement.get(t);d||(_d(t,lx),_d(t,lx+"-"+e),this._engine.statesByElement.set(t,d={}));let p=d[e];const v=new Zk(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&p&&v.absorbOptions(p.options),d[e]=v,p||(p=Yk),v.value!==QD&&p.value===v.value){if(!function pee(n,t){const e=Object.keys(n),i=Object.keys(t);if(e.length!=i.length)return!1;for(let r=0;r<e.length;r++){const s=e[r];if(!t.hasOwnProperty(s)||n[s]!==t[s])return!1}return!0}(p.params,v.params)){const J=[],de=s.matchStyles(p.value,p.params,J),$e=s.matchStyles(v.value,v.params,J);J.length?this._engine.reportError(J):this._engine.afterFlush(()=>{h0(t,de),jf(t,$e)})}return}const N=xu(this._engine.playersByElement,t,[]);N.forEach(J=>{J.namespaceId==this.id&&J.triggerName==e&&J.queued&&J.destroy()});let F=s.matchTransition(p.value,v.value,t,v.params),G=!1;if(!F){if(!r)return;F=s.fallbackTransition,G=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:F,fromState:p,toState:v,player:c,isFallbackTransition:G}),G||(_d(t,Yj),c.onStart(()=>{iw(t,Yj)})),c.onDone(()=>{let J=this.players.indexOf(c);J>=0&&this.players.splice(J,1);const de=this._engine.playersByElement.get(t);if(de){let $e=de.indexOf(c);$e>=0&&de.splice($e,1)}}),this.players.push(c),N.push(c),c}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,i)=>{delete e[t]}),this._elementListeners.forEach((e,i)=>{this._elementListeners.set(i,e.filter(r=>r.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(i=>i.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const i=this._engine.driver.query(t,cx,!0);i.forEach(r=>{if(r[md])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,e,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(t,e,i,r){const s=this._engine.statesByElement.get(t),c=new Map;if(s){const d=[];if(Object.keys(s).forEach(p=>{if(c.set(p,s[p].value),this._triggers[p]){const v=this.trigger(t,p,QD,r);v&&d.push(v)}}),d.length)return this._engine.markElementAsRemoved(this.id,t,!0,e,c),i&&O_(d).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),i=this._engine.statesByElement.get(t);if(e&&i){const r=new Set;e.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const p=this._triggers[c].fallbackTransition,v=i[c]||Yk,E=new Zk(QD),S=new Kk(this.id,c,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:c,transition:p,fromState:v,toState:E,player:S,isFallbackTransition:!0})})}}removeNode(t,e){const i=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(t):[];if(s&&s.length)r=!0;else{let c=t;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(t),r)i.markElementAsRemoved(this.id,t,!1,e);else{const s=t[md];(!s||s===Kj)&&(i.afterFlush(()=>this.clearElementCache(t)),i.destroyInnerAnimations(t),i._onRemovalComplete(t,e))}}insertNode(t,e){_d(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const p=Mk(s,i.triggerName,i.fromState.value,i.toState.value);p._data=t,xk(i.player,d.phase,p,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):e.push(i)}),this._queue=[],e.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(t){this.players.forEach(e=>e.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(i=>i.element===t)||e,e}}class lee{constructor(t,e,i){this.bodyNode=t,this.driver=e,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(i=>{i.queued&&t.push(i)})}),t}createNamespace(t,e){const i=new aee(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(i,e):(this.newHostElements.set(e,i),this.collectEnterElement(e)),this._namespaceLookup[t]=i}_balanceNamespaceList(t,e){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let c=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(e);for(;d;){const p=r.get(d);if(p){const v=i.indexOf(p);i.splice(v+1,0,t),c=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,e)){i.splice(d+1,0,t),c=!0;break}c||i.unshift(t)}else i.push(t);return r.set(e,t),t}register(t,e){let i=this._namespaceLookup[t];return i||(i=this.createNamespace(t,e)),i}registerTrigger(t,e,i){let r=this._namespaceLookup[t];r&&r.register(e,i)&&this.totalAnimations++}destroy(t,e){if(!t)return;const i=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[t];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,i=this.statesByElement.get(t);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]].namespaceId;if(c){const d=this._fetchNamespace(c);d&&e.add(d)}}}return e}trigger(t,e,i,r){if(wx(e)){const s=this._fetchNamespace(t);if(s)return s.trigger(e,i,r),!0}return!1}insertNode(t,e,i,r){if(!wx(e))return;const s=e[md];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(e);c>=0&&this.collectedLeaveElements.splice(c,1)}if(t){const c=this._fetchNamespace(t);c&&c.insertNode(e,i)}r&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),_d(t,qk)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),iw(t,qk))}removeNode(t,e,i,r){if(wx(e)){const s=t?this._fetchNamespace(t):null;if(s?s.removeNode(e,r):this.markElementAsRemoved(t,e,!1,r),i){const c=this.namespacesByHostElement.get(e);c&&c.id!==t&&c.removeNode(e,r)}}else this._onRemovalComplete(e,r)}markElementAsRemoved(t,e,i,r,s){this.collectedLeaveElements.push(e),e[md]={namespaceId:t,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(t,e,i,r,s){return wx(e)?this._fetchNamespace(t).listen(e,i,r,s):()=>{}}_buildInstruction(t,e,i,r,s){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,i,r,t.fromState.options,t.toState.options,e,s)}destroyInnerAnimations(t){let e=this.driver.query(t,cx,!0);e.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Fk,!0),e.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return O_(this.players).onDone(()=>t());t()})}processLeaveNode(t){var e;const i=t[md];if(i&&i.setForRemoval){if(t[md]=Kj,i.namespaceId){this.destroyInnerAnimations(t);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(t)}this._onRemovalComplete(t,i.setForRemoval)}(null===(e=t.classList)||void 0===e?void 0:e.contains(qk))&&this.markElementAsDisabled(t,!1),this.driver.query(t,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)_d(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{e=this._flushAnimations(i,t)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],e.length?O_(e).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(t){throw function dX(n){return new o.vHH(3402,mi)}()}_flushAnimations(t,e){const i=new yx,r=[],s=new Map,c=[],d=new Map,p=new Map,v=new Map,E=new Set;this.disabledNodes.forEach(Ot=>{E.add(Ot);const Wt=this.driver.query(Ot,".ng-animate-queued",!0);for(let on=0;on<Wt.length;on++)E.add(Wt[on])});const S=this.bodyNode,N=Array.from(this.statesByElement.keys()),F=Xj(N,this.collectedEnterElements),G=new Map;let J=0;F.forEach((Ot,Wt)=>{const on=Pk+J++;G.set(Wt,on),Ot.forEach(jn=>_d(jn,on))});const de=[],$e=new Set,Ke=new Set;for(let Ot=0;Ot<this.collectedLeaveElements.length;Ot++){const Wt=this.collectedLeaveElements[Ot],on=Wt[md];on&&on.setForRemoval&&(de.push(Wt),$e.add(Wt),on.hasAnimation?this.driver.query(Wt,".ng-star-inserted",!0).forEach(jn=>$e.add(jn)):Ke.add(Wt))}const st=new Map,et=Xj(N,Array.from($e));et.forEach((Ot,Wt)=>{const on=ax+J++;st.set(Wt,on),Ot.forEach(jn=>_d(jn,on))}),t.push(()=>{F.forEach((Ot,Wt)=>{const on=G.get(Wt);Ot.forEach(jn=>iw(jn,on))}),et.forEach((Ot,Wt)=>{const on=st.get(Wt);Ot.forEach(jn=>iw(jn,on))}),de.forEach(Ot=>{this.processLeaveNode(Ot)})});const Ct=[],Dt=[];for(let Ot=this._namespaceList.length-1;Ot>=0;Ot--)this._namespaceList[Ot].drainQueuedTransitions(e).forEach(on=>{const jn=on.player,fs=on.element;if(Ct.push(jn),this.collectedEnterElements.length){const po=fs[md];if(po&&po.setForMove){if(po.previousTriggersValues&&po.previousTriggersValues.has(on.triggerName)){const ql=po.previousTriggersValues.get(on.triggerName),vd=this.statesByElement.get(on.element);vd&&vd[on.triggerName]&&(vd[on.triggerName].value=ql)}return void jn.destroy()}}const Pc=!S||!this.driver.containsElement(S,fs),Mo=st.get(fs),Mu=G.get(fs),Yi=this._buildInstruction(on,i,Mu,Mo,Pc);if(Yi.errors&&Yi.errors.length)return void Dt.push(Yi);if(Pc)return jn.onStart(()=>h0(fs,Yi.fromStyles)),jn.onDestroy(()=>jf(fs,Yi.toStyles)),void r.push(jn);if(on.isFallbackTransition)return jn.onStart(()=>h0(fs,Yi.fromStyles)),jn.onDestroy(()=>jf(fs,Yi.toStyles)),void r.push(jn);const bh=[];Yi.timelines.forEach(po=>{po.stretchStartingKeyframe=!0,this.disabledNodes.has(po.element)||bh.push(po)}),Yi.timelines=bh,i.append(fs,Yi.timelines),c.push({instruction:Yi,player:jn,element:fs}),Yi.queriedElements.forEach(po=>xu(d,po,[]).push(jn)),Yi.preStyleProps.forEach((po,ql)=>{const vd=Object.keys(po);if(vd.length){let wg=p.get(ql);wg||p.set(ql,wg=new Set),vd.forEach(_0=>wg.add(_0))}}),Yi.postStyleProps.forEach((po,ql)=>{const vd=Object.keys(po);let wg=v.get(ql);wg||v.set(ql,wg=new Set),vd.forEach(_0=>wg.add(_0))})});if(Dt.length){const Ot=[];Dt.forEach(Wt=>{Ot.push(function hX(n,t){return new o.vHH(3505,mi)}())}),Ct.forEach(Wt=>Wt.destroy()),this.reportError(Ot)}const $t=new Map,un=new Map;c.forEach(Ot=>{const Wt=Ot.element;i.has(Wt)&&(un.set(Wt,Wt),this._beforeAnimationBuild(Ot.player.namespaceId,Ot.instruction,$t))}),r.forEach(Ot=>{const Wt=Ot.element;this._getPreviousPlayers(Wt,!1,Ot.namespaceId,Ot.triggerName,null).forEach(jn=>{xu($t,Wt,[]).push(jn),jn.destroy()})});const Vi=de.filter(Ot=>tG(Ot,p,v)),br=new Map;Jj(br,this.driver,Ke,v,yg).forEach(Ot=>{tG(Ot,p,v)&&Vi.push(Ot)});const Pa=new Map;F.forEach((Ot,Wt)=>{Jj(Pa,this.driver,new Set(Ot),p,"!")}),Vi.forEach(Ot=>{const Wt=br.get(Ot),on=Pa.get(Ot);br.set(Ot,Object.assign(Object.assign({},Wt),on))});const to=[],k_=[],P_={};c.forEach(Ot=>{const{element:Wt,player:on,instruction:jn}=Ot;if(i.has(Wt)){if(E.has(Wt))return on.onDestroy(()=>jf(Wt,jn.toStyles)),on.disabled=!0,on.overrideTotalTime(jn.totalTime),void r.push(on);let fs=P_;if(un.size>1){let Mo=Wt;const Mu=[];for(;Mo=Mo.parentNode;){const Yi=un.get(Mo);if(Yi){fs=Yi;break}Mu.push(Mo)}Mu.forEach(Yi=>un.set(Yi,fs))}const Pc=this._buildAnimation(on.namespaceId,jn,$t,s,Pa,br);if(on.setRealPlayer(Pc),fs===P_)to.push(on);else{const Mo=this.playersByElement.get(fs);Mo&&Mo.length&&(on.parentPlayer=O_(Mo)),r.push(on)}}else h0(Wt,jn.fromStyles),on.onDestroy(()=>jf(Wt,jn.toStyles)),k_.push(on),E.has(Wt)&&r.push(on)}),k_.forEach(Ot=>{const Wt=s.get(Ot.element);if(Wt&&Wt.length){const on=O_(Wt);Ot.setRealPlayer(on)}}),r.forEach(Ot=>{Ot.parentPlayer?Ot.syncPlayerEvents(Ot.parentPlayer):Ot.destroy()});for(let Ot=0;Ot<de.length;Ot++){const Wt=de[Ot],on=Wt[md];if(iw(Wt,ax),on&&on.hasAnimation)continue;let jn=[];if(d.size){let Pc=d.get(Wt);Pc&&Pc.length&&jn.push(...Pc);let Mo=this.driver.query(Wt,Fk,!0);for(let Mu=0;Mu<Mo.length;Mu++){let Yi=d.get(Mo[Mu]);Yi&&Yi.length&&jn.push(...Yi)}}const fs=jn.filter(Pc=>!Pc.destroyed);fs.length?hee(this,Wt,fs):this.processLeaveNode(Wt)}return de.length=0,to.forEach(Ot=>{this.players.push(Ot),Ot.onDone(()=>{Ot.destroy();const Wt=this.players.indexOf(Ot);this.players.splice(Wt,1)}),Ot.play()}),to}elementContainsData(t,e){let i=!1;const r=e[md];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(e)&&(i=!0),this.playersByQueriedElement.has(e)&&(i=!0),this.statesByElement.has(e)&&(i=!0),this._fetchNamespace(t).elementContainsData(e)||i}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,i,r,s){let c=[];if(e){const d=this.playersByQueriedElement.get(t);d&&(c=d)}else{const d=this.playersByElement.get(t);if(d){const p=!s||s==QD;d.forEach(v=>{v.queued||!p&&v.triggerName!=r||c.push(v)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(t,e,i){const s=e.element,c=e.isRemovalTransition?void 0:t,d=e.isRemovalTransition?void 0:e.triggerName;for(const p of e.timelines){const v=p.element,E=v!==s,S=xu(i,v,[]);this._getPreviousPlayers(v,E,c,d,e.toState).forEach(F=>{const G=F.getRealPlayer();G.beforeDestroy&&G.beforeDestroy(),F.destroy(),S.push(F)})}h0(s,e.fromStyles)}_buildAnimation(t,e,i,r,s,c){const d=e.triggerName,p=e.element,v=[],E=new Set,S=new Set,N=e.timelines.map(G=>{const J=G.element;E.add(J);const de=J[md];if(de&&de.removedBeforeQueried)return new YD(G.duration,G.delay);const $e=J!==p,Ke=function fee(n){const t=[];return eG(n,t),t}((i.get(J)||see).map($t=>$t.getRealPlayer())).filter($t=>!!$t.element&&$t.element===J),st=s.get(J),et=c.get(J),Ct=Sj(0,this._normalizer,0,G.keyframes,st,et),Dt=this._buildPlayer(G,Ct,Ke);if(G.subTimeline&&r&&S.add(J),$e){const $t=new Kk(t,d,J);$t.setRealPlayer(Dt),v.push($t)}return Dt});v.forEach(G=>{xu(this.playersByQueriedElement,G.element,[]).push(G),G.onDone(()=>function cee(n,t,e){let i;if(n instanceof Map){if(i=n.get(t),i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&n.delete(t)}}else if(i=n[t],i){if(i.length){const r=i.indexOf(e);i.splice(r,1)}0==i.length&&delete n[t]}return i}(this.playersByQueriedElement,G.element,G))}),E.forEach(G=>_d(G,Fj));const F=O_(N);return F.onDestroy(()=>{E.forEach(G=>iw(G,Fj)),jf(p,e.toStyles)}),S.forEach(G=>{xu(r,G,[]).push(F)}),F}_buildPlayer(t,e,i){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,i):new YD(t.duration,t.delay)}}class Kk{constructor(t,e,i){this.namespaceId=t,this.triggerName=e,this.element=i,this._player=new YD,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(i=>xk(t,e,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){xu(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function wx(n){return n&&1===n.nodeType}function Qj(n,t){const e=n.style.display;return n.style.display=null!=t?t:"none",e}function Jj(n,t,e,i,r){const s=[];e.forEach(p=>s.push(Qj(p)));const c=[];i.forEach((p,v)=>{const E={};p.forEach(S=>{const N=E[S]=t.computeStyle(v,S,r);(!N||0==N.length)&&(v[md]=oee,c.push(v))}),n.set(v,E)});let d=0;return e.forEach(p=>Qj(p,s[d++])),c}function Xj(n,t){const e=new Map;if(n.forEach(d=>e.set(d,[])),0==t.length)return e;const r=new Set(t),s=new Map;function c(d){if(!d)return 1;let p=s.get(d);if(p)return p;const v=d.parentNode;return p=e.has(v)?v:r.has(v)?1:c(v),s.set(d,p),p}return t.forEach(d=>{const p=c(d);1!==p&&e.get(p).push(d)}),e}function _d(n,t){var e;null===(e=n.classList)||void 0===e||e.add(t)}function iw(n,t){var e;null===(e=n.classList)||void 0===e||e.remove(t)}function hee(n,t,e){O_(e).onDone(()=>n.processLeaveNode(t))}function eG(n,t){for(let e=0;e<n.length;e++){const i=n[e];i instanceof Tj?eG(i.players,t):t.push(i)}}function tG(n,t,e){const i=e.get(n);if(!i)return!1;let r=t.get(n);return r?i.forEach(s=>r.add(s)):t.set(n,i),e.delete(n),!0}class Ex{constructor(t,e,i){this.bodyNode=t,this._driver=e,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new lee(t,e,i),this._timelineEngine=new eee(t,e,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(t,e,i,r,s){const c=t+"-"+r;let d=this._triggerCache[c];if(!d){const p=[],E=Vk(this._driver,s,p,[]);if(p.length)throw function tX(n,t){return new o.vHH(3404,mi)}();d=function KX(n,t,e){return new QX(n,t,e)}(r,E,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(e,r,d)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,i,r){this._transitionEngine.insertNode(t,e,i,r)}onRemove(t,e,i,r){this._transitionEngine.removeNode(t,e,r||!1,i)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,i,r){if("@"==i.charAt(0)){const[s,c]=Ij(i);this._timelineEngine.command(s,e,c,r)}else this._transitionEngine.trigger(t,e,i,r)}listen(t,e,i,r,s){if("@"==i.charAt(0)){const[c,d]=Ij(i);return this._timelineEngine.listen(c,e,d,s)}return this._transitionEngine.listen(t,e,i,r,s)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let mee=(()=>{class n{constructor(e,i,r){this._element=e,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(e);s||n.initialStylesByElement.set(e,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&jf(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(jf(this._element,this._initialStyles),this._endStyles&&(jf(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(h0(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(h0(this._element,this._endStyles),this._endStyles=null),jf(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function Qk(n){let t=null;const e=Object.keys(n);for(let i=0;i<e.length;i++){const r=e[i];_ee(r)&&(t=t||{},t[r]=n[r])}return t}function _ee(n){return"display"===n||"position"===n}class nG{constructor(t,e,i,r){this.element=t,this.keyframes=e,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,i){return t.animate(e,i)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};if(this.hasStarted()){const e=this._finalKeyframe;Object.keys(e).forEach(i=>{"offset"!=i&&(t[i]=this._finished?e[i]:Hj(this.element,i))})}this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(i=>i()),e.length=0}}class vee{validateStyleProperty(t){return Mj(t)}matchesElement(t,e){return!1}containsElement(t,e){return Oj(t,e)}getParentElement(t){return Nk(t)}query(t,e,i){return Nj(t,e,i)}computeStyle(t,e,i){return window.getComputedStyle(t)[e]}animate(t,e,i,r,s,c=[]){const p={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(p.easing=s);const v={},E=c.filter(N=>N instanceof nG);(function wX(n,t){return 0===n||0===t})(i,r)&&E.forEach(N=>{let F=N.currentSnapshot;Object.keys(F).forEach(G=>v[G]=F[G])}),e=function EX(n,t,e){const i=Object.keys(e);if(i.length&&t.length){let s=t[0],c=[];if(i.forEach(d=>{s.hasOwnProperty(d)||c.push(d),s[d]=e[d]}),c.length)for(var r=1;r<t.length;r++){let d=t[r];c.forEach(function(p){d[p]=Hj(n,p)})}}return t}(t,e=e.map(N=>N_(N,!1)),v);const S=function gee(n,t){let e=null,i=null;return Array.isArray(t)&&t.length?(e=Qk(t[0]),t.length>1&&(i=Qk(t[t.length-1]))):t&&(e=Qk(t)),e||i?new mee(n,e,i):null}(t,e);return new nG(t,e,p,S)}}let yee=(()=>{class n extends bj{constructor(e,i){super(),this._nextAnimationId=0,this._renderer=e.createRenderer(i.body,{id:"0",encapsulation:o.ifc.None,styles:[],data:{animation:[]}})}build(e){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(e)?wj(e):e;return iG(this._renderer,null,i,"register",[r]),new bee(i,this._renderer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class bee extends class OJ{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new Cee(this._id,t,e||{},this._renderer)}}class Cee{constructor(t,e,i,r){this.id=t,this.element=e,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return iG(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function iG(n,t,e,i,r){return n.setProperty(t,`@@${e}:${i}`,r)}const rG="@.disabled";let wee=(()=>{class n{constructor(e,i,r){this.delegate=e,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=null==c?void 0:c.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(e,i){const s=this.delegate.createRenderer(e,i);if(!(e&&i&&i.data&&i.data.animation)){let E=this._rendererCache.get(s);return E||(E=new sG("",s,this.engine),this._rendererCache.set(s,E)),E}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,e);const p=E=>{Array.isArray(E)?E.forEach(p):this.engine.registerTrigger(c,d,e,E.name,E)};return i.data.animation.forEach(p),new Eee(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(e,i,r){e>=0&&e<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.FYo),o.LFG(Ex),o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();class sG{constructor(t,e,i){this.namespaceId=t,this.delegate=e,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>e.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,i,r=!0){this.delegate.insertBefore(t,e,i),this.engine.onInsert(this.namespaceId,e,t,r)}removeChild(t,e,i){this.engine.onRemove(this.namespaceId,e,this.delegate,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){"@"==e.charAt(0)&&e==rG?this.disableAnimations(t,!!i):this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.delegate.listen(t,e,i)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class Eee extends sG{constructor(t,e,i,r){super(e,i,r),this.factory=t,this.namespaceId=e}setProperty(t,e,i){"@"==e.charAt(0)?"."==e.charAt(1)&&e==rG?this.disableAnimations(t,i=void 0===i||!!i):this.engine.process(this.namespaceId,t,e.substr(1),i):this.delegate.setProperty(t,e,i)}listen(t,e,i){if("@"==e.charAt(0)){const r=function Tee(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(t);let s=e.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function Dee(n){const t=n.indexOf(".");return[n.substring(0,t),n.substr(t+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(t,e,i)}}let See=(()=>{class n extends Ex{constructor(e,i,r){super(e.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(kk),o.LFG(Wk))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const JD=new o.OlP("AnimationModuleType"),oG=[{provide:bj,useClass:yee},{provide:Wk,useFactory:function Iee(){return new WX}},{provide:Ex,useClass:See},{provide:o.FYo,useFactory:function Aee(n,t,e){return new wee(n,t,e)},deps:[$i,Ex,o.R0b]}],aG=[{provide:kk,useFactory:()=>new vee},{provide:JD,useValue:"BrowserAnimations"},...oG],xee=[{provide:kk,useClass:kj},{provide:JD,useValue:"NoopAnimations"},...oG];let Ree=(()=>{class n{static withConfig(e){return{ngModule:n,providers:e.disableAnimations?xee:aG}}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:aG,imports:[vo]}),n})();const Oee=new o.OlP("mat-sanity-checks",{providedIn:"root",factory:function Mee(){return!0}});let eo=(()=>{class n{constructor(e,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return!Ek()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[e])}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yj),o.LFG(Oee,8),o.LFG(ve))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[WD],WD]}),n})();function Nee(n,t){return class extends n{constructor(...e){super(...e),this.defaultColor=t,this.color=t}get color(){return this._color}set color(e){const i=e||this.defaultColor;i!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),i&&this._elementRef.nativeElement.classList.add(`mat-${i}`),this._color=i)}}}function kee(n){return class extends n{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=vh(t)}}}let Fee=(()=>{class n{isErrorState(e,i){return!!(e&&e.invalid&&(e.touched||i&&i.submitted))}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Lee{constructor(t,e,i){this._renderer=t,this.element=e,this.config=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const cG={enterDuration:225,exitDuration:150},Jk=qD({passive:!0}),uG=["mousedown","touchstart"],dG=["mouseup","mouseleave","touchend","touchcancel"];class Uee{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=XC(i))}fadeInRipple(t,e,i={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=Object.assign(Object.assign({},cG),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);const c=i.radius||function Hee(n,t,e){const i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}(t,e,r),d=t-r.left,p=e-r.top,v=s.enterDuration,E=document.createElement("div");E.classList.add("mat-ripple-element"),E.style.left=d-c+"px",E.style.top=p-c+"px",E.style.height=2*c+"px",E.style.width=2*c+"px",null!=i.color&&(E.style.backgroundColor=i.color),E.style.transitionDuration=`${v}ms`,this._containerElement.appendChild(E),function Vee(n){window.getComputedStyle(n).getPropertyValue("opacity")}(E),E.style.transform="scale(1)";const S=new Lee(this,E,i);return S.state=0,this._activeRipples.add(S),i.persistent||(this._mostRecentTransientRipple=S),this._runTimeoutOutsideZone(()=>{const N=S===this._mostRecentTransientRipple;S.state=1,!i.persistent&&(!N||!this._isPointerDown)&&S.fadeOut()},v),S}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const i=t.element,r=Object.assign(Object.assign({},cG),t.config.animation);i.style.transitionDuration=`${r.exitDuration}ms`,i.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,i.remove()},r.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=XC(t);!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents(uG))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(dG),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=fj(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!pj(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(e=>{this._triggerElement.addEventListener(e,this,Jk)})})}_removeTriggerEvents(){this._triggerElement&&(uG.forEach(t=>{this._triggerElement.removeEventListener(t,this,Jk)}),this._pointerUpEventsRegistered&&dG.forEach(t=>{this._triggerElement.removeEventListener(t,this,Jk)}))}}const jee=new o.OlP("mat-ripple-global-options");let Gee=(()=>{class n{constructor(e,i,r,s,c){this._elementRef=e,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Uee(this,i,e,r)}get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,i=0,r){return"number"==typeof e?this._rippleRenderer.fadeInRipple(e,i,Object.assign(Object.assign({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),e))}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(yh),o.Y36(jee,8),o.Y36(JD,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-ripple-unbounded",i.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),hG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[eo],eo]}),n})(),$ee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[eo]]}),n})(),fG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[hG,Wn,eo,$ee]]}),n})();const Wee=["button"],zee=["*"],pG=new o.OlP("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS"),gG=new o.OlP("MatButtonToggleGroup");let mG=0;class _G{constructor(t,e){this.source=t,this.value=e}}const Yee=kee(class{});let vG=(()=>{class n extends Yee{constructor(e,i,r,s,c,d){super(),this._changeDetectorRef=i,this._elementRef=r,this._focusMonitor=s,this._isSingleSelector=!1,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new o.vpe;const p=Number(c);this.tabIndex=p||0===p?p:null,this.buttonToggleGroup=e,this.appearance=d&&d.appearance?d.appearance:"standard"}get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){const i=vh(e);i!==this._checked&&(this._checked=i,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=vh(e)}ngOnInit(){const e=this.buttonToggleGroup;this._isSingleSelector=e&&!e.multiple,this.id=this.id||"mat-button-toggle-"+mG++,this._isSingleSelector&&(this.name=e.name),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){const e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){const e=!!this._isSingleSelector||!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new _G(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(gG,8),o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(mj),o.$8M("tabindex"),o.Y36(pG,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(e,i){if(1&e&&o.Gf(Wee,5),2&e){let r;o.iGM(r=o.CRH())&&(i._buttonElement=r.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(e,i){1&e&&o.NdJ("focus",function(){return i.focus()}),2&e&&(o.uIk("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),o.ekj("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-appearance-standard","standard"===i.appearance))},inputs:{disableRipple:"disableRipple",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",appearance:"appearance",checked:"checked",disabled:"disabled"},outputs:{change:"change"},exportAs:["matButtonToggle"],features:[o.qOj],ngContentSelectors:zee,decls:6,vars:9,consts:[["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"id","disabled","click"],["button",""],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(e,i){if(1&e&&(o.F$t(),o.TgZ(0,"button",0,1),o.NdJ("click",function(){return i._onButtonClick()}),o.TgZ(2,"span",2),o.Hsn(3),o.qZA()(),o._UZ(4,"span",3)(5,"span",4)),2&e){const r=o.MAs(1);o.Q6J("id",i.buttonId)("disabled",i.disabled||null),o.uIk("tabindex",i.disabled?-1:i.tabIndex)("aria-pressed",i.checked)("name",i.name||null)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby),o.xp6(5),o.Q6J("matRippleTrigger",r)("matRippleDisabled",i.disableRipple||i.disabled)}},directives:[Gee],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;border-radius:2px;-webkit-tap-highlight-color:transparent;transform:translateZ(0)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:4px}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:1}.cdk-high-contrast-active .mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:.5}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:.04}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.12}.cdk-high-contrast-active .mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:.5}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;line-height:36px;padding:0 16px;position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{border-radius:inherit;pointer-events:none;opacity:0;top:0;left:0;right:0;bottom:0;position:absolute}.mat-button-toggle-checked .cdk-high-contrast-active .mat-button-toggle-focus-overlay{border-bottom:solid 36px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}\n"],encapsulation:2,changeDetection:0}),n})(),Kee=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[eo,hG],eo]}),n})();const Qee=["*"];let Dx;function eS(n){var t;return(null===(t=function Jee(){if(void 0===Dx&&(Dx=null,"undefined"!=typeof window)){const n=window;void 0!==n.trustedTypes&&(Dx=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Dx}())||void 0===t?void 0:t.createHTML(n))||n}function yG(n){return Error(`Unable to find icon with the name "${n}"`)}function bG(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function CG(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}class p0{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}}let Sx=(()=>{class n{constructor(e,i,r,s){this._httpClient=e,this._sanitizer=i,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=r}addSvgIcon(e,i,r){return this.addSvgIconInNamespace("",e,i,r)}addSvgIconLiteral(e,i,r){return this.addSvgIconLiteralInNamespace("",e,i,r)}addSvgIconInNamespace(e,i,r,s){return this._addSvgIconConfig(e,i,new p0(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,i,r,s){const c=this._sanitizer.sanitize(o.q3G.HTML,r);if(!c)throw CG(r);const d=eS(c);return this._addSvgIconConfig(e,i,new p0("",d,s))}addSvgIconSet(e,i){return this.addSvgIconSetInNamespace("",e,i)}addSvgIconSetLiteral(e,i){return this.addSvgIconSetLiteralInNamespace("",e,i)}addSvgIconSetInNamespace(e,i,r){return this._addSvgIconSetConfig(e,new p0(i,null,r))}addSvgIconSetLiteralInNamespace(e,i,r){const s=this._sanitizer.sanitize(o.q3G.HTML,i);if(!s)throw CG(i);const c=eS(s);return this._addSvgIconSetConfig(e,new p0("",c,r))}registerFontClassAlias(e,i=e){return this._fontCssClassesByAlias.set(e,i),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const i=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,e);if(!i)throw bG(e);const r=this._cachedIconsByUrl.get(i);return r?dt(Ix(r)):this._loadSvgIconFromConfig(new p0(e,null)).pipe((0,gr.b)(s=>this._cachedIconsByUrl.set(i,s)),(0,Rt.U)(s=>Ix(s)))}getNamedSvgIcon(e,i=""){const r=wG(i,e);let s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(i,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);const c=this._iconSetConfigs.get(i);return c?this._getSvgFromIconSetConfigs(e,c):_i(yG(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?dt(Ix(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe((0,Rt.U)(i=>Ix(i)))}_getSvgFromIconSetConfigs(e,i){const r=this._extractIconWithNameFromAnySet(e,i);return r?dt(r):dL(i.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Un(d=>{const v=`Loading icon set URL: ${this._sanitizer.sanitize(o.q3G.RESOURCE_URL,c.url)} failed: ${d.message}`;return this._errorHandler.handleError(new Error(v)),dt(null)})))).pipe((0,Rt.U)(()=>{const c=this._extractIconWithNameFromAnySet(e,i);if(!c)throw yG(e);return c}))}_extractIconWithNameFromAnySet(e,i){for(let r=i.length-1;r>=0;r--){const s=i[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){const c=this._svgElementFromConfig(s),d=this._extractSvgIconFromSet(c,e,s.options);if(d)return d}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe((0,gr.b)(i=>e.svgText=i),(0,Rt.U)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?dt(null):this._fetchIcon(e).pipe((0,gr.b)(i=>e.svgText=i))}_extractSvgIconFromSet(e,i,r){const s=e.querySelector(`[id="${i}"]`);if(!s)return null;const c=s.cloneNode(!0);if(c.removeAttribute("id"),"svg"===c.nodeName.toLowerCase())return this._setSvgAttributes(c,r);if("symbol"===c.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(c),r);const d=this._svgElementFromString(eS("<svg></svg>"));return d.appendChild(c),this._setSvgAttributes(d,r)}_svgElementFromString(e){const i=this._document.createElement("DIV");i.innerHTML=e;const r=i.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){const i=this._svgElementFromString(eS("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){const{name:c,value:d}=r[s];"id"!==c&&i.setAttribute(c,d)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&i.appendChild(e.childNodes[s].cloneNode(!0));return i}_setSvgAttributes(e,i){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),i&&i.viewBox&&e.setAttribute("viewBox",i.viewBox),e}_fetchIcon(e){var i;const{url:r,options:s}=e,c=null!==(i=null==s?void 0:s.withCredentials)&&void 0!==i&&i;if(!this._httpClient)throw function Xee(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(o.q3G.RESOURCE_URL,r);if(!d)throw bG(r);const p=this._inProgressUrlFetches.get(d);if(p)return p;const v=this._httpClient.get(d,{responseType:"text",withCredentials:c}).pipe((0,Rt.U)(E=>eS(E)),qa(()=>this._inProgressUrlFetches.delete(d)),(0,vM.B)());return this._inProgressUrlFetches.set(d,v),v}_addSvgIconConfig(e,i,r){return this._svgIconConfigs.set(wG(e,i),r),this}_addSvgIconSetConfig(e,i){const r=this._iconSetConfigs.get(e);return r?r.push(i):this._iconSetConfigs.set(e,[i]),this}_svgElementFromConfig(e){if(!e.svgElement){const i=this._svgElementFromString(e.svgText);this._setSvgAttributes(i,e.options),e.svgElement=i}return e.svgElement}_getIconConfigFromResolvers(e,i){for(let r=0;r<this._resolvers.length;r++){const s=this._resolvers[r](i,e);if(s)return tte(s)?new p0(s.url,null,s.options):new p0(s,null)}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qy,8),o.LFG(yo),o.LFG(ve,8),o.LFG(o.qLn))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ix(n){return n.cloneNode(!0)}function wG(n,t){return n+":"+t}function tte(n){return!(!n.url||!n.options)}const nte=Nee(class{constructor(n){this._elementRef=n}}),ite=new o.OlP("mat-icon-location",{providedIn:"root",factory:function rte(){const n=(0,o.f3M)(ve),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),EG=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ste=EG.map(n=>`[${n}]`).join(", "),ote=/^url\(['"]?#(.*?)['"]?\)$/;let ate=(()=>{class n extends nte{constructor(e,i,r,s,c){super(e),this._iconRegistry=i,this._location=s,this._errorHandler=c,this._inline=!1,this._currentIconFetch=Co.w0.EMPTY,r||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=vh(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const i=this._cleanupFontValue(e);i!==this._fontSet&&(this._fontSet=i,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const i=this._cleanupFontValue(e);i!==this._fontIcon&&(this._fontIcon=i,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const i=e.split(":");switch(i.length){case 1:return["",i[0]];case 2:return i;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const i=this._location.getPathname();i!==this._previousPath&&(this._previousPath=i,this._prependPathToReferences(i))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const i=this._location.getPathname();this._previousPath=i,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(i),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let i=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();i--;){const r=e.childNodes[i];(1!==r.nodeType||"svg"===r.nodeName.toLowerCase())&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,i=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();i!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),i&&e.classList.add(i),this._previousFontSetClass=i),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const i=this._elementsWithExternalReferences;i&&i.forEach((r,s)=>{r.forEach(c=>{s.setAttribute(c.name,`url('${e}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(e){const i=e.querySelectorAll(ste),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<i.length;s++)EG.forEach(c=>{const d=i[s],p=d.getAttribute(c),v=p?p.match(ote):null;if(v){let E=r.get(d);E||(E=[],r.set(d,E)),E.push({name:c,value:v[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[i,r]=this._splitIconName(e);i&&(this._svgNamespace=i),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,i).pipe((0,ui.q)(1)).subscribe(s=>this._setSvgElement(s),s=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${i}:${r}! ${s.message}`))})}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(Sx),o.$8M("aria-hidden"),o.Y36(ite),o.Y36(o.qLn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,i){2&e&&(o.uIk("data-mat-icon-type",i._usingFontIcon()?"font":"svg")("data-mat-icon-name",i._svgName||i.fontIcon)("data-mat-icon-namespace",i._svgNamespace||i.fontSet),o.ekj("mat-icon-inline",i.inline)("mat-icon-no-color","primary"!==i.color&&"accent"!==i.color&&"warn"!==i.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[o.qOj],ngContentSelectors:Qee,decls:1,vars:0,template:function(e,i){1&e&&(o.F$t(),o.Hsn(0))},styles:[".mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),n})(),lte=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[eo],eo]}),n})(),cte=(()=>{class n{constructor(e){this.http=e,this.apiUrl="https://sep6-movies-cloud.lm.r.appspot.com"}getComments(e){return console.log("trying to get"),this.http.get(this.apiUrl+"/api/v1/comments/getAll/"+e).pipe(Ro(1),Un(this.handleError))}createComment(e,i,r,s){return this.http.post(this.apiUrl+"/api/v1/comments/CreateComment",{body:e,parentId:i,createdAt:(new Date).toISOString(),userId:s,username:s,movieId:r})}updateComment(e,i){return this.http.post(this.apiUrl+"/api/v1/comments/updateComment/",{body:i,id:e})}deleteComment(e){return this.http.delete(this.apiUrl+"/api/v1/comments/deleteComment/"+e)}handleError(e){let i="";return i=e.error instanceof ErrorEvent?e.error.message:`errorstatus: ${e.status}. Errormessage: ${e.message}`,window.alert(i),_i(()=>i)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(qy))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ute(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"button",4),o.NdJ("click",function(){return o.CHM(e),o.oxw().handleCancel.emit()}),o._uU(1,"Cancel"),o.qZA()}}let TG=(()=>{class n{constructor(e){this.fb=e,this.hasCancelButton=!1,this.initialText="",this.handleSubmit=new o.vpe,this.handleCancel=new o.vpe}ngOnInit(){this.form=this.fb.group({title:[this.initialText,B6.required]})}onSubmit(){this.handleSubmit.emit(this.form.value.title)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(SW))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-comment-form"]],inputs:{submitLabel:"submitLabel",hasCancelButton:"hasCancelButton",initialText:"initialText"},outputs:{handleSubmit:"handleSubmit",handleCancel:"handleCancel"},decls:5,vars:4,consts:[[3,"formGroup","ngSubmit"],["formControlName","title",1,"comment-form-textarea"],["type","submit",1,"comment-form-button",3,"disabled"],["type","button","class","comment-form-button comment-form-cancel-button",3,"click",4,"ngIf"],["type","button",1,"comment-form-button","comment-form-cancel-button",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"form",0),o.NdJ("ngSubmit",function(){return i.onSubmit()}),o._UZ(1,"textarea",1),o.TgZ(2,"button",2),o._uU(3),o.qZA(),o.YNc(4,ute,2,0,"button",3),o.qZA()),2&e&&(o.Q6J("formGroup",i.form),o.xp6(2),o.Q6J("disabled",i.form.invalid),o.xp6(1),o.hij(" ",i.submitLabel," "),o.xp6(1),o.Q6J("ngIf",i.hasCancelButton))},directives:[uO,KM,Y1,YT,YM,pO,si],styles:[""]}),n})();var Ax=(()=>(function(n){n.replying="replying",n.editing="editing"}(Ax||(Ax={})),Ax))();function dte(n,t){if(1&n&&(o.TgZ(0,"div",12),o._uU(1),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.hij(" ",e.comment.body," ")}}function hte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-comment-form",13),o.NdJ("handleSubmit",function(r){o.CHM(e);const s=o.oxw();return s.updateComment.emit({text:r,commentId:s.comment.id})})("handleCancel",function(){return o.CHM(e),o.oxw().setActiveComment.emit(null)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("hasCancelButton",!0)("initialText",e.comment.body)}}function fte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.setActiveComment.emit({id:r.comment.id,type:r.ActiveCommentType.replying})}),o._uU(1,"Reply"),o.qZA()}}function pte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.setActiveComment.emit({id:r.comment.id,type:r.ActiveCommentType.editing})}),o._uU(1,"Edit"),o.qZA()}}function gte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",14),o.NdJ("click",function(){o.CHM(e);const r=o.oxw();return r.deleteComment.emit(r.comment.id)}),o._uU(1,"Delete"),o.qZA()}}function mte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-comment-form",15),o.NdJ("handleSubmit",function(r){o.CHM(e);const s=o.oxw();return s.addComment.emit({text:r,parentId:s.replyId})}),o.qZA()}}const _te=function(){return[]};function vte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-comment",18),o.NdJ("setActiveComment",function(r){return o.CHM(e),o.oxw(2).setActiveComment.emit(r)})("updateComment",function(r){return o.CHM(e),o.oxw(2).updateComment.emit(r)})("deleteComment",function(r){return o.CHM(e),o.oxw(2).deleteComment.emit(r)})("addComment",function(r){return o.CHM(e),o.oxw(2).addComment.emit(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw(2);o.Q6J("comment",e)("activeComment",i.activeComment)("parentId",i.comment.id)("replies",o.DdM(4,_te))}}function yte(n,t){if(1&n&&(o.TgZ(0,"div",16),o.YNc(1,vte,1,5,"app-comment",17),o.qZA()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("ngForOf",e.replies)}}let bte=(()=>{class n{constructor(e){this.router=e,this.parentId=null,this.setActiveComment=new o.vpe,this.addComment=new o.vpe,this.updateComment=new o.vpe,this.deleteComment=new o.vpe,this.createdAt="",this.canReply=!1,this.canEdit=!1,this.canDelete=!1,this.replyId=null,this.ActiveCommentType=Ax}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user"));const i=(new Date).getMilliseconds()-new Date(this.comment.createdAt).getMilliseconds()>3e5;this.createdAt=new Date(this.comment.createdAt).toLocaleDateString(),this.canEdit=this.user.email===this.comment.username&&!i&&0===this.replies.length,this.canDelete=this.user.email===this.comment.username&&!i&&0===this.replies.length,this.canReply=Boolean(this.user),this.replyId=this.parentId?this.parentId:this.comment.id}isReplying(){return!!this.activeComment&&this.activeComment.id===this.comment.id&&this.activeComment.type===this.ActiveCommentType.replying}isEditing(){return!!this.activeComment&&this.activeComment.id===this.comment.id&&this.activeComment.type===this.ActiveCommentType.editing}enterProfile(){this.router.navigate(["/profile",this.comment.username])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-comment"]],inputs:{comment:"comment",replies:"replies",activeComment:"activeComment",parentId:"parentId"},outputs:{setActiveComment:"setActiveComment",addComment:"addComment",updateComment:"updateComment",deleteComment:"deleteComment"},decls:17,vars:9,consts:[[1,"comment"],[1,"comment-image-container"],["src","./../assets/user-icon.png"],[1,"comment-right-part"],[1,"comment-content"],[1,"comment-author",3,"click"],["class","comment-text",4,"ngIf"],["submitLabel","Update",3,"hasCancelButton","initialText","handleSubmit","handleCancel",4,"ngIf"],[1,"comment-actions"],["class","comment-action",3,"click",4,"ngIf"],["submitLabel","Reply",3,"handleSubmit",4,"ngIf"],["class","replies",4,"ngIf"],[1,"comment-text"],["submitLabel","Update",3,"hasCancelButton","initialText","handleSubmit","handleCancel"],[1,"comment-action",3,"click"],["submitLabel","Reply",3,"handleSubmit"],[1,"replies"],[3,"comment","activeComment","parentId","replies","setActiveComment","updateComment","deleteComment","addComment",4,"ngFor","ngForOf"],[3,"comment","activeComment","parentId","replies","setActiveComment","updateComment","deleteComment","addComment"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"div",4)(5,"div",5),o.NdJ("click",function(){return i.enterProfile()}),o._uU(6),o.qZA(),o.TgZ(7,"div"),o._uU(8),o.qZA()(),o.YNc(9,dte,2,1,"div",6),o.YNc(10,hte,1,2,"app-comment-form",7),o.TgZ(11,"div",8),o.YNc(12,fte,2,0,"div",9),o.YNc(13,pte,2,0,"div",9),o.YNc(14,gte,2,0,"div",9),o.qZA(),o.YNc(15,mte,1,0,"app-comment-form",10),o.YNc(16,yte,2,1,"div",11),o.qZA()()),2&e&&(o.xp6(6),o.Oqu(i.comment.username),o.xp6(2),o.Oqu(i.createdAt),o.xp6(1),o.Q6J("ngIf",!i.isEditing()),o.xp6(1),o.Q6J("ngIf",i.isEditing()),o.xp6(2),o.Q6J("ngIf",i.canReply),o.xp6(1),o.Q6J("ngIf",i.canEdit),o.xp6(1),o.Q6J("ngIf",i.canDelete),o.xp6(1),o.Q6J("ngIf",i.isReplying()),o.xp6(1),o.Q6J("ngIf",i.replies.length>0))},directives:[si,TG,ri,n],styles:[""]}),n})();function Cte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"app-comment",6),o.NdJ("setActiveComment",function(r){return o.CHM(e),o.oxw().setActiveComment(r)})("addComment",function(r){return o.CHM(e),o.oxw().addComment(r)})("deleteComment",function(r){return o.CHM(e),o.oxw().deleteComment(r)})("updateComment",function(r){return o.CHM(e),o.oxw().updateComment(r)}),o.qZA()}if(2&n){const e=t.$implicit,i=o.oxw();o.Q6J("comment",e)("replies",i.getReplies(e.id))("activeComment",i.activeComment)}}let DG=(()=>{class n{constructor(e){this.CommentService=e,this.comments=[],this.activeComment=null}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),this.CommentService.getComments(this.movieId).subscribe(e=>{this.comments=e,console.info(this.comments)})}ngOnChanges(){null!==this.movieId&&console.log(this.movieId)}addComment({text:e,parentId:i}){this.CommentService.createComment(e,i,this.movieId,this.user.email).subscribe(r=>{this.comments=[...this.comments,r],this.activeComment=null})}getReplies(e){return this.comments.filter(i=>i.parentId===e).sort((i,r)=>new Date(i.createdAt).getTime()-new Date(r.createdAt).getTime())}getRootComments(){return this.comments.filter(e=>null===e.parentId)}setActiveComment(e){this.activeComment=e}updateComment({text:e,commentId:i}){this.CommentService.updateComment(i,e).subscribe(r=>{this.comments=this.comments.map(s=>s.id==i?r:s),this.activeComment=null})}deleteComment(e){this.CommentService.deleteComment(e).subscribe(()=>{this.comments=this.comments.filter(i=>i.id!==e)})}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(cte))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-comments"]],inputs:{movieId:"movieId"},features:[o.TTD],decls:8,vars:1,consts:[[1,"comments"],[1,"comments-title"],[1,"comment-form-title"],["submitLabel","Write",3,"handleSubmit"],[1,"comments-container"],[3,"comment","replies","activeComment","setActiveComment","addComment","deleteComment","updateComment",4,"ngFor","ngForOf"],[3,"comment","replies","activeComment","setActiveComment","addComment","deleteComment","updateComment"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"h3",1),o._uU(2,"Comments"),o.qZA(),o.TgZ(3,"div",2),o._uU(4,"Write comment"),o.qZA(),o.TgZ(5,"app-comment-form",3),o.NdJ("handleSubmit",function(s){return i.addComment({text:s,parentId:null})}),o.qZA(),o.TgZ(6,"div",4),o.YNc(7,Cte,1,3,"app-comment",5),o.qZA()()),2&e&&(o.xp6(7),o.Q6J("ngForOf",i.getRootComments()))},directives:[TG,ri,bte],styles:[""]}),n})();function wte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",15),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().SelectPerson(s)}),o.TgZ(1,"a"),o._uU(2),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.hij("",e," ")}}function Ete(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"li",15),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw().SelectPerson(s)}),o.TgZ(1,"a"),o._uU(2),o.qZA()()}if(2&n){const e=t.$implicit;o.xp6(2),o.hij("",e," ")}}function Tte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",16)(1,"button",17),o.NdJ("click",function(){return o.CHM(e),o.oxw().Rate()}),o._uU(2,"Submit Rating"),o.qZA()()}}function Dte(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"div",16)(1,"button",17),o.NdJ("click",function(){return o.CHM(e),o.oxw().UnRate()}),o._uU(2,"Delete Rating"),o.qZA()()}}let Ste=(()=>{class n{constructor(e,i,r,s,c){this.service=e,this.ratingService=i,this.activated=r,this.personService=s,this.router=c}ngOnInit(){this.user=JSON.parse(localStorage.getItem("user")),this.activated.paramMap.subscribe(e=>{const i=e.get("id");this.ratingService.averageRating(i).subscribe(r=>{this.averageRate=r}),this.service.getFullMovie(i).subscribe(r=>{r.id=r.imdbID.substring(2),this.movie=r,this.service.checkFavorite(this.user.email,this.movie.id).subscribe(s=>{this.isFavorite=s.favorite,console.log(this.isFavorite+"check")}),this.ratingService.getCurrentRating(this.user.email,this.movie.id).subscribe(s=>{this.currentRate=s,this.currentRate>0?(this.alreadyRated=!0,this.notRated=!1):(this.alreadyRated=!1,this.notRated=!0),console.log(this.notRated+"her")})})})}SelectPerson(e){this.personService.getPeople(e).subscribe(i=>{this.id=i[0].id,this.router.navigate(["Person",this.id])})}Rate(){this.ratingService.rate(this.user.email,this.movie.id,this.currentRate).subscribe(()=>{this.alreadyRated=!0,this.notRated=!1,this.ratingService.averageRating(this.movie.id).subscribe(e=>{this.averageRate=e})})}UnRate(){this.currentRate=0,this.alreadyRated=!1,this.notRated=!0,this.ratingService.Unrate(this.user.email,this.movie.id).subscribe(()=>{this.ratingService.averageRating(this.movie.id).subscribe(e=>{this.averageRate=e})})}changeFavorite(){this.isFavorite=!this.isFavorite,console.log(this.isFavorite),this.service.changeFavorite(this.isFavorite,this.user.email,this.movie.id).subscribe(),console.log("post done")}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hD),o.Y36(qQ),o.Y36($o),o.Y36(hA),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-movie"]],decls:45,vars:14,consts:[[2,"background-color","darkslategray"],[2,"padding","0px 30px 10px 30px"],[2,"height","35px","margin-top","10px","font","bold 48px"],[2,"font-size","3rem","color","white"],[2,"margin-top","5px"],[2,"font","x-small 14px","color","white"],["mat-icon-button","","color","primary",3,"checked","change"],[2,"display","flex","height","443px"],[2,"height","443px",3,"src"],[2,"float","left","width","40%","padding","5px","overflow","auto","height","443px","border-bottom","none"],[2,"float","right","width","25%"],[3,"click",4,"ngFor","ngForOf"],[3,"rate","rateChange"],["class","form-group",4,"ngIf"],[3,"movieId"],[3,"click"],[1,"form-group"],["mdbBtn","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div")(3,"div",2)(4,"h1",3),o._uU(5),o.qZA()(),o.TgZ(6,"div",4)(7,"h1",5),o._uU(8),o.qZA()(),o.TgZ(9,"mat-button-toggle",6),o.NdJ("change",function(){return i.changeFavorite()}),o.TgZ(10,"mat-icon"),o._uU(11,"favorite"),o.qZA()()(),o.TgZ(12,"div",7)(13,"div"),o._UZ(14,"img",8),o.qZA(),o.TgZ(15,"div",9)(16,"h3"),o._uU(17,"Summary:"),o.qZA(),o.TgZ(18,"p"),o._uU(19),o.qZA()(),o.TgZ(20,"div",10)(21,"div")(22,"h3"),o._uU(23,"Actors:"),o.qZA(),o.TgZ(24,"ul"),o.YNc(25,wte,3,1,"li",11),o.qZA()(),o.TgZ(26,"div")(27,"h3"),o._uU(28,"Directors:"),o.qZA(),o.TgZ(29,"ul"),o.YNc(30,Ete,3,1,"li",11),o.qZA()()()(),o.TgZ(31,"div")(32,"p"),o._uU(33),o.qZA(),o.TgZ(34,"ngb-rating",12),o.NdJ("rateChange",function(s){return i.currentRate=s}),o.qZA(),o._UZ(35,"hr"),o.TgZ(36,"pre"),o._uU(37,"Rate: "),o.TgZ(38,"b"),o._uU(39),o.qZA()(),o.YNc(40,Tte,3,0,"div",13),o.YNc(41,Dte,3,0,"div",13),o.TgZ(42,"div"),o._uU(43),o.qZA()()()(),o._UZ(44,"app-comments",14)),2&e&&(o.xp6(5),o.Oqu(i.movie.title),o.xp6(3),o.Oqu(i.movie.year),o.xp6(1),o.Q6J("checked",i.isFavorite),o.xp6(5),o.s9C("src",i.movie.poster,o.LSH),o.xp6(5),o.Oqu(i.movie.plot),o.xp6(6),o.Q6J("ngForOf",i.movie.actorList),o.xp6(5),o.Q6J("ngForOf",i.movie.directorList),o.xp6(3),o.hij("Imdb Rating: ",i.movie.imdbRating,"/10"),o.xp6(1),o.Q6J("rate",i.currentRate),o.xp6(5),o.Oqu(i.currentRate),o.xp6(1),o.Q6J("ngIf",i.notRated),o.xp6(1),o.Q6J("ngIf",i.alreadyRated),o.xp6(2),o.hij("Average Rating for Our Users: ",i.averageRate,""),o.xp6(1),o.Q6J("movieId",i.movie.id))},directives:[vG,ate,ri,u4,si,DG],styles:[".mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:red}"]}),n})();var SG=W(4408);const tS={schedule(n){let t=requestAnimationFrame,e=cancelAnimationFrame;const{delegate:i}=tS;i&&(t=i.requestAnimationFrame,e=i.cancelAnimationFrame);const r=t(s=>{e=void 0,n(s)});return new Co.w0(()=>null==e?void 0:e(r))},requestAnimationFrame(...n){const{delegate:t}=tS;return((null==t?void 0:t.requestAnimationFrame)||requestAnimationFrame)(...n)},cancelAnimationFrame(...n){const{delegate:t}=tS;return((null==t?void 0:t.cancelAnimationFrame)||cancelAnimationFrame)(...n)},delegate:void 0};var IG=W(7565);new class xte extends IG.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Ate extends SG.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=tS.requestAnimationFrame(()=>t.flush(void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(tS.cancelAnimationFrame(e),t._scheduled=void 0)}});let Xk,Mte=1;const xx={};function AG(n){return n in xx&&(delete xx[n],!0)}const Ote={setImmediate(n){const t=Mte++;return xx[t]=!0,Xk||(Xk=Promise.resolve()),Xk.then(()=>AG(t)&&n()),t},clearImmediate(n){AG(n)}},{setImmediate:Nte,clearImmediate:kte}=Ote,Rx={setImmediate(...n){const{delegate:t}=Rx;return((null==t?void 0:t.setImmediate)||Nte)(...n)},clearImmediate(n){const{delegate:t}=Rx;return((null==t?void 0:t.clearImmediate)||kte)(n)},delegate:void 0};new class Fte extends IG.v{flush(t){this._active=!0;const e=this._scheduled;this._scheduled=void 0;const{actions:i}=this;let r;t=t||i.shift();do{if(r=t.execute(t.state,t.delay))break}while((t=i[0])&&t.id===e&&i.shift());if(this._active=!1,r){for(;(t=i[0])&&t.id===e&&i.shift();)t.unsubscribe();throw r}}}(class Pte extends SG.o{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,i=0){return null!==i&&i>0?super.requestAsyncId(t,e,i):(t.actions.push(this),t._scheduled||(t._scheduled=Rx.setImmediate(t.flush.bind(t,void 0))))}recycleAsyncId(t,e,i=0){if(null!=i&&i>0||null==i&&this.delay>0)return super.recycleAsyncId(t,e,i);t.actions.some(r=>r.id===e)||(Rx.clearImmediate(e),t._scheduled=void 0)}});function xG(n,t=Ju.z){return function Bte(n){return(0,vi.e)((t,e)=>{let i=!1,r=null,s=null,c=!1;const d=()=>{if(null==s||s.unsubscribe(),s=null,i){i=!1;const v=r;r=null,e.next(v)}c&&e.complete()},p=()=>{s=null,c&&e.complete()};t.subscribe((0,xn.x)(e,v=>{i=!0,r=v,s||(0,Sr.Xf)(n(v)).subscribe(s=(0,xn.x)(e,d,p))},()=>{c=!0,(!i||!s||s.closed)&&e.complete()}))})}(()=>ZT(n,t))}let Vte=(()=>{class n{constructor(e,i,r){this._ngZone=e,this._platform=i,this._scrolled=new an.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){const i=this.scrollContainers.get(e);i&&(i.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=20){return this._platform.isBrowser?new Di.y(i=>{this._globalSubscription||this._addGlobalListener();const r=e>0?this._scrolled.pipe(xG(e)).subscribe(i):this._scrolled.subscribe(i);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):dt()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,i)=>this.deregister(i)),this._scrolled.complete()}ancestorScrolled(e,i){const r=this.getAncestorScrollContainers(e);return this.scrolled(i).pipe(zn(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){const i=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&i.push(s)}),i}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,i){let r=XC(i),s=e.getElementRef().nativeElement;do{if(r==s)return!0}while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>rl(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b),o.LFG(yh),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),eP=(()=>{class n{constructor(e,i,r){this._platform=e,this._change=new an.x,this._changeListener=s=>{this._change.next(s)},this._document=r,i.runOutsideAngular(()=>{if(e.isBrowser){const s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:i,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+i,height:r,width:i}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=this._document,i=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect();return{top:-s.top||e.body.scrollTop||i.scrollY||r.scrollTop||0,left:-s.left||e.body.scrollLeft||i.scrollX||r.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(xG(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(yh),o.LFG(o.R0b),o.LFG(ve,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Mx=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),tP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[WD,Mx],WD,Mx]}),n})();const jte=[[["caption"]],[["colgroup"],["col"]]],Gte=["caption","colgroup, col"];function nP(n){return class extends n{constructor(...t){super(...t),this._sticky=!1,this._hasStickyChanged=!1}get sticky(){return this._sticky}set sticky(t){const e=this._sticky;this._sticky=vh(t),this._hasStickyChanged=e!==this._sticky}hasStickyChanged(){const t=this._hasStickyChanged;return this._hasStickyChanged=!1,t}resetStickyChanged(){this._hasStickyChanged=!1}}}const rw=new o.OlP("CDK_TABLE");let sw=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellDef",""]]}),n})(),ow=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderCellDef",""]]}),n})(),Ox=(()=>{class n{constructor(e){this.template=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterCellDef",""]]}),n})();class qte{}const Zte=nP(qte);let bg=(()=>{class n extends Zte{constructor(e){super(),this._table=e,this._stickyEnd=!1}get name(){return this._name}set name(e){this._setNameInput(e)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){const i=this._stickyEnd;this._stickyEnd=vh(e),this._hasStickyChanged=i!==this._stickyEnd}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(rw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkColumnDef",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,sw,5),o.Suo(r,ow,5),o.Suo(r,Ox,5)),2&e){let s;o.iGM(s=o.CRH())&&(i.cell=s.first),o.iGM(s=o.CRH())&&(i.headerCell=s.first),o.iGM(s=o.CRH())&&(i.footerCell=s.first)}},inputs:{sticky:"sticky",name:["cdkColumnDef","name"],stickyEnd:"stickyEnd"},features:[o._Bn([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})();class iP{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}}let rP=(()=>{class n extends iP{constructor(e,i){super(e,i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(bg),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],features:[o.qOj]}),n})(),sP=(()=>{class n extends iP{constructor(e,i){var r;if(super(e,i),1===(null===(r=e._table)||void 0===r?void 0:r._elementRef.nativeElement.nodeType)){const s=e._table._elementRef.nativeElement.getAttribute("role");i.nativeElement.setAttribute("role","grid"===s||"treegrid"===s?"gridcell":"cell")}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(bg),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],features:[o.qOj]}),n})();class MG{constructor(){this.tasks=[],this.endTasks=[]}}const oP=new o.OlP("_COALESCED_STYLE_SCHEDULER");let OG=(()=>{class n{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new an.x}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new MG,this._getScheduleObservable().pipe(xr(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){const e=this._currentSchedule;this._currentSchedule=new MG;for(const i of e.tasks)i();for(const i of e.endTasks)i()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?(0,Ti.D)(Promise.resolve(void 0)):this._ngZone.onStable.pipe((0,ui.q)(1))}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(o.R0b))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),aP=(()=>{class n{constructor(e,i){this.template=e,this._differs=i}ngOnChanges(e){if(!this._columnsDiffer){const i=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(i).create(),this._columnsDiffer.diff(i)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof nS?e.headerCell.template:this instanceof iS?e.footerCell.template:e.cell.template}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4))},n.\u0275dir=o.lG2({type:n,features:[o.TTD]}),n})();class Yte extends aP{}const Kte=nP(Yte);let nS=(()=>{class n extends Kte{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(rw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:["cdkHeaderRowDef","columns"],sticky:["cdkHeaderRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})();class Qte extends aP{}const Jte=nP(Qte);let iS=(()=>{class n extends Jte{constructor(e,i,r){super(e,i),this._table=r}ngOnChanges(e){super.ngOnChanges(e)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(rw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:["cdkFooterRowDef","columns"],sticky:["cdkFooterRowDefSticky","sticky"]},features:[o.qOj,o.TTD]}),n})(),Nx=(()=>{class n extends aP{constructor(e,i,r){super(e,i),this._table=r}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc),o.Y36(o.ZZ4),o.Y36(rw,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkRowDef",""]],inputs:{columns:["cdkRowDefColumns","columns"],when:["cdkRowDefWhen","when"]},features:[o.qOj]}),n})(),Cg=(()=>{class n{constructor(e){this._viewContainer=e,n.mostRecentCellOutlet=this}ngOnDestroy(){n.mostRecentCellOutlet===this&&(n.mostRecentCellOutlet=null)}}return n.mostRecentCellOutlet=null,n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkCellOutlet",""]]}),n})(),lP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Cg],encapsulation:2}),n})(),uP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Cg],encapsulation:2}),n})(),kx=(()=>{class n{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["ng-template","cdkNoDataRow",""]]}),n})();const NG=["top","bottom","left","right"];class Xte{constructor(t,e,i,r,s=!0,c=!0,d){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=i,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=c,this._positionListener=d,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){const i=[];for(const r of t)if(r.nodeType===r.ELEMENT_NODE){i.push(r);for(let s=0;s<r.children.length;s++)i.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(const r of i)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,i,r=!0){if(!t.length||!this._isBrowser||!e.some(N=>N)&&!i.some(N=>N))return void(this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]})));const s=t[0],c=s.children.length,d=this._getCellWidths(s,r),p=this._getStickyStartColumnPositions(d,e),v=this._getStickyEndColumnPositions(d,i),E=e.lastIndexOf(!0),S=i.indexOf(!0);this._coalescedStyleScheduler.schedule(()=>{const N="rtl"===this.direction,F=N?"right":"left",G=N?"left":"right";for(const J of t)for(let de=0;de<c;de++){const $e=J.children[de];e[de]&&this._addStickyStyle($e,F,p[de],de===E),i[de]&&this._addStickyStyle($e,G,v[de],de===S)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:-1===E?[]:d.slice(0,E+1).map((J,de)=>e[de]?J:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:-1===S?[]:d.slice(S).map((J,de)=>i[de+S]?J:null).reverse()}))})}stickRows(t,e,i){if(!this._isBrowser)return;const r="bottom"===i?t.slice().reverse():t,s="bottom"===i?e.slice().reverse():e,c=[],d=[],p=[];for(let E=0,S=0;E<r.length;E++){if(!s[E])continue;c[E]=S;const N=r[E];p[E]=this._isNativeHtmlTable?Array.from(N.children):[N];const F=N.getBoundingClientRect().height;S+=F,d[E]=F}const v=s.lastIndexOf(!0);this._coalescedStyleScheduler.schedule(()=>{var E,S;for(let N=0;N<r.length;N++){if(!s[N])continue;const F=c[N],G=N===v;for(const J of p[N])this._addStickyStyle(J,i,F,G)}"top"===i?null===(E=this._positionListener)||void 0===E||E.stickyHeaderRowsUpdated({sizes:d,offsets:c,elements:p}):null===(S=this._positionListener)||void 0===S||S.stickyFooterRowsUpdated({sizes:d,offsets:c,elements:p})})}updateStickyFooterContainer(t,e){if(!this._isNativeHtmlTable)return;const i=t.querySelector("tfoot");this._coalescedStyleScheduler.schedule(()=>{e.some(r=>!r)?this._removeStickyStyle(i,["bottom"]):this._addStickyStyle(i,"bottom",0,!1)})}_removeStickyStyle(t,e){for(const r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);NG.some(r=>-1===e.indexOf(r)&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,i,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${i}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){const e={top:100,bottom:10,left:1,right:1};let i=0;for(const r of NG)t.style[r]&&(i+=e[r]);return i?`${i}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;const i=[],r=t.children;for(let s=0;s<r.length;s++)i.push(r[s].getBoundingClientRect().width);return this._cachedCellWidths=i,i}_getStickyStartColumnPositions(t,e){const i=[];let r=0;for(let s=0;s<t.length;s++)e[s]&&(i[s]=r,r+=t[s]);return i}_getStickyEndColumnPositions(t,e){const i=[];let r=0;for(let s=t.length;s>0;s--)e[s]&&(i[s]=r,r+=t[s]);return i}}const dP=new o.OlP("CDK_SPL");let Px=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","rowOutlet",""]]}),n})(),Fx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","headerRowOutlet",""]]}),n})(),Lx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","footerRowOutlet",""]]}),n})(),Bx=(()=>{class n{constructor(e,i){this.viewContainer=e,this.elementRef=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.s_b),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["","noDataRowOutlet",""]]}),n})(),Ux=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S,N,F){this._differs=e,this._changeDetectorRef=i,this._elementRef=r,this._dir=c,this._platform=p,this._viewRepeater=v,this._coalescedStyleScheduler=E,this._viewportRuler=S,this._stickyPositioningListener=N,this._ngZone=F,this._onDestroy=new an.x,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new o.vpe,this.viewChange=new gi({start:0,end:Number.MAX_VALUE}),s||this._elementRef.nativeElement.setAttribute("role","table"),this._document=d,this._isNativeHtmlTable="TABLE"===this._elementRef.nativeElement.nodeName}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=vh(e),this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=vh(e),this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}ngOnInit(){this._setupStickyStyler(),this._isNativeHtmlTable&&this._applyNativeTableSections(),this._dataDiffer=this._differs.find([]).create((e,i)=>this.trackBy?this.trackBy(i.dataIndex,i.data):i),this._viewportRuler.change().pipe(xr(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentChecked(){this._cacheRowDefs(),this._cacheColumnDefs();const i=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||i,this._forceRecalculateCellWidths=i,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}ngOnDestroy(){[this._rowOutlet.viewContainer,this._headerRowOutlet.viewContainer,this._footerRowOutlet.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),yk(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();const e=this._dataDiffer.diff(this._renderRows);if(!e)return this._updateNoDataRow(),void this.contentChanged.next();const i=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,i,(r,s,c)=>this._getEmbeddedViewArgs(r.item,c),r=>r.item.data,r=>{1===r.operation&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{i.get(r.currentIndex).context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&o.R0b.isInAngularZone()?this._ngZone.onStable.pipe((0,ui.q)(1),xr(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){const e=this._getRenderedRows(this._headerRowOutlet),r=this._elementRef.nativeElement.querySelector("thead");r&&(r.style.display=e.length?"":"none");const s=this._headerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,s,"top"),this._headerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyFooterRowStyles(){const e=this._getRenderedRows(this._footerRowOutlet),r=this._elementRef.nativeElement.querySelector("tfoot");r&&(r.style.display=e.length?"":"none");const s=this._footerRowDefs.map(c=>c.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,s,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,s),this._footerRowDefs.forEach(c=>c.resetStickyChanged())}updateStickyColumnStyles(){const e=this._getRenderedRows(this._headerRowOutlet),i=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...i,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,c)=>{this._addStickyColumnStyles([s],this._headerRowDefs[c])}),this._rowDefs.forEach(s=>{const c=[];for(let d=0;d<i.length;d++)this._renderRows[d].rowDef===s&&c.push(i[d]);this._addStickyColumnStyles(c,s)}),r.forEach((s,c)=>{this._addStickyColumnStyles([s],this._footerRowDefs[c])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_getAllRenderRows(){const e=[],i=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r];const c=this._getRenderRowsForData(s,r,i.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let d=0;d<c.length;d++){let p=c[d];const v=this._cachedRenderRowsMap.get(p.data);v.has(p.rowDef)?v.get(p.rowDef).push(p):v.set(p.rowDef,[p]),e.push(p)}}return e}_getRenderRowsForData(e,i,r){return this._getRowDefs(e,i).map(c=>{const d=r&&r.has(c)?r.get(c):[];if(d.length){const p=d.shift();return p.dataIndex=i,p}return{data:e,rowDef:c,dataIndex:i}})}_cacheColumnDefs(){this._columnDefsByName.clear(),Vx(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(i=>{this._columnDefsByName.has(i.name),this._columnDefsByName.set(i.name,i)})}_cacheRowDefs(){this._headerRowDefs=Vx(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=Vx(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=Vx(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);const e=this._rowDefs.filter(i=>!i.when);this._defaultRowDef=e[0]}_renderUpdatedColumns(){const e=(c,d)=>c||!!d.getColumnsDiff(),i=this._rowDefs.reduce(e,!1);i&&this._forceRenderDataRows();const r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();const s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),i||r||s}_switchDataSource(e){this._data=[],yk(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;yk(this.dataSource)?e=this.dataSource.connect(this):function Ite(n){return!!n&&(n instanceof Di.y||(0,Bn.m)(n.lift)&&(0,Bn.m)(n.subscribe))}(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=dt(this.dataSource)),this._renderChangeSubscription=e.pipe(xr(this._onDestroy)).subscribe(i=>{this._data=i||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,i)=>this._renderRow(this._headerRowOutlet,e,i)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,i)=>this._renderRow(this._footerRowOutlet,e,i)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,i){const r=Array.from(i.columns||[]).map(d=>this._columnDefsByName.get(d)),s=r.map(d=>d.sticky),c=r.map(d=>d.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,c,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){const i=[];for(let r=0;r<e.viewContainer.length;r++){const s=e.viewContainer.get(r);i.push(s.rootNodes[0])}return i}_getRowDefs(e,i){if(1==this._rowDefs.length)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(i,e));else{let s=this._rowDefs.find(c=>c.when&&c.when(i,e))||this._defaultRowDef;s&&r.push(s)}return r}_getEmbeddedViewArgs(e,i){return{templateRef:e.rowDef.template,context:{$implicit:e.data},index:i}}_renderRow(e,i,r,s={}){const c=e.viewContainer.createEmbeddedView(i.template,s,r);return this._renderCellTemplateForItem(i,s),c}_renderCellTemplateForItem(e,i){for(let r of this._getCellTemplates(e))Cg.mostRecentCellOutlet&&Cg.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,i);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){const e=this._rowOutlet.viewContainer;for(let i=0,r=e.length;i<r;i++){const c=e.get(i).context;c.count=r,c.first=0===i,c.last=i===r-1,c.even=i%2==0,c.odd=!c.even,this.multiTemplateDataRows?(c.dataIndex=this._renderRows[i].dataIndex,c.renderIndex=i):c.index=this._renderRows[i].dataIndex}}_getCellTemplates(e){return e&&e.columns?Array.from(e.columns,i=>{const r=this._columnDefsByName.get(i);return e.extractCellTemplate(r)}):[]}_applyNativeTableSections(){const e=this._document.createDocumentFragment(),i=[{tag:"thead",outlets:[this._headerRowOutlet]},{tag:"tbody",outlets:[this._rowOutlet,this._noDataRowOutlet]},{tag:"tfoot",outlets:[this._footerRowOutlet]}];for(const r of i){const s=this._document.createElement(r.tag);s.setAttribute("role","rowgroup");for(const c of r.outlets)s.appendChild(c.elementRef.nativeElement);e.appendChild(s)}this._elementRef.nativeElement.appendChild(e)}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){const e=(i,r)=>i||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){this._stickyStyler=new Xte(this._isNativeHtmlTable,this.stickyCssClass,this._dir?this._dir.value:"ltr",this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:dt()).pipe(xr(this._onDestroy)).subscribe(i=>{this._stickyStyler.direction=i,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(i=>!i._table||i._table===this)}_updateNoDataRow(){const e=this._customNoDataRow||this._noDataRow;if(!e)return;const i=0===this._rowOutlet.viewContainer.length;if(i===this._isShowingNoDataRow)return;const r=this._noDataRowOutlet.viewContainer;if(i){const s=r.createEmbeddedView(e.templateRef),c=s.rootNodes[0];1===s.rootNodes.length&&(null==c?void 0:c.nodeType)===this._document.ELEMENT_NODE&&(c.setAttribute("role","row"),c.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=i}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.ZZ4),o.Y36(o.sBO),o.Y36(o.SBq),o.$8M("role"),o.Y36(ix,8),o.Y36(ve),o.Y36(yh),o.Y36($D),o.Y36(oP),o.Y36(eP),o.Y36(dP,12),o.Y36(o.R0b,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(e,i,r){if(1&e&&(o.Suo(r,kx,5),o.Suo(r,bg,5),o.Suo(r,Nx,5),o.Suo(r,nS,5),o.Suo(r,iS,5)),2&e){let s;o.iGM(s=o.CRH())&&(i._noDataRow=s.first),o.iGM(s=o.CRH())&&(i._contentColumnDefs=s),o.iGM(s=o.CRH())&&(i._contentRowDefs=s),o.iGM(s=o.CRH())&&(i._contentHeaderRowDefs=s),o.iGM(s=o.CRH())&&(i._contentFooterRowDefs=s)}},viewQuery:function(e,i){if(1&e&&(o.Gf(Px,7),o.Gf(Fx,7),o.Gf(Lx,7),o.Gf(Bx,7)),2&e){let r;o.iGM(r=o.CRH())&&(i._rowOutlet=r.first),o.iGM(r=o.CRH())&&(i._headerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._footerRowOutlet=r.first),o.iGM(r=o.CRH())&&(i._noDataRowOutlet=r.first)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("cdk-table-fixed-layout",i.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:"multiTemplateDataRows",fixedLayout:"fixedLayout"},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],features:[o._Bn([{provide:rw,useExisting:n},{provide:$D,useClass:ij},{provide:oP,useClass:OG},{provide:dP,useValue:null}])],ngContentSelectors:Gte,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(jte),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},directives:[Fx,Px,Bx,Lx],styles:[".cdk-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})();function Vx(n,t){return n.concat(Array.from(t))}let tne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[tP]]}),n})();const nne=[[["caption"]],[["colgroup"],["col"]]],ine=["caption","colgroup, col"];let hP=(()=>{class n extends Ux{constructor(){super(...arguments),this.stickyCssClass="mat-table-sticky",this.needsPositionStickyOnElement=!1}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-table"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("mat-table-fixed-layout",i.fixedLayout)},exportAs:["matTable"],features:[o._Bn([{provide:$D,useClass:ij},{provide:Ux,useExisting:n},{provide:rw,useExisting:n},{provide:oP,useClass:OG},{provide:dP,useValue:null}]),o.qOj],ngContentSelectors:ine,decls:6,vars:0,consts:[["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(e,i){1&e&&(o.F$t(nne),o.Hsn(0),o.Hsn(1,1),o.GkF(2,0)(3,1)(4,2)(5,3))},directives:[Fx,Px,Bx,Lx],styles:["mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}table.mat-table{border-spacing:0}tr.mat-header-row{height:56px}tr.mat-row,tr.mat-footer-row{height:48px}th.mat-header-cell{text-align:left}[dir=rtl] th.mat-header-cell{text-align:right}th.mat-header-cell,td.mat-cell,td.mat-footer-cell{padding:0;border-bottom-width:1px;border-bottom-style:solid}th.mat-header-cell:first-of-type,td.mat-cell:first-of-type,td.mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] th.mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:first-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}th.mat-header-cell:last-of-type,td.mat-cell:last-of-type,td.mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] th.mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-cell:last-of-type:not(:only-of-type),[dir=rtl] td.mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}.mat-table-sticky{position:sticky !important}.mat-table-fixed-layout{table-layout:fixed}\n"],encapsulation:2}),n})(),Hx=(()=>{class n extends sw{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matCellDef",""]],features:[o._Bn([{provide:sw,useExisting:n}]),o.qOj]}),n})(),jx=(()=>{class n extends ow{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderCellDef",""]],features:[o._Bn([{provide:ow,useExisting:n}]),o.qOj]}),n})(),Gx=(()=>{class n extends bg{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matColumnDef",""]],inputs:{sticky:"sticky",name:["matColumnDef","name"]},features:[o._Bn([{provide:bg,useExisting:n},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:n}]),o.qOj]}),n})(),$x=(()=>{class n extends rP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-header-cell"],features:[o.qOj]}),n})(),Wx=(()=>{class n extends sP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:["role","gridcell",1,"mat-cell"],features:[o.qOj]}),n})(),fP=(()=>{class n extends nS{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matHeaderRowDef",""]],inputs:{columns:["matHeaderRowDef","columns"],sticky:["matHeaderRowDefSticky","sticky"]},features:[o._Bn([{provide:nS,useExisting:n}]),o.qOj]}),n})(),pP=(()=>{class n extends Nx{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["","matRowDef",""]],inputs:{columns:["matRowDefColumns","columns"],when:["matRowDefWhen","when"]},features:[o._Bn([{provide:Nx,useExisting:n}]),o.qOj]}),n})(),gP=(()=>{class n extends lP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-header-row"],exportAs:["matHeaderRow"],features:[o._Bn([{provide:lP,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Cg],encapsulation:2}),n})(),mP=(()=>{class n extends uP{}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-row"],exportAs:["matRow"],features:[o._Bn([{provide:uP,useExisting:n}]),o.qOj],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(e,i){1&e&&o.GkF(0,0)},directives:[Cg],encapsulation:2}),n})(),fne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[tne,eo],eo]}),n})();class PG extends class gne extends class ZQ{}{constructor(t=[]){super(),this._renderData=new gi([]),this._filter=new gi(""),this._internalPageChanges=new an.x,this._renderChangesSubscription=null,this.sortingDataAccessor=(e,i)=>{const r=e[i];if(function tj(n){return!isNaN(parseFloat(n))&&!isNaN(Number(n))}(r)){const s=Number(r);return s<9007199254740991?s:r}return r},this.sortData=(e,i)=>{const r=i.active,s=i.direction;return r&&""!=s?e.sort((c,d)=>{let p=this.sortingDataAccessor(c,r),v=this.sortingDataAccessor(d,r);const E=typeof p,S=typeof v;E!==S&&("number"===E&&(p+=""),"number"===S&&(v+=""));let N=0;return null!=p&&null!=v?p>v?N=1:p<v&&(N=-1):null!=p?N=1:null!=v&&(N=-1),N*("asc"==s?1:-1)}):e},this.filterPredicate=(e,i)=>{const r=Object.keys(e).reduce((c,d)=>c+e[d]+"\u25ec","").toLowerCase(),s=i.trim().toLowerCase();return-1!=r.indexOf(s)},this._data=new gi(t),this._updateChangeSubscription()}get data(){return this._data.value}set data(t){t=Array.isArray(t)?t:[],this._data.next(t),this._renderChangesSubscription||this._filterData(t)}get filter(){return this._filter.value}set filter(t){this._filter.next(t),this._renderChangesSubscription||this._filterData(this.data)}get sort(){return this._sort}set sort(t){this._sort=t,this._updateChangeSubscription()}get paginator(){return this._paginator}set paginator(t){this._paginator=t,this._updateChangeSubscription()}_updateChangeSubscription(){var t;const e=this._sort?(0,IC.T)(this._sort.sortChange,this._sort.initialized):dt(null),i=this._paginator?(0,IC.T)(this._paginator.page,this._internalPageChanges,this._paginator.initialized):dt(null),s=os([this._data,this._filter]).pipe((0,Rt.U)(([p])=>this._filterData(p))),c=os([s,e]).pipe((0,Rt.U)(([p])=>this._orderData(p))),d=os([c,i]).pipe((0,Rt.U)(([p])=>this._pageData(p)));null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=d.subscribe(p=>this._renderData.next(p))}_filterData(t){return this.filteredData=null==this.filter||""===this.filter?t:t.filter(e=>this.filterPredicate(e,this.filter)),this.paginator&&this._updatePaginator(this.filteredData.length),this.filteredData}_orderData(t){return this.sort?this.sortData(t.slice(),this.sort):t}_pageData(t){if(!this.paginator)return t;const e=this.paginator.pageIndex*this.paginator.pageSize;return t.slice(e,e+this.paginator.pageSize)}_updatePaginator(t){Promise.resolve().then(()=>{const e=this.paginator;if(e&&(e.length=t,e.pageIndex>0)){const i=Math.ceil(e.length/e.pageSize)-1||0,r=Math.min(e.pageIndex,i);r!==e.pageIndex&&(e.pageIndex=r,this._internalPageChanges.next())}})}connect(){return this._renderChangesSubscription||this._updateChangeSubscription(),this._renderData}disconnect(){var t;null===(t=this._renderChangesSubscription)||void 0===t||t.unsubscribe(),this._renderChangesSubscription=null}}{}const mne=["*",[["mat-card-footer"]]],_ne=["*","mat-card-footer"];let FG=(()=>{class n{constructor(e){this._animationMode=e}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(JD,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-card"]],hostAttrs:[1,"mat-card","mat-focus-indicator"],hostVars:2,hostBindings:function(e,i){2&e&&o.ekj("_mat-animation-noopable","NoopAnimations"===i._animationMode)},exportAs:["matCard"],ngContentSelectors:_ne,decls:2,vars:0,template:function(e,i){1&e&&(o.F$t(mne),o.Hsn(0),o.Hsn(1,1))},styles:[".mat-card{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);display:block;position:relative;padding:16px;border-radius:4px}._mat-animation-noopable.mat-card{transition:none;animation:none}.mat-card .mat-divider-horizontal{position:absolute;left:0;width:100%}[dir=rtl] .mat-card .mat-divider-horizontal{left:auto;right:0}.mat-card .mat-divider-horizontal.mat-divider-inset{position:static;margin:0}[dir=rtl] .mat-card .mat-divider-horizontal.mat-divider-inset{margin-right:0}.cdk-high-contrast-active .mat-card{outline:solid 1px}.mat-card-actions,.mat-card-subtitle,.mat-card-content{display:block;margin-bottom:16px}.mat-card-title{display:block;margin-bottom:8px}.mat-card-actions{margin-left:-8px;margin-right:-8px;padding:8px 0}.mat-card-actions-align-end{display:flex;justify-content:flex-end}.mat-card-image{width:calc(100% + 32px);margin:0 -16px 16px -16px;display:block;overflow:hidden}.mat-card-image img{width:100%}.mat-card-footer{display:block;margin:0 -16px -16px -16px}.mat-card-actions .mat-button,.mat-card-actions .mat-raised-button,.mat-card-actions .mat-stroked-button{margin:0 8px}.mat-card-header{display:flex;flex-direction:row}.mat-card-header .mat-card-title{margin-bottom:12px}.mat-card-header-text{margin:0 16px}.mat-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;object-fit:cover}.mat-card-title-group{display:flex;justify-content:space-between}.mat-card-sm-image{width:80px;height:80px}.mat-card-md-image{width:112px;height:112px}.mat-card-lg-image{width:152px;height:152px}.mat-card-xl-image{width:240px;height:240px;margin:-8px}.mat-card-title-group>.mat-card-xl-image{margin:-8px 0 8px}@media(max-width: 599px){.mat-card-title-group{margin:0}.mat-card-xl-image{margin-left:0;margin-right:0}}.mat-card>:first-child,.mat-card-content>:first-child{margin-top:0}.mat-card>:last-child:not(.mat-card-footer),.mat-card-content>:last-child:not(.mat-card-footer){margin-bottom:0}.mat-card-image:first-child{margin-top:-16px;border-top-left-radius:inherit;border-top-right-radius:inherit}.mat-card>.mat-card-actions:last-child{margin-bottom:-8px;padding-bottom:0}.mat-card-actions:not(.mat-card-actions-align-end) .mat-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-raised-button:first-child,.mat-card-actions:not(.mat-card-actions-align-end) .mat-stroked-button:first-child{margin-left:0;margin-right:0}.mat-card-actions-align-end .mat-button:last-child,.mat-card-actions-align-end .mat-raised-button:last-child,.mat-card-actions-align-end .mat-stroked-button:last-child{margin-left:0;margin-right:0}.mat-card-title:not(:first-child),.mat-card-subtitle:not(:first-child){margin-top:-4px}.mat-card-header .mat-card-subtitle:not(:first-child){margin-top:-8px}.mat-card>.mat-card-xl-image:first-child{margin-top:-8px}.mat-card>.mat-card-xl-image:last-child{margin-bottom:-8px}\n"],encapsulation:2,changeDetection:0}),n})(),vne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[eo],eo]}),n})();function yne(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"Poster"),o.qZA())}function bne(n,t){if(1&n&&(o.TgZ(0,"td",16),o._UZ(1,"img",17),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.s9C("src",e.posterHttp,o.LSH)}}function Cne(n,t){1&n&&(o.TgZ(0,"th",18),o._uU(1,"title"),o.qZA())}function wne(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o._UZ(2,"br"),o._uU(3),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.year," "),o.xp6(2),o.hij(" ",e.title," ")}}function Ene(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"plot"),o.qZA())}function Tne(n,t){if(1&n&&(o.TgZ(0,"td",16),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.plot)}}function Dne(n,t){1&n&&o._UZ(0,"tr",20)}function Sne(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr",21),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).redirectToMovie(s)}),o.qZA()}}function Ine(n,t){if(1&n&&(o.TgZ(0,"mat-card")(1,"table",5),o.ynx(2,6),o.YNc(3,yne,2,0,"th",7),o.YNc(4,bne,2,1,"td",8),o.BQk(),o.ynx(5,9),o.YNc(6,Cne,2,0,"th",10),o.YNc(7,wne,4,2,"td",11),o.BQk(),o.ynx(8,12),o.YNc(9,Ene,2,0,"th",7),o.YNc(10,Tne,2,1,"td",8),o.BQk(),o.YNc(11,Dne,1,0,"tr",13),o.YNc(12,Sne,1,0,"tr",14),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.moviesSource),o.xp6(10),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns)}}function Ane(n,t){1&n&&(o.TgZ(0,"mat-card")(1,"h3"),o._uU(2,"No found movies"),o.qZA()())}let LG=(()=>{class n{constructor(e,i,r){this.service=e,this.activated=i,this.router=r,this.moviesSource=new PG}ngOnInit(){this.activated.paramMap.subscribe(e=>{const i=e.get("searchText");this.service.getMoviesWithPoster(i).subscribe(r=>{this.movies=r,this.moviesSource.data=r})})}get displayedColumns(){return["poster","title","year"]}redirectToMovie(e){this.router.navigate(["/movie",e.id])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hD),o.Y36($o),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-search-result-page"]],decls:10,vars:2,consts:[["fxLayout","column","fxLayoutGap","32px"],["fxLayoutAlign","center"],["fxLayout","row","fxLayoutGap","32px"],["fxFlex","75"],[4,"ngIf"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","poster"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","","style","padding:20px",4,"matHeaderCellDef"],["mat-cell","","style","padding:20px",4,"matCellDef"],["matColumnDef","year"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["alt","poster","height","165","width","300",3,"src"],["mat-header-cell","",2,"padding","20px"],["mat-cell","",2,"padding","20px"],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"mat-card",1)(2,"h1"),o._uU(3,"Movies"),o.qZA()(),o._UZ(4,"br"),o.TgZ(5,"div",2)(6,"div",3),o._UZ(7,"br"),o.YNc(8,Ine,13,3,"mat-card",4),o.YNc(9,Ane,3,0,"mat-card",4),o.qZA()()()),2&e&&(o.xp6(8),o.Q6J("ngIf",i.movies),o.xp6(1),o.Q6J("ngIf",!i.movies))},directives:[FG,si,hP,Gx,jx,$x,Hx,Wx,fP,gP,pP,mP],styles:[""]}),n})(),rS=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[Wn,eo,aj],eo]}),n})(),BG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),Nne=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Fee],imports:[[BG,rS,eo],BG,rS]}),n})();class _P{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;null!=t&&(this._attachedHost=null,t.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(t){this._attachedHost=t}}class vP extends _P{constructor(t,e,i,r){super(),this.component=t,this.viewContainerRef=e,this.injector=i,this.componentFactoryResolver=r}}class UG extends _P{constructor(t,e,i){super(),this.templateRef=t,this.viewContainerRef=e,this.context=i}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}}class kne extends _P{constructor(t){super(),this.element=t instanceof o.SBq?t.nativeElement:t}}class yP{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){return t instanceof vP?(this._attachedPortal=t,this.attachComponentPortal(t)):t instanceof UG?(this._attachedPortal=t,this.attachTemplatePortal(t)):this.attachDomPortal&&t instanceof kne?(this._attachedPortal=t,this.attachDomPortal(t)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Pne extends yP{constructor(t,e,i,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=i,this._defaultInjector=r,this.attachDomPortal=c=>{const d=c.element,p=this._document.createComment("dom-portal");d.parentNode.insertBefore(p,d),this.outletElement.appendChild(d),this._attachedPortal=c,super.setDisposeFn(()=>{p.parentNode&&p.parentNode.replaceChild(d,p)})},this._document=s}attachComponentPortal(t){const i=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component);let r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(i,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector),this.setDisposeFn(()=>r.destroy())):(r=i.create(t.injector||this._defaultInjector||o.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,i=e.createEmbeddedView(t.templateRef,t.context);return i.rootNodes.forEach(r=>this.outletElement.appendChild(r)),i.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(i);-1!==r&&e.remove(r)}),this._attachedPortal=t,i}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}}let VG=(()=>{class n extends yP{constructor(e,i,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=i,this._isInitialized=!1,this.attached=new o.vpe,this.attachDomPortal=s=>{const c=s.element,d=this._document.createComment("dom-portal");s.setAttachedHost(this),c.parentNode.insertBefore(d,c),this._getRootNode().appendChild(c),this._attachedPortal=s,super.setDisposeFn(()=>{d.parentNode&&d.parentNode.replaceChild(c,d)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedPortal=null,this._attachedRef=null}attachComponentPortal(e){e.setAttachedHost(this);const i=null!=e.viewContainerRef?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),c=i.createComponent(s,i.length,e.injector||i.injector);return i!==this._viewContainerRef&&this._getRootNode().appendChild(c.hostView.rootNodes[0]),super.setDisposeFn(()=>c.destroy()),this._attachedPortal=e,this._attachedRef=c,this.attached.emit(c),c}attachTemplatePortal(e){e.setAttachedHost(this);const i=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context);return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=i,this.attached.emit(i),i}_getRootNode(){const e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o._Vd),o.Y36(o.s_b),o.Y36(ve))},n.\u0275dir=o.lG2({type:n,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[o.qOj]}),n})(),HG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const jG=tJ();class Fne{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){const t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=fo(-this._previousScrollPosition.left),t.style.top=fo(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const t=this._document.documentElement,i=t.style,r=this._document.body.style,s=i.scrollBehavior||"",c=r.scrollBehavior||"";this._isEnabled=!1,i.left=this._previousHTMLStyles.left,i.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),jG&&(i.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),jG&&(i.scrollBehavior=s,r.scrollBehavior=c)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const e=this._document.body,i=this._viewportRuler.getViewportSize();return e.scrollHeight>i.height||e.scrollWidth>i.width}}class Lne{constructor(t,e,i,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=i,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef=t}enable(){if(this._scrollSubscription)return;const t=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{const e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class GG{enable(){}disable(){}attach(){}}function bP(n,t){return t.some(e=>n.bottom<e.top||n.top>e.bottom||n.right<e.left||n.left>e.right)}function $G(n,t){return t.some(e=>n.top<e.top||n.bottom>e.bottom||n.left<e.left||n.right>e.right)}class Bne{constructor(t,e,i,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=i,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef=t}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:i,height:r}=this._viewportRuler.getViewportSize();bP(e,[{width:i,height:r,bottom:r,right:i,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Une=(()=>{class n{constructor(e,i,r,s){this._scrollDispatcher=e,this._viewportRuler=i,this._ngZone=r,this.noop=()=>new GG,this.close=c=>new Lne(this._scrollDispatcher,this._ngZone,this._viewportRuler,c),this.block=()=>new Fne(this._viewportRuler,this._document),this.reposition=c=>new Bne(this._scrollDispatcher,this._viewportRuler,this._ngZone,c),this._document=s}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Vte),o.LFG(eP),o.LFG(o.R0b),o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class WG{constructor(t){if(this.scrollStrategy=new GG,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){const e=Object.keys(t);for(const i of e)void 0!==t[i]&&(this[i]=t[i])}}}class Vne{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}}class Hne{constructor(t,e,i,r,s,c,d,p,v){this._portalOutlet=t,this._host=e,this._pane=i,this._config=r,this._ngZone=s,this._keyboardDispatcher=c,this._document=d,this._location=p,this._outsideClickDispatcher=v,this._backdropElement=null,this._backdropClick=new an.x,this._attachments=new an.x,this._detachments=new an.x,this._locationChanges=Co.w0.EMPTY,this._backdropClickHandler=E=>this._backdropClick.next(E),this._backdropTransitionendHandler=E=>{this._disposeBackdrop(E.target)},this._keydownEvents=new an.x,this._outsidePointerEvents=new an.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,ui.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){var t;const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),null===(t=this._host)||void 0===t||t.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=Object.assign(Object.assign({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Object.assign(Object.assign({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){const t=this._config.direction;return t?"string"==typeof t?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const t=this._pane.style;t.width=fo(this._config.width),t.height=fo(this._config.height),t.minWidth=fo(this._config.minWidth),t.minHeight=fo(this._config.minHeight),t.maxWidth=fo(this._config.maxWidth),t.maxHeight=fo(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){const t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const t=this._backdropElement;!t||(t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500)))}_toggleClasses(t,e,i){const r=nj(e||[]).filter(s=>!!s);r.length&&(i?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const t=this._ngZone.onStable.pipe(xr((0,IC.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){const t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}let CP=(()=>{class n{constructor(e,i){this._platform=i,this._document=e}ngOnDestroy(){var e;null===(e=this._containerElement)||void 0===e||e.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const e="cdk-overlay-container";if(this._platform.isBrowser||Ek()){const r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}const i=this._document.createElement("div");i.classList.add(e),Ek()?i.setAttribute("platform","test"):this._platform.isBrowser||i.setAttribute("platform","server"),this._document.body.appendChild(i),this._containerElement=i}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(yh))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zG="cdk-overlay-connected-position-bounding-box",jne=/([A-Za-z%]+)$/;class Gne{constructor(t,e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new an.x,this._resizeSubscription=Co.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}get positions(){return this._preferredPositions}attach(t){this._validatePositions(),t.hostElement.classList.add(zG),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const t=this._originRect,e=this._overlayRect,i=this._viewportRect,r=this._containerRect,s=[];let c;for(let d of this._preferredPositions){let p=this._getOriginPoint(t,r,d),v=this._getOverlayPoint(p,e,d),E=this._getOverlayFit(v,e,i,d);if(E.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,p);this._canFitWithFlexibleDimensions(E,v,i)?s.push({position:d,origin:p,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(p,d)}):(!c||c.overlayFit.visibleArea<E.visibleArea)&&(c={overlayFit:E,overlayPoint:v,originPoint:p,position:d,overlayRect:e})}if(s.length){let d=null,p=-1;for(const v of s){const E=v.boundingBoxRect.width*v.boundingBoxRect.height*(v.position.weight||1);E>p&&(p=E,d=v)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(c.position,c.originPoint);this._applyPosition(c.position,c.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&g0(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(zG),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,-1===t.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,i){let r,s;if("center"==i.originX)r=t.left+t.width/2;else{const c=this._isRtl()?t.right:t.left,d=this._isRtl()?t.left:t.right;r="start"==i.originX?c:d}return e.left<0&&(r-=e.left),s="center"==i.originY?t.top+t.height/2:"top"==i.originY?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,i){let r,s;return r="center"==i.overlayX?-e.width/2:"start"===i.overlayX?this._isRtl()?-e.width:0:this._isRtl()?0:-e.width,s="center"==i.overlayY?-e.height/2:"top"==i.overlayY?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,i,r){const s=ZG(e);let{x:c,y:d}=t,p=this._getOffset(r,"x"),v=this._getOffset(r,"y");p&&(c+=p),v&&(d+=v);let N=0-d,F=d+s.height-i.height,G=this._subtractOverflows(s.width,0-c,c+s.width-i.width),J=this._subtractOverflows(s.height,N,F),de=G*J;return{visibleArea:de,isCompletelyWithinViewport:s.width*s.height===de,fitsInViewportVertically:J===s.height,fitsInViewportHorizontally:G==s.width}}_canFitWithFlexibleDimensions(t,e,i){if(this._hasFlexibleDimensions){const r=i.bottom-e.y,s=i.right-e.x,c=qG(this._overlayRef.getConfig().minHeight),d=qG(this._overlayRef.getConfig().minWidth),v=t.fitsInViewportHorizontally||null!=d&&d<=s;return(t.fitsInViewportVertically||null!=c&&c<=r)&&v}return!1}_pushOverlayOnScreen(t,e,i){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};const r=ZG(e),s=this._viewportRect,c=Math.max(t.x+r.width-s.width,0),d=Math.max(t.y+r.height-s.height,0),p=Math.max(s.top-i.top-t.y,0),v=Math.max(s.left-i.left-t.x,0);let E=0,S=0;return E=r.width<=s.width?v||-c:t.x<this._viewportMargin?s.left-i.left-t.x:0,S=r.height<=s.height?p||-d:t.y<this._viewportMargin?s.top-i.top-t.y:0,this._previousPushAmount={x:E,y:S},{x:t.x+E,y:t.y+S}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._lastPosition=t,this._positionChanges.observers.length){const i=this._getScrollVisibility(),r=new Vne(t,i);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;const e=this._boundingBox.querySelectorAll(this._transformOriginSelector);let i,r=t.overlayY;i="center"===t.overlayX?"center":this._isRtl()?"start"===t.overlayX?"right":"left":"start"===t.overlayX?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${i} ${r}`}_calculateBoundingBoxRect(t,e){const i=this._viewportRect,r=this._isRtl();let s,c,d,E,S,N;if("top"===e.overlayY)c=t.y,s=i.height-c+this._viewportMargin;else if("bottom"===e.overlayY)d=i.height-t.y+2*this._viewportMargin,s=i.height-d+this._viewportMargin;else{const F=Math.min(i.bottom-t.y+i.top,t.y),G=this._lastBoundingBoxSize.height;s=2*F,c=t.y-F,s>G&&!this._isInitialRender&&!this._growAfterOpen&&(c=t.y-G/2)}if("end"===e.overlayX&&!r||"start"===e.overlayX&&r)N=i.width-t.x+this._viewportMargin,E=t.x-this._viewportMargin;else if("start"===e.overlayX&&!r||"end"===e.overlayX&&r)S=t.x,E=i.right-t.x;else{const F=Math.min(i.right-t.x+i.left,t.x),G=this._lastBoundingBoxSize.width;E=2*F,S=t.x-F,E>G&&!this._isInitialRender&&!this._growAfterOpen&&(S=t.x-G/2)}return{top:c,left:S,bottom:d,right:N,width:E,height:s}}_setBoundingBoxStyles(t,e){const i=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(i.height=Math.min(i.height,this._lastBoundingBoxSize.height),i.width=Math.min(i.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,c=this._overlayRef.getConfig().maxWidth;r.height=fo(i.height),r.top=fo(i.top),r.bottom=fo(i.bottom),r.width=fo(i.width),r.left=fo(i.left),r.right=fo(i.right),r.alignItems="center"===e.overlayX?"center":"end"===e.overlayX?"flex-end":"flex-start",r.justifyContent="center"===e.overlayY?"center":"bottom"===e.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=fo(s)),c&&(r.maxWidth=fo(c))}this._lastBoundingBoxSize=i,g0(this._boundingBox.style,r)}_resetBoundingBoxStyles(){g0(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){g0(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){const i={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,c=this._overlayRef.getConfig();if(r){const E=this._viewportRuler.getViewportScrollPosition();g0(i,this._getExactOverlayY(e,t,E)),g0(i,this._getExactOverlayX(e,t,E))}else i.position="static";let d="",p=this._getOffset(e,"x"),v=this._getOffset(e,"y");p&&(d+=`translateX(${p}px) `),v&&(d+=`translateY(${v}px)`),i.transform=d.trim(),c.maxHeight&&(r?i.maxHeight=fo(c.maxHeight):s&&(i.maxHeight="")),c.maxWidth&&(r?i.maxWidth=fo(c.maxWidth):s&&(i.maxWidth="")),g0(this._pane.style,i)}_getExactOverlayY(t,e,i){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),"bottom"===t.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=fo(s.y),r}_getExactOverlayX(t,e,i){let c,r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,i)),c=this._isRtl()?"end"===t.overlayX?"left":"right":"end"===t.overlayX?"right":"left","right"===c?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=fo(s.x),r}_getScrollVisibility(){const t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),i=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:$G(t,i),isOriginOutsideView:bP(t,i),isOverlayClipped:$G(e,i),isOverlayOutsideView:bP(e,i)}}_subtractOverflows(t,...e){return e.reduce((i,r)=>i-Math.max(r,0),t)}_getNarrowedViewportRect(){const t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,i=this._viewportRuler.getViewportScrollPosition();return{top:i.top+this._viewportMargin,left:i.left+this._viewportMargin,right:i.left+t-this._viewportMargin,bottom:i.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return"x"===e?null==t.offsetX?this._offsetX:t.offsetX:null==t.offsetY?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&nj(t).forEach(e=>{""!==e&&-1===this._appliedPanelClasses.indexOf(e)&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){const t=this._origin;if(t instanceof o.SBq)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();const e=t.width||0,i=t.height||0;return{top:t.y,bottom:t.y+i,left:t.x,right:t.x+e,height:i,width:e}}}function g0(n,t){for(let e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}function qG(n){if("number"!=typeof n&&null!=n){const[t,e]=n.split(jne);return e&&"px"!==e?null:parseFloat(t)}return n||null}function ZG(n){return{top:Math.floor(n.top),right:Math.floor(n.right),bottom:Math.floor(n.bottom),left:Math.floor(n.left),width:Math.floor(n.width),height:Math.floor(n.height)}}const YG="cdk-global-overlay-wrapper";class $ne{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(t){const e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(YG),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._rightOffset="",this._leftOffset=t,this._justifyContent="flex-start",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._leftOffset="",this._rightOffset=t,this._justifyContent="flex-end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._justifyContent="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,i=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:c,maxHeight:d}=i,p=!("100%"!==r&&"100vw"!==r||c&&"100%"!==c&&"100vw"!==c),v=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d);t.position=this._cssPosition,t.marginLeft=p?"0":this._leftOffset,t.marginTop=v?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=this._rightOffset,p?e.justifyContent="flex-start":"center"===this._justifyContent?e.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?e.justifyContent="flex-end":"flex-end"===this._justifyContent&&(e.justifyContent="flex-start"):e.justifyContent=this._justifyContent,e.alignItems=v?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,i=e.style;e.classList.remove(YG),i.justifyContent=i.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}}let Wne=(()=>{class n{constructor(e,i,r,s){this._viewportRuler=e,this._document=i,this._platform=r,this._overlayContainer=s}global(){return new $ne}flexibleConnectedTo(e){return new Gne(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(eP),o.LFG(ve),o.LFG(yh),o.LFG(CP))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),KG=(()=>{class n{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){const i=this._attachedOverlays.indexOf(e);i>-1&&this._attachedOverlays.splice(i,1),0===this._attachedOverlays.length&&this.detach()}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zne=(()=>{class n extends KG{constructor(e,i){super(e),this._ngZone=i,this._keydownListener=r=>{const s=this._attachedOverlays;for(let c=s.length-1;c>-1;c--)if(s[c]._keydownEvents.observers.length>0){const d=s[c]._keydownEvents;this._ngZone?this._ngZone.run(()=>d.next(r)):d.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),qne=(()=>{class n extends KG{constructor(e,i,r){super(e),this._platform=i,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=l0(s)},this._clickListener=s=>{const c=l0(s),d="click"===s.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:c;this._pointerDownEventTarget=null;const p=this._attachedOverlays.slice();for(let v=p.length-1;v>-1;v--){const E=p[v];if(E._outsidePointerEvents.observers.length<1||!E.hasAttached())continue;if(E.overlayElement.contains(c)||E.overlayElement.contains(d))break;const S=E._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>S.next(s)):S.next(s)}}}add(e){if(super.add(e),!this._isAttached){const i=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(i)):this._addEventListeners(i),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=i.style.cursor,i.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(ve),o.LFG(yh),o.LFG(o.R0b,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Zne=0,aw=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S,N){this.scrollStrategies=e,this._overlayContainer=i,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=c,this._injector=d,this._ngZone=p,this._document=v,this._directionality=E,this._location=S,this._outsideClickDispatcher=N}create(e){const i=this._createHostElement(),r=this._createPaneElement(i),s=this._createPortalOutlet(r),c=new WG(e);return c.direction=c.direction||this._directionality.value,new Hne(s,i,r,c,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(e){const i=this._document.createElement("div");return i.id="cdk-overlay-"+Zne++,i.classList.add("cdk-overlay-pane"),e.appendChild(i),i}_createHostElement(){const e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(o.z2F)),new Pne(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(Une),o.LFG(CP),o.LFG(o._Vd),o.LFG(Wne),o.LFG(zne),o.LFG(o.zs3),o.LFG(o.R0b),o.LFG(ve),o.LFG(ix),o.LFG(Ze),o.LFG(qne))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Qne={provide:new o.OlP("cdk-connected-overlay-scroll-strategy"),deps:[aw],useFactory:function Kne(n){return()=>n.scrollStrategies.reposition()}};let wP=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[aw,Qne],imports:[[WD,HG,tP],tP]}),n})();function Jne(n,t){}class EP{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const Xne={dialogContainer:ZD("dialogContainer",[R_("void, exit",ra({opacity:0,transform:"scale(0.7)"})),R_("enter",ra({transform:"none"})),M_("* => enter",Cj([c0("150ms cubic-bezier(0, 0, 0.2, 1)",ra({transform:"none",opacity:1})),Sk("@*",Dk(),{optional:!0})])),M_("* => void, * => exit",Cj([c0("75ms cubic-bezier(0.4, 0.0, 0.2, 1)",ra({opacity:0})),Sk("@*",Dk(),{optional:!0})]))])};let eie=(()=>{class n extends yP{constructor(e,i,r,s,c,d,p,v){super(),this._elementRef=e,this._focusTrapFactory=i,this._changeDetectorRef=r,this._config=c,this._interactivityChecker=d,this._ngZone=p,this._focusMonitor=v,this._animationStateChanged=new o.vpe,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this.attachDomPortal=E=>(this._portalOutlet.hasAttached(),this._portalOutlet.attachDomPortal(E)),this._ariaLabelledBy=c.ariaLabelledBy||null,this._document=s}_initializeWithAttachedContent(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=wk())}attachComponentPortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachComponentPortal(e)}attachTemplatePortal(e){return this._portalOutlet.hasAttached(),this._portalOutlet.attachTemplatePortal(e)}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,i){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(i)}_focusByCssSelector(e,i){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,i)}_trapFocus(){const e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(i=>{i||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const e=this._elementFocusedBeforeDialogWasOpened;if(this._config.restoreFocus&&e&&"function"==typeof e.focus){const i=wk(),r=this._elementRef.nativeElement;(!i||i===this._document.body||i===r||r.contains(i))&&(this._focusMonitor?(this._focusMonitor.focusVia(e,this._closeInteractionType),this._closeInteractionType=null):e.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const e=this._elementRef.nativeElement,i=wk();return e===i||e.contains(i)}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(o.SBq),o.Y36(DJ),o.Y36(o.sBO),o.Y36(ve,8),o.Y36(EP),o.Y36(uj),o.Y36(o.R0b),o.Y36(mj))},n.\u0275dir=o.lG2({type:n,viewQuery:function(e,i){if(1&e&&o.Gf(VG,7),2&e){let r;o.iGM(r=o.CRH())&&(i._portalOutlet=r.first)}},features:[o.qOj]}),n})(),tie=(()=>{class n extends eie{constructor(){super(...arguments),this._state="enter"}_onAnimationDone({toState:e,totalTime:i}){"enter"===e?(this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:i})):"exit"===e&&(this._restoreFocus(),this._animationStateChanged.next({state:"closed",totalTime:i}))}_onAnimationStart({toState:e,totalTime:i}){"enter"===e?this._animationStateChanged.next({state:"opening",totalTime:i}):("exit"===e||"void"===e)&&this._animationStateChanged.next({state:"closing",totalTime:i})}_startExitAnimation(){this._state="exit",this._changeDetectorRef.markForCheck()}_initializeWithAttachedContent(){super._initializeWithAttachedContent(),this._config.delayFocusTrap||this._trapFocus()}}return n.\u0275fac=function(){let t;return function(i){return(t||(t=o.n5z(n)))(i||n)}}(),n.\u0275cmp=o.Xpm({type:n,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1","aria-modal","true",1,"mat-dialog-container"],hostVars:6,hostBindings:function(e,i){1&e&&o.WFA("@dialogContainer.start",function(s){return i._onAnimationStart(s)})("@dialogContainer.done",function(s){return i._onAnimationDone(s)}),2&e&&(o.Ikx("id",i._id),o.uIk("role",i._config.role)("aria-labelledby",i._config.ariaLabel?null:i._ariaLabelledBy)("aria-label",i._config.ariaLabel)("aria-describedby",i._config.ariaDescribedBy||null),o.d8E("@dialogContainer",i._state))},features:[o.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(e,i){1&e&&o.YNc(0,Jne,0,0,"ng-template",0)},directives:[VG],styles:[".mat-dialog-container{display:block;padding:24px;border-radius:4px;box-sizing:border-box;overflow:auto;outline:0;width:100%;height:100%;min-height:inherit;max-height:inherit}.cdk-high-contrast-active .mat-dialog-container{outline:solid 1px}.mat-dialog-content{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;-webkit-overflow-scrolling:touch}.mat-dialog-title{margin:0 0 20px;display:block}.mat-dialog-actions{padding:8px 0;display:flex;flex-wrap:wrap;min-height:52px;align-items:center;box-sizing:content-box;margin-bottom:-24px}.mat-dialog-actions[align=end]{justify-content:flex-end}.mat-dialog-actions[align=center]{justify-content:center}.mat-dialog-actions .mat-button-base+.mat-button-base,.mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}\n"],encapsulation:2,data:{animation:[Xne.dialogContainer]}}),n})(),nie=0;class iie{constructor(t,e,i="mat-dialog-"+nie++){this._overlayRef=t,this._containerInstance=e,this.id=i,this.disableClose=this._containerInstance._config.disableClose,this._afterOpened=new an.x,this._afterClosed=new an.x,this._beforeClosed=new an.x,this._state=0,e._id=i,e._animationStateChanged.pipe(zn(r=>"opened"===r.state),(0,ui.q)(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),e._animationStateChanged.pipe(zn(r=>"closed"===r.state),(0,ui.q)(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._afterClosed.next(this._result),this._afterClosed.complete(),this.componentInstance=null,this._overlayRef.dispose()}),t.keydownEvents().pipe(zn(r=>27===r.keyCode&&!this.disableClose&&!function uJ(n,...t){return t.length?t.some(e=>n[e]):n.altKey||n.shiftKey||n.ctrlKey||n.metaKey}(r))).subscribe(r=>{r.preventDefault(),QG(this,"keyboard")}),t.backdropClick().subscribe(()=>{this.disableClose?this._containerInstance._recaptureFocus():QG(this,"mouse")})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(zn(e=>"closing"===e.state),(0,ui.q)(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._afterClosed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._overlayRef.backdropClick()}keydownEvents(){return this._overlayRef.keydownEvents()}updatePosition(t){let e=this._getPositionStrategy();return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._overlayRef.updatePosition(),this}updateSize(t="",e=""){return this._overlayRef.updateSize({width:t,height:e}),this._overlayRef.updatePosition(),this}addPanelClass(t){return this._overlayRef.addPanelClass(t),this}removePanelClass(t){return this._overlayRef.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._overlayRef.dispose()}_getPositionStrategy(){return this._overlayRef.getConfig().positionStrategy}}function QG(n,t,e){return void 0!==n._containerInstance&&(n._containerInstance._closeInteractionType=t),n.close(e)}const rie=new o.OlP("MatDialogData"),sie=new o.OlP("mat-dialog-default-options"),JG=new o.OlP("mat-dialog-scroll-strategy"),aie={provide:JG,deps:[aw],useFactory:function oie(n){return()=>n.scrollStrategies.block()}};let lie=(()=>{class n{constructor(e,i,r,s,c,d,p,v,E,S){this._overlay=e,this._injector=i,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=c,this._dialogRefConstructor=p,this._dialogContainerType=v,this._dialogDataToken=E,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new an.x,this._afterOpenedAtThisLevel=new an.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Wa(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(ws(void 0))),this._scrollStrategy=d}get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}open(e,i){i=function uie(n,t){return Object.assign(Object.assign({},t),n)}(i,this._defaultOptions||new EP),i.id&&this.getDialogById(i.id);const r=this._createOverlay(i),s=this._attachDialogContainer(r,i),c=this._attachDialogContent(e,s,r,i);return this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(c),c.afterClosed().subscribe(()=>this._removeOpenDialog(c)),this.afterOpened.next(c),s._initializeWithAttachedContent(),c}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(i=>i.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_createOverlay(e){const i=this._getOverlayConfig(e);return this._overlay.create(i)}_getOverlayConfig(e){const i=new WG({positionStrategy:this._overlay.position().global(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(i.backdropClass=e.backdropClass),i}_attachDialogContainer(e,i){const s=o.zs3.create({parent:i&&i.viewContainerRef&&i.viewContainerRef.injector||this._injector,providers:[{provide:EP,useValue:i}]}),c=new vP(this._dialogContainerType,i.viewContainerRef,s,i.componentFactoryResolver);return e.attach(c).instance}_attachDialogContent(e,i,r,s){const c=new this._dialogRefConstructor(r,i,s.id);if(e instanceof o.Rgc)i.attachTemplatePortal(new UG(e,null,{$implicit:s.data,dialogRef:c}));else{const d=this._createInjector(s,c,i),p=i.attachComponentPortal(new vP(e,s.viewContainerRef,d,s.componentFactoryResolver));c.componentInstance=p.instance}return c.updateSize(s.width,s.height).updatePosition(s.position),c}_createInjector(e,i,r){const s=e&&e.viewContainerRef&&e.viewContainerRef.injector,c=[{provide:this._dialogContainerType,useValue:r},{provide:this._dialogDataToken,useValue:e.data},{provide:this._dialogRefConstructor,useValue:i}];return e.direction&&(!s||!s.get(ix,null,o.XFs.Optional))&&c.push({provide:ix,useValue:{value:e.direction,change:dt()}}),o.zs3.create({parent:s||this._injector,providers:c})}_removeOpenDialog(e){const i=this.openDialogs.indexOf(e);i>-1&&(this.openDialogs.splice(i,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((r,s)=>{r?s.setAttribute("aria-hidden",r):s.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const e=this._overlayContainer.getContainerElement();if(e.parentElement){const i=e.parentElement.children;for(let r=i.length-1;r>-1;r--){let s=i[r];s!==e&&"SCRIPT"!==s.nodeName&&"STYLE"!==s.nodeName&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_closeDialogs(e){let i=e.length;for(;i--;)e[i].close()}}return n.\u0275fac=function(e){o.$Z()},n.\u0275dir=o.lG2({type:n}),n})(),cie=(()=>{class n extends lie{constructor(e,i,r,s,c,d,p,v){super(e,i,s,d,p,c,iie,tie,rie,v)}}return n.\u0275fac=function(e){return new(e||n)(o.LFG(aw),o.LFG(o.zs3),o.LFG(Ze,8),o.LFG(sie,8),o.LFG(JG),o.LFG(n,12),o.LFG(CP),o.LFG(JD,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),die=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[cie,aie],imports:[[wP,HG,eo],eo]}),n})();const gie={provide:new o.OlP("mat-tooltip-scroll-strategy"),deps:[aw],useFactory:function pie(n){return()=>n.scrollStrategies.reposition({scrollThrottle:20})}};let XG=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[gie],imports:[[MJ,Wn,wP,eo],eo,Mx]}),n})();const Cie={provide:new o.OlP("mat-select-scroll-strategy"),deps:[aw],useFactory:function bie(n){return()=>n.scrollStrategies.reposition()}};let wie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[Cie],imports:[[Wn,wP,fG,eo],Mx,rS,fG,eo]}),n})();function Eie(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"profile"),o.qZA())}function Tie(n,t){if(1&n&&(o.TgZ(0,"td",16),o._UZ(1,"img",17),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.s9C("src",e.profile_path,o.LSH)}}function Die(n,t){1&n&&(o.TgZ(0,"th",15),o._uU(1,"name"),o.qZA())}function Sie(n,t){if(1&n&&(o.TgZ(0,"td",16),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.hij(" ",e.name," ")}}function Iie(n,t){1&n&&(o.TgZ(0,"th",18),o._uU(1,"popularity"),o.qZA())}function Aie(n,t){if(1&n&&(o.TgZ(0,"td",19),o._uU(1),o.qZA()),2&n){const e=t.$implicit;o.xp6(1),o.Oqu(e.popularity)}}function xie(n,t){1&n&&o._UZ(0,"tr",20)}function Rie(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"tr",21),o.NdJ("click",function(){const s=o.CHM(e).$implicit;return o.oxw(2).redirectToActor(s)}),o.qZA()}}function Mie(n,t){if(1&n&&(o.TgZ(0,"mat-card")(1,"table",5),o.ynx(2,6),o.YNc(3,Eie,2,0,"th",7),o.YNc(4,Tie,2,1,"td",8),o.BQk(),o.ynx(5,9),o.YNc(6,Die,2,0,"th",7),o.YNc(7,Sie,2,1,"td",8),o.BQk(),o.ynx(8,10),o.YNc(9,Iie,2,0,"th",11),o.YNc(10,Aie,2,1,"td",12),o.BQk(),o.YNc(11,xie,1,0,"tr",13),o.YNc(12,Rie,1,0,"tr",14),o.qZA()()),2&n){const e=o.oxw();o.xp6(1),o.Q6J("dataSource",e.actorsSource),o.xp6(10),o.Q6J("matHeaderRowDef",e.displayedColumns),o.xp6(1),o.Q6J("matRowDefColumns",e.displayedColumns)}}function Oie(n,t){1&n&&(o.TgZ(0,"mat-card")(1,"h3"),o._uU(2,"No found actors"),o.qZA()())}let Nie=(()=>{class n{constructor(e,i,r){this.service=e,this.activated=i,this.router=r,this.actorsSource=new PG}ngOnInit(){this.activated.paramMap.subscribe(e=>{const i=e.get("searchText");this.service.getPeople(i).subscribe(r=>{this.actors=r,this.actorsSource.data=r})})}get displayedColumns(){return["profile_path","name","popularity"]}redirectToActor(e){this.router.navigate(["Person",e.id])}}return n.\u0275fac=function(e){return new(e||n)(o.Y36(hA),o.Y36($o),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-search-result-actors"]],decls:10,vars:2,consts:[["fxLayout","column","fxLayoutGap","32px"],["fxLayoutAlign","center"],["fxLayout","row","fxLayoutGap","32px"],["fxFlex","75"],[4,"ngIf"],["mat-table","",2,"width","100%",3,"dataSource"],["matColumnDef","profile_path"],["mat-header-cell","","style","padding:20px",4,"matHeaderCellDef"],["mat-cell","","style","padding:20px",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","popularity"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell","",2,"padding","20px"],["mat-cell","",2,"padding","20px"],["alt","poster",3,"src"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"mat-card",1)(2,"h1"),o._uU(3,"Actors"),o.qZA()(),o._UZ(4,"br"),o.TgZ(5,"div",2)(6,"div",3),o._UZ(7,"br"),o.YNc(8,Mie,13,3,"mat-card",4),o.YNc(9,Oie,3,0,"mat-card",4),o.qZA()()()),2&e&&(o.xp6(8),o.Q6J("ngIf",i.actors),o.xp6(1),o.Q6J("ngIf",!i.actors))},directives:[FG,si,hP,Gx,jx,$x,Hx,Wx,fP,gP,pP,mP],styles:[""]}),n})();function kie(n,t){if(1&n){const e=o.EpF();o.TgZ(0,"google-chart",7),o.NdJ("chartReady",function(r){return o.CHM(e),o.oxw().ready(r)})("chartError",function(r){return o.CHM(e),o.oxw().error(r)})("chartSelect",function(r){return o.CHM(e),o.oxw().select(r)}),o.qZA()}if(2&n){const e=o.oxw();o.Q6J("data",e.lineChart)}}const Pie=[{path:"SearchResults/:searchText",component:LG},{path:"movie/:id",component:Ste},{path:"profile/:userEmail",component:K2},{path:"Movies/SearchResults/:searchText",component:LG},{path:"Actors/SearchResults/:searchText",component:Nie},{path:"Person/:id",component:(()=>{class n{constructor(e,i,r){this.activated=e,this.service=i,this.router=r,this.knownfor="knownfor"}ngOnInit(){this.activated.paramMap.subscribe(e=>{this.id=e.get("id"),this.knownfor=this.knownfor+","+this.id}),this.service.getPersonById(this.id).subscribe(e=>{this.person=e}),this.service.getFullCreditId(this.id).subscribe(e=>{console.info(e),this.movies=e,this.lineChart=this.service.getStats2(e)})}select(e){let i=e.row;null!=i&&(console.log(this.movies[i].original_title),console.log(this.movies[i].imdb_id),this.router.navigate(["/movie",this.movies[i].imdb_id])),this.selectEvent=e}ready(e){console.log(e.message)}error(e){console.error("Error: "+e)}getStats(){let i=[["hello","Career"],["D",9]];return i.push(["A",90]),{chartType:FC.LineChart,dataTable:i,options:{title:"Career Development"}}}}return n.\u0275fac=function(e){return new(e||n)(o.Y36($o),o.Y36(hA),o.Y36(Li))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-person"]],decls:18,vars:8,consts:[[1,"container",2,"margin","100px"],[1,"row"],[1,"col"],["alt","poster",3,"src"],[2,"color","black"],[3,"data","chartReady","chartError","chartSelect",4,"ngIf"],[3,"movieId"],[3,"data","chartReady","chartError","chartSelect"]],template:function(e,i){1&e&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2),o._UZ(3,"img",3),o.qZA(),o.TgZ(4,"div",2)(5,"p",4),o._uU(6),o.qZA(),o.TgZ(7,"p",4),o._uU(8),o.qZA(),o.TgZ(9,"p",4),o._uU(10),o.qZA(),o.TgZ(11,"p",4),o._uU(12),o.qZA()(),o.TgZ(13,"div",2)(14,"p",4),o._uU(15),o.qZA()()(),o.YNc(16,kie,1,1,"google-chart",5),o.qZA(),o._UZ(17,"app-comments",6)),2&e&&(o.xp6(3),o.s9C("src",i.person.profile_path,o.LSH),o.xp6(3),o.Oqu(i.person.name),o.xp6(2),o.Oqu(i.person.birthday),o.xp6(2),o.Oqu(i.person.popularity),o.xp6(2),o.Oqu(i.person.place_of_birth),o.xp6(3),o.Oqu(i.person.biography),o.xp6(1),o.Q6J("ngIf",i.movies),o.xp6(1),o.Q6J("movieId",i.id))},directives:[si,B4,DG],styles:[""]}),n})()}];let Fie=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=o.oAB({type:n,bootstrap:[B5]}),n.\u0275inj=o.cJS({providers:[h_],imports:[[vB,Kee,U4,lte,y5,$Q,zQ,vne,vo,R5,V5,U5,g4,P4,Yh.forRoot(Pie),rS,Nne,Q1,die,fne,XG,zr.hO.initializeApp(KO.firebase),l6,m6,RY,jQ,Wn,Q1,wie,rS,Ree,XG]]}),n})();KO.production&&(0,o.G48)(),Pu().bootstrapModule(Fie).catch(n=>console.error(n))},5867:(wt,He,W)=>{"use strict";W.d(He,{C6:()=>o.getApps,Mq:()=>o.getApp});var o=W(9681);(0,o.registerVersion)("firebase","9.8.1","app")},127:(wt,He,W)=>{"use strict";W.d(He,{Z:()=>o.Z});var o=W(3942);o.Z.registerVersion("firebase","9.8.1","app-compat")},5881:(wt,He,W)=>{"use strict";W.r(He);var o=W(5861),P=W(3942),j=W(198),we=W(2090),ve=(W(9681),W(1877),W(4859));function Te(){return window}function ee(){return(ee=(0,o.Z)(function*(Ie,ce,oe){var Ye;const{BuildInfo:vt}=Te();(0,j.aq)(ce.sessionId,"AuthEvent did not contain a session ID");const Gt=yield We(ce.sessionId),dn={};return(0,j.ar)()?dn.ibi=vt.packageName:(0,j.as)()?dn.apn=vt.packageName:(0,j.at)(Ie,"operation-not-supported-in-this-environment"),vt.displayName&&(dn.appDisplayName=vt.displayName),dn.sessionId=Gt,(0,j.au)(Ie,oe,ce.type,void 0,null!==(Ye=ce.eventId)&&void 0!==Ye?Ye:void 0,dn)})).apply(this,arguments)}function mt(){return(mt=(0,o.Z)(function*(Ie){const{BuildInfo:ce}=Te(),oe={};(0,j.ar)()?oe.iosBundleId=ce.packageName:(0,j.as)()?oe.androidPackageName=ce.packageName:(0,j.at)(Ie,"operation-not-supported-in-this-environment"),yield(0,j.av)(Ie,oe)})).apply(this,arguments)}function lt(){return(lt=(0,o.Z)(function*(Ie,ce,oe){const{cordova:Ye}=Te();let vt=()=>{};try{yield new Promise((Gt,dn)=>{let On=null;function Sn(){var In;Gt();const is=null===(In=Ye.plugins.browsertab)||void 0===In?void 0:In.close;"function"==typeof is&&is(),"function"==typeof(null==oe?void 0:oe.close)&&oe.close()}function tr(){On||(On=window.setTimeout(()=>{dn((0,j.aw)(Ie,"redirect-cancelled-by-user"))},2e3))}function Ps(){"visible"===(null==document?void 0:document.visibilityState)&&tr()}ce.addPassiveListener(Sn),document.addEventListener("resume",tr,!1),(0,j.as)()&&document.addEventListener("visibilitychange",Ps,!1),vt=()=>{ce.removePassiveListener(Sn),document.removeEventListener("resume",tr,!1),document.removeEventListener("visibilitychange",Ps,!1),On&&window.clearTimeout(On)}})}finally{vt()}})).apply(this,arguments)}function We(Ie){return ut.apply(this,arguments)}function ut(){return(ut=(0,o.Z)(function*(Ie){const ce=ft(Ie),oe=yield crypto.subtle.digest("SHA-256",ce);return Array.from(new Uint8Array(oe)).map(vt=>vt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ft(Ie){if((0,j.aq)(/[0-9a-zA-Z]+/.test(Ie),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(Ie);const ce=new ArrayBuffer(Ie.length),oe=new Uint8Array(ce);for(let Ye=0;Ye<Ie.length;Ye++)oe[Ye]=Ie.charCodeAt(Ye);return oe}class Ze extends j.aA{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ce=>{this.resolveInialized=ce})}addPassiveListener(ce){this.passiveListeners.add(ce)}removePassiveListener(ce){this.passiveListeners.delete(ce)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ce){return this.resolveInialized(),this.passiveListeners.forEach(oe=>oe(ce)),super.onEvent(ce)}initialized(){var ce=this;return(0,o.Z)(function*(){yield ce.initPromise})()}}function ye(Ie){return Me.apply(this,arguments)}function Me(){return(Me=(0,o.Z)(function*(Ie){const ce=yield De()._get(Ae(Ie));return ce&&(yield De()._remove(Ae(Ie))),ce})).apply(this,arguments)}function ge(){const Ie=[],ce="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let oe=0;oe<20;oe++){const Ye=Math.floor(Math.random()*ce.length);Ie.push(ce.charAt(Ye))}return Ie.join("")}function De(){return(0,j.ay)(j.b)}function Ae(Ie){return(0,j.az)("authEvent",Ie.config.apiKey,Ie.name)}function Vt(Ie){if(!(null==Ie?void 0:Ie.includes("?")))return{};const[ce,...oe]=Ie.split("?");return(0,we.zd)(oe.join("?"))}function Lt(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,j.aw)("no-auth-event")}}function Dn(){var Ie;return(null===(Ie=null==self?void 0:self.location)||void 0===Ie?void 0:Ie.protocol)||null}function hi(Ie=(0,we.z$)()){return!("file:"!==Dn()&&"ionic:"!==Dn()||!Ie.toLowerCase().match(/iphone|ipad|ipod|android/))}function ks(){try{const Ie=self.localStorage,ce=j.aI();if(Ie)return Ie.setItem(ce,"1"),Ie.removeItem(ce),!function Ns(Ie=(0,we.z$)()){return function ts(){return(0,we.w1)()&&11===(null==document?void 0:document.documentMode)}()||function yi(Ie=(0,we.z$)()){return/Edge\/\d+/.test(Ie)}(Ie)}()||(0,we.hl)()}catch(Ie){return Ji()&&(0,we.hl)()}return!1}function Ji(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function xi(){return(function $n(){return"http:"===Dn()||"https:"===Dn()}()||(0,we.ru)()||hi())&&!function es(){return(0,we.b$)()||(0,we.UG)()}()&&ks()&&!Ji()}function Oo(){return hi()&&"undefined"!=typeof document}function ns(){return(ns=(0,o.Z)(function*(){return!!Oo()&&new Promise(Ie=>{const ce=setTimeout(()=>{Ie(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ce),Ie(!0)})})})).apply(this,arguments)}const Mn={LOCAL:"local",NONE:"none",SESSION:"session"},bi=j.ax,Hi="persistence";function Ai(Ie){return ji.apply(this,arguments)}function ji(){return(ji=(0,o.Z)(function*(Ie){yield Ie._initializationPromise;const ce=gn(),oe=j.az(Hi,Ie.config.apiKey,Ie.name);ce&&ce.setItem(oe,Ie._getPersistence())})).apply(this,arguments)}function gn(){var Ie;try{return(null===(Ie=function Ii(){return"undefined"!=typeof window?window:null}())||void 0===Ie?void 0:Ie.sessionStorage)||null}catch(ce){return null}}const Ut=j.ax;class Nt{constructor(){this.browserResolver=j.ay(j.k),this.cordovaResolver=j.ay(class Ki{constructor(){this._redirectPersistence=j.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=j.aB,this._overrideRedirectResult=j.aC}_initialize(ce){var oe=this;return(0,o.Z)(function*(){const Ye=ce._key();let vt=oe.eventManagers.get(Ye);return vt||(vt=new Ze(ce),oe.eventManagers.set(Ye,vt),oe.attachCallbackListeners(ce,vt)),vt})()}_openPopup(ce){(0,j.at)(ce,"operation-not-supported-in-this-environment")}_openRedirect(ce,oe,Ye,vt){var Gt=this;return(0,o.Z)(function*(){!function Oe(Ie){var ce,oe,Ye,vt,Gt,dn,On,Sn,tr,Ps;const In=Te();(0,j.ax)("function"==typeof(null===(ce=null==In?void 0:In.universalLinks)||void 0===ce?void 0:ce.subscribe),Ie,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,j.ax)(void 0!==(null===(oe=null==In?void 0:In.BuildInfo)||void 0===oe?void 0:oe.packageName),Ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,j.ax)("function"==typeof(null===(Gt=null===(vt=null===(Ye=null==In?void 0:In.cordova)||void 0===Ye?void 0:Ye.plugins)||void 0===vt?void 0:vt.browsertab)||void 0===Gt?void 0:Gt.openUrl),Ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.ax)("function"==typeof(null===(Sn=null===(On=null===(dn=null==In?void 0:In.cordova)||void 0===dn?void 0:dn.plugins)||void 0===On?void 0:On.browsertab)||void 0===Sn?void 0:Sn.isAvailable),Ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,j.ax)("function"==typeof(null===(Ps=null===(tr=null==In?void 0:In.cordova)||void 0===tr?void 0:tr.InAppBrowser)||void 0===Ps?void 0:Ps.open),Ie,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ce);const dn=yield Gt._initialize(ce);yield dn.initialized(),dn.resetRedirect(),(0,j.aD)(),yield Gt._originValidation(ce);const On=function Ue(Ie,ce,oe=null){return{type:ce,eventId:oe,urlResponse:null,sessionId:ge(),postBody:null,tenantId:Ie.tenantId,error:(0,j.aw)(Ie,"no-auth-event")}}(ce,Ye,vt);yield function _t(Ie,ce){return De()._set(Ae(Ie),ce)}(ce,On);const Sn=yield function ne(Ie,ce,oe){return ee.apply(this,arguments)}(ce,On,oe),tr=yield function Qe(Ie){const{cordova:ce}=Te();return new Promise(oe=>{ce.plugins.browsertab.isAvailable(Ye=>{let vt=null;Ye?ce.plugins.browsertab.openUrl(Ie):vt=ce.InAppBrowser.open(Ie,(0,j.ap)()?"_blank":"_system","location=yes"),oe(vt)})})}(Sn);return function at(Ie,ce,oe){return lt.apply(this,arguments)}(ce,dn,tr)})()}_isIframeWebStorageSupported(ce,oe){throw new Error("Method not implemented.")}_originValidation(ce){const oe=ce._key();return this.originValidationPromises[oe]||(this.originValidationPromises[oe]=function be(Ie){return mt.apply(this,arguments)}(ce)),this.originValidationPromises[oe]}attachCallbackListeners(ce,oe){const{universalLinks:Ye,handleOpenURL:vt,BuildInfo:Gt}=Te(),dn=setTimeout((0,o.Z)(function*(){yield ye(ce),oe.onEvent(Lt())}),500),On=function(){var Ps=(0,o.Z)(function*(In){clearTimeout(dn);const is=yield ye(ce);let go=null;is&&(null==In?void 0:In.url)&&(go=function te(Ie,ce){var oe,Ye;const vt=function Ce(Ie){const ce=Vt(Ie),oe=ce.link?decodeURIComponent(ce.link):void 0,Ye=Vt(oe).link,vt=ce.deep_link_id?decodeURIComponent(ce.deep_link_id):void 0;return Vt(vt).link||vt||Ye||oe||Ie}(ce);if(vt.includes("/__/auth/callback")){const Gt=Vt(vt),dn=Gt.firebaseError?function it(Ie){try{return JSON.parse(Ie)}catch(ce){return null}}(decodeURIComponent(Gt.firebaseError)):null,On=null===(Ye=null===(oe=null==dn?void 0:dn.code)||void 0===oe?void 0:oe.split("auth/"))||void 0===Ye?void 0:Ye[1],Sn=On?(0,j.aw)(On):null;return Sn?{type:Ie.type,eventId:Ie.eventId,tenantId:Ie.tenantId,error:Sn,urlResponse:null,sessionId:null,postBody:null}:{type:Ie.type,eventId:Ie.eventId,tenantId:Ie.tenantId,sessionId:Ie.sessionId,urlResponse:vt,postBody:null}}return null}(is,In.url)),oe.onEvent(go||Lt())});return function(is){return Ps.apply(this,arguments)}}();void 0!==Ye&&"function"==typeof Ye.subscribe&&Ye.subscribe(null,On);const Sn=vt,tr=`${Gt.packageName.toLowerCase()}://`;Te().handleOpenURL=function(){var Ps=(0,o.Z)(function*(In){if(In.toLowerCase().startsWith(tr)&&On({url:In}),"function"==typeof Sn)try{Sn(In)}catch(is){console.error(is)}});return function(In){return Ps.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=j.a,this._completeRedirectFn=j.aB,this._overrideRedirectResult=j.aC}_initialize(ce){var oe=this;return(0,o.Z)(function*(){return yield oe.selectUnderlyingResolver(),oe.assertedUnderlyingResolver._initialize(ce)})()}_openPopup(ce,oe,Ye,vt){var Gt=this;return(0,o.Z)(function*(){return yield Gt.selectUnderlyingResolver(),Gt.assertedUnderlyingResolver._openPopup(ce,oe,Ye,vt)})()}_openRedirect(ce,oe,Ye,vt){var Gt=this;return(0,o.Z)(function*(){return yield Gt.selectUnderlyingResolver(),Gt.assertedUnderlyingResolver._openRedirect(ce,oe,Ye,vt)})()}_isIframeWebStorageSupported(ce,oe){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ce,oe)}_originValidation(ce){return this.assertedUnderlyingResolver._originValidation(ce)}get _shouldInitProactively(){return Oo()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ut(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ce=this;return(0,o.Z)(function*(){if(ce.underlyingResolver)return;const oe=yield function Bt(){return ns.apply(this,arguments)}();ce.underlyingResolver=oe?ce.cordovaResolver:ce.browserResolver})()}}function ps(Ie){return Ie.unwrap()}function Cn(Ie){return Pi(Ie)}function Pi(Ie){const{_tokenResponse:ce}=Ie instanceof we.ZR?Ie.customData:Ie;if(!ce)return null;if(!(Ie instanceof we.ZR)&&"temporaryProof"in ce&&"phoneNumber"in ce)return j.P.credentialFromResult(Ie);const oe=ce.providerId;if(!oe||oe===j.o.PASSWORD)return null;let Ye;switch(oe){case j.o.GOOGLE:Ye=j.Q;break;case j.o.FACEBOOK:Ye=j.N;break;case j.o.GITHUB:Ye=j.T;break;case j.o.TWITTER:Ye=j.W;break;default:const{oauthIdToken:vt,oauthAccessToken:Gt,oauthTokenSecret:dn,pendingToken:On,nonce:Sn}=ce;return Gt||dn||vt||On?On?oe.startsWith("saml.")?j.aL._create(oe,On):j.J._fromParams({providerId:oe,signInMethod:oe,pendingToken:On,idToken:vt,accessToken:Gt}):new j.U(oe).credential({idToken:vt,accessToken:Gt,rawNonce:Sn}):null}return Ie instanceof we.ZR?Ye.credentialFromError(Ie):Ye.credentialFromResult(Ie)}function Qn(Ie,ce){return ce.catch(oe=>{throw oe instanceof we.ZR&&function no(Ie,ce){var oe;const Ye=null===(oe=ce.customData)||void 0===oe?void 0:oe._tokenResponse;if("auth/multi-factor-auth-required"===ce.code)ce.resolver=new le(Ie,j.an(Ie,ce));else if(Ye){const vt=Pi(ce),Gt=ce;vt&&(Gt.credential=vt,Gt.tenantId=Ye.tenantId||void 0,Gt.email=Ye.email||void 0,Gt.phoneNumber=Ye.phoneNumber||void 0)}}(Ie,oe),oe}).then(oe=>{const vt=oe.user;return{operationType:oe.operationType,credential:Cn(oe),additionalUserInfo:j.al(oe),user:je.getOrCreate(vt)}})}function X(Ie,ce){return se.apply(this,arguments)}function se(){return(se=(0,o.Z)(function*(Ie,ce){const oe=yield ce;return{verificationId:oe.verificationId,confirm:Ye=>Qn(Ie,oe.confirm(Ye))}})).apply(this,arguments)}class le{constructor(ce,oe){this.resolver=oe,this.auth=function gs(Ie){return Ie.wrapped()}(ce)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ce){return Qn(ps(this.auth),this.resolver.resolveSignIn(ce))}}class je{constructor(ce){this._delegate=ce,this.multiFactor=j.ao(ce)}static getOrCreate(ce){return je.USER_MAP.has(ce)||je.USER_MAP.set(ce,new je(ce)),je.USER_MAP.get(ce)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ce){return this._delegate.getIdTokenResult(ce)}getIdToken(ce){return this._delegate.getIdToken(ce)}linkAndRetrieveDataWithCredential(ce){return this.linkWithCredential(ce)}linkWithCredential(ce){var oe=this;return(0,o.Z)(function*(){return Qn(oe.auth,j.Z(oe._delegate,ce))})()}linkWithPhoneNumber(ce,oe){var Ye=this;return(0,o.Z)(function*(){return X(Ye.auth,j.l(Ye._delegate,ce,oe))})()}linkWithPopup(ce){var oe=this;return(0,o.Z)(function*(){return Qn(oe.auth,j.d(oe._delegate,ce,Nt))})()}linkWithRedirect(ce){var oe=this;return(0,o.Z)(function*(){return yield Ai(j.aE(oe.auth)),j.g(oe._delegate,ce,Nt)})()}reauthenticateAndRetrieveDataWithCredential(ce){return this.reauthenticateWithCredential(ce)}reauthenticateWithCredential(ce){var oe=this;return(0,o.Z)(function*(){return Qn(oe.auth,j._(oe._delegate,ce))})()}reauthenticateWithPhoneNumber(ce,oe){return X(this.auth,j.r(this._delegate,ce,oe))}reauthenticateWithPopup(ce){return Qn(this.auth,j.e(this._delegate,ce,Nt))}reauthenticateWithRedirect(ce){var oe=this;return(0,o.Z)(function*(){return yield Ai(j.aE(oe.auth)),j.h(oe._delegate,ce,Nt)})()}sendEmailVerification(ce){return j.ab(this._delegate,ce)}unlink(ce){var oe=this;return(0,o.Z)(function*(){return yield j.ak(oe._delegate,ce),oe})()}updateEmail(ce){return j.ag(this._delegate,ce)}updatePassword(ce){return j.ah(this._delegate,ce)}updatePhoneNumber(ce){return j.u(this._delegate,ce)}updateProfile(ce){return j.af(this._delegate,ce)}verifyBeforeUpdateEmail(ce,oe){return j.ac(this._delegate,ce,oe)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}je.USER_MAP=new WeakMap;const ie=j.ax;let pe=(()=>{class Ie{constructor(oe,Ye){if(this.app=oe,Ye.isInitialized())return this._delegate=Ye.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:vt}=oe.options;ie(vt,"invalid-api-key",{appName:oe.name}),ie(vt,"invalid-api-key",{appName:oe.name});const Gt="undefined"!=typeof window?Nt:void 0;this._delegate=Ye.initialize({options:{persistence:It(vt,oe.name),popupRedirectResolver:Gt}}),this._delegate._updateErrorMap(j.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?je.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(oe){this._delegate.languageCode=oe}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(oe){this._delegate.tenantId=oe}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(oe,Ye){j.G(this._delegate,oe,Ye)}applyActionCode(oe){return j.a2(this._delegate,oe)}checkActionCode(oe){return j.a3(this._delegate,oe)}confirmPasswordReset(oe,Ye){return j.a1(this._delegate,oe,Ye)}createUserWithEmailAndPassword(oe,Ye){var vt=this;return(0,o.Z)(function*(){return Qn(vt._delegate,j.a5(vt._delegate,oe,Ye))})()}fetchProvidersForEmail(oe){return this.fetchSignInMethodsForEmail(oe)}fetchSignInMethodsForEmail(oe){return j.aa(this._delegate,oe)}isSignInWithEmailLink(oe){return j.a8(this._delegate,oe)}getRedirectResult(){var oe=this;return(0,o.Z)(function*(){ie(xi(),oe._delegate,"operation-not-supported-in-this-environment");const Ye=yield j.j(oe._delegate,Nt);return Ye?Qn(oe._delegate,Promise.resolve(Ye)):{credential:null,user:null}})()}addFrameworkForLogging(oe){!function Qi(Ie,ce){(0,j.aE)(Ie)._logFramework(ce)}(this._delegate,oe)}onAuthStateChanged(oe,Ye,vt){const{next:Gt,error:dn,complete:On}=rt(oe,Ye,vt);return this._delegate.onAuthStateChanged(Gt,dn,On)}onIdTokenChanged(oe,Ye,vt){const{next:Gt,error:dn,complete:On}=rt(oe,Ye,vt);return this._delegate.onIdTokenChanged(Gt,dn,On)}sendSignInLinkToEmail(oe,Ye){return j.a7(this._delegate,oe,Ye)}sendPasswordResetEmail(oe,Ye){return j.a0(this._delegate,oe,Ye||void 0)}setPersistence(oe){var Ye=this;return(0,o.Z)(function*(){let vt;switch(function Or(Ie,ce){bi(Object.values(Mn).includes(ce),Ie,"invalid-persistence-type"),(0,we.b$)()?bi(ce!==Mn.SESSION,Ie,"unsupported-persistence-type"):(0,we.UG)()?bi(ce===Mn.NONE,Ie,"unsupported-persistence-type"):Ji()?bi(ce===Mn.NONE||ce===Mn.LOCAL&&(0,we.hl)(),Ie,"unsupported-persistence-type"):bi(ce===Mn.NONE||ks(),Ie,"unsupported-persistence-type")}(Ye._delegate,oe),oe){case Mn.SESSION:vt=j.a;break;case Mn.LOCAL:vt=(yield j.ay(j.i)._isAvailable())?j.i:j.b;break;case Mn.NONE:vt=j.L;break;default:return j.at("argument-error",{appName:Ye._delegate.name})}return Ye._delegate.setPersistence(vt)})()}signInAndRetrieveDataWithCredential(oe){return this.signInWithCredential(oe)}signInAnonymously(){return Qn(this._delegate,j.X(this._delegate))}signInWithCredential(oe){return Qn(this._delegate,j.Y(this._delegate,oe))}signInWithCustomToken(oe){return Qn(this._delegate,j.$(this._delegate,oe))}signInWithEmailAndPassword(oe,Ye){return Qn(this._delegate,j.a6(this._delegate,oe,Ye))}signInWithEmailLink(oe,Ye){return Qn(this._delegate,j.a9(this._delegate,oe,Ye))}signInWithPhoneNumber(oe,Ye){return X(this._delegate,j.s(this._delegate,oe,Ye))}signInWithPopup(oe){var Ye=this;return(0,o.Z)(function*(){return ie(xi(),Ye._delegate,"operation-not-supported-in-this-environment"),Qn(Ye._delegate,j.c(Ye._delegate,oe,Nt))})()}signInWithRedirect(oe){var Ye=this;return(0,o.Z)(function*(){return ie(xi(),Ye._delegate,"operation-not-supported-in-this-environment"),yield Ai(Ye._delegate),j.f(Ye._delegate,oe,Nt)})()}updateCurrentUser(oe){return this._delegate.updateCurrentUser(oe)}verifyPasswordResetCode(oe){return j.a4(this._delegate,oe)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return Ie.Persistence=Mn,Ie})();function rt(Ie,ce,oe){let Ye=Ie;"function"!=typeof Ie&&({next:Ye,error:ce,complete:oe}=Ie);const vt=Ye;return{next:dn=>vt(dn&&je.getOrCreate(dn)),error:ce,complete:oe}}function It(Ie,ce){const oe=function sa(Ie,ce){const oe=gn();if(!oe)return[];const Ye=j.az(Hi,Ie,ce);switch(oe.getItem(Ye)){case Mn.NONE:return[j.L];case Mn.LOCAL:return[j.i,j.a];case Mn.SESSION:return[j.a];default:return[]}}(Ie,ce);if("undefined"!=typeof self&&!oe.includes(j.i)&&oe.push(j.i),"undefined"!=typeof window)for(const Ye of[j.b,j.a])oe.includes(Ye)||oe.push(Ye);return oe.includes(j.L)||oe.push(j.L),oe}class qt{constructor(){this.providerId="phone",this._delegate=new j.P(ps(P.Z.auth()))}static credential(ce,oe){return j.P.credential(ce,oe)}verifyPhoneNumber(ce,oe){return this._delegate.verifyPhoneNumber(ce,oe)}unwrap(){return this._delegate}}qt.PHONE_SIGN_IN_METHOD=j.P.PHONE_SIGN_IN_METHOD,qt.PROVIDER_ID=j.P.PROVIDER_ID;const mn=j.ax;class ni{constructor(ce,oe,Ye=P.Z.app()){var vt;mn(null===(vt=Ye.options)||void 0===vt?void 0:vt.apiKey,"invalid-api-key",{appName:Ye.name}),this._delegate=new j.R(ce,oe,Ye.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function fr(Ie){Ie.INTERNAL.registerComponent(new ve.wA("auth-compat",ce=>{const oe=ce.getProvider("app-compat").getImmediate(),Ye=ce.getProvider("auth");return new pe(oe,Ye)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:j.A.EMAIL_SIGNIN,PASSWORD_RESET:j.A.PASSWORD_RESET,RECOVER_EMAIL:j.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:j.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:j.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:j.A.VERIFY_EMAIL}},EmailAuthProvider:j.M,FacebookAuthProvider:j.N,GithubAuthProvider:j.T,GoogleAuthProvider:j.Q,OAuthProvider:j.U,SAMLAuthProvider:j.V,PhoneAuthProvider:qt,PhoneMultiFactorGenerator:j.m,RecaptchaVerifier:ni,TwitterAuthProvider:j.W,Auth:pe,AuthCredential:j.H,Error:we.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Ie.registerVersion("@firebase/auth-compat","0.2.14")}(P.Z)},7489:function(wt,He,W){var o;wt=W.nmd(wt),function(){var P,Re="Expected a function",Te="__lodash_hash_undefined__",ne="__lodash_placeholder__",Vt=1/0,tn=9007199254740991,Lt=4294967295,Cr=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Ln="[object Arguments]",Dn="[object Array]",hi="[object Boolean]",es="[object Date]",yi="[object Error]",Ns="[object Function]",ks="[object GeneratorFunction]",Ji="[object Map]",xi="[object Number]",Bt="[object Object]",ns="[object Promise]",Mn="[object RegExp]",bi="[object Set]",Hi="[object String]",Or="[object Symbol]",ji="[object WeakMap]",gn="[object ArrayBuffer]",Ut="[object DataView]",Nt="[object Float32Array]",ps="[object Float64Array]",gs="[object Int8Array]",Cn="[object Int16Array]",no="[object Int32Array]",Pi="[object Uint8Array]",Qn="[object Uint8ClampedArray]",X="[object Uint16Array]",se="[object Uint32Array]",le=/\b__p \+= '';/g,je=/\b(__p \+=) '' \+/g,ie=/(__e\(.*?\)|\b__t\)) \+\n'';/g,pe=/&(?:amp|lt|gt|quot|#39);/g,rt=/[&<>"']/g,It=RegExp(pe.source),qt=RegExp(rt.source),mn=/<%-([\s\S]+?)%>/g,ni=/<%([\s\S]+?)%>/g,Qt=/<%=([\s\S]+?)%>/g,fr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ie=/^\w*$/,ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oe=/[\\^$.*+?()[\]{}|]/g,Ye=RegExp(oe.source),vt=/^\s+/,Gt=/\s/,dn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,On=/\{\n\/\* \[wrapped with (.+)\] \*/,Sn=/,? & /,tr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ps=/[()=,{}\[\]\/\s]/,In=/\\(\\)?/g,is=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,go=/\w*$/,Nr=/^[-+]0x[0-9a-f]+$/i,Fc=/^0b[01]+$/i,Fs=/^\[object .+?Constructor\]$/,ht=/^0o[0-7]+$/i,wn=/^(?:0|[1-9]\d*)$/,Ci=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,kr=/($^)/,oa=/['\n\r\u2028\u2029\\]/g,Fi="\\ud800-\\udfff",Gi="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",hn="\\u2700-\\u27bf",Fa="a-z\\xdf-\\xf6\\xf8-\\xff",la="A-Z\\xc0-\\xd6\\xd8-\\xde",La="\\ufe0e\\ufe0f",si="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ch="["+Fi+"]",Ba="["+si+"]",ms="["+Gi+"]",Ls="\\d+",wh="["+hn+"]",Lc="["+Fa+"]",ca="[^"+Fi+si+Ls+hn+Fa+la+"]",_s="\\ud83c[\\udffb-\\udfff]",ua="[^"+Fi+"]",Kl="(?:\\ud83c[\\udde6-\\uddff]){2}",Xi="[\\ud800-\\udbff][\\udc00-\\udfff]",dl="["+la+"]",No="(?:"+Lc+"|"+ca+")",Eg="(?:"+dl+"|"+ca+")",yd="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",$f="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",Ql="(?:"+ms+"|"+_s+")?",hl="["+La+"]?",bd=hl+Ql+"(?:\\u200d(?:"+[ua,Kl,Xi].join("|")+")"+hl+Ql+")*",Jl="(?:"+[wh,Kl,Xi].join("|")+")"+bd,Sg="(?:"+[ua+ms+"?",ms,Kl,Xi,Ch].join("|")+")",Wf=RegExp("['\u2019]","g"),da=RegExp(ms,"g"),zf=RegExp(_s+"(?="+_s+")|"+Sg+bd,"g"),Bc=RegExp([dl+"?"+Lc+"+"+yd+"(?="+[Ba,dl,"$"].join("|")+")",Eg+"+"+$f+"(?="+[Ba,dl+No,"$"].join("|")+")",dl+"?"+No+"+"+yd,dl+"+"+$f,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ls,Jl].join("|"),"g"),Ua=RegExp("[\\u200d"+Fi+Gi+La+"]"),io=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Xl=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Uc=-1,oi={};oi[Nt]=oi[ps]=oi[gs]=oi[Cn]=oi[no]=oi[Pi]=oi[Qn]=oi[X]=oi[se]=!0,oi[Ln]=oi[Dn]=oi[gn]=oi[hi]=oi[Ut]=oi[es]=oi[yi]=oi[Ns]=oi[Ji]=oi[xi]=oi[Bt]=oi[Mn]=oi[bi]=oi[Hi]=oi[ji]=!1;var wi={};wi[Ln]=wi[Dn]=wi[gn]=wi[Ut]=wi[hi]=wi[es]=wi[Nt]=wi[ps]=wi[gs]=wi[Cn]=wi[no]=wi[Ji]=wi[xi]=wi[Bt]=wi[Mn]=wi[bi]=wi[Hi]=wi[Or]=wi[Pi]=wi[Qn]=wi[X]=wi[se]=!0,wi[yi]=wi[Ns]=wi[ji]=!1;var ha={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mo=parseFloat,Sh=parseInt,wr="object"==typeof global&&global&&global.Object===Object&&global,rs="object"==typeof self&&self&&self.Object===Object&&self,Er=wr||rs||Function("return this")(),Cd=He&&!He.nodeType&&He,Va=Cd&&wt&&!wt.nodeType&&wt,Vc=Va&&Va.exports===Cd,ec=Vc&&wr.process,vs=function(){try{return Va&&Va.require&&Va.require("util").types||ec&&ec.binding&&ec.binding("util")}catch(xe){}}(),ko=vs&&vs.isArrayBuffer,Ou=vs&&vs.isDate,fi=vs&&vs.isMap,tc=vs&&vs.isRegExp,fa=vs&&vs.isSet,ai=vs&&vs.isTypedArray;function $r(ue,xe,Ne){switch(Ne.length){case 0:return ue.call(xe);case 1:return ue.call(xe,Ne[0]);case 2:return ue.call(xe,Ne[0],Ne[1]);case 3:return ue.call(xe,Ne[0],Ne[1],Ne[2])}return ue.apply(xe,Ne)}function Hc(ue,xe,Ne,kt){for(var _n=-1,ci=null==ue?0:ue.length;++_n<ci;){var ir=ue[_n];xe(kt,ir,Ne(ir),ue)}return kt}function Tr(ue,xe){for(var Ne=-1,kt=null==ue?0:ue.length;++Ne<kt&&!1!==xe(ue[Ne],Ne,ue););return ue}function Pr(ue,xe){for(var Ne=null==ue?0:ue.length;Ne--&&!1!==xe(ue[Ne],Ne,ue););return ue}function jc(ue,xe){for(var Ne=-1,kt=null==ue?0:ue.length;++Ne<kt;)if(!xe(ue[Ne],Ne,ue))return!1;return!0}function pi(ue,xe){for(var Ne=-1,kt=null==ue?0:ue.length,_n=0,ci=[];++Ne<kt;){var ir=ue[Ne];xe(ir,Ne,ue)&&(ci[_n++]=ir)}return ci}function ro(ue,xe){return!(null==ue||!ue.length)&&Fo(ue,xe,0)>-1}function pr(ue,xe,Ne){for(var kt=-1,_n=null==ue?0:ue.length;++kt<_n;)if(Ne(xe,ue[kt]))return!0;return!1}function li(ue,xe){for(var Ne=-1,kt=null==ue?0:ue.length,_n=Array(kt);++Ne<kt;)_n[Ne]=xe(ue[Ne],Ne,ue);return _n}function Fr(ue,xe){for(var Ne=-1,kt=xe.length,_n=ue.length;++Ne<kt;)ue[_n+Ne]=xe[Ne];return ue}function Gc(ue,xe,Ne,kt){var _n=-1,ci=null==ue?0:ue.length;for(kt&&ci&&(Ne=ue[++_n]);++_n<ci;)Ne=xe(Ne,ue[_n],_n,ue);return Ne}function Bs(ue,xe,Ne,kt){var _n=null==ue?0:ue.length;for(kt&&_n&&(Ne=ue[--_n]);_n--;)Ne=xe(Ne,ue[_n],_n,ue);return Ne}function Po(ue,xe){for(var Ne=-1,kt=null==ue?0:ue.length;++Ne<kt;)if(xe(ue[Ne],Ne,ue))return!0;return!1}var Ha=Je("length");function nc(ue,xe,Ne){var kt;return Ne(ue,function(_n,ci,ir){if(xe(_n,ci,ir))return kt=ci,!1}),kt}function Wc(ue,xe,Ne,kt){for(var _n=ue.length,ci=Ne+(kt?1:-1);kt?ci--:++ci<_n;)if(xe(ue[ci],ci,ue))return ci;return-1}function Fo(ue,xe,Ne){return xe==xe?function Ag(ue,xe,Ne){for(var kt=Ne-1,_n=ue.length;++kt<_n;)if(ue[kt]===xe)return kt;return-1}(ue,xe,Ne):Wc(ue,ic,Ne)}function wd(ue,xe,Ne,kt){for(var _n=Ne-1,ci=ue.length;++_n<ci;)if(kt(ue[_n],xe))return _n;return-1}function ic(ue){return ue!=ue}function Ih(ue,xe){var Ne=null==ue?0:ue.length;return Ne?Lo(ue,xe)/Ne:NaN}function Je(ue){return function(xe){return null==xe?P:xe[ue]}}function En(ue){return function(xe){return null==ue?P:ue[xe]}}function rc(ue,xe,Ne,kt,_n){return _n(ue,function(ci,ir,Ei){Ne=kt?(kt=!1,ci):xe(Ne,ci,ir,Ei)}),Ne}function Lo(ue,xe){for(var Ne,kt=-1,_n=ue.length;++kt<_n;){var ci=xe(ue[kt]);ci!==P&&(Ne=Ne===P?ci:Ne+ci)}return Ne}function fl(ue,xe){for(var Ne=-1,kt=Array(ue);++Ne<ue;)kt[Ne]=xe(Ne);return kt}function Nu(ue){return ue&&ue.slice(0,$a(ue)+1).replace(vt,"")}function ss(ue){return function(xe){return ue(xe)}}function ku(ue,xe){return li(xe,function(Ne){return ue[Ne]})}function sc(ue,xe){return ue.has(xe)}function oc(ue,xe){for(var Ne=-1,kt=ue.length;++Ne<kt&&Fo(xe,ue[Ne],0)>-1;);return Ne}function pl(ue,xe){for(var Ne=ue.length;Ne--&&Fo(xe,ue[Ne],0)>-1;);return Ne}function Dr(ue,xe){for(var Ne=ue.length,kt=0;Ne--;)ue[Ne]===xe&&++kt;return kt}var _o=En({\u00c0:"A",\u00c1:"A",\u00c2:"A",\u00c3:"A",\u00c4:"A",\u00c5:"A",\u00e0:"a",\u00e1:"a",\u00e2:"a",\u00e3:"a",\u00e4:"a",\u00e5:"a",\u00c7:"C",\u00e7:"c",\u00d0:"D",\u00f0:"d",\u00c8:"E",\u00c9:"E",\u00ca:"E",\u00cb:"E",\u00e8:"e",\u00e9:"e",\u00ea:"e",\u00eb:"e",\u00cc:"I",\u00cd:"I",\u00ce:"I",\u00cf:"I",\u00ec:"i",\u00ed:"i",\u00ee:"i",\u00ef:"i",\u00d1:"N",\u00f1:"n",\u00d2:"O",\u00d3:"O",\u00d4:"O",\u00d5:"O",\u00d6:"O",\u00d8:"O",\u00f2:"o",\u00f3:"o",\u00f4:"o",\u00f5:"o",\u00f6:"o",\u00f8:"o",\u00d9:"U",\u00da:"U",\u00db:"U",\u00dc:"U",\u00f9:"u",\u00fa:"u",\u00fb:"u",\u00fc:"u",\u00dd:"Y",\u00fd:"y",\u00ff:"y",\u00c6:"Ae",\u00e6:"ae",\u00de:"Th",\u00fe:"th",\u00df:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010a:"C",\u010c:"C",\u0107:"c",\u0109:"c",\u010b:"c",\u010d:"c",\u010e:"D",\u0110:"D",\u010f:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011a:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011b:"e",\u011c:"G",\u011e:"G",\u0120:"G",\u0122:"G",\u011d:"g",\u011f:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012a:"I",\u012c:"I",\u012e:"I",\u0130:"I",\u0129:"i",\u012b:"i",\u012d:"i",\u012f:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013b:"L",\u013d:"L",\u013f:"L",\u0141:"L",\u013a:"l",\u013c:"l",\u013e:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014a:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014b:"n",\u014c:"O",\u014e:"O",\u0150:"O",\u014d:"o",\u014f:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015a:"S",\u015c:"S",\u015e:"S",\u0160:"S",\u015b:"s",\u015d:"s",\u015f:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016a:"U",\u016c:"U",\u016e:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016b:"u",\u016d:"u",\u016f:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017b:"Z",\u017d:"Z",\u017a:"z",\u017c:"z",\u017e:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017f:"s"}),Ed=En({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Bo(ue){return"\\"+ha[ue]}function Uo(ue){return Ua.test(ue)}function Pu(ue){var xe=-1,Ne=Array(ue.size);return ue.forEach(function(kt,_n){Ne[++xe]=[_n,kt]}),Ne}function ja(ue,xe){return function(Ne){return ue(xe(Ne))}}function vo(ue,xe){for(var Ne=-1,kt=ue.length,_n=0,ci=[];++Ne<kt;){var ir=ue[Ne];(ir===xe||ir===ne)&&(ue[Ne]=ne,ci[_n++]=Ne)}return ci}function Ga(ue){var xe=-1,Ne=Array(ue.size);return ue.forEach(function(kt){Ne[++xe]=kt}),Ne}function so(ue){return Uo(ue)?function qf(ue){for(var xe=zf.lastIndex=0;zf.test(ue);)++xe;return xe}(ue):Ha(ue)}function Us(ue){return Uo(ue)?function ac(ue){return ue.match(zf)||[]}(ue):function Zt(ue){return ue.split("")}(ue)}function $a(ue){for(var xe=ue.length;xe--&&Gt.test(ue.charAt(xe)););return xe}var xh=En({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),nr=function ue(xe){var h,Ne=(xe=null==xe?Er:nr.defaults(Er.Object(),xe,nr.pick(Er,Xl))).Array,kt=xe.Date,_n=xe.Error,ci=xe.Function,ir=xe.Math,Ei=xe.Object,gl=xe.RegExp,ga=xe.String,Wr=xe.TypeError,ml=Ne.prototype,lc=Ei.prototype,Ho=xe["__core-js_shared__"],ma=ci.prototype.toString,Xn=lc.hasOwnProperty,Rh=0,yo=(h=/[^.]+$/.exec(Ho&&Ho.keys&&Ho.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",_a=lc.toString,Mh=ma.call(Ei),xg=Er._,Ti=gl("^"+ma.call(Xn).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),va=Vc?xe.Buffer:P,dt=xe.Symbol,an=xe.Uint8Array,gi=va?va.allocUnsafe:P,Di=ja(Ei.getPrototypeOf,Ei),Lu=Ei.create,_l=lc.propertyIsEnumerable,ya=ml.splice,Wi=dt?dt.isConcatSpreadable:P,bo=dt?dt.iterator:P,Vs=dt?dt.toStringTag:P,bs=function(){try{var h=Nd(Ei,"defineProperty");return h({},"",{}),h}catch(m){}}(),Rt=xe.clearTimeout!==Er.clearTimeout&&xe.clearTimeout,Oh=kt&&kt.now!==Er.Date.now&&kt.now,Nh=xe.setTimeout!==Er.setTimeout&&xe.setTimeout,vl=ir.ceil,qc=ir.floor,xn=Ei.getOwnPropertySymbols,Bu=va?va.isBuffer:P,os=xe.isFinite,yl=ml.join,Hs=ja(Ei.keys,Ei),Bn=ir.max,_i=ir.min,bl=kt.now,cc=xe.parseInt,ba=ir.random,uc=ml.reverse,Ca=Nd(xe,"DataView"),Sr=Nd(xe,"Map"),Wa=Nd(xe,"Promise"),Cs=Nd(xe,"Set"),Co=Nd(xe,"WeakMap"),vi=Nd(Ei,"create"),jo=Co&&new Co,wo={},zi=vc(Ca),ui=vc(Sr),ws=vc(Wa),za=vc(Cs),oo=vc(Co),zn=dt?dt.prototype:P,Un=zn?zn.valueOf:P,Ri=zn?zn.toString:P;function H(h){if(qi(h)&&!cn(h)&&!(h instanceof kn)){if(h instanceof Eo)return h;if(Xn.call(h,"__wrapped__"))return Yo(h)}return new Eo(h)}var ao=function(){function h(){}return function(m){if(!ar(m))return{};if(Lu)return Lu(m);h.prototype=m;var C=new h;return h.prototype=P,C}}();function Mi(){}function Eo(h,m){this.__wrapped__=h,this.__actions__=[],this.__chain__=!!m,this.__index__=0,this.__values__=P}function kn(h){this.__wrapped__=h,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Lt,this.__views__=[]}function qa(h){var m=-1,C=null==h?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function js(h){var m=-1,C=null==h?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function Gs(h){var m=-1,C=null==h?0:h.length;for(this.clear();++m<C;){var M=h[m];this.set(M[0],M[1])}}function sn(h){var m=-1,C=null==h?0:h.length;for(this.__data__=new Gs;++m<C;)this.add(h[m])}function Ds(h){var m=this.__data__=new js(h);this.size=m.size}function Sd(h,m){var C=cn(h),M=!C&&jd(h),L=!C&&!M&&Ml(h),$=!C&&!M&&!L&&Ol(h),K=C||M||L||$,ae=K?fl(h.length,ga):[],fe=ae.length;for(var Xe in h)(m||Xn.call(h,Xe))&&(!K||!("length"==Xe||L&&("offset"==Xe||"parent"==Xe)||$&&("buffer"==Xe||"byteLength"==Xe||"byteOffset"==Xe)||au(Xe,fe)))&&ae.push(Xe);return ae}function Qc(h){var m=h.length;return m?h[Rd(0,m-1)]:P}function Go(h,m){return Zh(ls(h),O(m,0,h.length))}function Qf(h){return Zh(ls(h))}function qn(h,m,C){(C!==P&&!Ko(h[m],C)||C===P&&!(m in h))&&Ka(h,m,C)}function Br(h,m,C){var M=h[m];(!Xn.call(h,m)||!Ko(M,C)||C===P&&!(m in h))&&Ka(h,m,C)}function kh(h,m){for(var C=h.length;C--;)if(Ko(h[C][0],m))return C;return-1}function Ya(h,m,C,M){return ct(h,function(L,$,K){m(M,L,C(L),K)}),M}function El(h,m){return h&&Zo(m,cr(m),h)}function Ka(h,m,C){"__proto__"==m&&bs?bs(h,m,{configurable:!0,enumerable:!0,value:C,writable:!0}):h[m]=C}function R(h,m){for(var C=-1,M=m.length,L=Ne(M),$=null==h;++C<M;)L[C]=$?P:Sv(h,m[C]);return L}function O(h,m,C){return h==h&&(C!==P&&(h=h<=C?h:C),m!==P&&(h=h>=m?h:m)),h}function V(h,m,C,M,L,$){var K,ae=1&m,fe=2&m,Xe=4&m;if(C&&(K=L?C(h,M,L,$):C(h)),K!==P)return K;if(!ar(h))return h;var qe=cn(h);if(qe){if(K=function T0(h){var m=h.length,C=new h.constructor(m);return m&&"string"==typeof h[0]&&Xn.call(h,"index")&&(C.index=h.index,C.input=h.input),C}(h),!ae)return ls(h,K)}else{var Ve=Ir(h),xt=Ve==Ns||Ve==ks;if(Ml(h))return zu(h,ae);if(Ve==Bt||Ve==Ln||xt&&!L){if(K=fe||xt?{}:_w(h),!ae)return fe?function cw(h,m){return Zo(h,gw(h),m)}(h,function Tl(h,m){return h&&Zo(m,Ao(m),h)}(K,h)):function lw(h,m){return Zo(h,Gg(h),m)}(h,El(K,h))}else{if(!wi[Ve])return L?h:{};K=function mc(h,m,C){var M=h.constructor;switch(m){case gn:return Hh(h);case hi:case es:return new M(+h);case Ut:return function jh(h,m){var C=m?Hh(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.byteLength)}(h,C);case Nt:case ps:case gs:case Cn:case no:case Pi:case Qn:case X:case se:return Gh(h,C);case Ji:return new M;case xi:case Hi:return new M(h);case Mn:return function iu(h){var m=new h.constructor(h.source,go.exec(h));return m.lastIndex=h.lastIndex,m}(h);case bi:return new M;case Or:return function sp(h){return Un?Ei(Un.call(h)):{}}(h)}}(h,Ve,ae)}}$||($=new Ds);var bt=$.get(h);if(bt)return bt;$.set(h,K),Cp(h)?h.forEach(function(Pt){K.add(V(Pt,m,C,Pt,h,$))}):cf(h)&&h.forEach(function(Pt,Vn){K.set(Vn,V(Pt,m,C,Vn,h,$))});var An=qe?P:(Xe?fe?q_:z_:fe?Ao:cr)(h);return Tr(An||h,function(Pt,Vn){An&&(Pt=h[Vn=Pt]),Br(K,Vn,V(Pt,m,C,Vn,h,$))}),K}function he(h,m,C){var M=C.length;if(null==h)return!M;for(h=Ei(h);M--;){var L=C[M],K=h[L];if(K===P&&!(L in h)||!(0,m[L])(K))return!1}return!0}function Ee(h,m,C){if("function"!=typeof h)throw new Wr(Re);return _c(function(){h.apply(P,C)},m)}function Fe(h,m,C,M){var L=-1,$=ro,K=!0,ae=h.length,fe=[],Xe=m.length;if(!ae)return fe;C&&(m=li(m,ss(C))),M?($=pr,K=!1):m.length>=200&&($=sc,K=!1,m=new sn(m));e:for(;++L<ae;){var qe=h[L],Ve=null==C?qe:C(qe);if(qe=M||0!==qe?qe:0,K&&Ve==Ve){for(var xt=Xe;xt--;)if(m[xt]===Ve)continue e;fe.push(qe)}else $(m,Ve,M)||fe.push(qe)}return fe}H.templateSettings={escape:mn,evaluate:ni,interpolate:Qt,variable:"",imports:{_:H}},(H.prototype=Mi.prototype).constructor=H,(Eo.prototype=ao(Mi.prototype)).constructor=Eo,(kn.prototype=ao(Mi.prototype)).constructor=kn,qa.prototype.clear=function Za(){this.__data__=vi?vi(null):{},this.size=0},qa.prototype.delete=function Cl(h){var m=this.has(h)&&delete this.__data__[h];return this.size-=m?1:0,m},qa.prototype.get=function hc(h){var m=this.__data__;if(vi){var C=m[h];return C===Te?P:C}return Xn.call(m,h)?m[h]:P},qa.prototype.has=function rr(h){var m=this.__data__;return vi?m[h]!==P:Xn.call(m,h)},qa.prototype.set=function Zc(h,m){var C=this.__data__;return this.size+=this.has(h)?0:1,C[h]=vi&&m===P?Te:m,this},js.prototype.clear=function Yf(){this.__data__=[],this.size=0},js.prototype.delete=function Kf(h){var m=this.__data__,C=kh(m,h);return!(C<0||(C==m.length-1?m.pop():ya.call(m,C,1),--this.size,0))},js.prototype.get=function Es(h){var m=this.__data__,C=kh(m,h);return C<0?P:m[C][1]},js.prototype.has=function Ts(h){return kh(this.__data__,h)>-1},js.prototype.set=function Yc(h,m){var C=this.__data__,M=kh(C,h);return M<0?(++this.size,C.push([h,m])):C[M][1]=m,this},Gs.prototype.clear=function wa(){this.size=0,this.__data__={hash:new qa,map:new(Sr||js),string:new qa}},Gs.prototype.delete=function Uu(h){var m=jg(this,h).delete(h);return this.size-=m?1:0,m},Gs.prototype.get=function Ea(h){return jg(this,h).get(h)},Gs.prototype.has=function Kc(h){return jg(this,h).has(h)},Gs.prototype.set=function Dd(h,m){var C=jg(this,h),M=C.size;return C.set(h,m),this.size+=C.size==M?0:1,this},sn.prototype.add=sn.prototype.push=function Vu(h){return this.__data__.set(h,Te),this},sn.prototype.has=function mr(h){return this.__data__.has(h)},Ds.prototype.clear=function wl(){this.__data__=new js,this.size=0},Ds.prototype.delete=function Rg(h){var m=this.__data__,C=m.delete(h);return this.size=m.size,C},Ds.prototype.get=function Hu(h){return this.__data__.get(h)},Ds.prototype.has=function fc(h){return this.__data__.has(h)},Ds.prototype.set=function $s(h,m){var C=this.__data__;if(C instanceof js){var M=C.__data__;if(!Sr||M.length<199)return M.push([h,m]),this.size=++C.size,this;C=this.__data__=new Gs(M)}return C.set(h,m),this.size=C.size,this};var ct=op(sr),Jt=op(as,!0);function Yt(h,m){var C=!0;return ct(h,function(M,L,$){return C=!!m(M,L,$)}),C}function Rn(h,m,C){for(var M=-1,L=h.length;++M<L;){var $=h[M],K=m($);if(null!=K&&(ae===P?K==K&&!xa(K):C(K,ae)))var ae=K,fe=$}return fe}function Ss(h,m){var C=[];return ct(h,function(M,L,$){m(M,L,$)&&C.push(M)}),C}function Pn(h,m,C,M,L){var $=-1,K=h.length;for(C||(C=$g),L||(L=[]);++$<K;){var ae=h[$];m>0&&C(ae)?m>1?Pn(ae,m-1,C,M,L):Fr(L,ae):M||(L[L.length]=ae)}return L}var To=y0(),Ws=y0(!0);function sr(h,m){return h&&To(h,m,cr)}function as(h,m){return h&&Ws(h,m,cr)}function zs(h,m){return pi(m,function(C){return hu(h[C])})}function Do(h,m){for(var C=0,M=(m=qo(m,h)).length;null!=h&&C<M;)h=h[xl(m[C++])];return C&&C==M?h:P}function Jc(h,m,C){var M=m(h);return cn(h)?M:Fr(M,C(h))}function Ur(h){return null==h?h===P?"[object Undefined]":"[object Null]":Vs&&Vs in Ei(h)?function pw(h){var m=Xn.call(h,Vs),C=h[Vs];try{h[Vs]=P;var M=!0}catch($){}var L=_a.call(h);return M&&(m?h[Vs]=C:delete h[Vs]),L}(h):function X_(h){return _a.call(h)}(h)}function Xc(h,m){return h>m}function Jf(h,m){return null!=h&&Xn.call(h,m)}function Xf(h,m){return null!=h&&m in Ei(h)}function Ta(h,m,C){for(var M=C?pr:ro,L=h[0].length,$=h.length,K=$,ae=Ne($),fe=1/0,Xe=[];K--;){var qe=h[K];K&&m&&(qe=li(qe,ss(m))),fe=_i(qe.length,fe),ae[K]=!C&&(m||L>=120&&qe.length>=120)?new sn(K&&qe):P}qe=h[0];var Ve=-1,xt=ae[0];e:for(;++Ve<L&&Xe.length<fe;){var bt=qe[Ve],Kt=m?m(bt):bt;if(bt=C||0!==bt?bt:0,!(xt?sc(xt,Kt):M(Xe,Kt,C))){for(K=$;--K;){var An=ae[K];if(!(An?sc(An,Kt):M(h[K],Kt,C)))continue e}xt&&xt.push(Kt),Xe.push(bt)}}return Xe}function eu(h,m,C){var M=null==(h=S0(h,m=qo(m,h)))?h:h[xl(Aa(m))];return null==M?P:$r(M,h,C)}function B_(h){return qi(h)&&Ur(h)==Ln}function Ad(h,m,C,M,L){return h===m||(null==h||null==m||!qi(h)&&!qi(m)?h!=h&&m!=m:function ju(h,m,C,M,L,$){var K=cn(h),ae=cn(m),fe=K?Dn:Ir(h),Xe=ae?Dn:Ir(m),qe=(fe=fe==Ln?Bt:fe)==Bt,Ve=(Xe=Xe==Ln?Bt:Xe)==Bt,xt=fe==Xe;if(xt&&Ml(h)){if(!Ml(m))return!1;K=!0,qe=!1}if(xt&&!qe)return $||($=new Ds),K||Ol(h)?w0(h,m,C,M,L,$):function Hg(h,m,C,M,L,$,K){switch(C){case Ut:if(h.byteLength!=m.byteLength||h.byteOffset!=m.byteOffset)return!1;h=h.buffer,m=m.buffer;case gn:return!(h.byteLength!=m.byteLength||!$(new an(h),new an(m)));case hi:case es:case xi:return Ko(+h,+m);case yi:return h.name==m.name&&h.message==m.message;case Mn:case Hi:return h==m+"";case Ji:var ae=Pu;case bi:if(ae||(ae=Ga),h.size!=m.size&&!(1&M))return!1;var Xe=K.get(h);if(Xe)return Xe==m;M|=2,K.set(h,m);var qe=w0(ae(h),ae(m),M,L,$,K);return K.delete(h),qe;case Or:if(Un)return Un.call(h)==Un.call(m)}return!1}(h,m,fe,C,M,L,$);if(!(1&C)){var bt=qe&&Xn.call(h,"__wrapped__"),Kt=Ve&&Xn.call(m,"__wrapped__");if(bt||Kt){var An=bt?h.value():h,Pt=Kt?m.value():m;return $||($=new Ds),L(An,Pt,C,M,$)}}return!!xt&&($||($=new Ds),function fw(h,m,C,M,L,$){var K=1&C,ae=z_(h),fe=ae.length;if(fe!=z_(m).length&&!K)return!1;for(var Ve=fe;Ve--;){var xt=ae[Ve];if(!(K?xt in m:Xn.call(m,xt)))return!1}var bt=$.get(h),Kt=$.get(m);if(bt&&Kt)return bt==m&&Kt==h;var An=!0;$.set(h,m),$.set(m,h);for(var Pt=K;++Ve<fe;){var Vn=h[xt=ae[Ve]],yn=m[xt];if(M)var Hn=K?M(yn,Vn,xt,m,h,$):M(Vn,yn,xt,h,m,$);if(!(Hn===P?Vn===yn||L(Vn,yn,C,M,$):Hn)){An=!1;break}Pt||(Pt="constructor"==xt)}if(An&&!Pt){var vr=h.constructor,Jo=m.constructor;vr!=Jo&&"constructor"in h&&"constructor"in m&&!("function"==typeof vr&&vr instanceof vr&&"function"==typeof Jo&&Jo instanceof Jo)&&(An=!1)}return $.delete(h),$.delete(m),An}(h,m,C,M,L,$))}(h,m,C,M,Ad,L))}function Da(h,m,C,M){var L=C.length,$=L,K=!M;if(null==h)return!$;for(h=Ei(h);L--;){var ae=C[L];if(K&&ae[2]?ae[1]!==h[ae[0]]:!(ae[0]in h))return!1}for(;++L<$;){var fe=(ae=C[L])[0],Xe=h[fe],qe=ae[1];if(K&&ae[2]){if(Xe===P&&!(fe in h))return!1}else{var Ve=new Ds;if(M)var xt=M(Xe,qe,fe,h,m,Ve);if(!(xt===P?Ad(qe,Xe,3,M,Ve):xt))return!1}}return!0}function Qa(h){return!(!ar(h)||function up(h){return!!yo&&yo in h}(h))&&(hu(h)?Ti:Fs).test(vc(h))}function $o(h){return"function"==typeof h?h:null==h?Ui:"object"==typeof h?cn(h)?Lh(h[0],h[1]):xd(h):kv(h)}function tp(h){if(!qh(h))return Hs(h);var m=[];for(var C in Ei(h))Xn.call(h,C)&&"constructor"!=C&&m.push(C);return m}function pc(h,m){return h<m}function Fh(h,m){var C=-1,M=Qo(h)?Ne(h.length):[];return ct(h,function(L,$,K){M[++C]=m(L,$,K)}),M}function xd(h){var m=Y_(h);return 1==m.length&&m[0][2]?Pd(m[0][0],m[0][1]):function(C){return C===h||Da(C,h,m)}}function Lh(h,m){return kd(h)&&vw(m)?Pd(xl(h),m):function(C){var M=Sv(C,h);return M===P&&M===m?Ec(C,h):Ad(m,M,3)}}function Wo(h,m,C,M,L){h!==m&&To(m,function($,K){if(L||(L=new Ds),ar($))!function Bh(h,m,C,M,L,$,K){var ae=Qu(h,C),fe=Qu(m,C),Xe=K.get(fe);if(Xe)qn(h,C,Xe);else{var qe=$?$(ae,fe,C+"",h,m,K):P,Ve=qe===P;if(Ve){var xt=cn(fe),bt=!xt&&Ml(fe),Kt=!xt&&!bt&&Ol(fe);qe=fe,xt||bt||Kt?cn(ae)?qe=ae:Oi(ae)?qe=ls(ae):bt?(Ve=!1,qe=zu(fe,!0)):Kt?(Ve=!1,qe=Gh(fe,!0)):qe=[]:fu(fe)||jd(fe)?(qe=ae,jd(ae)?qe=mm(ae):(!ar(ae)||hu(ae))&&(qe=_w(fe))):Ve=!1}Ve&&(K.set(fe,qe),L(qe,fe,M,$,K),K.delete(fe)),qn(h,C,qe)}}(h,m,K,C,Wo,M,L);else{var ae=M?M(Qu(h,K),$,K+"",h,m,L):P;ae===P&&(ae=$),qn(h,K,ae)}},Ao)}function Ng(h,m){var C=h.length;if(C)return au(m+=m<0?C:0,C)?h[m]:P}function $u(h,m,C){m=m.length?li(m,function($){return cn($)?function(K){return Do(K,1===$.length?$[0]:$)}:$}):[Ui];var M=-1;return m=li(m,ss(nn())),function $i(ue,xe){var Ne=ue.length;for(ue.sort(xe);Ne--;)ue[Ne]=ue[Ne].value;return ue}(Fh(h,function($,K,ae){return{criteria:li(m,function(Xe){return Xe($)}),index:++M,value:$}}),function($,K){return function ei(h,m,C){for(var M=-1,L=h.criteria,$=m.criteria,K=L.length,ae=C.length;++M<K;){var fe=qu(L[M],$[M]);if(fe)return M>=ae?fe:fe*("desc"==C[M]?-1:1)}return h.index-m.index}($,K,C)})}function kg(h,m,C){for(var M=-1,L=m.length,$={};++M<L;){var K=m[M],ae=Do(h,K);C(ae,K)&&Wu($,qo(K,h),ae)}return $}function Ia(h,m,C,M){var L=M?wd:Fo,$=-1,K=m.length,ae=h;for(h===m&&(m=ls(m)),C&&(ae=li(h,ss(C)));++$<K;)for(var fe=0,Xe=m[$],qe=C?C(Xe):Xe;(fe=L(ae,qe,fe,M))>-1;)ae!==h&&ya.call(ae,fe,1),ya.call(h,fe,1);return h}function Dl(h,m){for(var C=h?m.length:0,M=C-1;C--;){var L=m[C];if(C==M||L!==$){var $=L;au(L)?ya.call(h,L,1):tt(h,L)}}return h}function Rd(h,m){return h+qc(ba()*(m-h+1))}function Uh(h,m){var C="";if(!h||m<1||m>tn)return C;do{m%2&&(C+=h),(m=qc(m/2))&&(h+=h)}while(m);return C}function Tn(h,m){return Zg(Li(h,m,Ui),h+"")}function ip(h){return Qc(Ys(h))}function rp(h,m){var C=Ys(h);return Zh(C,O(m,0,C.length))}function Wu(h,m,C,M){if(!ar(h))return h;for(var L=-1,$=(m=qo(m,h)).length,K=$-1,ae=h;null!=ae&&++L<$;){var fe=xl(m[L]),Xe=C;if("__proto__"===fe||"constructor"===fe||"prototype"===fe)return h;if(L!=K){var qe=ae[fe];(Xe=M?M(qe,fe,ae):P)===P&&(Xe=ar(qe)?qe:au(m[L+1])?[]:{})}Br(ae,fe,Xe),ae=ae[fe]}return h}var Pg=jo?function(h,m){return jo.set(h,m),h}:Ui,Fg=bs?function(h,m){return bs(h,"toString",{configurable:!0,enumerable:!1,value:_u(m),writable:!0})}:Ui;function Vh(h){return Zh(Ys(h))}function Ja(h,m,C){var M=-1,L=h.length;m<0&&(m=-m>L?0:L+m),(C=C>L?L:C)<0&&(C+=L),L=m>C?0:C-m>>>0,m>>>=0;for(var $=Ne(L);++M<L;)$[M]=h[M+m];return $}function T(h,m){var C;return ct(h,function(M,L,$){return!(C=m(M,L,$))}),!!C}function y(h,m,C){var M=0,L=null==h?M:h.length;if("number"==typeof m&&m==m&&L<=2147483647){for(;M<L;){var $=M+L>>>1,K=h[$];null!==K&&!xa(K)&&(C?K<=m:K<m)?M=$+1:L=$}return L}return b(h,m,Ui,C)}function b(h,m,C,M){var L=0,$=null==h?0:h.length;if(0===$)return 0;for(var K=(m=C(m))!=m,ae=null===m,fe=xa(m),Xe=m===P;L<$;){var qe=qc((L+$)/2),Ve=C(h[qe]),xt=Ve!==P,bt=null===Ve,Kt=Ve==Ve,An=xa(Ve);if(K)var Pt=M||Kt;else Pt=Xe?Kt&&(M||xt):ae?Kt&&xt&&(M||!bt):fe?Kt&&xt&&!bt&&(M||!An):!bt&&!An&&(M?Ve<=m:Ve<m);Pt?L=qe+1:$=qe}return _i($,4294967294)}function I(h,m){for(var C=-1,M=h.length,L=0,$=[];++C<M;){var K=h[C],ae=m?m(K):K;if(!C||!Ko(ae,fe)){var fe=ae;$[L++]=0===K?0:K}}return $}function U(h){return"number"==typeof h?h:xa(h)?NaN:+h}function q(h){if("string"==typeof h)return h;if(cn(h))return li(h,q)+"";if(xa(h))return Ri?Ri.call(h):"";var m=h+"";return"0"==m&&1/h==-Vt?"-0":m}function me(h,m,C){var M=-1,L=ro,$=h.length,K=!0,ae=[],fe=ae;if(C)K=!1,L=pr;else if($>=200){var Xe=m?null:dw(h);if(Xe)return Ga(Xe);K=!1,L=sc,fe=new sn}else fe=m?[]:ae;e:for(;++M<$;){var qe=h[M],Ve=m?m(qe):qe;if(qe=C||0!==qe?qe:0,K&&Ve==Ve){for(var xt=fe.length;xt--;)if(fe[xt]===Ve)continue e;m&&fe.push(Ve),ae.push(qe)}else L(fe,Ve,C)||(fe!==ae&&fe.push(Ve),ae.push(qe))}return ae}function tt(h,m){return null==(h=S0(h,m=qo(m,h)))||delete h[xl(Aa(m))]}function St(h,m,C,M){return Wu(h,m,C(Do(h,m)),M)}function zt(h,m,C,M){for(var L=h.length,$=M?L:-1;(M?$--:++$<L)&&m(h[$],$,h););return C?Ja(h,M?0:$,M?$+1:L):Ja(h,M?$+1:0,M?L:$)}function ln(h,m){var C=h;return C instanceof kn&&(C=C.value()),Gc(m,function(M,L){return L.func.apply(L.thisArg,Fr([M],L.args))},C)}function Si(h,m,C){var M=h.length;if(M<2)return M?me(h[0]):[];for(var L=-1,$=Ne(M);++L<M;)for(var K=h[L],ae=-1;++ae<M;)ae!=L&&($[L]=Fe($[L]||K,h[ae],m,C));return me(Pn($,1),m,C)}function So(h,m,C){for(var M=-1,L=h.length,$=m.length,K={};++M<L;)C(K,h[M],M<$?m[M]:P);return K}function zo(h){return Oi(h)?h:[]}function Md(h){return"function"==typeof h?h:Ui}function qo(h,m){return cn(h)?h:kd(h,m)?[h]:ev(Nn(h))}var gc=Tn;function Sl(h,m,C){var M=h.length;return C=C===P?M:C,!m&&C>=M?h:Ja(h,m,C)}var nu=Rt||function(h){return Er.clearTimeout(h)};function zu(h,m){if(m)return h.slice();var C=h.length,M=gi?gi(C):new h.constructor(C);return h.copy(M),M}function Hh(h){var m=new h.constructor(h.byteLength);return new an(m).set(new an(h)),m}function Gh(h,m){var C=m?Hh(h.buffer):h.buffer;return new h.constructor(C,h.byteOffset,h.length)}function qu(h,m){if(h!==m){var C=h!==P,M=null===h,L=h==h,$=xa(h),K=m!==P,ae=null===m,fe=m==m,Xe=xa(m);if(!ae&&!Xe&&!$&&h>m||$&&K&&fe&&!ae&&!Xe||M&&K&&fe||!C&&fe||!L)return 1;if(!M&&!$&&!Xe&&h<m||Xe&&C&&L&&!M&&!$||ae&&C&&L||!K&&L||!fe)return-1}return 0}function H_(h,m,C,M){for(var L=-1,$=h.length,K=C.length,ae=-1,fe=m.length,Xe=Bn($-K,0),qe=Ne(fe+Xe),Ve=!M;++ae<fe;)qe[ae]=m[ae];for(;++L<K;)(Ve||L<$)&&(qe[C[L]]=h[L]);for(;Xe--;)qe[ae++]=h[L++];return qe}function j_(h,m,C,M){for(var L=-1,$=h.length,K=-1,ae=C.length,fe=-1,Xe=m.length,qe=Bn($-ae,0),Ve=Ne(qe+Xe),xt=!M;++L<qe;)Ve[L]=h[L];for(var bt=L;++fe<Xe;)Ve[bt+fe]=m[fe];for(;++K<ae;)(xt||L<$)&&(Ve[bt+C[K]]=h[L++]);return Ve}function ls(h,m){var C=-1,M=h.length;for(m||(m=Ne(M));++C<M;)m[C]=h[C];return m}function Zo(h,m,C,M){var L=!C;C||(C={});for(var $=-1,K=m.length;++$<K;){var ae=m[$],fe=M?M(C[ae],h[ae],ae,C,h):P;fe===P&&(fe=h[ae]),L?Ka(C,ae,fe):Br(C,ae,fe)}return C}function Lg(h,m){return function(C,M){var L=cn(C)?Hc:Ya,$=m?m():{};return L(C,h,nn(M,2),$)}}function $h(h){return Tn(function(m,C){var M=-1,L=C.length,$=L>1?C[L-1]:P,K=L>2?C[2]:P;for($=h.length>3&&"function"==typeof $?(L--,$):P,K&&Is(C[0],C[1],K)&&($=L<3?P:$,L=1),m=Ei(m);++M<L;){var ae=C[M];ae&&h(m,ae,M,$)}return m})}function op(h,m){return function(C,M){if(null==C)return C;if(!Qo(C))return h(C,M);for(var L=C.length,$=m?L:-1,K=Ei(C);(m?$--:++$<L)&&!1!==M(K[$],$,K););return C}}function y0(h){return function(m,C,M){for(var L=-1,$=Ei(m),K=M(m),ae=K.length;ae--;){var fe=K[h?ae:++L];if(!1===C($[fe],fe,$))break}return m}}function ru(h){return function(m){var C=Uo(m=Nn(m))?Us(m):P,M=C?C[0]:m.charAt(0),L=C?Sl(C,1).join(""):m.slice(1);return M[h]()+L}}function Vr(h){return function(m){return Gc(Dc(qw(m).replace(Wf,"")),h,"")}}function Il(h){return function(){var m=arguments;switch(m.length){case 0:return new h;case 1:return new h(m[0]);case 2:return new h(m[0],m[1]);case 3:return new h(m[0],m[1],m[2]);case 4:return new h(m[0],m[1],m[2],m[3]);case 5:return new h(m[0],m[1],m[2],m[3],m[4]);case 6:return new h(m[0],m[1],m[2],m[3],m[4],m[5]);case 7:return new h(m[0],m[1],m[2],m[3],m[4],m[5],m[6])}var C=ao(h.prototype),M=h.apply(C,m);return ar(M)?M:C}}function $_(h){return function(m,C,M){var L=Ei(m);if(!Qo(m)){var $=nn(C,3);m=cr(m),C=function(ae){return $(L[ae],ae,L)}}var K=h(m,C,M);return K>-1?L[$?m[K]:K]:P}}function qs(h){return ou(function(m){var C=m.length,M=C,L=Eo.prototype.thru;for(h&&m.reverse();M--;){var $=m[M];if("function"!=typeof $)throw new Wr(Re);if(L&&!K&&"wrapper"==cp($))var K=new Eo([],!0)}for(M=K?M:C;++M<C;){var ae=cp($=m[M]),fe="wrapper"==ae?Z_($):P;K=fe&&Wg(fe[0])&&424==fe[1]&&!fe[4].length&&1==fe[9]?K[cp(fe[0])].apply(K,fe[3]):1==$.length&&Wg($)?K[ae]():K.thru($)}return function(){var Xe=arguments,qe=Xe[0];if(K&&1==Xe.length&&cn(qe))return K.plant(qe).value();for(var Ve=0,xt=C?m[Ve].apply(this,Xe):qe;++Ve<C;)xt=m[Ve].call(this,xt);return xt}})}function Zu(h,m,C,M,L,$,K,ae,fe,Xe){var qe=128&m,Ve=1&m,xt=2&m,bt=24&m,Kt=512&m,An=xt?P:Il(h);return function Pt(){for(var Vn=arguments.length,yn=Ne(Vn),Hn=Vn;Hn--;)yn[Hn]=arguments[Hn];if(bt)var vr=Od(Pt),Jo=Dr(yn,vr);if(M&&(yn=H_(yn,M,L,bt)),$&&(yn=j_(yn,$,K,bt)),Vn-=Jo,bt&&Vn<Xe){var Ar=vo(yn,vr);return W_(h,m,Zu,Pt.placeholder,C,yn,Ar,ae,fe,Xe-Vn)}var Ms=Ve?C:this,tl=xt?Ms[h]:h;return Vn=yn.length,ae?yn=I0(yn,ae):Kt&&Vn>1&&yn.reverse(),qe&&fe<Vn&&(yn.length=fe),this&&this!==Er&&this instanceof Pt&&(tl=An||Il(tl)),tl.apply(Ms,yn)}}function Bg(h,m){return function(C,M){return function Id(h,m,C,M){return sr(h,function(L,$,K){m(M,C(L),$,K)}),M}(C,h,m(M),{})}}function Ug(h,m){return function(C,M){var L;if(C===P&&M===P)return m;if(C!==P&&(L=C),M!==P){if(L===P)return M;"string"==typeof C||"string"==typeof M?(C=q(C),M=q(M)):(C=U(C),M=U(M)),L=h(C,M)}return L}}function ap(h){return ou(function(m){return m=li(m,ss(nn())),Tn(function(C){var M=this;return h(m,function(L){return $r(L,M,C)})})})}function lp(h,m){var C=(m=m===P?" ":q(m)).length;if(C<2)return C?Uh(m,h):m;var M=Uh(m,vl(h/so(m)));return Uo(m)?Sl(Us(M),0,h).join(""):M.slice(0,h)}function Wh(h){return function(m,C,M){return M&&"number"!=typeof M&&Is(m,C,M)&&(C=M=P),m=kl(m),C===P?(C=m,m=0):C=kl(C),function np(h,m,C,M){for(var L=-1,$=Bn(vl((m-h)/(C||1)),0),K=Ne($);$--;)K[M?$:++L]=h,h+=C;return K}(m,C,M=M===P?m<C?1:-1:kl(M),h)}}function Vg(h){return function(m,C){return"string"==typeof m&&"string"==typeof C||(m=Zr(m),C=Zr(C)),h(m,C)}}function W_(h,m,C,M,L,$,K,ae,fe,Xe){var qe=8&m;m|=qe?32:64,4&(m&=~(qe?64:32))||(m&=-4);var An=[h,m,L,qe?$:P,qe?K:P,qe?P:$,qe?P:K,ae,fe,Xe],Pt=C.apply(P,An);return Wg(h)&&qg(Pt,An),Pt.placeholder=M,Yg(Pt,h,m)}function zh(h){var m=ir[h];return function(C,M){if(C=Zr(C),(M=null==M?0:_i(fn(M),292))&&os(C)){var L=(Nn(C)+"e").split("e");return+((L=(Nn(m(L[0]+"e"+(+L[1]+M)))+"e").split("e"))[0]+"e"+(+L[1]-M))}return m(C)}}var dw=Cs&&1/Ga(new Cs([,-0]))[1]==Vt?function(h){return new Cs(h)}:Im;function Yu(h){return function(m){var C=Ir(m);return C==Ji?Pu(m):C==bi?function Td(ue){var xe=-1,Ne=Array(ue.size);return ue.forEach(function(kt){Ne[++xe]=[kt,kt]}),Ne}(m):function ys(ue,xe){return li(xe,function(Ne){return[Ne,ue[Ne]]})}(m,h(m))}}function su(h,m,C,M,L,$,K,ae){var fe=2&m;if(!fe&&"function"!=typeof h)throw new Wr(Re);var Xe=M?M.length:0;if(Xe||(m&=-97,M=L=P),K=K===P?K:Bn(fn(K),0),ae=ae===P?ae:fn(ae),Xe-=L?L.length:0,64&m){var qe=M,Ve=L;M=L=P}var xt=fe?P:Z_(h),bt=[h,m,C,M,L,qe,Ve,$,K,ae];if(xt&&function J_(h,m){var C=h[1],M=m[1],L=C|M;if(!(L<131||(128==M&&8==C||128==M&&256==C&&h[7].length<=m[8]||384==M&&m[7].length<=m[8]&&8==C)))return h;1&M&&(h[2]=m[2],L|=1&C?0:4);var ae=m[3];if(ae){var fe=h[3];h[3]=fe?H_(fe,ae,m[4]):ae,h[4]=fe?vo(h[3],ne):m[4]}(ae=m[5])&&(h[5]=(fe=h[5])?j_(fe,ae,m[6]):ae,h[6]=fe?vo(h[5],ne):m[6]),(ae=m[7])&&(h[7]=ae),128&M&&(h[8]=null==h[8]?m[8]:_i(h[8],m[8])),null==h[9]&&(h[9]=m[9]),h[0]=m[0],h[1]=L}(bt,xt),h=bt[0],m=bt[1],C=bt[2],M=bt[3],L=bt[4],!(ae=bt[9]=bt[9]===P?fe?0:h.length:Bn(bt[9]-Xe,0))&&24&m&&(m&=-25),m&&1!=m)Kt=8==m||16==m?function G_(h,m,C){var M=Il(h);return function L(){for(var $=arguments.length,K=Ne($),ae=$,fe=Od(L);ae--;)K[ae]=arguments[ae];var Xe=$<3&&K[0]!==fe&&K[$-1]!==fe?[]:vo(K,fe);return($-=Xe.length)<C?W_(h,m,Zu,L.placeholder,P,K,Xe,P,P,C-$):$r(this&&this!==Er&&this instanceof L?M:h,this,K)}}(h,m,ae):32!=m&&33!=m||L.length?Zu.apply(P,bt):function b0(h,m,C,M){var L=1&m,$=Il(h);return function K(){for(var ae=-1,fe=arguments.length,Xe=-1,qe=M.length,Ve=Ne(qe+fe),xt=this&&this!==Er&&this instanceof K?$:h;++Xe<qe;)Ve[Xe]=M[Xe];for(;fe--;)Ve[Xe++]=arguments[++ae];return $r(xt,L?C:this,Ve)}}(h,m,C,M);else var Kt=function uw(h,m,C){var M=1&m,L=Il(h);return function $(){return(this&&this!==Er&&this instanceof $?L:h).apply(M?C:this,arguments)}}(h,m,C);return Yg((xt?Pg:qg)(Kt,bt),h,m)}function C0(h,m,C,M){return h===P||Ko(h,lc[C])&&!Xn.call(M,C)?m:h}function Ku(h,m,C,M,L,$){return ar(h)&&ar(m)&&($.set(m,h),Wo(h,m,P,Ku,$),$.delete(m)),h}function hw(h){return fu(h)?P:h}function w0(h,m,C,M,L,$){var K=1&C,ae=h.length,fe=m.length;if(ae!=fe&&!(K&&fe>ae))return!1;var Xe=$.get(h),qe=$.get(m);if(Xe&&qe)return Xe==m&&qe==h;var Ve=-1,xt=!0,bt=2&C?new sn:P;for($.set(h,m),$.set(m,h);++Ve<ae;){var Kt=h[Ve],An=m[Ve];if(M)var Pt=K?M(An,Kt,Ve,m,h,$):M(Kt,An,Ve,h,m,$);if(Pt!==P){if(Pt)continue;xt=!1;break}if(bt){if(!Po(m,function(Vn,yn){if(!sc(bt,yn)&&(Kt===Vn||L(Kt,Vn,C,M,$)))return bt.push(yn)})){xt=!1;break}}else if(Kt!==An&&!L(Kt,An,C,M,$)){xt=!1;break}}return $.delete(h),$.delete(m),xt}function ou(h){return Zg(Li(h,P,Jg),h+"")}function z_(h){return Jc(h,cr,Gg)}function q_(h){return Jc(h,Ao,gw)}var Z_=jo?function(h){return jo.get(h)}:Im;function cp(h){for(var m=h.name+"",C=wo[m],M=Xn.call(wo,m)?C.length:0;M--;){var L=C[M],$=L.func;if(null==$||$==h)return L.name}return m}function Od(h){return(Xn.call(H,"placeholder")?H:h).placeholder}function nn(){var h=H.iteratee||Op;return h=h===Op?$o:h,arguments.length?h(arguments[0],arguments[1]):h}function jg(h,m){var C=h.__data__;return function D0(h){var m=typeof h;return"string"==m||"number"==m||"symbol"==m||"boolean"==m?"__proto__"!==h:null===h}(m)?C["string"==typeof m?"string":"hash"]:C.map}function Y_(h){for(var m=cr(h),C=m.length;C--;){var M=m[C],L=h[M];m[C]=[M,L,vw(L)]}return m}function Nd(h,m){var C=function pa(ue,xe){return null==ue?P:ue[xe]}(h,m);return Qa(C)?C:P}var Gg=xn?function(h){return null==h?[]:(h=Ei(h),pi(xn(h),function(m){return _l.call(h,m)}))}:kp,gw=xn?function(h){for(var m=[];h;)Fr(m,Gg(h)),h=Di(h);return m}:kp,Ir=Ur;function E0(h,m,C){for(var M=-1,L=(m=qo(m,h)).length,$=!1;++M<L;){var K=xl(m[M]);if(!($=null!=h&&C(h,K)))break;h=h[K]}return $||++M!=L?$:!!(L=null==h?0:h.length)&&yp(L)&&au(K,L)&&(cn(h)||jd(h))}function _w(h){return"function"!=typeof h.constructor||qh(h)?{}:ao(Di(h))}function $g(h){return cn(h)||jd(h)||!!(Wi&&h&&h[Wi])}function au(h,m){var C=typeof h;return!!(m=null==m?tn:m)&&("number"==C||"symbol"!=C&&wn.test(h))&&h>-1&&h%1==0&&h<m}function Is(h,m,C){if(!ar(C))return!1;var M=typeof m;return!!("number"==M?Qo(C)&&au(m,C.length):"string"==M&&m in C)&&Ko(C[m],h)}function kd(h,m){if(cn(h))return!1;var C=typeof h;return!("number"!=C&&"symbol"!=C&&"boolean"!=C&&null!=h&&!xa(h))||Ie.test(h)||!fr.test(h)||null!=m&&h in Ei(m)}function Wg(h){var m=cp(h),C=H[m];if("function"!=typeof C||!(m in kn.prototype))return!1;if(h===C)return!0;var M=Z_(C);return!!M&&h===M[0]}(Ca&&Ir(new Ca(new ArrayBuffer(1)))!=Ut||Sr&&Ir(new Sr)!=Ji||Wa&&Ir(Wa.resolve())!=ns||Cs&&Ir(new Cs)!=bi||Co&&Ir(new Co)!=ji)&&(Ir=function(h){var m=Ur(h),C=m==Bt?h.constructor:P,M=C?vc(C):"";if(M)switch(M){case zi:return Ut;case ui:return Ji;case ws:return ns;case za:return bi;case oo:return ji}return m});var zg=Ho?hu:Pv;function qh(h){var m=h&&h.constructor;return h===("function"==typeof m&&m.prototype||lc)}function vw(h){return h==h&&!ar(h)}function Pd(h,m){return function(C){return null!=C&&C[h]===m&&(m!==P||h in Ei(C))}}function Li(h,m,C){return m=Bn(m===P?h.length-1:m,0),function(){for(var M=arguments,L=-1,$=Bn(M.length-m,0),K=Ne($);++L<$;)K[L]=M[m+L];L=-1;for(var ae=Ne(m+1);++L<m;)ae[L]=M[L];return ae[m]=C(K),$r(h,this,ae)}}function S0(h,m){return m.length<2?h:Do(h,Ja(m,0,-1))}function I0(h,m){for(var C=h.length,M=_i(m.length,C),L=ls(h);M--;){var $=m[M];h[M]=au($,C)?L[$]:P}return h}function Qu(h,m){if(("constructor"!==m||"function"!=typeof h[m])&&"__proto__"!=m)return h[m]}var qg=Kg(Pg),_c=Nh||function(h,m){return Er.setTimeout(h,m)},Zg=Kg(Fg);function Yg(h,m,C){var M=m+"";return Zg(h,function K_(h,m){var C=m.length;if(!C)return h;var M=C-1;return m[M]=(C>1?"& ":"")+m[M],m=m.join(C>2?", ":" "),h.replace(dn,"{\n/* [wrapped with "+m+"] */\n")}(M,function bw(h,m){return Tr(Cr,function(C){var M="_."+C[0];m&C[1]&&!ro(h,M)&&h.push(M)}),h.sort()}(function mw(h){var m=h.match(On);return m?m[1].split(Sn):[]}(M),C)))}function Kg(h){var m=0,C=0;return function(){var M=bl(),L=16-(M-C);if(C=M,L>0){if(++m>=800)return arguments[0]}else m=0;return h.apply(P,arguments)}}function Zh(h,m){var C=-1,M=h.length,L=M-1;for(m=m===P?M:m;++C<m;){var $=Rd(C,L),K=h[$];h[$]=h[C],h[C]=K}return h.length=m,h}var ev=function Q_(h){var m=Hd(h,function(M){return 500===C.size&&C.clear(),M}),C=m.cache;return m}(function(h){var m=[];return 46===h.charCodeAt(0)&&m.push(""),h.replace(ce,function(C,M,L,$){m.push(L?$.replace(In,"$1"):M||C)}),m});function xl(h){if("string"==typeof h||xa(h))return h;var m=h+"";return"0"==m&&1/h==-Vt?"-0":m}function vc(h){if(null!=h){try{return ma.call(h)}catch(m){}try{return h+""}catch(m){}}return""}function Yo(h){if(h instanceof kn)return h.clone();var m=new Eo(h.__wrapped__,h.__chain__);return m.__actions__=ls(h.__actions__),m.__index__=h.__index__,m.__values__=h.__values__,m}var Yh=Tn(function(h,m){return Oi(h)?Fe(h,Pn(m,1,Oi,!0)):[]}),ww=Tn(function(h,m){var C=Aa(m);return Oi(C)&&(C=P),Oi(h)?Fe(h,Pn(m,1,Oi,!0),nn(C,2)):[]}),x0=Tn(function(h,m){var C=Aa(m);return Oi(C)&&(C=P),Oi(h)?Fe(h,Pn(m,1,Oi,!0),P,C):[]});function Fd(h,m,C){var M=null==h?0:h.length;if(!M)return-1;var L=null==C?0:fn(C);return L<0&&(L=Bn(M+L,0)),Wc(h,nn(m,3),L)}function rv(h,m,C){var M=null==h?0:h.length;if(!M)return-1;var L=M-1;return C!==P&&(L=fn(C),L=C<0?Bn(M+L,0):_i(L,M-1)),Wc(h,nn(m,3),L,!0)}function Jg(h){return null!=h&&h.length?Pn(h,1):[]}function O0(h){return h&&h.length?h[0]:P}var Rl=Tn(function(h){var m=li(h,zo);return m.length&&m[0]===h[0]?Ta(m):[]}),Xa=Tn(function(h){var m=Aa(h),C=li(h,zo);return m===Aa(C)?m=P:C.pop(),C.length&&C[0]===h[0]?Ta(C,nn(m,2)):[]}),Ju=Tn(function(h){var m=Aa(h),C=li(h,zo);return(m="function"==typeof m?m:P)&&C.pop(),C.length&&C[0]===h[0]?Ta(C,P,m):[]});function Aa(h){var m=null==h?0:h.length;return m?h[m-1]:P}var zr=Tn(Tw);function Tw(h,m){return h&&h.length&&m&&m.length?Ia(h,m):h}var Dw=ou(function(h,m){var C=null==h?0:h.length,M=R(h,m);return Dl(h,li(m,function(L){return au(L,C)?+L:L}).sort(qu)),M});function Ft(h){return null==h?h:uc.call(h)}var Iw=Tn(function(h){return me(Pn(h,1,Oi,!0))}),uv=Tn(function(h){var m=Aa(h);return Oi(m)&&(m=P),me(Pn(h,1,Oi,!0),nn(m,2))}),bc=Tn(function(h){var m=Aa(h);return m="function"==typeof m?m:P,me(Pn(h,1,Oi,!0),P,m)});function rm(h){if(!h||!h.length)return[];var m=0;return h=pi(h,function(C){if(Oi(C))return m=Bn(C.length,m),!0}),fl(m,function(C){return li(h,Je(C))})}function Kh(h,m){if(!h||!h.length)return[];var C=rm(h);return null==m?C:li(C,function(M){return $r(m,P,M)})}var Aw=Tn(function(h,m){return Oi(h)?Fe(h,m):[]}),xs=Tn(function(h){return Si(pi(h,Oi))}),Qh=Tn(function(h){var m=Aa(h);return Oi(m)&&(m=P),Si(pi(h,Oi),nn(m,2))}),Zs=Tn(function(h){var m=Aa(h);return m="function"==typeof m?m:P,Si(pi(h,Oi),P,m)}),sm=Tn(rm),L0=Tn(function(h){var m=h.length,C=m>1?h[m-1]:P;return C="function"==typeof C?(h.pop(),C):P,Kh(h,C)});function dv(h){var m=H(h);return m.__chain__=!0,m}function Jh(h,m){return m(h)}var U0=ou(function(h){var m=h.length,C=m?h[0]:0,M=this.__wrapped__,L=function($){return R($,h)};return!(m>1||this.__actions__.length)&&M instanceof kn&&au(C)?((M=M.slice(C,+C+(m?1:0))).__actions__.push({func:Jh,args:[L],thisArg:P}),new Eo(M,this.__chain__).thru(function($){return m&&!$.length&&$.push(P),$})):this.thru(L)}),fv=Lg(function(h,m,C){Xn.call(h,C)?++h[C]:Ka(h,C,1)}),j0=$_(Fd),oS=$_(rv);function Ow(h,m){return(cn(h)?Tr:ct)(h,nn(m,3))}function Nw(h,m){return(cn(h)?Pr:Jt)(h,nn(m,3))}var _r=Lg(function(h,m,C){Xn.call(h,C)?h[C].push(m):Ka(h,C,[m])}),kw=Tn(function(h,m,C){var M=-1,L="function"==typeof m,$=Qo(h)?Ne(h.length):[];return ct(h,function(K){$[++M]=L?$r(m,K,C):eu(K,m,C)}),$}),ef=Lg(function(h,m,C){Ka(h,C,m)});function tf(h,m){return(cn(h)?li:Fh)(h,nn(m,3))}var nf=Lg(function(h,m,C){h[C?0:1].push(m)},function(){return[[],[]]}),z0=Tn(function(h,m){if(null==h)return[];var C=m.length;return C>1&&Is(h,m[0],m[1])?m=[]:C>2&&Is(m[0],m[1],m[2])&&(m=[m[0]]),$u(h,Pn(m,1),[])}),cu=Oh||function(){return Er.Date.now()};function fp(h,m,C){return m=C?P:m,su(h,128,P,P,P,P,m=h&&null==m?h.length:m)}function Vd(h,m){var C;if("function"!=typeof m)throw new Wr(Re);return h=fn(h),function(){return--h>0&&(C=m.apply(this,arguments)),h<=1&&(m=P),C}}var uu=Tn(function(h,m,C){var M=1;if(C.length){var L=vo(C,Od(uu));M|=32}return su(h,M,m,C,L)}),du=Tn(function(h,m,C){var M=3;if(C.length){var L=vo(C,Od(du));M|=32}return su(m,M,h,C,L)});function cs(h,m,C){var M,L,$,K,ae,fe,Xe=0,qe=!1,Ve=!1,xt=!0;if("function"!=typeof h)throw new Wr(Re);function bt(Ar){var Ms=M,tl=L;return M=L=P,Xe=Ar,K=h.apply(tl,Ms)}function Kt(Ar){return Xe=Ar,ae=_c(Vn,m),qe?bt(Ar):K}function Pt(Ar){var Ms=Ar-fe;return fe===P||Ms>=m||Ms<0||Ve&&Ar-Xe>=$}function Vn(){var Ar=cu();if(Pt(Ar))return yn(Ar);ae=_c(Vn,function An(Ar){var nl=m-(Ar-fe);return Ve?_i(nl,$-(Ar-Xe)):nl}(Ar))}function yn(Ar){return ae=P,xt&&M?bt(Ar):(M=L=P,K)}function Jo(){var Ar=cu(),Ms=Pt(Ar);if(M=arguments,L=this,fe=Ar,Ms){if(ae===P)return Kt(fe);if(Ve)return nu(ae),ae=_c(Vn,m),bt(fe)}return ae===P&&(ae=_c(Vn,m)),K}return m=Zr(m)||0,ar(C)&&(qe=!!C.leading,$=(Ve="maxWait"in C)?Bn(Zr(C.maxWait)||0,m):$,xt="trailing"in C?!!C.trailing:xt),Jo.cancel=function Hn(){ae!==P&&nu(ae),Xe=0,M=fe=L=ae=P},Jo.flush=function vr(){return ae===P?K:yn(cu())},Jo}var rf=Tn(function(h,m){return Ee(h,1,m)}),pp=Tn(function(h,m,C){return Ee(h,Zr(m)||0,C)});function Hd(h,m){if("function"!=typeof h||null!=m&&"function"!=typeof m)throw new Wr(Re);var C=function(){var M=arguments,L=m?m.apply(this,M):M[0],$=C.cache;if($.has(L))return $.get(L);var K=h.apply(this,M);return C.cache=$.set(L,K)||$,K};return C.cache=new(Hd.Cache||Gs),C}function gp(h){if("function"!=typeof h)throw new Wr(Re);return function(){var m=arguments;switch(m.length){case 0:return!h.call(this);case 1:return!h.call(this,m[0]);case 2:return!h.call(this,m[0],m[1]);case 3:return!h.call(this,m[0],m[1],m[2])}return!h.apply(this,m)}}Hd.Cache=Gs;var lS=gc(function(h,m){var C=(m=1==m.length&&cn(m[0])?li(m[0],ss(nn())):li(Pn(m,1),ss(nn()))).length;return Tn(function(M){for(var L=-1,$=_i(M.length,C);++L<$;)M[L]=m[L].call(this,M[L]);return $r(h,this,M)})}),sf=Tn(function(h,m){var C=vo(m,Od(sf));return su(h,32,P,m,C)}),mp=Tn(function(h,m){var C=vo(m,Od(mp));return su(h,64,P,m,C)}),Fw=ou(function(h,m){return su(h,256,P,P,P,m)});function Ko(h,m){return h===m||h!=h&&m!=m}var _p=Vg(Xc),Vw=Vg(function(h,m){return h>=m}),jd=B_(function(){return arguments}())?B_:function(h){return qi(h)&&Xn.call(h,"callee")&&!_l.call(h,"callee")},cn=Ne.isArray,Q0=ko?ss(ko):function Mg(h){return qi(h)&&Ur(h)==gn};function Qo(h){return null!=h&&yp(h.length)&&!hu(h)}function Oi(h){return qi(h)&&Qo(h)}var Ml=Bu||Pv,vv=Ou?ss(Ou):function Og(h){return qi(h)&&Ur(h)==es};function Gd(h){if(!qi(h))return!1;var m=Ur(h);return m==yi||"[object DOMException]"==m||"string"==typeof h.message&&"string"==typeof h.name&&!fu(h)}function hu(h){if(!ar(h))return!1;var m=Ur(h);return m==Ns||m==ks||"[object AsyncFunction]"==m||"[object Proxy]"==m}function vp(h){return"number"==typeof h&&h==fn(h)}function yp(h){return"number"==typeof h&&h>-1&&h%1==0&&h<=tn}function ar(h){var m=typeof h;return null!=h&&("object"==m||"function"==m)}function qi(h){return null!=h&&"object"==typeof h}var cf=fi?ss(fi):function ep(h){return qi(h)&&Ir(h)==Ji};function uf(h){return"number"==typeof h||qi(h)&&Ur(h)==xi}function fu(h){if(!qi(h)||Ur(h)!=Bt)return!1;var m=Di(h);if(null===m)return!0;var C=Xn.call(m,"constructor")&&m.constructor;return"function"==typeof C&&C instanceof C&&ma.call(C)==Mh}var bp=tc?ss(tc):function Ph(h){return qi(h)&&Ur(h)==Mn},Cp=fa?ss(fa):function tu(h){return qi(h)&&Ir(h)==bi};function gm(h){return"string"==typeof h||!cn(h)&&qi(h)&&Ur(h)==Hi}function xa(h){return"symbol"==typeof h||qi(h)&&Ur(h)==Or}var Ol=ai?ss(ai):function U_(h){return qi(h)&&yp(h.length)&&!!oi[Ur(h)]},ed=Vg(pc),Nl=Vg(function(h,m){return h<=m});function Ep(h){if(!h)return[];if(Qo(h))return gm(h)?Us(h):ls(h);if(bo&&h[bo])return function zc(ue){for(var xe,Ne=[];!(xe=ue.next()).done;)Ne.push(xe.value);return Ne}(h[bo]());var m=Ir(h);return(m==Ji?Pu:m==bi?Ga:Ys)(h)}function kl(h){return h?(h=Zr(h))===Vt||h===-Vt?17976931348623157e292*(h<0?-1:1):h==h?h:0:0===h?h:0}function fn(h){var m=kl(h),C=m%1;return m==m?C?m-C:m:0}function Ev(h){return h?O(fn(h),0,Lt):0}function Zr(h){if("number"==typeof h)return h;if(xa(h))return NaN;if(ar(h)){var m="function"==typeof h.valueOf?h.valueOf():h;h=ar(m)?m+"":m}if("string"!=typeof h)return 0===h?h:+h;h=Nu(h);var C=Fc.test(h);return C||ht.test(h)?Sh(h.slice(2),C?2:8):Nr.test(h)?NaN:+h}function mm(h){return Zo(h,Ao(h))}function Nn(h){return null==h?"":q(h)}var pu=$h(function(h,m){if(qh(m)||Qo(m))Zo(m,cr(m),h);else for(var C in m)Xn.call(m,C)&&Br(h,C,m[C])}),zd=$h(function(h,m){Zo(m,Ao(m),h)}),td=$h(function(h,m,C,M){Zo(m,Ao(m),h,M)}),Tp=$h(function(h,m,C,M){Zo(m,cr(m),h,M)}),Dv=ou(R),hf=Tn(function(h,m){h=Ei(h);var C=-1,M=m.length,L=M>2?m[2]:P;for(L&&Is(m[0],m[1],L)&&(M=1);++C<M;)for(var $=m[C],K=Ao($),ae=-1,fe=K.length;++ae<fe;){var Xe=K[ae],qe=h[Xe];(qe===P||Ko(qe,lc[Xe])&&!Xn.call(h,Xe))&&(h[Xe]=$[Xe])}return h}),Hw=Tn(function(h){return h.push(P,Ku),$r(Av,P,h)});function Sv(h,m,C){var M=null==h?P:Do(h,m);return M===P?C:M}function Ec(h,m){return null!=h&&E0(h,m,Xf)}var Pl=Bg(function(h,m,C){null!=m&&"function"!=typeof m.toString&&(m=_a.call(m)),h[m]=C},_u(Ui)),_m=Bg(function(h,m,C){null!=m&&"function"!=typeof m.toString&&(m=_a.call(m)),Xn.call(h,m)?h[m].push(C):h[m]=[C]},nn),Iv=Tn(eu);function cr(h){return Qo(h)?Sd(h):tp(h)}function Ao(h){return Qo(h)?Sd(h,!0):function Gu(h){if(!ar(h))return function yw(h){var m=[];if(null!=h)for(var C in Ei(h))m.push(C);return m}(h);var m=qh(h),C=[];for(var M in h)"constructor"==M&&(m||!Xn.call(h,M))||C.push(M);return C}(h)}var Ww=$h(function(h,m,C){Wo(h,m,C)}),Av=$h(function(h,m,C,M){Wo(h,m,C,M)}),ob=ou(function(h,m){var C={};if(null==h)return C;var M=!1;m=li(m,function($){return $=qo($,h),M||(M=$.length>1),$}),Zo(h,q_(h),C),M&&(C=V(C,7,hw));for(var L=m.length;L--;)tt(C,m[L]);return C}),ab=ou(function(h,m){return null==h?{}:function V_(h,m){return kg(h,m,function(C,M){return Ec(h,M)})}(h,m)});function ym(h,m){if(null==h)return{};var C=li(q_(h),function(M){return[M]});return m=nn(m),kg(h,C,function(M,L){return m(M,L[0])})}var zw=Yu(cr),bm=Yu(Ao);function Ys(h){return null==h?[]:ku(h,cr(h))}var Rv=Vr(function(h,m,C){return m=m.toLowerCase(),h+(C?db(m):m)});function db(h){return mu(Nn(h).toLowerCase())}function qw(h){return(h=Nn(h))&&h.replace(Ci,_o).replace(da,"")}var Tm=Vr(function(h,m,C){return h+(C?"-":"")+m.toLowerCase()}),pb=Vr(function(h,m,C){return h+(C?" ":"")+m.toLowerCase()}),Dm=ru("toLowerCase"),_b=Vr(function(h,m,C){return h+(C?"_":"")+m.toLowerCase()}),Sm=Vr(function(h,m,C){return h+(C?" ":"")+mu(m)}),nd=Vr(function(h,m,C){return h+(C?" ":"")+m.toUpperCase()}),mu=ru("toUpperCase");function Dc(h,m,C){return h=Nn(h),(m=C?P:m)===P?function Ah(ue){return io.test(ue)}(h)?function Vo(ue){return ue.match(Bc)||[]}(h):function $c(ue){return ue.match(tr)||[]}(h):h.match(m)||[]}var id=Tn(function(h,m){try{return $r(h,P,m)}catch(C){return Gd(C)?C:new _n(C)}}),Zd=ou(function(h,m){return Tr(m,function(C){C=xl(C),Ka(h,C,uu(h[C],h))}),h});function _u(h){return function(){return h}}var Ov=qs(),Mp=qs(!0);function Ui(h){return h}function Op(h){return $o("function"==typeof h?h:V(h,1))}var yb=Tn(function(h,m){return function(C){return eu(C,h,m)}}),bb=Tn(function(h,m){return function(C){return eu(h,C,m)}});function _f(h,m,C){var M=cr(m),L=zs(m,M);null==C&&(!ar(m)||!L.length&&M.length)&&(C=m,m=h,h=this,L=zs(m,cr(m)));var $=!(ar(C)&&"chain"in C&&!C.chain),K=hu(h);return Tr(L,function(ae){var fe=m[ae];h[ae]=fe,K&&(h.prototype[ae]=function(){var Xe=this.__chain__;if($||Xe){var qe=h(this.__wrapped__),Ve=qe.__actions__=ls(this.__actions__);return Ve.push({func:fe,args:arguments,thisArg:h}),qe.__chain__=Xe,qe}return fe.apply(h,Fr([this.value()],arguments))})}),h}function Im(){}var wb=ap(li),Np=ap(jc),Kw=ap(Po);function kv(h){return kd(h)?Je(xl(h)):function Sa(h){return function(m){return Do(m,h)}}(h)}var vf=Wh(),vu=Wh(!0);function kp(){return[]}function Pv(){return!1}var dS=Ug(function(h,m){return h+m},0),At=zh("ceil"),ke=Ug(function(h,m){return h/m},1),ot=zh("floor"),Db=Ug(function(h,m){return h*m},1),Fp=zh("round"),Xw=Ug(function(h,m){return h-m},0);return H.after=function Xu(h,m){if("function"!=typeof m)throw new Wr(Re);return h=fn(h),function(){if(--h<1)return m.apply(this,arguments)}},H.ary=fp,H.assign=pu,H.assignIn=zd,H.assignInWith=td,H.assignWith=Tp,H.at=Dv,H.before=Vd,H.bind=uu,H.bindAll=Zd,H.bindKey=du,H.castArray=function _v(){if(!arguments.length)return[];var h=arguments[0];return cn(h)?h:[h]},H.chain=dv,H.chunk=function tv(h,m,C){m=(C?Is(h,m,C):m===P)?1:Bn(fn(m),0);var M=null==h?0:h.length;if(!M||m<1)return[];for(var L=0,$=0,K=Ne(vl(M/m));L<M;)K[$++]=Ja(h,L,L+=m);return K},H.compact=function A0(h){for(var m=-1,C=null==h?0:h.length,M=0,L=[];++m<C;){var $=h[m];$&&(L[M++]=$)}return L},H.concat=function Cw(){var h=arguments.length;if(!h)return[];for(var m=Ne(h-1),C=arguments[0],M=h;M--;)m[M-1]=arguments[M];return Fr(cn(C)?ls(C):[C],Pn(m,1))},H.cond=function el(h){var m=null==h?0:h.length,C=nn();return h=m?li(h,function(M){if("function"!=typeof M[1])throw new Wr(Re);return[C(M[0]),M[1]]}):[],Tn(function(M){for(var L=-1;++L<m;){var $=h[L];if($r($[0],this,M))return $r($[1],this,M)}})},H.conforms=function Yd(h){return function Q(h){var m=cr(h);return function(C){return he(C,h,m)}}(V(h,1))},H.constant=_u,H.countBy=fv,H.create=function lr(h,m){var C=ao(h);return null==m?C:El(C,m)},H.curry=function dm(h,m,C){var M=su(h,8,P,P,P,P,P,m=C?P:m);return M.placeholder=dm.placeholder,M},H.curryRight=function qr(h,m,C){var M=su(h,16,P,P,P,P,P,m=C?P:m);return M.placeholder=qr.placeholder,M},H.debounce=cs,H.defaults=hf,H.defaultsDeep=Hw,H.defer=rf,H.delay=pp,H.difference=Yh,H.differenceBy=ww,H.differenceWith=x0,H.drop=function R0(h,m,C){var M=null==h?0:h.length;return M?Ja(h,(m=C||m===P?1:fn(m))<0?0:m,M):[]},H.dropRight=function nv(h,m,C){var M=null==h?0:h.length;return M?Ja(h,0,(m=M-(m=C||m===P?1:fn(m)))<0?0:m):[]},H.dropRightWhile=function iv(h,m){return h&&h.length?zt(h,nn(m,3),!0,!0):[]},H.dropWhile=function M0(h,m){return h&&h.length?zt(h,nn(m,3),!0):[]},H.fill=function Qg(h,m,C,M){var L=null==h?0:h.length;return L?(C&&"number"!=typeof C&&Is(h,m,C)&&(C=0,M=L),function Xt(h,m,C,M){var L=h.length;for((C=fn(C))<0&&(C=-C>L?0:L+C),(M=M===P||M>L?L:fn(M))<0&&(M+=L),M=C>M?0:Ev(M);C<M;)h[C++]=m;return h}(h,m,C,M)):[]},H.filter=function H0(h,m){return(cn(h)?pi:Ss)(h,nn(m,3))},H.flatMap=function aS(h,m){return Pn(tf(h,m),1)},H.flatMapDeep=function G0(h,m){return Pn(tf(h,m),Vt)},H.flatMapDepth=function Mw(h,m,C){return C=C===P?1:fn(C),Pn(tf(h,m),C)},H.flatten=Jg,H.flattenDeep=function sv(h){return null!=h&&h.length?Pn(h,Vt):[]},H.flattenDepth=function ov(h,m){return null!=h&&h.length?Pn(h,m=m===P?1:fn(m)):[]},H.flip=function q0(h){return su(h,512)},H.flow=Ov,H.flowRight=Mp,H.fromPairs=function Xg(h){for(var m=-1,C=null==h?0:h.length,M={};++m<C;){var L=h[m];M[L[0]]=L[1]}return M},H.functions=function pf(h){return null==h?[]:zs(h,cr(h))},H.functionsIn=function $w(h){return null==h?[]:zs(h,Ao(h))},H.groupBy=_r,H.initial=function Io(h){return null!=h&&h.length?Ja(h,0,-1):[]},H.intersection=Rl,H.intersectionBy=Xa,H.intersectionWith=Ju,H.invert=Pl,H.invertBy=_m,H.invokeMap=kw,H.iteratee=Op,H.keyBy=ef,H.keys=cr,H.keysIn=Ao,H.map=tf,H.mapKeys=function rb(h,m){var C={};return m=nn(m,3),sr(h,function(M,L,$){Ka(C,m(M,L,$),M)}),C},H.mapValues=function sb(h,m){var C={};return m=nn(m,3),sr(h,function(M,L,$){Ka(C,L,m(M,L,$))}),C},H.matches=function Nv(h){return xd(V(h,1))},H.matchesProperty=function Qd(h,m){return Lh(h,V(m,1))},H.memoize=Hd,H.merge=Ww,H.mergeWith=Av,H.method=yb,H.methodOf=bb,H.mixin=_f,H.negate=gp,H.nthArg=function Cb(h){return h=fn(h),Tn(function(m){return Ng(m,h)})},H.omit=ob,H.omitBy=function vm(h,m){return ym(h,gp(nn(m)))},H.once=function Z0(h){return Vd(2,h)},H.orderBy=function $0(h,m,C,M){return null==h?[]:(cn(m)||(m=null==m?[]:[m]),cn(C=M?P:C)||(C=null==C?[]:[C]),$u(h,m,C))},H.over=wb,H.overArgs=lS,H.overEvery=Np,H.overSome=Kw,H.partial=sf,H.partialRight=mp,H.partition=nf,H.pick=ab,H.pickBy=ym,H.property=kv,H.propertyOf=function Rs(h){return function(m){return null==h?P:Do(h,m)}},H.pull=zr,H.pullAll=Tw,H.pullAllBy=function av(h,m,C){return h&&h.length&&m&&m.length?Ia(h,m,nn(C,2)):h},H.pullAllWith=function Pe(h,m,C){return h&&h.length&&m&&m.length?Ia(h,m,P,C):h},H.pullAt=Dw,H.range=vf,H.rangeRight=vu,H.rearg=Fw,H.reject=function um(h,m){return(cn(h)?pi:Ss)(h,gp(nn(m,3)))},H.remove=function yc(h,m){var C=[];if(!h||!h.length)return C;var M=-1,L=[],$=h.length;for(m=nn(m,3);++M<$;){var K=h[M];m(K,M,h)&&(C.push(K),L.push(M))}return Dl(h,L),C},H.rest=function hm(h,m){if("function"!=typeof h)throw new Wr(Re);return Tn(h,m=m===P?m:fn(m))},H.reverse=Ft,H.sampleSize=function hp(h,m,C){return m=(C?Is(h,m,C):m===P)?1:fn(m),(cn(h)?Go:rp)(h,m)},H.set=function xv(h,m,C){return null==h?h:Wu(h,m,C)},H.setWith=function uS(h,m,C,M){return M="function"==typeof M?M:P,null==h?h:Wu(h,m,C,M)},H.shuffle=function W0(h){return(cn(h)?Qf:Vh)(h)},H.slice=function lv(h,m,C){var M=null==h?0:h.length;return M?(C&&"number"!=typeof C&&Is(h,m,C)?(m=0,C=M):(m=null==m?0:fn(m),C=C===P?M:fn(C)),Ja(h,m,C)):[]},H.sortBy=z0,H.sortedUniq=function bn(h){return h&&h.length?I(h):[]},H.sortedUniqBy=function N0(h,m){return h&&h.length?I(h,nn(m,2)):[]},H.split=function qd(h,m,C){return C&&"number"!=typeof C&&Is(h,m,C)&&(m=C=P),(C=C===P?Lt:C>>>0)?(h=Nn(h))&&("string"==typeof m||null!=m&&!bp(m))&&!(m=q(m))&&Uo(h)?Sl(Us(h),0,C):h.split(m,C):[]},H.spread=function Y0(h,m){if("function"!=typeof h)throw new Wr(Re);return m=null==m?0:Bn(fn(m),0),Tn(function(C){var M=C[m],L=Sl(C,0,m);return M&&Fr(L,M),$r(h,this,L)})},H.tail=function k0(h){var m=null==h?0:h.length;return m?Ja(h,1,m):[]},H.take=function As(h,m,C){return h&&h.length?Ja(h,0,(m=C||m===P?1:fn(m))<0?0:m):[]},H.takeRight=function Bd(h,m,C){var M=null==h?0:h.length;return M?Ja(h,(m=M-(m=C||m===P?1:fn(m)))<0?0:m,M):[]},H.takeRightWhile=function Bi(h,m){return h&&h.length?zt(h,nn(m,3),!1,!0):[]},H.takeWhile=function lu(h,m){return h&&h.length?zt(h,nn(m,3)):[]},H.tap=function B0(h,m){return m(h),h},H.throttle=function Lw(h,m,C){var M=!0,L=!0;if("function"!=typeof h)throw new Wr(Re);return ar(C)&&(M="leading"in C?!!C.leading:M,L="trailing"in C?!!C.trailing:L),cs(h,m,{leading:M,maxWait:m,trailing:L})},H.thru=Jh,H.toArray=Ep,H.toPairs=zw,H.toPairsIn=bm,H.toPath=function Ht(h){return cn(h)?li(h,xl):xa(h)?[h]:ls(ev(Nn(h)))},H.toPlainObject=mm,H.transform=function Cm(h,m,C){var M=cn(h),L=M||Ml(h)||Ol(h);if(m=nn(m,4),null==C){var $=h&&h.constructor;C=L?M?new $:[]:ar(h)&&hu($)?ao(Di(h)):{}}return(L?Tr:sr)(h,function(K,ae,fe){return m(C,K,ae,fe)}),C},H.unary=function lo(h){return fp(h,1)},H.union=Iw,H.unionBy=uv,H.unionWith=bc,H.uniq=function nm(h){return h&&h.length?me(h):[]},H.uniqBy=function P0(h,m){return h&&h.length?me(h,nn(m,2)):[]},H.uniqWith=function im(h,m){return m="function"==typeof m?m:P,h&&h.length?me(h,P,m):[]},H.unset=function gf(h,m){return null==h||tt(h,m)},H.unzip=rm,H.unzipWith=Kh,H.update=function Sp(h,m,C){return null==h?h:St(h,m,Md(C))},H.updateWith=function cb(h,m,C,M){return M="function"==typeof M?M:P,null==h?h:St(h,m,Md(C),M)},H.values=Ys,H.valuesIn=function wm(h){return null==h?[]:ku(h,Ao(h))},H.without=Aw,H.words=Dc,H.wrap=function mv(h,m){return sf(Md(m),h)},H.xor=xs,H.xorBy=Qh,H.xorWith=Zs,H.zip=sm,H.zipObject=function om(h,m){return So(h||[],m||[],Br)},H.zipObjectDeep=function F0(h,m){return So(h||[],m||[],Wu)},H.zipWith=L0,H.entries=zw,H.entriesIn=bm,H.extend=zd,H.extendWith=td,_f(H,H),H.add=dS,H.attempt=id,H.camelCase=Rv,H.capitalize=db,H.ceil=At,H.clamp=function Em(h,m,C){return C===P&&(C=m,m=P),C!==P&&(C=(C=Zr(C))==C?C:0),m!==P&&(m=(m=Zr(m))==m?m:0),O(Zr(h),m,C)},H.clone=function Bw(h){return V(h,4)},H.cloneDeep=function af(h){return V(h,5)},H.cloneDeepWith=function Uw(h,m){return V(h,5,m="function"==typeof m?m:P)},H.cloneWith=function cS(h,m){return V(h,4,m="function"==typeof m?m:P)},H.conformsTo=function K0(h,m){return null==m||he(h,m,cr(m))},H.deburr=qw,H.defaultTo=function Kd(h,m){return null==h||h!=h?m:h},H.divide=ke,H.endsWith=function hb(h,m,C){h=Nn(h),m=q(m);var M=h.length,L=C=C===P?M:O(fn(C),0,M);return(C-=m.length)>=0&&h.slice(C,L)==m},H.eq=Ko,H.escape=function Mv(h){return(h=Nn(h))&&qt.test(h)?h.replace(rt,Ed):h},H.escapeRegExp=function fb(h){return(h=Nn(h))&&Ye.test(h)?h.replace(oe,"\\$&"):h},H.every=function V0(h,m,C){var M=cn(h)?jc:Yt;return C&&Is(h,m,C)&&(m=P),M(h,nn(m,3))},H.find=j0,H.findIndex=Fd,H.findKey=function jw(h,m){return nc(h,nn(m,3),sr)},H.findLast=oS,H.findLastIndex=rv,H.findLastKey=function ff(h,m){return nc(h,nn(m,3),as)},H.floor=ot,H.forEach=Ow,H.forEachRight=Nw,H.forIn=function wc(h,m){return null==h?h:To(h,nn(m,3),Ao)},H.forInRight=function nb(h,m){return null==h?h:Ws(h,nn(m,3),Ao)},H.forOwn=function ib(h,m){return h&&sr(h,nn(m,3))},H.forOwnRight=function Gw(h,m){return h&&as(h,nn(m,3))},H.get=Sv,H.gt=_p,H.gte=Vw,H.has=function Dp(h,m){return null!=h&&E0(h,m,Jf)},H.hasIn=Ec,H.head=O0,H.identity=Ui,H.includes=function Ud(h,m,C,M){h=Qo(h)?h:Ys(h),C=C&&!M?fn(C):0;var L=h.length;return C<0&&(C=Bn(L+C,0)),gm(h)?C<=L&&h.indexOf(m,C)>-1:!!L&&Fo(h,m,C)>-1},H.indexOf=function z(h,m,C){var M=null==h?0:h.length;if(!M)return-1;var L=null==C?0:fn(C);return L<0&&(L=Bn(M+L,0)),Fo(h,m,L)},H.inRange=function ub(h,m,C){return m=kl(m),C===P?(C=m,m=0):C=kl(C),function L_(h,m,C){return h>=_i(m,C)&&h<Bn(m,C)}(h=Zr(h),m,C)},H.invoke=Iv,H.isArguments=jd,H.isArray=cn,H.isArrayBuffer=Q0,H.isArrayLike=Qo,H.isArrayLikeObject=Oi,H.isBoolean=function J0(h){return!0===h||!1===h||qi(h)&&Ur(h)==hi},H.isBuffer=Ml,H.isDate=vv,H.isElement=function lf(h){return qi(h)&&1===h.nodeType&&!fu(h)},H.isEmpty=function X0(h){if(null==h)return!0;if(Qo(h)&&(cn(h)||"string"==typeof h||"function"==typeof h.splice||Ml(h)||Ol(h)||jd(h)))return!h.length;var m=Ir(h);if(m==Ji||m==bi)return!h.size;if(qh(h))return!tp(h).length;for(var C in h)if(Xn.call(h,C))return!1;return!0},H.isEqual=function or(h,m){return Ad(h,m)},H.isEqualWith=function fm(h,m,C){var M=(C="function"==typeof C?C:P)?C(h,m):P;return M===P?Ad(h,m,P,C):!!M},H.isError=Gd,H.isFinite=function pm(h){return"number"==typeof h&&os(h)},H.isFunction=hu,H.isInteger=vp,H.isLength=yp,H.isMap=cf,H.isMatch=function yv(h,m){return h===m||Da(h,m,Y_(m))},H.isMatchWith=function bv(h,m,C){return C="function"==typeof C?C:P,Da(h,m,Y_(m),C)},H.isNaN=function $d(h){return uf(h)&&h!=+h},H.isNative=function Wd(h){if(zg(h))throw new _n("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Qa(h)},H.isNil=function Cv(h){return null==h},H.isNull=function eb(h){return null===h},H.isNumber=uf,H.isObject=ar,H.isObjectLike=qi,H.isPlainObject=fu,H.isRegExp=bp,H.isSafeInteger=function tb(h){return vp(h)&&h>=-tn&&h<=tn},H.isSet=Cp,H.isString=gm,H.isSymbol=xa,H.isTypedArray=Ol,H.isUndefined=function wv(h){return h===P},H.isWeakMap=function wp(h){return qi(h)&&Ir(h)==ji},H.isWeakSet=function df(h){return qi(h)&&"[object WeakSet]"==Ur(h)},H.join=function di(h,m){return null==h?"":yl.call(h,m)},H.kebabCase=Tm,H.last=Aa,H.lastIndexOf=function Ld(h,m,C){var M=null==h?0:h.length;if(!M)return-1;var L=M;return C!==P&&(L=(L=fn(C))<0?Bn(M+L,0):_i(L,M-1)),m==m?function Fu(ue,xe,Ne){for(var kt=Ne+1;kt--;)if(ue[kt]===xe)return kt;return kt}(h,m,L):Wc(h,ic,L,!0)},H.lowerCase=pb,H.lowerFirst=Dm,H.lt=ed,H.lte=Nl,H.max=function Qs(h){return h&&h.length?Rn(h,Ui,Xc):P},H.maxBy=function Eb(h,m){return h&&h.length?Rn(h,nn(m,2),Xc):P},H.mean=function yf(h){return Ih(h,Ui)},H.meanBy=function Qw(h,m){return Ih(h,nn(m,2))},H.min=function Tb(h){return h&&h.length?Rn(h,Ui,pc):P},H.minBy=function Jw(h,m){return h&&h.length?Rn(h,nn(m,2),pc):P},H.stubArray=kp,H.stubFalse=Pv,H.stubObject=function pt(){return{}},H.stubString=function Yr(){return""},H.stubTrue=function Jd(){return!0},H.multiply=Db,H.nth=function Ew(h,m){return h&&h.length?Ng(h,fn(m)):P},H.noConflict=function Yw(){return Er._===this&&(Er._=xg),this},H.noop=Im,H.now=cu,H.pad=function gb(h,m,C){h=Nn(h);var M=(m=fn(m))?so(h):0;if(!m||M>=m)return h;var L=(m-M)/2;return lp(qc(L),C)+h+lp(vl(L),C)},H.padEnd=function gu(h,m,C){h=Nn(h);var M=(m=fn(m))?so(h):0;return m&&M<m?h+lp(m-M,C):h},H.padStart=function mb(h,m,C){h=Nn(h);var M=(m=fn(m))?so(h):0;return m&&M<m?lp(m-M,C)+h:h},H.parseInt=function Zw(h,m,C){return C||null==m?m=0:m&&(m=+m),cc(Nn(h).replace(vt,""),m||0)},H.random=function Hr(h,m,C){if(C&&"boolean"!=typeof C&&Is(h,m,C)&&(m=C=P),C===P&&("boolean"==typeof m?(C=m,m=P):"boolean"==typeof h&&(C=h,h=P)),h===P&&m===P?(h=0,m=1):(h=kl(h),m===P?(m=h,h=0):m=kl(m)),h>m){var M=h;h=m,m=M}if(C||h%1||m%1){var L=ba();return _i(h+L*(m-h+mo("1e-"+((L+"").length-1))),m)}return Rd(h,m)},H.reduce=function cm(h,m,C){var M=cn(h)?Gc:rc,L=arguments.length<3;return M(h,nn(m,4),C,L,ct)},H.reduceRight=function Cc(h,m,C){var M=cn(h)?Bs:rc,L=arguments.length<3;return M(h,nn(m,4),C,L,Jt)},H.repeat=function mf(h,m,C){return m=(C?Is(h,m,C):m===P)?1:fn(m),Uh(Nn(h),m)},H.replace=function Tc(){var h=arguments,m=Nn(h[0]);return h.length<3?m:m.replace(h[1],h[2])},H.result=function lb(h,m,C){var M=-1,L=(m=qo(m,h)).length;for(L||(L=1,h=P);++M<L;){var $=null==h?P:h[xl(m[M])];$===P&&(M=L,$=C),h=hu($)?$.call(h):$}return h},H.round=Fp,H.runInContext=ue,H.sample=function pv(h){return(cn(h)?Qc:ip)(h)},H.size=function gv(h){if(null==h)return 0;if(Qo(h))return gm(h)?so(h):h.length;var m=Ir(h);return m==Ji||m==bi?h.size:tp(h).length},H.snakeCase=_b,H.some=function Pw(h,m,C){var M=cn(h)?Po:T;return C&&Is(h,m,C)&&(m=P),M(h,nn(m,3))},H.sortedIndex=function vn(h,m){return y(h,m)},H.sortedIndexBy=function em(h,m,C){return b(h,m,nn(C,2))},H.sortedIndexOf=function tm(h,m){var C=null==h?0:h.length;if(C){var M=y(h,m);if(M<C&&Ko(h[M],m))return M}return-1},H.sortedLastIndex=function dp(h,m){return y(h,m,!0)},H.sortedLastIndexBy=function Sw(h,m,C){return b(h,m,nn(C,2),!0)},H.sortedLastIndexOf=function cv(h,m){if(null!=h&&h.length){var M=y(h,m,!0)-1;if(Ko(h[M],m))return M}return-1},H.startCase=Sm,H.startsWith=function vb(h,m,C){return h=Nn(h),C=null==C?0:O(fn(C),0,h.length),m=q(m),h.slice(C,C+m.length)==m},H.subtract=Xw,H.sum=function eE(h){return h&&h.length?Lo(h,Ui):0},H.sumBy=function Oa(h,m){return h&&h.length?Lo(h,nn(m,2)):0},H.template=function Ip(h,m,C){var M=H.templateSettings;C&&Is(h,m,C)&&(m=P),h=Nn(h),m=td({},m,M,C0);var ae,fe,L=td({},m.imports,M.imports,C0),$=cr(L),K=ku(L,$),Xe=0,qe=m.interpolate||kr,Ve="__p += '",xt=gl((m.escape||kr).source+"|"+qe.source+"|"+(qe===Qt?is:kr).source+"|"+(m.evaluate||kr).source+"|$","g"),bt="//# sourceURL="+(Xn.call(m,"sourceURL")?(m.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Uc+"]")+"\n";h.replace(xt,function(Pt,Vn,yn,Hn,vr,Jo){return yn||(yn=Hn),Ve+=h.slice(Xe,Jo).replace(oa,Bo),Vn&&(ae=!0,Ve+="' +\n__e("+Vn+") +\n'"),vr&&(fe=!0,Ve+="';\n"+vr+";\n__p += '"),yn&&(Ve+="' +\n((__t = ("+yn+")) == null ? '' : __t) +\n'"),Xe=Jo+Pt.length,Pt}),Ve+="';\n";var Kt=Xn.call(m,"variable")&&m.variable;if(Kt){if(Ps.test(Kt))throw new _n("Invalid `variable` option passed into `_.template`")}else Ve="with (obj) {\n"+Ve+"\n}\n";Ve=(fe?Ve.replace(le,""):Ve).replace(je,"$1").replace(ie,"$1;"),Ve="function("+(Kt||"obj")+") {\n"+(Kt?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(fe?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+Ve+"return __p\n}";var An=id(function(){return ci($,bt+"return "+Ve).apply(P,K)});if(An.source=Ve,Gd(An))throw An;return An},H.times=function Pp(h,m){if((h=fn(h))<1||h>tn)return[];var C=Lt,M=_i(h,Lt);m=nn(m),h-=Lt;for(var L=fl(M,m);++C<h;)m(C);return L},H.toFinite=kl,H.toInteger=fn,H.toLength=Ev,H.toLower=function Ra(h){return Nn(h).toLowerCase()},H.toNumber=Zr,H.toSafeInteger=function Tv(h){return h?O(fn(h),-tn,tn):0===h?h:0},H.toString=Nn,H.toUpper=function Ap(h){return Nn(h).toUpperCase()},H.trim=function Ks(h,m,C){if((h=Nn(h))&&(C||m===P))return Nu(h);if(!h||!(m=q(m)))return h;var M=Us(h),L=Us(m);return Sl(M,oc(M,L),pl(M,L)+1).join("")},H.trimEnd=function Fl(h,m,C){if((h=Nn(h))&&(C||m===P))return h.slice(0,$a(h)+1);if(!h||!(m=q(m)))return h;var M=Us(h);return Sl(M,0,pl(M,Us(m))+1).join("")},H.trimStart=function xp(h,m,C){if((h=Nn(h))&&(C||m===P))return h.replace(vt,"");if(!h||!(m=q(m)))return h;var M=Us(h);return Sl(M,oc(M,Us(m))).join("")},H.truncate=function Ma(h,m){var C=30,M="...";if(ar(m)){var L="separator"in m?m.separator:L;C="length"in m?fn(m.length):C,M="omission"in m?q(m.omission):M}var $=(h=Nn(h)).length;if(Uo(h)){var K=Us(h);$=K.length}if(C>=$)return h;var ae=C-so(M);if(ae<1)return M;var fe=K?Sl(K,0,ae).join(""):h.slice(0,ae);if(L===P)return fe+M;if(K&&(ae+=fe.length-ae),bp(L)){if(h.slice(ae).search(L)){var Xe,qe=fe;for(L.global||(L=gl(L.source,Nn(go.exec(L))+"g")),L.lastIndex=0;Xe=L.exec(qe);)var Ve=Xe.index;fe=fe.slice(0,Ve===P?ae:Ve)}}else if(h.indexOf(q(L),ae)!=ae){var xt=fe.lastIndexOf(L);xt>-1&&(fe=fe.slice(0,xt))}return fe+M},H.unescape=function Rp(h){return(h=Nn(h))&&It.test(h)?h.replace(pe,xh):h},H.uniqueId=function pn(h){var m=++Rh;return Nn(h)+m},H.upperCase=nd,H.upperFirst=mu,H.each=Ow,H.eachRight=Nw,H.first=O0,_f(H,function(){var h={};return sr(H,function(m,C){Xn.call(H.prototype,C)||(h[C]=m)}),h}(),{chain:!1}),H.VERSION="4.17.21",Tr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(h){H[h].placeholder=H}),Tr(["drop","take"],function(h,m){kn.prototype[h]=function(C){C=C===P?1:Bn(fn(C),0);var M=this.__filtered__&&!m?new kn(this):this.clone();return M.__filtered__?M.__takeCount__=_i(C,M.__takeCount__):M.__views__.push({size:_i(C,Lt),type:h+(M.__dir__<0?"Right":"")}),M},kn.prototype[h+"Right"]=function(C){return this.reverse()[h](C).reverse()}}),Tr(["filter","map","takeWhile"],function(h,m){var C=m+1,M=1==C||3==C;kn.prototype[h]=function(L){var $=this.clone();return $.__iteratees__.push({iteratee:nn(L,3),type:C}),$.__filtered__=$.__filtered__||M,$}}),Tr(["head","last"],function(h,m){var C="take"+(m?"Right":"");kn.prototype[h]=function(){return this[C](1).value()[0]}}),Tr(["initial","tail"],function(h,m){var C="drop"+(m?"":"Right");kn.prototype[h]=function(){return this.__filtered__?new kn(this):this[C](1)}}),kn.prototype.compact=function(){return this.filter(Ui)},kn.prototype.find=function(h){return this.filter(h).head()},kn.prototype.findLast=function(h){return this.reverse().find(h)},kn.prototype.invokeMap=Tn(function(h,m){return"function"==typeof h?new kn(this):this.map(function(C){return eu(C,h,m)})}),kn.prototype.reject=function(h){return this.filter(gp(nn(h)))},kn.prototype.slice=function(h,m){h=fn(h);var C=this;return C.__filtered__&&(h>0||m<0)?new kn(C):(h<0?C=C.takeRight(-h):h&&(C=C.drop(h)),m!==P&&(C=(m=fn(m))<0?C.dropRight(-m):C.take(m-h)),C)},kn.prototype.takeRightWhile=function(h){return this.reverse().takeWhile(h).reverse()},kn.prototype.toArray=function(){return this.take(Lt)},sr(kn.prototype,function(h,m){var C=/^(?:filter|find|map|reject)|While$/.test(m),M=/^(?:head|last)$/.test(m),L=H[M?"take"+("last"==m?"Right":""):m],$=M||/^find/.test(m);!L||(H.prototype[m]=function(){var K=this.__wrapped__,ae=M?[1]:arguments,fe=K instanceof kn,Xe=ae[0],qe=fe||cn(K),Ve=function(Vn){var yn=L.apply(H,Fr([Vn],ae));return M&&xt?yn[0]:yn};qe&&C&&"function"==typeof Xe&&1!=Xe.length&&(fe=qe=!1);var xt=this.__chain__,bt=!!this.__actions__.length,Kt=$&&!xt,An=fe&&!bt;if(!$&&qe){K=An?K:new kn(this);var Pt=h.apply(K,ae);return Pt.__actions__.push({func:Jh,args:[Ve],thisArg:P}),new Eo(Pt,xt)}return Kt&&An?h.apply(this,ae):(Pt=this.thru(Ve),Kt?M?Pt.value()[0]:Pt.value():Pt)})}),Tr(["pop","push","shift","sort","splice","unshift"],function(h){var m=ml[h],C=/^(?:push|sort|unshift)$/.test(h)?"tap":"thru",M=/^(?:pop|shift)$/.test(h);H.prototype[h]=function(){var L=arguments;if(M&&!this.__chain__){var $=this.value();return m.apply(cn($)?$:[],L)}return this[C](function(K){return m.apply(cn(K)?K:[],L)})}}),sr(kn.prototype,function(h,m){var C=H[m];if(C){var M=C.name+"";Xn.call(wo,M)||(wo[M]=[]),wo[M].push({name:m,func:C})}}),wo[Zu(P,2).name]=[{name:"wrapper",func:P}],kn.prototype.clone=function F_(){var h=new kn(this.__wrapped__);return h.__actions__=ls(this.__actions__),h.__dir__=this.__dir__,h.__filtered__=this.__filtered__,h.__iteratees__=ls(this.__iteratees__),h.__takeCount__=this.__takeCount__,h.__views__=ls(this.__views__),h},kn.prototype.reverse=function dc(){if(this.__filtered__){var h=new kn(this);h.__dir__=-1,h.__filtered__=!0}else(h=this.clone()).__dir__*=-1;return h},kn.prototype.value=function gr(){var h=this.__wrapped__.value(),m=this.__dir__,C=cn(h),M=m<0,L=C?h.length:0,$=function Al(h,m,C){for(var M=-1,L=C.length;++M<L;){var $=C[M],K=$.size;switch($.type){case"drop":h+=K;break;case"dropRight":m-=K;break;case"take":m=_i(m,h+K);break;case"takeRight":h=Bn(h,m-K)}}return{start:h,end:m}}(0,L,this.__views__),K=$.start,ae=$.end,fe=ae-K,Xe=M?ae:K-1,qe=this.__iteratees__,Ve=qe.length,xt=0,bt=_i(fe,this.__takeCount__);if(!C||!M&&L==fe&&bt==fe)return ln(h,this.__actions__);var Kt=[];e:for(;fe--&&xt<bt;){for(var An=-1,Pt=h[Xe+=m];++An<Ve;){var Vn=qe[An],Hn=Vn.type,vr=(0,Vn.iteratee)(Pt);if(2==Hn)Pt=vr;else if(!vr){if(1==Hn)continue e;break e}}Kt[xt++]=Pt}return Kt},H.prototype.at=U0,H.prototype.chain=function sS(){return dv(this)},H.prototype.commit=function Xh(){return new Eo(this.value(),this.__chain__)},H.prototype.next=function xw(){this.__values__===P&&(this.__values__=Ep(this.value()));var h=this.__index__>=this.__values__.length;return{done:h,value:h?P:this.__values__[this.__index__++]}},H.prototype.plant=function hv(h){for(var m,C=this;C instanceof Mi;){var M=Yo(C);M.__index__=0,M.__values__=P,m?L.__wrapped__=M:m=M;var L=M;C=C.__wrapped__}return L.__wrapped__=h,m},H.prototype.reverse=function Rw(){var h=this.__wrapped__;if(h instanceof kn){var m=h;return this.__actions__.length&&(m=new kn(this)),(m=m.reverse()).__actions__.push({func:Jh,args:[Ft],thisArg:P}),new Eo(m,this.__chain__)}return this.thru(Ft)},H.prototype.toJSON=H.prototype.valueOf=H.prototype.value=function lm(){return ln(this.__wrapped__,this.__actions__)},H.prototype.first=H.prototype.head,bo&&(H.prototype[bo]=function am(){return this}),H}();Er._=nr,(o=function(){return nr}.call(He,W,He,wt))!==P&&(wt.exports=o)}.call(this)},8306:(wt,He,W)=>{"use strict";W.d(He,{y:()=>ne});var o=W(930),P=W(727),j=W(8822),we=W(4671);var ve=W(2416),Te=W(576),Be=W(2806);let ne=(()=>{class Qe{constructor(lt){lt&&(this._subscribe=lt)}lift(lt){const Oe=new Qe;return Oe.source=this,Oe.operator=lt,Oe}subscribe(lt,Oe,We){const ut=function mt(Qe){return Qe&&Qe instanceof o.Lv||function be(Qe){return Qe&&(0,Te.m)(Qe.next)&&(0,Te.m)(Qe.error)&&(0,Te.m)(Qe.complete)}(Qe)&&(0,P.Nn)(Qe)}(lt)?lt:new o.Hp(lt,Oe,We);return(0,Be.x)(()=>{const{operator:ft,source:ze}=this;ut.add(ft?ft.call(ut,ze):ze?this._subscribe(ut):this._trySubscribe(ut))}),ut}_trySubscribe(lt){try{return this._subscribe(lt)}catch(Oe){lt.error(Oe)}}forEach(lt,Oe){return new(Oe=ee(Oe))((We,ut)=>{const ft=new o.Hp({next:ze=>{try{lt(ze)}catch(Ze){ut(Ze),ft.unsubscribe()}},error:ut,complete:We});this.subscribe(ft)})}_subscribe(lt){var Oe;return null===(Oe=this.source)||void 0===Oe?void 0:Oe.subscribe(lt)}[j.L](){return this}pipe(...lt){return function Re(Qe){return 0===Qe.length?we.y:1===Qe.length?Qe[0]:function(lt){return Qe.reduce((Oe,We)=>We(Oe),lt)}}(lt)(this)}toPromise(lt){return new(lt=ee(lt))((Oe,We)=>{let ut;this.subscribe(ft=>ut=ft,ft=>We(ft),()=>Oe(ut))})}}return Qe.create=at=>new Qe(at),Qe})();function ee(Qe){var at;return null!==(at=null!=Qe?Qe:ve.v.Promise)&&void 0!==at?at:Promise}},7579:(wt,He,W)=>{"use strict";W.d(He,{x:()=>ve});var o=W(8306),P=W(727);const we=(0,W(3888).d)(Be=>function(){Be(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Se=W(8737),Re=W(2806);let ve=(()=>{class Be extends o.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ee){const be=new Te(this,this);return be.operator=ee,be}_throwIfClosed(){if(this.closed)throw new we}next(ee){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const be of this.currentObservers)be.next(ee)}})}error(ee){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ee;const{observers:be}=this;for(;be.length;)be.shift().error(ee)}})}complete(){(0,Re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ee}=this;for(;ee.length;)ee.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ee;return(null===(ee=this.observers)||void 0===ee?void 0:ee.length)>0}_trySubscribe(ee){return this._throwIfClosed(),super._trySubscribe(ee)}_subscribe(ee){return this._throwIfClosed(),this._checkFinalizedStatuses(ee),this._innerSubscribe(ee)}_innerSubscribe(ee){const{hasError:be,isStopped:mt,observers:Qe}=this;return be||mt?P.Lc:(this.currentObservers=null,Qe.push(ee),new P.w0(()=>{this.currentObservers=null,(0,Se.P)(Qe,ee)}))}_checkFinalizedStatuses(ee){const{hasError:be,thrownError:mt,isStopped:Qe}=this;be?ee.error(mt):Qe&&ee.complete()}asObservable(){const ee=new o.y;return ee.source=this,ee}}return Be.create=(ne,ee)=>new Te(ne,ee),Be})();class Te extends ve{constructor(ne,ee){super(),this.destination=ne,this.source=ee}next(ne){var ee,be;null===(be=null===(ee=this.destination)||void 0===ee?void 0:ee.next)||void 0===be||be.call(ee,ne)}error(ne){var ee,be;null===(be=null===(ee=this.destination)||void 0===ee?void 0:ee.error)||void 0===be||be.call(ee,ne)}complete(){var ne,ee;null===(ee=null===(ne=this.destination)||void 0===ne?void 0:ne.complete)||void 0===ee||ee.call(ne)}_subscribe(ne){var ee,be;return null!==(be=null===(ee=this.source)||void 0===ee?void 0:ee.subscribe(ne))&&void 0!==be?be:P.Lc}}},930:(wt,He,W)=>{"use strict";W.d(He,{Hp:()=>lt,Lv:()=>be});var o=W(576),P=W(727),j=W(2416),we=W(7849),Se=W(5032);const Re=Be("C",void 0,void 0);function Be(ze,Ze,Ue){return{kind:ze,value:Ze,error:Ue}}var ne=W(3410),ee=W(2806);class be extends P.w0{constructor(Ze){super(),this.isStopped=!1,Ze?(this.destination=Ze,(0,P.Nn)(Ze)&&Ze.add(this)):this.destination=ft}static create(Ze,Ue,_t){return new lt(Ze,Ue,_t)}next(Ze){this.isStopped?ut(function Te(ze){return Be("N",ze,void 0)}(Ze),this):this._next(Ze)}error(Ze){this.isStopped?ut(function ve(ze){return Be("E",void 0,ze)}(Ze),this):(this.isStopped=!0,this._error(Ze))}complete(){this.isStopped?ut(Re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ze){this.destination.next(Ze)}_error(Ze){try{this.destination.error(Ze)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const mt=Function.prototype.bind;function Qe(ze,Ze){return mt.call(ze,Ze)}class at{constructor(Ze){this.partialObserver=Ze}next(Ze){const{partialObserver:Ue}=this;if(Ue.next)try{Ue.next(Ze)}catch(_t){Oe(_t)}}error(Ze){const{partialObserver:Ue}=this;if(Ue.error)try{Ue.error(Ze)}catch(_t){Oe(_t)}else Oe(Ze)}complete(){const{partialObserver:Ze}=this;if(Ze.complete)try{Ze.complete()}catch(Ue){Oe(Ue)}}}class lt extends be{constructor(Ze,Ue,_t){let ye;if(super(),(0,o.m)(Ze)||!Ze)ye={next:null!=Ze?Ze:void 0,error:null!=Ue?Ue:void 0,complete:null!=_t?_t:void 0};else{let Me;this&&j.v.useDeprecatedNextContext?(Me=Object.create(Ze),Me.unsubscribe=()=>this.unsubscribe(),ye={next:Ze.next&&Qe(Ze.next,Me),error:Ze.error&&Qe(Ze.error,Me),complete:Ze.complete&&Qe(Ze.complete,Me)}):ye=Ze}this.destination=new at(ye)}}function Oe(ze){j.v.useDeprecatedSynchronousErrorHandling?(0,ee.O)(ze):(0,we.h)(ze)}function ut(ze,Ze){const{onStoppedNotification:Ue}=j.v;Ue&&ne.z.setTimeout(()=>Ue(ze,Ze))}const ft={closed:!0,next:Se.Z,error:function We(ze){throw ze},complete:Se.Z}},727:(wt,He,W)=>{"use strict";W.d(He,{Lc:()=>Re,w0:()=>Se,Nn:()=>ve});var o=W(576);const j=(0,W(3888).d)(Be=>function(ee){Be(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((be,mt)=>`${mt+1}) ${be.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee});var we=W(8737);class Se{constructor(ne){this.initialTeardown=ne,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ne;if(!this.closed){this.closed=!0;const{_parentage:ee}=this;if(ee)if(this._parentage=null,Array.isArray(ee))for(const Qe of ee)Qe.remove(this);else ee.remove(this);const{initialTeardown:be}=this;if((0,o.m)(be))try{be()}catch(Qe){ne=Qe instanceof j?Qe.errors:[Qe]}const{_finalizers:mt}=this;if(mt){this._finalizers=null;for(const Qe of mt)try{Te(Qe)}catch(at){ne=null!=ne?ne:[],at instanceof j?ne=[...ne,...at.errors]:ne.push(at)}}if(ne)throw new j(ne)}}add(ne){var ee;if(ne&&ne!==this)if(this.closed)Te(ne);else{if(ne instanceof Se){if(ne.closed||ne._hasParent(this))return;ne._addParent(this)}(this._finalizers=null!==(ee=this._finalizers)&&void 0!==ee?ee:[]).push(ne)}}_hasParent(ne){const{_parentage:ee}=this;return ee===ne||Array.isArray(ee)&&ee.includes(ne)}_addParent(ne){const{_parentage:ee}=this;this._parentage=Array.isArray(ee)?(ee.push(ne),ee):ee?[ee,ne]:ne}_removeParent(ne){const{_parentage:ee}=this;ee===ne?this._parentage=null:Array.isArray(ee)&&(0,we.P)(ee,ne)}remove(ne){const{_finalizers:ee}=this;ee&&(0,we.P)(ee,ne),ne instanceof Se&&ne._removeParent(this)}}Se.EMPTY=(()=>{const Be=new Se;return Be.closed=!0,Be})();const Re=Se.EMPTY;function ve(Be){return Be instanceof Se||Be&&"closed"in Be&&(0,o.m)(Be.remove)&&(0,o.m)(Be.add)&&(0,o.m)(Be.unsubscribe)}function Te(Be){(0,o.m)(Be)?Be():Be.unsubscribe()}},2416:(wt,He,W)=>{"use strict";W.d(He,{v:()=>o});const o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(wt,He,W)=>{"use strict";W.d(He,{E:()=>P});const P=new(W(8306).y)(Se=>Se.complete())},8996:(wt,He,W)=>{"use strict";W.d(He,{D:()=>Ze});var o=W(8421),P=W(5363),j=W(9468),Re=W(8306),Te=W(2202),Be=W(576),ne=W(9672);function be(Ue,_t){if(!Ue)throw new Error("Iterable cannot be null");return new Re.y(ye=>{(0,ne.f)(ye,_t,()=>{const Me=Ue[Symbol.asyncIterator]();(0,ne.f)(ye,_t,()=>{Me.next().then(te=>{te.done?ye.complete():ye.next(te.value)})},0,!0)})})}var mt=W(3670),Qe=W(8239),at=W(1144),lt=W(6495),Oe=W(2206),We=W(4532),ut=W(3260);function Ze(Ue,_t){return _t?function ze(Ue,_t){if(null!=Ue){if((0,mt.c)(Ue))return function we(Ue,_t){return(0,o.Xf)(Ue).pipe((0,j.R)(_t),(0,P.Q)(_t))}(Ue,_t);if((0,at.z)(Ue))return function ve(Ue,_t){return new Re.y(ye=>{let Me=0;return _t.schedule(function(){Me===Ue.length?ye.complete():(ye.next(Ue[Me++]),ye.closed||this.schedule())})})}(Ue,_t);if((0,Qe.t)(Ue))return function Se(Ue,_t){return(0,o.Xf)(Ue).pipe((0,j.R)(_t),(0,P.Q)(_t))}(Ue,_t);if((0,Oe.D)(Ue))return be(Ue,_t);if((0,lt.T)(Ue))return function ee(Ue,_t){return new Re.y(ye=>{let Me;return(0,ne.f)(ye,_t,()=>{Me=Ue[Te.h](),(0,ne.f)(ye,_t,()=>{let te,ge;try{({value:te,done:ge}=Me.next())}catch(De){return void ye.error(De)}ge?ye.complete():ye.next(te)},0,!0)}),()=>(0,Be.m)(null==Me?void 0:Me.return)&&Me.return()})}(Ue,_t);if((0,ut.L)(Ue))return function ft(Ue,_t){return be((0,ut.Q)(Ue),_t)}(Ue,_t)}throw(0,We.z)(Ue)}(Ue,_t):(0,o.Xf)(Ue)}},8421:(wt,He,W)=>{"use strict";W.d(He,{Xf:()=>mt});var o=W(655),P=W(1144),j=W(8239),we=W(8306),Se=W(3670),Re=W(2206),ve=W(4532),Te=W(6495),Be=W(3260),ne=W(576),ee=W(7849),be=W(8822);function mt(ze){if(ze instanceof we.y)return ze;if(null!=ze){if((0,Se.c)(ze))return function Qe(ze){return new we.y(Ze=>{const Ue=ze[be.L]();if((0,ne.m)(Ue.subscribe))return Ue.subscribe(Ze);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(ze);if((0,P.z)(ze))return function at(ze){return new we.y(Ze=>{for(let Ue=0;Ue<ze.length&&!Ze.closed;Ue++)Ze.next(ze[Ue]);Ze.complete()})}(ze);if((0,j.t)(ze))return function lt(ze){return new we.y(Ze=>{ze.then(Ue=>{Ze.closed||(Ze.next(Ue),Ze.complete())},Ue=>Ze.error(Ue)).then(null,ee.h)})}(ze);if((0,Re.D)(ze))return We(ze);if((0,Te.T)(ze))return function Oe(ze){return new we.y(Ze=>{for(const Ue of ze)if(Ze.next(Ue),Ze.closed)return;Ze.complete()})}(ze);if((0,Be.L)(ze))return function ut(ze){return We((0,Be.Q)(ze))}(ze)}throw(0,ve.z)(ze)}function We(ze){return new we.y(Ze=>{(function ft(ze,Ze){var Ue,_t,ye,Me;return(0,o.mG)(this,void 0,void 0,function*(){try{for(Ue=(0,o.KL)(ze);!(_t=yield Ue.next()).done;)if(Ze.next(_t.value),Ze.closed)return}catch(te){ye={error:te}}finally{try{_t&&!_t.done&&(Me=Ue.return)&&(yield Me.call(Ue))}finally{if(ye)throw ye.error}}Ze.complete()})})(ze,Ze).catch(Ue=>Ze.error(Ue))})}},6451:(wt,He,W)=>{"use strict";W.d(He,{T:()=>Re});var o=W(8189),P=W(8421),j=W(515),we=W(3269),Se=W(8996);function Re(...ve){const Te=(0,we.yG)(ve),Be=(0,we._6)(ve,1/0),ne=ve;return ne.length?1===ne.length?(0,P.Xf)(ne[0]):(0,o.J)(Be)((0,Se.D)(ne,Te)):j.E}},5403:(wt,He,W)=>{"use strict";W.d(He,{x:()=>P});var o=W(930);function P(we,Se,Re,ve,Te){return new j(we,Se,Re,ve,Te)}class j extends o.Lv{constructor(Se,Re,ve,Te,Be,ne){super(Se),this.onFinalize=Be,this.shouldUnsubscribe=ne,this._next=Re?function(ee){try{Re(ee)}catch(be){Se.error(be)}}:super._next,this._error=Te?function(ee){try{Te(ee)}catch(be){Se.error(be)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(ee){Se.error(ee)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Re}=this;super.unsubscribe(),!Re&&(null===(Se=this.onFinalize)||void 0===Se||Se.call(this))}}}},4004:(wt,He,W)=>{"use strict";W.d(He,{U:()=>j});var o=W(4482),P=W(5403);function j(we,Se){return(0,o.e)((Re,ve)=>{let Te=0;Re.subscribe((0,P.x)(ve,Be=>{ve.next(we.call(Se,Be,Te++))}))})}},8189:(wt,He,W)=>{"use strict";W.d(He,{J:()=>j});var o=W(5577),P=W(4671);function j(we=1/0){return(0,o.z)(P.y,we)}},5577:(wt,He,W)=>{"use strict";W.d(He,{z:()=>Te});var o=W(4004),P=W(8421),j=W(4482),we=W(9672),Se=W(5403),ve=W(576);function Te(Be,ne,ee=1/0){return(0,ve.m)(ne)?Te((be,mt)=>(0,o.U)((Qe,at)=>ne(be,Qe,mt,at))((0,P.Xf)(Be(be,mt))),ee):("number"==typeof ne&&(ee=ne),(0,j.e)((be,mt)=>function Re(Be,ne,ee,be,mt,Qe,at,lt){const Oe=[];let We=0,ut=0,ft=!1;const ze=()=>{ft&&!Oe.length&&!We&&ne.complete()},Ze=_t=>We<be?Ue(_t):Oe.push(_t),Ue=_t=>{Qe&&ne.next(_t),We++;let ye=!1;(0,P.Xf)(ee(_t,ut++)).subscribe((0,Se.x)(ne,Me=>{null==mt||mt(Me),Qe?Ze(Me):ne.next(Me)},()=>{ye=!0},void 0,()=>{if(ye)try{for(We--;Oe.length&&We<be;){const Me=Oe.shift();at?(0,we.f)(ne,at,()=>Ue(Me)):Ue(Me)}ze()}catch(Me){ne.error(Me)}}))};return Be.subscribe((0,Se.x)(ne,Ze,()=>{ft=!0,ze()})),()=>{null==lt||lt()}}(be,mt,Be,ee)))}},5363:(wt,He,W)=>{"use strict";W.d(He,{Q:()=>we});var o=W(9672),P=W(4482),j=W(5403);function we(Se,Re=0){return(0,P.e)((ve,Te)=>{ve.subscribe((0,j.x)(Te,Be=>(0,o.f)(Te,Se,()=>Te.next(Be),Re),()=>(0,o.f)(Te,Se,()=>Te.complete(),Re),Be=>(0,o.f)(Te,Se,()=>Te.error(Be),Re)))})}},3099:(wt,He,W)=>{"use strict";W.d(He,{B:()=>Re});var o=W(8996),P=W(5698),j=W(7579),we=W(930),Se=W(4482);function Re(Te={}){const{connector:Be=(()=>new j.x),resetOnError:ne=!0,resetOnComplete:ee=!0,resetOnRefCountZero:be=!0}=Te;return mt=>{let Qe=null,at=null,lt=null,Oe=0,We=!1,ut=!1;const ft=()=>{null==at||at.unsubscribe(),at=null},ze=()=>{ft(),Qe=lt=null,We=ut=!1},Ze=()=>{const Ue=Qe;ze(),null==Ue||Ue.unsubscribe()};return(0,Se.e)((Ue,_t)=>{Oe++,!ut&&!We&&ft();const ye=lt=null!=lt?lt:Be();_t.add(()=>{Oe--,0===Oe&&!ut&&!We&&(at=ve(Ze,be))}),ye.subscribe(_t),Qe||(Qe=new we.Hp({next:Me=>ye.next(Me),error:Me=>{ut=!0,ft(),at=ve(ze,ne,Me),ye.error(Me)},complete:()=>{We=!0,ft(),at=ve(ze,ee),ye.complete()}}),(0,o.D)(Ue).subscribe(Qe))})(mt)}}function ve(Te,Be,...ne){return!0===Be?(Te(),null):!1===Be?null:Be(...ne).pipe((0,P.q)(1)).subscribe(()=>Te())}},9468:(wt,He,W)=>{"use strict";W.d(He,{R:()=>P});var o=W(4482);function P(j,we=0){return(0,o.e)((Se,Re)=>{Re.add(j.schedule(()=>Se.subscribe(Re),we))})}},5698:(wt,He,W)=>{"use strict";W.d(He,{q:()=>we});var o=W(515),P=W(4482),j=W(5403);function we(Se){return Se<=0?()=>o.E:(0,P.e)((Re,ve)=>{let Te=0;Re.subscribe((0,j.x)(ve,Be=>{++Te<=Se&&(ve.next(Be),Se<=Te&&ve.complete())}))})}},8505:(wt,He,W)=>{"use strict";W.d(He,{b:()=>Se});var o=W(576),P=W(4482),j=W(5403),we=W(4671);function Se(Re,ve,Te){const Be=(0,o.m)(Re)||ve||Te?{next:Re,error:ve,complete:Te}:Re;return Be?(0,P.e)((ne,ee)=>{var be;null===(be=Be.subscribe)||void 0===be||be.call(Be);let mt=!0;ne.subscribe((0,j.x)(ee,Qe=>{var at;null===(at=Be.next)||void 0===at||at.call(Be,Qe),ee.next(Qe)},()=>{var Qe;mt=!1,null===(Qe=Be.complete)||void 0===Qe||Qe.call(Be),ee.complete()},Qe=>{var at;mt=!1,null===(at=Be.error)||void 0===at||at.call(Be,Qe),ee.error(Qe)},()=>{var Qe,at;mt&&(null===(Qe=Be.unsubscribe)||void 0===Qe||Qe.call(Be)),null===(at=Be.finalize)||void 0===at||at.call(Be)}))}):we.y}},4408:(wt,He,W)=>{"use strict";W.d(He,{o:()=>Se});var o=W(727);class P extends o.w0{constructor(ve,Te){super()}schedule(ve,Te=0){return this}}const j={setInterval(Re,ve,...Te){const{delegate:Be}=j;return(null==Be?void 0:Be.setInterval)?Be.setInterval(Re,ve,...Te):setInterval(Re,ve,...Te)},clearInterval(Re){const{delegate:ve}=j;return((null==ve?void 0:ve.clearInterval)||clearInterval)(Re)},delegate:void 0};var we=W(8737);class Se extends P{constructor(ve,Te){super(ve,Te),this.scheduler=ve,this.work=Te,this.pending=!1}schedule(ve,Te=0){if(this.closed)return this;this.state=ve;const Be=this.id,ne=this.scheduler;return null!=Be&&(this.id=this.recycleAsyncId(ne,Be,Te)),this.pending=!0,this.delay=Te,this.id=this.id||this.requestAsyncId(ne,this.id,Te),this}requestAsyncId(ve,Te,Be=0){return j.setInterval(ve.flush.bind(ve,this),Be)}recycleAsyncId(ve,Te,Be=0){if(null!=Be&&this.delay===Be&&!1===this.pending)return Te;j.clearInterval(Te)}execute(ve,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Be=this._execute(ve,Te);if(Be)return Be;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,Te){let ne,Be=!1;try{this.work(ve)}catch(ee){Be=!0,ne=ee||new Error("Scheduled action threw falsy error")}if(Be)return this.unsubscribe(),ne}unsubscribe(){if(!this.closed){const{id:ve,scheduler:Te}=this,{actions:Be}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,we.P)(Be,this),null!=ve&&(this.id=this.recycleAsyncId(Te,ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(wt,He,W)=>{"use strict";W.d(He,{v:()=>j});var o=W(6063);class P{constructor(Se,Re=P.now){this.schedulerActionCtor=Se,this.now=Re}schedule(Se,Re=0,ve){return new this.schedulerActionCtor(this,Se).schedule(ve,Re)}}P.now=o.l.now;class j extends P{constructor(Se,Re=P.now){super(Se,Re),this.actions=[],this._active=!1,this._scheduled=void 0}flush(Se){const{actions:Re}=this;if(this._active)return void Re.push(Se);let ve;this._active=!0;do{if(ve=Se.execute(Se.state,Se.delay))break}while(Se=Re.shift());if(this._active=!1,ve){for(;Se=Re.shift();)Se.unsubscribe();throw ve}}}},4986:(wt,He,W)=>{"use strict";W.d(He,{P:()=>we,z:()=>j});var o=W(4408);const j=new(W(7565).v)(o.o),we=j},6063:(wt,He,W)=>{"use strict";W.d(He,{l:()=>o});const o={now:()=>(o.delegate||Date).now(),delegate:void 0}},3410:(wt,He,W)=>{"use strict";W.d(He,{z:()=>o});const o={setTimeout(P,j,...we){const{delegate:Se}=o;return(null==Se?void 0:Se.setTimeout)?Se.setTimeout(P,j,...we):setTimeout(P,j,...we)},clearTimeout(P){const{delegate:j}=o;return((null==j?void 0:j.clearTimeout)||clearTimeout)(P)},delegate:void 0}},2202:(wt,He,W)=>{"use strict";W.d(He,{h:()=>P});const P=function o(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(wt,He,W)=>{"use strict";W.d(He,{L:()=>o});const o="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(wt,He,W)=>{"use strict";W.d(He,{_6:()=>Re,jO:()=>we,yG:()=>Se});var o=W(576),P=W(3532);function j(ve){return ve[ve.length-1]}function we(ve){return(0,o.m)(j(ve))?ve.pop():void 0}function Se(ve){return(0,P.K)(j(ve))?ve.pop():void 0}function Re(ve,Te){return"number"==typeof j(ve)?ve.pop():Te}},8737:(wt,He,W)=>{"use strict";function o(P,j){if(P){const we=P.indexOf(j);0<=we&&P.splice(we,1)}}W.d(He,{P:()=>o})},3888:(wt,He,W)=>{"use strict";function o(P){const we=P(Se=>{Error.call(Se),Se.stack=(new Error).stack});return we.prototype=Object.create(Error.prototype),we.prototype.constructor=we,we}W.d(He,{d:()=>o})},2806:(wt,He,W)=>{"use strict";W.d(He,{O:()=>we,x:()=>j});var o=W(2416);let P=null;function j(Se){if(o.v.useDeprecatedSynchronousErrorHandling){const Re=!P;if(Re&&(P={errorThrown:!1,error:null}),Se(),Re){const{errorThrown:ve,error:Te}=P;if(P=null,ve)throw Te}}else Se()}function we(Se){o.v.useDeprecatedSynchronousErrorHandling&&P&&(P.errorThrown=!0,P.error=Se)}},9672:(wt,He,W)=>{"use strict";function o(P,j,we,Se=0,Re=!1){const ve=j.schedule(function(){we(),Re?P.add(this.schedule(null,Se)):this.unsubscribe()},Se);if(P.add(ve),!Re)return ve}W.d(He,{f:()=>o})},4671:(wt,He,W)=>{"use strict";function o(P){return P}W.d(He,{y:()=>o})},1144:(wt,He,W)=>{"use strict";W.d(He,{z:()=>o});const o=P=>P&&"number"==typeof P.length&&"function"!=typeof P},2206:(wt,He,W)=>{"use strict";W.d(He,{D:()=>P});var o=W(576);function P(j){return Symbol.asyncIterator&&(0,o.m)(null==j?void 0:j[Symbol.asyncIterator])}},576:(wt,He,W)=>{"use strict";function o(P){return"function"==typeof P}W.d(He,{m:()=>o})},3670:(wt,He,W)=>{"use strict";W.d(He,{c:()=>j});var o=W(8822),P=W(576);function j(we){return(0,P.m)(we[o.L])}},6495:(wt,He,W)=>{"use strict";W.d(He,{T:()=>j});var o=W(2202),P=W(576);function j(we){return(0,P.m)(null==we?void 0:we[o.h])}},8239:(wt,He,W)=>{"use strict";W.d(He,{t:()=>P});var o=W(576);function P(j){return(0,o.m)(null==j?void 0:j.then)}},3260:(wt,He,W)=>{"use strict";W.d(He,{L:()=>we,Q:()=>j});var o=W(655),P=W(576);function j(Se){return(0,o.FC)(this,arguments,function*(){const ve=Se.getReader();try{for(;;){const{value:Te,done:Be}=yield(0,o.qq)(ve.read());if(Be)return yield(0,o.qq)(void 0);yield yield(0,o.qq)(Te)}}finally{ve.releaseLock()}})}function we(Se){return(0,P.m)(null==Se?void 0:Se.getReader)}},3532:(wt,He,W)=>{"use strict";W.d(He,{K:()=>P});var o=W(576);function P(j){return j&&(0,o.m)(j.schedule)}},4482:(wt,He,W)=>{"use strict";W.d(He,{A:()=>P,e:()=>j});var o=W(576);function P(we){return(0,o.m)(null==we?void 0:we.lift)}function j(we){return Se=>{if(P(Se))return Se.lift(function(Re){try{return we(Re,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(wt,He,W)=>{"use strict";function o(){}W.d(He,{Z:()=>o})},7849:(wt,He,W)=>{"use strict";W.d(He,{h:()=>j});var o=W(2416),P=W(3410);function j(we){P.z.setTimeout(()=>{const{onUnhandledError:Se}=o.v;if(!Se)throw we;Se(we)})}},4532:(wt,He,W)=>{"use strict";function o(P){return new TypeError(`You provided ${null!==P&&"object"==typeof P?"an invalid object":`'${P}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}W.d(He,{z:()=>o})},655:(wt,He,W)=>{"use strict";function we(te,ge){var De={};for(var Ae in te)Object.prototype.hasOwnProperty.call(te,Ae)&&ge.indexOf(Ae)<0&&(De[Ae]=te[Ae]);if(null!=te&&"function"==typeof Object.getOwnPropertySymbols){var it=0;for(Ae=Object.getOwnPropertySymbols(te);it<Ae.length;it++)ge.indexOf(Ae[it])<0&&Object.prototype.propertyIsEnumerable.call(te,Ae[it])&&(De[Ae[it]]=te[Ae[it]])}return De}function Te(te,ge,De,Ae){return new(De||(De=Promise))(function(Ce,Vt){function tn(Lt){try{Mt(Ae.next(Lt))}catch(Qi){Vt(Qi)}}function Ki(Lt){try{Mt(Ae.throw(Lt))}catch(Qi){Vt(Qi)}}function Mt(Lt){Lt.done?Ce(Lt.value):function it(Ce){return Ce instanceof De?Ce:new De(function(Vt){Vt(Ce)})}(Lt.value).then(tn,Ki)}Mt((Ae=Ae.apply(te,ge||[])).next())})}function Oe(te){return this instanceof Oe?(this.v=te,this):new Oe(te)}function We(te,ge,De){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var it,Ae=De.apply(te,ge||[]),Ce=[];return it={},Vt("next"),Vt("throw"),Vt("return"),it[Symbol.asyncIterator]=function(){return this},it;function Vt(Gn){Ae[Gn]&&(it[Gn]=function(Cr){return new Promise(function(Ln,Dn){Ce.push([Gn,Cr,Ln,Dn])>1||tn(Gn,Cr)})})}function tn(Gn,Cr){try{!function Ki(Gn){Gn.value instanceof Oe?Promise.resolve(Gn.value.v).then(Mt,Lt):Qi(Ce[0][2],Gn)}(Ae[Gn](Cr))}catch(Ln){Qi(Ce[0][3],Ln)}}function Mt(Gn){tn("next",Gn)}function Lt(Gn){tn("throw",Gn)}function Qi(Gn,Cr){Gn(Cr),Ce.shift(),Ce.length&&tn(Ce[0][0],Ce[0][1])}}function ft(te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var De,ge=te[Symbol.asyncIterator];return ge?ge.call(te):(te=function be(te){var ge="function"==typeof Symbol&&Symbol.iterator,De=ge&&te[ge],Ae=0;if(De)return De.call(te);if(te&&"number"==typeof te.length)return{next:function(){return te&&Ae>=te.length&&(te=void 0),{value:te&&te[Ae++],done:!te}}};throw new TypeError(ge?"Object is not iterable.":"Symbol.iterator is not defined.")}(te),De={},Ae("next"),Ae("throw"),Ae("return"),De[Symbol.asyncIterator]=function(){return this},De);function Ae(Ce){De[Ce]=te[Ce]&&function(Vt){return new Promise(function(tn,Ki){!function it(Ce,Vt,tn,Ki){Promise.resolve(Ki).then(function(Mt){Ce({value:Mt,done:tn})},Vt)}(tn,Ki,(Vt=te[Ce](Vt)).done,Vt.value)})}}}W.d(He,{FC:()=>We,KL:()=>ft,_T:()=>we,mG:()=>Te,qq:()=>Oe})},5e3:(wt,He,W)=>{"use strict";W.d(He,{$8M:()=>ui,$Z:()=>Kt,AFp:()=>hC,AaK:()=>Te,BQk:()=>tl,CHM:()=>rc,CRH:()=>xI,CZH:()=>nT,CqO:()=>Tt,DdM:()=>Xp,EJc:()=>o_,EiD:()=>sp,EpF:()=>Am,F$t:()=>Sb,F4k:()=>tE,FYo:()=>aI,FiY:()=>sr,G48:()=>ah,Gf:()=>Xs,GfV:()=>Df,GkF:()=>nl,Gpc:()=>ee,Hsn:()=>bf,Ikx:()=>_E,JOm:()=>mc,JVY:()=>Rd,L6k:()=>np,LAX:()=>Tn,LFG:()=>ct,LSH:()=>ls,Lbi:()=>i_,MAs:()=>wb,MGl:()=>Cf,NdJ:()=>rd,OlP:()=>Mi,Oqu:()=>hE,PXZ:()=>gT,Q6J:()=>An,QGY:()=>Lp,Qsj:()=>lI,QtT:()=>qm,R0b:()=>wu,RDi:()=>vs,Rgc:()=>ng,SBq:()=>Kp,SDv:()=>Xv,Sil:()=>sT,Suo:()=>AI,TTD:()=>Uc,TgZ:()=>yn,Tol:()=>Vv,Udp:()=>Rb,VKq:()=>PE,VLi:()=>dT,W1O:()=>qE,WFA:()=>xm,WLB:()=>If,X6Q:()=>vT,XFs:()=>Bt,Xpm:()=>qt,Y36:()=>bt,YKP:()=>Km,YNc:()=>Im,Yjl:()=>vt,Yz7:()=>Ln,ZZ4:()=>a_,_Bn:()=>ih,_UZ:()=>vr,_Vd:()=>rh,_c5:()=>tM,_uU:()=>Vp,aQg:()=>xy,c2e:()=>r_,cJS:()=>$n,cg1:()=>Lb,d8E:()=>Fb,dDg:()=>XI,deG:()=>Eo,dqk:()=>Cn,eBb:()=>Uh,eFA:()=>t1,ekj:()=>Xd,f3M:()=>Yt,g9A:()=>fC,h0i:()=>Jp,hGG:()=>nM,hij:()=>km,iGM:()=>eC,ifc:()=>gn,ip1:()=>dC,kEZ:()=>pI,kL8:()=>Ub,lG2:()=>Ye,mCW:()=>y,n5z:()=>wo,oAB:()=>Ie,oxw:()=>nE,pB0:()=>ip,pQV:()=>SE,q3G:()=>ei,q4F:()=>uI,qLn:()=>Hg,qOj:()=>Mv,qZA:()=>Hn,qzn:()=>Ia,s9C:()=>Fv,sBO:()=>qR,sIi:()=>qd,s_b:()=>hy,soG:()=>pC,tBr:()=>Ws,tb:()=>oh,tp0:()=>zs,uIk:()=>Rp,vHH:()=>at,vpe:()=>Rc,wAp:()=>yt,xp6:()=>N0,yhl:()=>Dl,ynx:()=>Ms,z2F:()=>wy,z3N:()=>Sa,zSh:()=>Tv,zs3:()=>Pl});var o=W(7579),P=W(727),j=W(8306),we=W(6451),Se=W(3099);function Re(a){for(let l in a)if(a[l]===Re)return l;throw Error("Could not find renamed property on target object.")}function ve(a,l){for(const u in l)l.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=l[u])}function Te(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(Te).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const l=a.toString();if(null==l)return""+l;const u=l.indexOf("\n");return-1===u?l:l.substring(0,u)}function Be(a,l){return null==a||""===a?null===l?"":l:null==l||""===l?a:a+" "+l}const ne=Re({__forward_ref__:Re});function ee(a){return a.__forward_ref__=ee,a.toString=function(){return Te(this())},a}function be(a){return mt(a)?a():a}function mt(a){return"function"==typeof a&&a.hasOwnProperty(ne)&&a.__forward_ref__===ee}class at extends Error{constructor(l,u){super(function lt(a,l){return`NG0${Math.abs(a)}${l?": "+l:""}`}(l,u)),this.code=l}}function Oe(a){return"string"==typeof a?a:null==a?"":String(a)}function We(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():Oe(a)}function Ze(a,l){const u=l?` in ${l}`:"";throw new at(-201,`No provider for ${We(a)} found${u}`)}function Lt(a,l,u,f){throw new Error(`ASSERTION ERROR: ${a}`+(null==f?"":` [Expected=> ${u} ${f} ${l} <=Actual]`))}function Ln(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function $n(a){return{providers:a.providers||[],imports:a.imports||[]}}function hi(a){return es(a,ks)||es(a,xi)}function es(a,l){return a.hasOwnProperty(l)?a[l]:null}function Ns(a){return a&&(a.hasOwnProperty(Ji)||a.hasOwnProperty(Oo))?a[Ji]:null}const ks=Re({\u0275prov:Re}),Ji=Re({\u0275inj:Re}),xi=Re({ngInjectableDef:Re}),Oo=Re({ngInjectorDef:Re});var Bt=(()=>((Bt=Bt||{})[Bt.Default=0]="Default",Bt[Bt.Host=1]="Host",Bt[Bt.Self=2]="Self",Bt[Bt.SkipSelf=4]="SkipSelf",Bt[Bt.Optional=8]="Optional",Bt))();let ns;function Mn(a){const l=ns;return ns=a,l}function bi(a,l,u){const f=hi(a);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:u&Bt.Optional?null:void 0!==l?l:void Ze(Te(a),"Injector")}function Or(a){return{toString:a}.toString()}var Ai=(()=>((Ai=Ai||{})[Ai.OnPush=0]="OnPush",Ai[Ai.Default=1]="Default",Ai))(),gn=(()=>{return(a=gn||(gn={}))[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",gn;var a})();const Ut="undefined"!=typeof globalThis&&globalThis,Nt="undefined"!=typeof window&&window,ps="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Cn=Ut||"undefined"!=typeof global&&global||Nt||ps,Qn={},X=[],se=Re({\u0275cmp:Re}),le=Re({\u0275dir:Re}),je=Re({\u0275pipe:Re}),ie=Re({\u0275mod:Re}),pe=Re({\u0275fac:Re}),rt=Re({__NG_ELEMENT_ID__:Re});let It=0;function qt(a){return Or(()=>{const u={},f={type:a.type,providersResolver:null,decls:a.decls,vars:a.vars,factory:null,template:a.template||null,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:a.exportAs||null,onPush:a.changeDetection===Ai.OnPush,directiveDefs:null,pipeDefs:null,selectors:a.selectors||X,viewQuery:a.viewQuery||null,features:a.features||null,data:a.data||{},encapsulation:a.encapsulation||gn.Emulated,id:"c",styles:a.styles||X,_:null,setInput:null,schemas:a.schemas||null,tView:null},g=a.directives,_=a.features,w=a.pipes;return f.id+=It++,f.inputs=oe(a.inputs,u),f.outputs=oe(a.outputs),_&&_.forEach(D=>D(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(ni):null,f.pipeDefs=w?()=>("function"==typeof w?w():w).map(Qt):null,f})}function ni(a){return Gt(a)||function dn(a){return a[le]||null}(a)}function Qt(a){return function On(a){return a[je]||null}(a)}const fr={};function Ie(a){return Or(()=>{const l={type:a.type,bootstrap:a.bootstrap||X,declarations:a.declarations||X,imports:a.imports||X,exports:a.exports||X,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null};return null!=a.id&&(fr[a.id]=a.type),l})}function oe(a,l){if(null==a)return Qn;const u={};for(const f in a)if(a.hasOwnProperty(f)){let g=a[f],_=g;Array.isArray(g)&&(_=g[1],g=g[0]),u[g]=f,l&&(l[g]=_)}return u}const Ye=qt;function vt(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,onDestroy:a.type.prototype.ngOnDestroy||null}}function Gt(a){return a[se]||null}function Sn(a,l){const u=a[ie]||null;if(!u&&!0===l)throw new Error(`Type ${Te(a)} does not have '\u0275mod' property.`);return u}function ms(a){return Array.isArray(a)&&"object"==typeof a[1]}function Ls(a){return Array.isArray(a)&&!0===a[1]}function wh(a){return 0!=(8&a.flags)}function Lc(a){return 2==(2&a.flags)}function ca(a){return 1==(1&a.flags)}function _s(a){return null!==a.template}function Eh(a){return 0!=(512&a[2])}function io(a,l){return a.hasOwnProperty(pe)?a[pe]:null}class Xl{constructor(l,u,f){this.previousValue=l,this.currentValue=u,this.firstChange=f}isFirstChange(){return this.firstChange}}function Uc(){return oi}function oi(a){return a.type.prototype.ngOnChanges&&(a.setInput=Ig),wi}function wi(){const a=Dh(this),l=null==a?void 0:a.current;if(l){const u=a.previous;if(u===Qn)a.previous=l;else for(let f in l)u[f]=l[f];a.current=null,this.ngOnChanges(l)}}function Ig(a,l,u,f){const g=Dh(a)||function ha(a,l){return a[Wn]=l}(a,{previous:Qn,current:null}),_=g.current||(g.current={}),w=g.previous,D=this.declaredInputs[u],x=w[D];_[D]=new Xl(x&&x.currentValue,l,w===Qn),a[f]=l}Uc.ngInherit=!0;const Wn="__ngSimpleChanges__";function Dh(a){return a[Wn]||null}let ec;function vs(a){ec=a}function ko(){return void 0!==ec?ec:"undefined"!=typeof document?document:void 0}function fi(a){return!!a.listen}const tc={createRenderer:(a,l)=>ko()};function ai(a){for(;Array.isArray(a);)a=a[0];return a}function Tr(a,l){return ai(l[a])}function Pr(a,l){return ai(l[a.index])}function pi(a,l){return a.data[l]}function pr(a,l){const u=l[a];return ms(u)?u:u[0]}function li(a){return 4==(4&a[2])}function Fr(a){return 128==(128&a[2])}function Bs(a,l){return null==l?null:a[l]}function Po(a){a[18]=0}function Ha(a,l){a[5]+=l;let u=a,f=a[3];for(;null!==f&&(1===l&&1===u[5]||-1===l&&0===u[5]);)f[5]+=l,u=f,f=f[3]}const Zt={lFrame:$a(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function wd(){return Zt.bindingsEnabled}function Je(){return Zt.lFrame.lView}function En(){return Zt.lFrame.tView}function rc(a){return Zt.lFrame.contextLView=a,a[8]}function $i(){let a=Lo();for(;null!==a&&64===a.type;)a=a.parent;return a}function Lo(){return Zt.lFrame.currentTNode}function fl(){const a=Zt.lFrame,l=a.currentTNode;return a.isParent?l:l.parent}function ys(a,l){const u=Zt.lFrame;u.currentTNode=a,u.isParent=l}function Nu(){return Zt.lFrame.isParent}function ss(){Zt.lFrame.isParent=!1}function oc(){return Zt.isInCheckNoChangesMode}function pl(a){Zt.isInCheckNoChangesMode=a}function Dr(){const a=Zt.lFrame;let l=a.bindingRootIndex;return-1===l&&(l=a.bindingRootIndex=a.tView.bindingStartIndex),l}function Bo(){return Zt.lFrame.bindingIndex++}function pa(a){const l=Zt.lFrame,u=l.bindingIndex;return l.bindingIndex=l.bindingIndex+a,u}function Ah(a){Zt.lFrame.inI18n=a}function zc(a,l){const u=Zt.lFrame;u.bindingIndex=u.bindingRootIndex=a,ja(l)}function ja(a){Zt.lFrame.currentDirectiveIndex=a}function vo(a){const l=Zt.lFrame.currentDirectiveIndex;return-1===l?null:a[l]}function Ga(){return Zt.lFrame.currentQueryIndex}function Td(a){Zt.lFrame.currentQueryIndex=a}function Ag(a){const l=a[1];return 2===l.type?l.declTNode:1===l.type?a[6]:null}function Fu(a,l,u){if(u&Bt.SkipSelf){let g=l,_=a;for(;!(g=g.parent,null!==g||u&Bt.Host||(g=Ag(_),null===g||(_=_[15],10&g.type))););if(null===g)return!1;l=g,a=_}const f=Zt.lFrame=Us();return f.currentTNode=l,f.lView=a,!0}function so(a){const l=Us(),u=a[1];Zt.lFrame=l,l.currentTNode=u.firstChild,l.lView=a,l.tView=u,l.contextLView=a,l.bindingIndex=u.bindingStartIndex,l.inI18n=!1}function Us(){const a=Zt.lFrame,l=null===a?null:a.child;return null===l?$a(a):l}function $a(a){const l={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=l),l}function xh(){const a=Zt.lFrame;return Zt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const qf=xh;function ac(){const a=xh();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function nr(){return Zt.lFrame.selectedIndex}function ue(a){Zt.lFrame.selectedIndex=a}function xe(){const a=Zt.lFrame;return pi(a.tView,a.selectedIndex)}function gl(a,l){for(let u=l.directiveStart,f=l.directiveEnd;u<f;u++){const _=a.data[u].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:D,ngAfterViewInit:x,ngAfterViewChecked:k,ngOnDestroy:B}=_;w&&(a.contentHooks||(a.contentHooks=[])).push(-u,w),D&&((a.contentHooks||(a.contentHooks=[])).push(u,D),(a.contentCheckHooks||(a.contentCheckHooks=[])).push(u,D)),x&&(a.viewHooks||(a.viewHooks=[])).push(-u,x),k&&((a.viewHooks||(a.viewHooks=[])).push(u,k),(a.viewCheckHooks||(a.viewCheckHooks=[])).push(u,k)),null!=B&&(a.destroyHooks||(a.destroyHooks=[])).push(u,B)}}function ga(a,l,u){Lr(a,l,3,u)}function Wr(a,l,u,f){(3&a[2])===u&&Lr(a,l,u,f)}function ml(a,l){let u=a[2];(3&u)===l&&(u&=2047,u+=1,a[2]=u)}function Lr(a,l,u,f){const _=null!=f?f:-1,w=l.length-1;let D=0;for(let x=void 0!==f?65535&a[18]:0;x<w;x++)if("number"==typeof l[x+1]){if(D=l[x],null!=f&&D>=f)break}else l[x]<0&&(a[18]+=65536),(D<_||-1==_)&&(lc(a,u,l,x),a[18]=(4294901760&a[18])+x+2),x++}function lc(a,l,u,f){const g=u[f]<0,_=u[f+1],D=a[g?-u[f]:u[f]];if(g){if(a[2]>>11<a[18]>>16&&(3&a[2])===l){a[2]+=2048;try{_.call(D)}finally{}}}else try{_.call(D)}finally{}}class ma{constructor(l,u,f){this.factory=l,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=f}}function dt(a,l,u){const f=fi(a);let g=0;for(;g<u.length;){const _=u[g];if("number"==typeof _){if(0!==_)break;g++;const w=u[g++],D=u[g++],x=u[g++];f?a.setAttribute(l,D,x,w):l.setAttributeNS(w,D,x)}else{const w=_,D=u[++g];gi(w)?f&&a.setProperty(l,w,D):f?a.setAttribute(l,w,D):l.setAttribute(w,D),g++}}return g}function an(a){return 3===a||4===a||6===a}function gi(a){return 64===a.charCodeAt(0)}function Di(a,l){if(null!==l&&0!==l.length)if(null===a||0===a.length)a=l.slice();else{let u=-1;for(let f=0;f<l.length;f++){const g=l[f];"number"==typeof g?u=g:0===u||Lu(a,u,g,null,-1===u||2===u?l[++f]:null)}}return a}function Lu(a,l,u,f,g){let _=0,w=a.length;if(-1===l)w=-1;else for(;_<a.length;){const D=a[_++];if("number"==typeof D){if(D===l){w=-1;break}if(D>l){w=_-1;break}}}for(;_<a.length;){const D=a[_];if("number"==typeof D)break;if(D===u){if(null===f)return void(null!==g&&(a[_+1]=g));if(f===a[_+1])return void(a[_+2]=g)}_++,null!==f&&_++,null!==g&&_++}-1!==w&&(a.splice(w,0,l),_=w+1),a.splice(_++,0,u),null!==f&&a.splice(_++,0,f),null!==g&&a.splice(_++,0,g)}function _l(a){return-1!==a}function ya(a){return 32767&a}function bo(a,l){let u=function Wi(a){return a>>16}(a),f=l;for(;u>0;)f=f[15],u--;return f}let Vs=!0;function bs(a){const l=Vs;return Vs=a,l}let vl=0;function xn(a,l){const u=os(a,l);if(-1!==u)return u;const f=l[1];f.firstCreatePass&&(a.injectorIndex=l.length,Bu(f.data,a),Bu(l,null),Bu(f.blueprint,null));const g=yl(a,l),_=a.injectorIndex;if(_l(g)){const w=ya(g),D=bo(g,l),x=D[1].data;for(let k=0;k<8;k++)l[_+k]=D[w+k]|x[w+k]}return l[_+8]=g,_}function Bu(a,l){a.push(0,0,0,0,0,0,0,0,l)}function os(a,l){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===l[a.injectorIndex+8]?-1:a.injectorIndex}function yl(a,l){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,f=null,g=l;for(;null!==g;){const _=g[1],w=_.type;if(f=2===w?_.declTNode:1===w?g[6]:null,null===f)return-1;if(u++,g=g[15],-1!==f.injectorIndex)return f.injectorIndex|u<<16}return-1}function Hs(a,l,u){!function qc(a,l,u){let f;"string"==typeof u?f=u.charCodeAt(0)||0:u.hasOwnProperty(rt)&&(f=u[rt]),null==f&&(f=u[rt]=vl++);const g=255&f;l.data[a+(g>>5)]|=1<<g}(a,l,u)}function _i(a,l,u){if(u&Bt.Optional)return a;Ze(l,"NodeInjector")}function bl(a,l,u,f){if(u&Bt.Optional&&void 0===f&&(f=null),0==(u&(Bt.Self|Bt.Host))){const g=a[9],_=Mn(void 0);try{return g?g.get(l,f,u&Bt.Optional):bi(l,f,u&Bt.Optional)}finally{Mn(_)}}return _i(f,l,u)}function cc(a,l,u,f=Bt.Default,g){if(null!==a){const _=function Cs(a){if("string"==typeof a)return a.charCodeAt(0)||0;const l=a.hasOwnProperty(rt)?a[rt]:void 0;return"number"==typeof l?l>=0?255&l:uc:l}(u);if("function"==typeof _){if(!Fu(l,a,f))return f&Bt.Host?_i(g,u,f):bl(l,u,f,g);try{const w=_(f);if(null!=w||f&Bt.Optional)return w;Ze(u)}finally{qf()}}else if("number"==typeof _){let w=null,D=os(a,l),x=-1,k=f&Bt.Host?l[16][6]:null;for((-1===D||f&Bt.SkipSelf)&&(x=-1===D?yl(a,l):l[D+8],-1!==x&&vi(f,!1)?(w=l[1],D=ya(x),l=bo(x,l)):D=-1);-1!==D;){const B=l[1];if(Co(_,D,B.data)){const Y=Ca(D,l,u,w,f,k);if(Y!==ba)return Y}x=l[D+8],-1!==x&&vi(f,l[1].data[D+8]===k)&&Co(_,D,l)?(w=B,D=ya(x),l=bo(x,l)):D=-1}}}return bl(l,u,f,g)}const ba={};function uc(){return new jo($i(),Je())}function Ca(a,l,u,f,g,_){const w=l[1],D=w.data[a+8],B=Sr(D,w,u,null==f?Lc(D)&&Vs:f!=w&&0!=(3&D.type),g&Bt.Host&&_===D);return null!==B?Wa(l,w,B,D):ba}function Sr(a,l,u,f,g){const _=a.providerIndexes,w=l.data,D=1048575&_,x=a.directiveStart,B=_>>20,re=g?D+B:a.directiveEnd;for(let _e=f?D:D+B;_e<re;_e++){const Ge=w[_e];if(_e<x&&u===Ge||_e>=x&&Ge.type===u)return _e}if(g){const _e=w[x];if(_e&&_s(_e)&&_e.type===u)return x}return null}function Wa(a,l,u,f){let g=a[u];const _=l.data;if(function Xn(a){return a instanceof ma}(g)){const w=g;w.resolving&&function ut(a,l){const u=l?`. Dependency path: ${l.join(" > ")} > ${a}`:"";throw new at(-200,`Circular dependency in DI detected for ${a}${u}`)}(We(_[u]));const D=bs(w.canSeeViewProviders);w.resolving=!0;const x=w.injectImpl?Mn(w.injectImpl):null;Fu(a,f,Bt.Default);try{g=a[u]=w.factory(void 0,_,a,f),l.firstCreatePass&&u>=f.directiveStart&&function Ei(a,l,u){const{ngOnChanges:f,ngOnInit:g,ngDoCheck:_}=l.type.prototype;if(f){const w=oi(l);(u.preOrderHooks||(u.preOrderHooks=[])).push(a,w),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,w)}g&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-a,g),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(a,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(a,_))}(u,_[u],l)}finally{null!==x&&Mn(x),bs(D),w.resolving=!1,qf()}}return g}function Co(a,l,u){return!!(u[l+(a>>5)]&1<<a)}function vi(a,l){return!(a&Bt.Self||a&Bt.Host&&l)}class jo{constructor(l,u){this._tNode=l,this._lView=u}get(l,u,f){return cc(this._tNode,this._lView,l,f,u)}}function wo(a){return Or(()=>{const l=a.prototype.constructor,u=l[pe]||zi(l),f=Object.prototype;let g=Object.getPrototypeOf(a.prototype).constructor;for(;g&&g!==f;){const _=g[pe]||zi(g);if(_&&_!==u)return _;g=Object.getPrototypeOf(g)}return _=>new _})}function zi(a){return mt(a)?()=>{const l=zi(be(a));return l&&l()}:io(a)}function ui(a){return function Bn(a,l){if("class"===l)return a.classes;if("style"===l)return a.styles;const u=a.attrs;if(u){const f=u.length;let g=0;for(;g<f;){const _=u[g];if(an(_))break;if(0===_)g+=2;else if("number"==typeof _)for(g++;g<f&&"string"==typeof u[g];)g++;else{if(_===l)return u[g+1];g+=2}}}return null}($i(),a)}const za="__parameters__";function Ri(a,l,u){return Or(()=>{const f=function Un(a){return function(...u){if(a){const f=a(...u);for(const g in f)this[g]=f[g]}}}(l);function g(..._){if(this instanceof g)return f.apply(this,_),this;const w=new g(..._);return D.annotation=w,D;function D(x,k,B){const Y=x.hasOwnProperty(za)?x[za]:Object.defineProperty(x,za,{value:[]})[za];for(;Y.length<=B;)Y.push(null);return(Y[B]=Y[B]||[]).push(w),x}}return u&&(g.prototype=Object.create(u.prototype)),g.prototype.ngMetadataName=a,g.annotationCls=g,g})}class Mi{constructor(l,u){this._desc=l,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Ln({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Eo=new Mi("AnalyzeForEntryComponents");function Es(a,l){void 0===l&&(l=a);for(let u=0;u<a.length;u++){let f=a[u];Array.isArray(f)?(l===a&&(l=a.slice(0,u)),Es(f,l)):l!==a&&l.push(f)}return l}function Ts(a,l){a.forEach(u=>Array.isArray(u)?Ts(u,l):l(u))}function Yc(a,l,u){l>=a.length?a.push(u):a.splice(l,0,u)}function Gs(a,l){return l>=a.length-1?a.pop():a.splice(l,1)[0]}function wa(a,l){const u=[];for(let f=0;f<a;f++)u.push(l);return u}function mr(a,l,u){let f=wl(a,l);return f>=0?a[1|f]=u:(f=~f,function Kc(a,l,u,f){let g=a.length;if(g==l)a.push(u,f);else if(1===g)a.push(f,a[0]),a[0]=u;else{for(g--,a.push(a[g-1],a[g]);g>l;)a[g]=a[g-2],g--;a[l]=u,a[l+1]=f}}(a,f,l,u)),f}function Ds(a,l){const u=wl(a,l);if(u>=0)return a[1|u]}function wl(a,l){return function Hu(a,l,u){let f=0,g=a.length>>u;for(;g!==f;){const _=f+(g-f>>1),w=a[_<<u];if(l===w)return _<<u;w>l?g=_:f=_+1}return~(g<<u)}(a,l,1)}const Ya={},El="__NG_DI_FLAG__",Tl="ngTempTokenPath",R=/\n/gm,V="__source",Q=Re({provide:String,useValue:Re});let he;function Ee(a){const l=he;return he=a,l}function Fe(a,l=Bt.Default){if(void 0===he)throw new at(203,"");return null===he?bi(a,void 0,l):he.get(a,l&Bt.Optional?null:void 0,l)}function ct(a,l=Bt.Default){return(function Ii(){return ns}()||Fe)(be(a),l)}const Yt=ct;function Rn(a){const l=[];for(let u=0;u<a.length;u++){const f=be(a[u]);if(Array.isArray(f)){if(0===f.length)throw new at(900,"");let g,_=Bt.Default;for(let w=0;w<f.length;w++){const D=f[w],x=Ss(D);"number"==typeof x?-1===x?g=D.token:_|=x:g=D}l.push(ct(g,_))}else l.push(ct(f))}return l}function Xt(a,l){return a[El]=l,a.prototype[El]=l,a}function Ss(a){return a[El]}const Ws=Xt(Ri("Inject",a=>({token:a})),-1),sr=Xt(Ri("Optional"),8),zs=Xt(Ri("SkipSelf"),4);let Qa;function tu(a){var l;return(null===(l=function Ph(){if(void 0===Qa&&(Qa=null,Cn.trustedTypes))try{Qa=Cn.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch(a){}return Qa}())||void 0===l?void 0:l.createHTML(a))||a}class Wo{constructor(l){this.changingThisBreaksApplicationSecurity=l}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Bh extends Wo{getTypeName(){return"HTML"}}class Ng extends Wo{getTypeName(){return"Style"}}class $u extends Wo{getTypeName(){return"Script"}}class V_ extends Wo{getTypeName(){return"URL"}}class kg extends Wo{getTypeName(){return"ResourceURL"}}function Sa(a){return a instanceof Wo?a.changingThisBreaksApplicationSecurity:a}function Ia(a,l){const u=Dl(a);if(null!=u&&u!==l){if("ResourceURL"===u&&"URL"===l)return!0;throw new Error(`Required a safe ${l}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===l}function Dl(a){return a instanceof Wo&&a.getTypeName()||null}function Rd(a){return new Bh(a)}function np(a){return new Ng(a)}function Uh(a){return new $u(a)}function Tn(a){return new V_(a)}function ip(a){return new kg(a)}function rp(a){const l=new Pg(a);return function Fg(){try{return!!(new window.DOMParser).parseFromString(tu(""),"text/html")}catch(a){return!1}}()?new Wu(l):l}class Wu{constructor(l){this.inertDocumentHelper=l}getInertBodyElement(l){l="<body><remove></remove>"+l;try{const u=(new window.DOMParser).parseFromString(tu(l),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(l):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class Pg{constructor(l){if(this.defaultDoc=l,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const f=this.inertDocument.createElement("body");u.appendChild(f)}}getInertBodyElement(l){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=tu(l),u;const f=this.inertDocument.createElement("body");return f.innerHTML=tu(l),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(l){const u=l.attributes;for(let g=u.length-1;0<g;g--){const w=u.item(g).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&l.removeAttribute(w)}let f=l.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const Vh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,T=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function y(a){return(a=String(a)).match(Vh)||a.match(T)?a:"unsafe:"+a}function b(a){return(a=String(a)).split(",").map(l=>y(l.trim())).join(", ")}function I(a){const l={};for(const u of a.split(","))l[u]=!0;return l}function U(...a){const l={};for(const u of a)for(const f in u)u.hasOwnProperty(f)&&(l[f]=!0);return l}const q=I("area,br,col,hr,img,wbr"),me=I("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),tt=I("rp,rt"),Si=U(q,U(me,I("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),U(tt,I("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),U(tt,me)),So=I("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zo=I("srcset"),gc=U(So,zo,I("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),I("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Sl=I("script,style,template");class nu{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(l){let u=l.firstChild,f=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?f=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,f&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let g=this.checkClobberedElement(u,u.nextSibling);if(g){u=g;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(l){const u=l.nodeName.toLowerCase();if(!Si.hasOwnProperty(u))return this.sanitizedSomething=!0,!Sl.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const f=l.attributes;for(let g=0;g<f.length;g++){const _=f.item(g),w=_.name,D=w.toLowerCase();if(!gc.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let x=_.value;So[D]&&(x=y(x)),zo[D]&&(x=b(x)),this.buf.push(" ",w,'="',jh(x),'"')}return this.buf.push(">"),!0}endElement(l){const u=l.nodeName.toLowerCase();Si.hasOwnProperty(u)&&!q.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(l){this.buf.push(jh(l))}checkClobberedElement(l,u){if(u&&(l.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${l.outerHTML}`);return u}}const zu=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Hh=/([^\#-~ |!])/g;function jh(a){return a.replace(/&/g,"&amp;").replace(zu,function(l){return"&#"+(1024*(l.charCodeAt(0)-55296)+(l.charCodeAt(1)-56320)+65536)+";"}).replace(Hh,function(l){return"&#"+l.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let iu;function sp(a,l){let u=null;try{iu=iu||rp(a);let f=l?String(l):"";u=iu.getInertBodyElement(f);let g=5,_=f;do{if(0===g)throw new Error("Failed to sanitize html because the input is unstable");g--,f=_,_=u.innerHTML,u=iu.getInertBodyElement(f)}while(f!==_);return tu((new nu).sanitizeChildren(Gh(u)||u))}finally{if(u){const f=Gh(u)||u;for(;f.firstChild;)f.removeChild(f.firstChild)}}}function Gh(a){return"content"in a&&function qu(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var ei=(()=>((ei=ei||{})[ei.NONE=0]="NONE",ei[ei.HTML=1]="HTML",ei[ei.STYLE=2]="STYLE",ei[ei.SCRIPT=3]="SCRIPT",ei[ei.URL=4]="URL",ei[ei.RESOURCE_URL=5]="RESOURCE_URL",ei))();function ls(a){const l=function ru(){const a=Je();return a&&a[12]}();return l?l.sanitize(ei.URL,a)||"":Ia(a,"URL")?Sa(a):y(Oe(a))}const $_="__ngContext__";function qs(a,l){a[$_]=l}function Bg(a){const l=function Zu(a){return a[$_]||null}(a);return l?Array.isArray(l)?l:l.lView:null}function Ku(a){return a.ngOriginalError}function w0(a,...l){a.error(...l)}class Hg{constructor(){this._console=console}handleError(l){const u=this._findOriginalError(l),f=function hw(a){return a&&a.ngErrorLogger||w0}(l);f(this._console,"ERROR",l),u&&f(this._console,"ORIGINAL ERROR",u)}_findOriginalError(l){let u=l&&Ku(l);for(;u&&Ku(u);)u=Ku(u);return u||null}}const z_=/^>|^->|<!--|-->|--!>|<!-$/g,q_=/(<|>)/;const Nd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Cn))();function Al(a){return a instanceof Function?a():a}var mc=(()=>((mc=mc||{})[mc.Important=1]="Important",mc[mc.DashCase=2]="DashCase",mc))();let K_;function $g(a,l){return K_(a,l)}function kd(a){const l=a[3];return Ls(l)?l[3]:l}function up(a){return qh(a[13])}function zg(a){return qh(a[4])}function qh(a){for(;null!==a&&!Ls(a);)a=a[4];return a}function Pd(a,l,u,f,g){if(null!=f){let _,w=!1;Ls(f)?_=f:ms(f)&&(w=!0,f=f[0]);const D=ai(f);0===a&&null!==u?null==g?tv(l,u,D):Yo(l,u,D,g||null,!0):1===a&&null!==u?Yo(l,u,D,g||null,!0):2===a?sv(l,D,w):3===a&&l.destroyNode(D),null!=_&&function Io(a,l,u,f,g){const _=u[7];_!==ai(u)&&Pd(l,a,f,_,g);for(let D=10;D<u.length;D++){const x=u[D];Xg(x[1],x,a,l,f,_)}}(l,a,_,u,g)}}function Q_(a,l){return fi(a)?a.createText(l):a.createTextNode(l)}function J_(a,l,u){fi(a)?a.setValue(l,u):l.textContent=u}function yw(a,l){return a.createComment(function cp(a){return a.replace(z_,l=>l.replace(q_,"\u200b$1\u200b"))}(l))}function X_(a,l,u){if(fi(a))return a.createElement(l,u);{const f=null!==u?function Vc(a){const l=a.toLowerCase();return"svg"===l?"http://www.w3.org/2000/svg":"math"===l?"http://www.w3.org/1998/MathML/":null}(u):null;return null===f?a.createElement(l):a.createElementNS(f,l)}}function Zg(a,l){const u=a[9],f=u.indexOf(l),g=l[3];1024&l[2]&&(l[2]&=-1025,Ha(g,-1)),u.splice(f,1)}function Yg(a,l){if(a.length<=10)return;const u=10+l,f=a[u];if(f){const g=f[17];null!==g&&g!==a&&Zg(g,f),l>0&&(a[u-1][4]=f[4]);const _=Gs(a,10+l);!function Li(a,l){Xg(a,l,l[11],2,null,null),l[0]=null,l[6]=null}(f[1],f);const w=_[19];null!==w&&w.detachView(_[1]),f[3]=null,f[4]=null,f[2]&=-129}return f}function Kg(a,l){if(!(256&l[2])){const u=l[11];fi(u)&&u.destroyNode&&Xg(a,l,u,3,null,null),function Qu(a){let l=a[13];if(!l)return Zh(a[1],a);for(;l;){let u=null;if(ms(l))u=l[13];else{const f=l[10];f&&(u=f)}if(!u){for(;l&&!l[4]&&l!==a;)ms(l)&&Zh(l[1],l),l=l[3];null===l&&(l=a),ms(l)&&Zh(l[1],l),u=l&&l[4]}l=u}}(l)}}function Zh(a,l){if(!(256&l[2])){l[2]&=-129,l[2]|=256,function xl(a,l){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let f=0;f<u.length;f+=2){const g=l[u[f]];if(!(g instanceof ma)){const _=u[f+1];if(Array.isArray(_))for(let w=0;w<_.length;w+=2){const D=g[_[w]],x=_[w+1];try{x.call(D)}finally{}}else try{_.call(g)}finally{}}}}(a,l),function ev(a,l){const u=a.cleanup,f=l[7];let g=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const w=u[_+1],D="function"==typeof w?w(l):ai(l[w]),x=f[g=u[_+2]],k=u[_+3];"boolean"==typeof k?D.removeEventListener(u[_],x,k):k>=0?f[g=k]():f[g=-k].unsubscribe(),_+=2}else{const w=f[g=u[_+1]];u[_].call(w)}if(null!==f){for(let _=g+1;_<f.length;_++)f[_]();l[7]=null}}(a,l),1===l[1].type&&fi(l[11])&&l[11].destroy();const u=l[17];if(null!==u&&Ls(l[3])){u!==l[3]&&Zg(u,l);const f=l[19];null!==f&&f.detachView(a)}}}function vc(a,l,u){return bw(a,l.parent,u)}function bw(a,l,u){let f=l;for(;null!==f&&40&f.type;)f=(l=f).parent;if(null===f)return u[0];if(2&f.flags){const g=a.data[f.directiveStart].encapsulation;if(g===gn.None||g===gn.Emulated)return null}return Pr(f,u)}function Yo(a,l,u,f,g){fi(a)?a.insertBefore(l,u,f,g):l.insertBefore(u,f,g)}function tv(a,l,u){fi(a)?a.appendChild(l,u):l.appendChild(u)}function A0(a,l,u,f,g){null!==f?Yo(a,l,u,f,g):tv(a,l,u)}function Yh(a,l){return fi(a)?a.parentNode(l):l.parentNode}function x0(a,l,u){return nv(a,l,u)}function R0(a,l,u){return 40&a.type?Pr(a,u):null}let iv,nv=R0;function M0(a,l){nv=a,iv=l}function Qg(a,l,u,f){const g=vc(a,f,l),_=l[11],D=x0(f.parent||l[6],f,l);if(null!=g)if(Array.isArray(u))for(let x=0;x<u.length;x++)A0(_,g,u[x],D,!1);else A0(_,g,u,D,!1);void 0!==iv&&iv(_,f,l,u,g)}function Fd(a,l){if(null!==l){const u=l.type;if(3&u)return Pr(l,a);if(4&u)return Jg(-1,a[l.index]);if(8&u){const f=l.child;if(null!==f)return Fd(a,f);{const g=a[l.index];return Ls(g)?Jg(-1,g):ai(g)}}if(32&u)return $g(l,a)()||ai(a[l.index]);{const f=rv(a,l);return null!==f?Array.isArray(f)?f[0]:Fd(kd(a[16]),f):Fd(a,l.next)}}return null}function rv(a,l){return null!==l?a[16][6].projection[l.projection]:null}function Jg(a,l){const u=10+a+1;if(u<l.length){const f=l[u],g=f[1].firstChild;if(null!==g)return Fd(f,g)}return l[7]}function sv(a,l,u){const f=Yh(a,l);f&&function Cw(a,l,u,f){fi(a)?a.removeChild(l,u,f):l.removeChild(u)}(a,f,l,u)}function ov(a,l,u,f,g,_,w){for(;null!=u;){const D=f[u.index],x=u.type;if(w&&0===l&&(D&&qs(ai(D),f),u.flags|=4),64!=(64&u.flags))if(8&x)ov(a,l,u.child,f,g,_,!1),Pd(l,a,g,D,_);else if(32&x){const k=$g(u,f);let B;for(;B=k();)Pd(l,a,g,B,_);Pd(l,a,g,D,_)}else 16&x?z(a,l,f,u,g,_):Pd(l,a,g,D,_);u=w?u.projectionNext:u.next}}function Xg(a,l,u,f,g,_){ov(u,f,a.firstChild,l,g,_,!1)}function z(a,l,u,f,g,_){const w=u[16],x=w[6].projection[f.projection];if(Array.isArray(x))for(let k=0;k<x.length;k++)Pd(l,a,g,x[k],_);else ov(a,l,x,w[3],g,_,!0)}function Xa(a,l,u){fi(a)?a.setAttribute(l,"style",u):l.style.cssText=u}function Ju(a,l,u){fi(a)?""===u?a.removeAttribute(l,"class"):a.setAttribute(l,"class",u):l.className=u}function di(a,l,u){let f=a.length;for(;;){const g=a.indexOf(l,u);if(-1===g)return g;if(0===g||a.charCodeAt(g-1)<=32){const _=l.length;if(g+_===f||a.charCodeAt(g+_)<=32)return g}u=g+1}}const Ld="ng-template";function Ew(a,l,u){let f=0;for(;f<a.length;){let g=a[f++];if(u&&"class"===g){if(g=a[f],-1!==di(g.toLowerCase(),l,0))return!0}else if(1===g){for(;f<a.length&&"string"==typeof(g=a[f++]);)if(g.toLowerCase()===l)return!0;return!1}}return!1}function zr(a){return 4===a.type&&a.value!==Ld}function Tw(a,l,u){return l===(4!==a.type||u?a.value:Ld)}function av(a,l,u){let f=4;const g=a.attrs||[],_=function lv(a){for(let l=0;l<a.length;l++)if(an(a[l]))return l;return a.length}(g);let w=!1;for(let D=0;D<l.length;D++){const x=l[D];if("number"!=typeof x){if(!w)if(4&f){if(f=2|1&f,""!==x&&!Tw(a,x,u)||""===x&&1===l.length){if(Pe(f))return!1;w=!0}}else{const k=8&f?x:l[++D];if(8&f&&null!==a.attrs){if(!Ew(a.attrs,k,u)){if(Pe(f))return!1;w=!0}continue}const Y=Dw(8&f?"class":x,g,zr(a),u);if(-1===Y){if(Pe(f))return!1;w=!0;continue}if(""!==k){let re;re=Y>_?"":g[Y+1].toLowerCase();const _e=8&f?re:null;if(_e&&-1!==di(_e,k,0)||2&f&&k!==re){if(Pe(f))return!1;w=!0}}}}else{if(!w&&!Pe(f)&&!Pe(x))return!1;if(w&&Pe(x))continue;w=!1,f=x|1&f}}return Pe(f)||w}function Pe(a){return 0==(1&a)}function Dw(a,l,u,f){if(null===l)return-1;let g=0;if(f||!u){let _=!1;for(;g<l.length;){const w=l[g];if(w===a)return g;if(3===w||6===w)_=!0;else{if(1===w||2===w){let D=l[++g];for(;"string"==typeof D;)D=l[++g];continue}if(4===w)break;if(0===w){g+=4;continue}}g+=_?1:2}return-1}return function vn(a,l){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const f=a[u];if("number"==typeof f)return-1;if(f===l)return u;u++}return-1}(l,a)}function yc(a,l,u=!1){for(let f=0;f<l.length;f++)if(av(a,l[f],u))return!0;return!1}function em(a,l){e:for(let u=0;u<l.length;u++){const f=l[u];if(a.length===f.length){for(let g=0;g<a.length;g++)if(a[g]!==f[g])continue e;return!0}}return!1}function tm(a,l){return a?":not("+l.trim()+")":l}function dp(a){let l=a[0],u=1,f=2,g="",_=!1;for(;u<a.length;){let w=a[u];if("string"==typeof w)if(2&f){const D=a[++u];g+="["+w+(D.length>0?'="'+D+'"':"")+"]"}else 8&f?g+="."+w:4&f&&(g+=" "+w);else""!==g&&!Pe(w)&&(l+=tm(_,g),g=""),f=w,_=_||!Pe(f);u++}return""!==g&&(l+=tm(_,g)),l}const bn={};function N0(a){k0(En(),Je(),nr()+a,oc())}function k0(a,l,u,f){if(!f)if(3==(3&l[2])){const _=a.preOrderCheckHooks;null!==_&&ga(l,_,u)}else{const _=a.preOrderHooks;null!==_&&Wr(l,_,0,u)}ue(u)}function Bd(a,l){return a<<17|l<<2}function Bi(a){return a>>17&32767}function uv(a){return 2|a}function bc(a){return(131068&a)>>2}function nm(a,l){return-131069&a|l<<2}function im(a){return 1|a}function gv(a,l){const u=a.contentQueries;if(null!==u)for(let f=0;f<u.length;f+=2){const g=u[f],_=u[f+1];if(-1!==_){const w=a.data[_];Td(g),w.contentQueries(2,l[_],_)}}}function cu(a,l,u,f,g,_,w,D,x,k){const B=l.blueprint.slice();return B[0]=g,B[2]=140|f,Po(B),B[3]=B[15]=a,B[8]=u,B[10]=w||a&&a[10],B[11]=D||a&&a[11],B[12]=x||a&&a[12]||null,B[9]=k||a&&a[9]||null,B[6]=_,B[16]=2==l.type?a[16]:B,B}function Xu(a,l,u,f,g){let _=a.data[l];if(null===_)_=fp(a,l,u,f,g),function Uo(){return Zt.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=f,_.attrs=g;const w=fl();_.injectorIndex=null===w?-1:w.injectorIndex}return ys(_,!0),_}function fp(a,l,u,f,g){const _=Lo(),w=Nu(),x=a.data[l]=function Fw(a,l,u,f,g,_){return{type:u,index:f,insertBeforeIndex:null,injectorIndex:l?l.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:g,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:l,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?_:_&&_.parent,u,l,f,g);return null===a.firstChild&&(a.firstChild=x),null!==_&&(w?null==_.child&&null!==x.parent&&(_.child=x):null===_.next&&(_.next=x)),x}function Vd(a,l,u,f){if(0===u)return-1;const g=l.length;for(let _=0;_<u;_++)l.push(f),a.blueprint.push(f),a.data.push(null);return g}function uu(a,l,u){so(l);try{const f=a.viewQuery;null!==f&&Cp(1,f,u);const g=a.template;null!==g&&qr(a,l,g,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&gv(a,l),a.staticViewQueries&&Cp(2,a.viewQuery,u);const _=a.components;null!==_&&function z0(a,l){for(let u=0;u<l.length;u++)yv(a,l[u])}(l,_)}catch(f){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),f}finally{l[2]&=-5,ac()}}function du(a,l,u,f){const g=l[2];if(256==(256&g))return;so(l);const _=oc();try{Po(l),function Ed(a){return Zt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&qr(a,l,u,2,f);const w=3==(3&g);if(!_)if(w){const k=a.preOrderCheckHooks;null!==k&&ga(l,k,null)}else{const k=a.preOrderHooks;null!==k&&Wr(l,k,0,null),ml(l,0)}if(function ar(a){for(let l=up(a);null!==l;l=zg(l)){if(!l[2])continue;const u=l[9];for(let f=0;f<u.length;f++){const g=u[f],_=g[3];0==(1024&g[2])&&Ha(_,1),g[2]|=1024}}}(l),function yp(a){for(let l=up(a);null!==l;l=zg(l))for(let u=10;u<l.length;u++){const f=l[u],g=f[1];Fr(f)&&du(g,f,g.template,f[8])}}(l),null!==a.contentQueries&&gv(a,l),!_)if(w){const k=a.contentCheckHooks;null!==k&&ga(l,k)}else{const k=a.contentHooks;null!==k&&Wr(l,k,1),ml(l,1)}!function W0(a,l){const u=a.hostBindingOpCodes;if(null!==u)try{for(let f=0;f<u.length;f++){const g=u[f];if(g<0)ue(~g);else{const _=g,w=u[++f],D=u[++f];zc(w,_),D(2,l[_])}}}finally{ue(-1)}}(a,l);const D=a.components;null!==D&&function Pw(a,l){for(let u=0;u<l.length;u++)qi(a,l[u])}(l,D);const x=a.viewQuery;if(null!==x&&Cp(2,x,f),!_)if(w){const k=a.viewCheckHooks;null!==k&&ga(l,k)}else{const k=a.viewHooks;null!==k&&Wr(l,k,2),ml(l,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),_||(l[2]&=-73),1024&l[2]&&(l[2]&=-1025,Ha(l[3],-1))}finally{ac()}}function dm(a,l,u,f){const g=l[10],_=!oc(),w=li(l);try{_&&!w&&g.begin&&g.begin(),w&&uu(a,l,f),du(a,l,u,f)}finally{_&&!w&&g.end&&g.end()}}function qr(a,l,u,f,g){const _=nr(),w=2&f;try{ue(-1),w&&l.length>20&&k0(a,l,20,oc()),u(f,g)}finally{ue(_)}}function cs(a,l,u){if(wh(l)){const g=l.directiveEnd;for(let _=l.directiveStart;_<g;_++){const w=a.data[_];w.contentQueries&&w.contentQueries(1,u[_],_)}}}function rf(a,l,u){!wd()||(function jd(a,l,u,f){const g=u.directiveStart,_=u.directiveEnd;a.firstCreatePass||xn(u,l),qs(f,l);const w=u.initialInputs;for(let D=g;D<_;D++){const x=a.data[D],k=_s(x);k&&X0(l,u,x);const B=Wa(l,a,D,u);qs(B,l),null!==w&&Gd(0,D-g,B,x,0,w),k&&(pr(u.index,l)[8]=B)}}(a,l,u,Pr(u,l)),128==(128&u.flags)&&function cn(a,l,u){const f=u.directiveStart,g=u.directiveEnd,w=u.index,D=function Pu(){return Zt.lFrame.currentDirectiveIndex}();try{ue(w);for(let x=f;x<g;x++){const k=a.data[x],B=l[x];ja(x),(null!==k.hostBindings||0!==k.hostVars||null!==k.hostAttrs)&&Q0(k,B)}}finally{ue(-1),ja(D)}}(a,l,u))}function pp(a,l,u=Pr){const f=l.localNames;if(null!==f){let g=l.index+1;for(let _=0;_<f.length;_+=2){const w=f[_+1],D=-1===w?u(l,a):a[w];a[g++]=D}}}function q0(a){const l=a.tView;return null===l||l.incompleteFirstPass?a.tView=Hd(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts):l}function Hd(a,l,u,f,g,_,w,D,x,k){const B=20+f,Y=B+g,re=function gp(a,l){const u=[];for(let f=0;f<l;f++)u.push(f<a?null:bn);return u}(B,Y),_e="function"==typeof k?k():k;return re[1]={type:a,blueprint:re,template:u,queries:null,viewQuery:D,declTNode:l,data:re.slice().fill(null,B),bindingStartIndex:B,expandoStartIndex:Y,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:x,consts:_e,incompleteFirstPass:!1}}function mp(a,l,u,f){const g=Ol(l);null===u?g.push(f):(g.push(u),a.firstCreatePass&&wv(a).push(f,g.length-1))}function hm(a,l,u){for(let f in a)if(a.hasOwnProperty(f)){const g=a[f];(u=null===u?{}:u).hasOwnProperty(f)?u[f].push(l,g):u[f]=[l,g]}return u}function lo(a,l,u,f,g,_,w,D){const x=Pr(l,u);let B,k=l.inputs;!D&&null!=k&&(B=k[f])?(ed(a,u,B,f,g),Lc(l)&&function mv(a,l){const u=pr(l,a);16&u[2]||(u[2]|=64)}(u,l.index)):3&l.type&&(f=function Lw(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(f),g=null!=w?w(g,l.value||"",f):g,fi(_)?_.setProperty(x,f,g):gi(f)||(x.setProperty?x.setProperty(f,g):x[f]=g))}function Ko(a,l,u,f){let g=!1;if(wd()){const _=function Qo(a,l,u){const f=a.directiveRegistry;let g=null;if(f)for(let _=0;_<f.length;_++){const w=f[_];yc(u,w.selectors,!1)&&(g||(g=[]),Hs(xn(u,l),a,w.type),_s(w)?(Oi(a,u),g.unshift(w)):g.push(w))}return g}(a,l,u),w=null===f?null:{"":-1};if(null!==_){g=!0,vv(u,a.data.length,_.length);for(let B=0;B<_.length;B++){const Y=_[B];Y.providersResolver&&Y.providersResolver(Y)}let D=!1,x=!1,k=Vd(a,l,_.length,null);for(let B=0;B<_.length;B++){const Y=_[B];u.mergedAttrs=Di(u.mergedAttrs,Y.hostAttrs),lf(a,u,l,k,Y),Ml(k,Y,w),null!==Y.contentQueries&&(u.flags|=8),(null!==Y.hostBindings||null!==Y.hostAttrs||0!==Y.hostVars)&&(u.flags|=128);const re=Y.type.prototype;!D&&(re.ngOnChanges||re.ngOnInit||re.ngDoCheck)&&((a.preOrderHooks||(a.preOrderHooks=[])).push(u.index),D=!0),!x&&(re.ngOnChanges||re.ngDoCheck)&&((a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(u.index),x=!0),k++}!function Y0(a,l){const f=l.directiveEnd,g=a.data,_=l.attrs,w=[];let D=null,x=null;for(let k=l.directiveStart;k<f;k++){const B=g[k],Y=B.inputs,re=null===_||zr(l)?null:pm(Y,_);w.push(re),D=hm(Y,k,D),x=hm(B.outputs,k,x)}null!==D&&(D.hasOwnProperty("class")&&(l.flags|=16),D.hasOwnProperty("style")&&(l.flags|=32)),l.initialInputs=w,l.inputs=D,l.outputs=x}(a,u)}w&&function J0(a,l,u){if(l){const f=a.localNames=[];for(let g=0;g<l.length;g+=2){const _=u[l[g+1]];if(null==_)throw new at(-301,!1);f.push(l[g],_)}}}(u,f,w)}return u.mergedAttrs=Di(u.mergedAttrs,u.attrs),g}function _p(a,l,u,f,g,_){const w=_.hostBindings;if(w){let D=a.hostBindingOpCodes;null===D&&(D=a.hostBindingOpCodes=[]);const x=~l.index;(function Vw(a){let l=a.length;for(;l>0;){const u=a[--l];if("number"==typeof u&&u<0)return u}return 0})(D)!=x&&D.push(x),D.push(f,g,w)}}function Q0(a,l){null!==a.hostBindings&&a.hostBindings(1,l)}function Oi(a,l){l.flags|=2,(a.components||(a.components=[])).push(l.index)}function Ml(a,l,u){if(u){if(l.exportAs)for(let f=0;f<l.exportAs.length;f++)u[l.exportAs[f]]=a;_s(l)&&(u[""]=a)}}function vv(a,l,u){a.flags|=1,a.directiveStart=l,a.directiveEnd=l+u,a.providerIndexes=l}function lf(a,l,u,f,g){a.data[f]=g;const _=g.factory||(g.factory=io(g.type)),w=new ma(_,_s(g),null);a.blueprint[f]=w,u[f]=w,_p(a,l,0,f,Vd(a,u,g.hostVars,bn),g)}function X0(a,l,u){const f=Pr(l,a),g=q0(u),_=a[10],w=$d(a,cu(a,g,null,u.onPush?64:16,f,l,_,_.createRenderer(f,u),null,null));a[l.index]=w}function fm(a,l,u,f,g,_,w){if(null==_)fi(a)?a.removeAttribute(l,g,u):l.removeAttribute(g);else{const D=null==w?Oe(_):w(_,f||"",g);fi(a)?a.setAttribute(l,g,D,u):u?l.setAttributeNS(u,g,D):l.setAttribute(g,D)}}function Gd(a,l,u,f,g,_){const w=_[l];if(null!==w){const D=f.setInput;for(let x=0;x<w.length;){const k=w[x++],B=w[x++],Y=w[x++];null!==D?f.setInput(u,Y,k,B):u[B]=Y}}}function pm(a,l){let u=null,f=0;for(;f<l.length;){const g=l[f];if(0!==g)if(5!==g){if("number"==typeof g)break;a.hasOwnProperty(g)&&(null===u&&(u=[]),u.push(g,a[g],l[f+1])),f+=2}else f+=2;else f+=4}return u}function vp(a,l,u,f){return new Array(a,!0,!1,l,null,0,f,u,null,null)}function qi(a,l){const u=pr(l,a);if(Fr(u)){const f=u[1];80&u[2]?du(f,u,f.template,u[8]):u[5]>0&&cf(u)}}function cf(a){for(let f=up(a);null!==f;f=zg(f))for(let g=10;g<f.length;g++){const _=f[g];if(1024&_[2]){const w=_[1];du(w,_,w.template,_[8])}else _[5]>0&&cf(_)}const u=a[1].components;if(null!==u)for(let f=0;f<u.length;f++){const g=pr(u[f],a);Fr(g)&&g[5]>0&&cf(g)}}function yv(a,l){const u=pr(l,a),f=u[1];(function bv(a,l){for(let u=l.length;u<a.blueprint.length;u++)l.push(a.blueprint[u])})(f,u),uu(f,u,u[8])}function $d(a,l){return a[13]?a[14][4]=l:a[13]=l,a[14]=l,l}function Wd(a){for(;a;){a[2]|=64;const l=kd(a);if(Eh(a)&&!l)return a;a=l}return null}function uf(a,l,u){const f=l[10];f.begin&&f.begin();try{du(a,l,a.template,u)}catch(g){throw df(l,g),g}finally{f.end&&f.end()}}function fu(a){!function Cv(a){for(let l=0;l<a.components.length;l++){const u=a.components[l],f=Bg(u),g=f[1];dm(g,f,g.template,u)}}(a[8])}function Cp(a,l,u){Td(0),l(a,u)}const xa=(()=>Promise.resolve(null))();function Ol(a){return a[7]||(a[7]=[])}function wv(a){return a.cleanup||(a.cleanup=[])}function wp(a,l,u){return(null===a||_s(a))&&(u=function $r(a){for(;Array.isArray(a);){if("object"==typeof a[1])return a;a=a[0]}return null}(u[l.index])),u[11]}function df(a,l){const u=a[9],f=u?u.get(Hg,null):null;f&&f.handleError(l)}function ed(a,l,u,f,g){for(let _=0;_<u.length;){const w=u[_++],D=u[_++],x=l[w],k=a.data[w];null!==k.setInput?k.setInput(x,g,f,D):x[D]=g}}function Ep(a,l,u){let f=u?a.styles:null,g=u?a.classes:null,_=0;if(null!==l)for(let w=0;w<l.length;w++){const D=l[w];"number"==typeof D?_=D:1==_?g=Be(g,D):2==_&&(f=Be(f,D+": "+l[++w]+";"))}u?a.styles=f:a.stylesWithoutHost=f,u?a.classes=g:a.classesWithoutHost=g}const Zr=new Mi("INJECTOR",-1);class mm{get(l,u=Ya){if(u===Ya){const f=new Error(`NullInjectorError: No provider for ${Te(l)}!`);throw f.name="NullInjectorError",f}return u}}const Tv=new Mi("Set Injector scope."),Nn={},pu={};let zd;function td(){return void 0===zd&&(zd=new mm),zd}function Tp(a,l=null,u=null,f){const g=Dv(a,l,u,f);return g._resolveInjectorDefTypes(),g}function Dv(a,l=null,u=null,f){return new lr(a,u,l||td(),f)}class lr{constructor(l,u,f,g=null){this.parent=f,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];u&&Ts(u,D=>this.processProvider(D,l,u)),Ts([l],D=>this.processInjectorType(D,[],_)),this.records.set(Zr,wc(void 0,this));const w=this.records.get(Tv);this.scope=null!=w?w.value:null,this.source=g||("object"==typeof l?null:Te(l))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(l=>l.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(l,u=Ya,f=Bt.Default){this.assertNotDestroyed();const g=Ee(this),_=Mn(void 0);try{if(!(f&Bt.SkipSelf)){let D=this.records.get(l);if(void 0===D){const x=function Ec(a){return"function"==typeof a||"object"==typeof a&&a instanceof Mi}(l)&&hi(l);D=x&&this.injectableDefInScope(x)?wc(hf(l),Nn):null,this.records.set(l,D)}if(null!=D)return this.hydrate(l,D)}return(f&Bt.Self?td():this.parent).get(l,u=f&Bt.Optional&&u===Ya?null:u)}catch(w){if("NullInjectorError"===w.name){if((w[Tl]=w[Tl]||[]).unshift(Te(l)),g)throw w;return function Pn(a,l,u,f){const g=a[Tl];throw l[V]&&g.unshift(l[V]),a.message=function To(a,l,u,f=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.substr(2):a;let g=Te(l);if(Array.isArray(l))g=l.map(Te).join(" -> ");else if("object"==typeof l){let _=[];for(let w in l)if(l.hasOwnProperty(w)){let D=l[w];_.push(w+":"+("string"==typeof D?JSON.stringify(D):Te(D)))}g=`{${_.join(", ")}}`}return`${u}${f?"("+f+")":""}[${g}]: ${a.replace(R,"\n  ")}`}("\n"+a.message,g,u,f),a.ngTokenPath=g,a[Tl]=null,a}(w,l,"R3InjectorError",this.source)}throw w}finally{Mn(_),Ee(g)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(l=>this.get(l))}toString(){const l=[];return this.records.forEach((f,g)=>l.push(Te(g))),`R3Injector[${l.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new at(205,!1)}processInjectorType(l,u,f){if(!(l=be(l)))return!1;let g=Ns(l);const _=null==g&&l.ngModule||void 0,w=void 0===_?l:_,D=-1!==f.indexOf(w);if(void 0!==_&&(g=Ns(_)),null==g)return!1;if(null!=g.imports&&!D){let B;f.push(w);try{Ts(g.imports,Y=>{this.processInjectorType(Y,u,f)&&(void 0===B&&(B=[]),B.push(Y))})}finally{}if(void 0!==B)for(let Y=0;Y<B.length;Y++){const{ngModule:re,providers:_e}=B[Y];Ts(_e,Ge=>this.processProvider(Ge,re,_e||X))}}this.injectorDefTypes.add(w);const x=io(w)||(()=>new w);this.records.set(w,wc(x,Nn));const k=g.providers;if(null!=k&&!D){const B=l;Ts(k,Y=>this.processProvider(Y,B,k))}return void 0!==_&&void 0!==l.providers}processProvider(l,u,f){let g=pf(l=be(l))?l:be(l&&l.provide);const _=function jw(a,l,u){return nb(a)?wc(void 0,a.useValue):wc(ff(a),Nn)}(l);if(pf(l)||!0!==l.multi)this.records.get(g);else{let w=this.records.get(g);w||(w=wc(void 0,Nn,!0),w.factory=()=>Rn(w.multi),this.records.set(g,w)),g=l,w.multi.push(l)}this.records.set(g,_)}hydrate(l,u){return u.value===Nn&&(u.value=pu,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Dp(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(l){if(!l.providedIn)return!1;const u=be(l.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function hf(a){const l=hi(a),u=null!==l?l.factory:io(a);if(null!==u)return u;if(a instanceof Mi)throw new at(204,!1);if(a instanceof Function)return function Hw(a){const l=a.length;if(l>0)throw wa(l,"?"),new at(204,!1);const u=function ts(a){const l=a&&(a[ks]||a[xi]);if(l){const u=function yi(a){if(a.hasOwnProperty("name"))return a.name;const l=(""+a).match(/^function\s*([^\s(]+)/);return null===l?"":l[1]}(a);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),l}return null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new at(204,!1)}function ff(a,l,u){let f;if(pf(a)){const g=be(a);return io(g)||hf(g)}if(nb(a))f=()=>be(a.useValue);else if(function Gw(a){return!(!a||!a.useFactory)}(a))f=()=>a.useFactory(...Rn(a.deps||[]));else if(function ib(a){return!(!a||!a.useExisting)}(a))f=()=>ct(be(a.useExisting));else{const g=be(a&&(a.useClass||a.provide));if(!function Sv(a){return!!a.deps}(a))return io(g)||hf(g);f=()=>new g(...Rn(a.deps))}return f}function wc(a,l,u=!1){return{factory:a,value:l,multi:u?[]:void 0}}function nb(a){return null!==a&&"object"==typeof a&&Q in a}function pf(a){return"function"==typeof a}let Pl=(()=>{class a{static create(u,f){var g;if(Array.isArray(u))return Tp({name:""},f,u,"");{const _=null!==(g=u.name)&&void 0!==g?g:"";return Tp({name:_},u.parent,u.providers,_)}}}return a.THROW_IF_NOT_FOUND=Ya,a.NULL=new mm,a.\u0275prov=Ln({token:a,providedIn:"any",factory:()=>ct(Zr)}),a.__NG_ELEMENT_ID__=-1,a})();function db(a,l){gl(Bg(a)[1],$i())}function Mv(a){let l=function hb(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const f=[a];for(;l;){let g;if(_s(a))g=l.\u0275cmp||l.\u0275dir;else{if(l.\u0275cmp)throw new at(903,"");g=l.\u0275dir}if(g){if(u){f.push(g);const w=a;w.inputs=Tm(a.inputs),w.declaredInputs=Tm(a.declaredInputs),w.outputs=Tm(a.outputs);const D=g.hostBindings;D&&gb(a,D);const x=g.viewQuery,k=g.contentQueries;if(x&&pb(a,x),k&&Dm(a,k),ve(a.inputs,g.inputs),ve(a.declaredInputs,g.declaredInputs),ve(a.outputs,g.outputs),_s(g)&&g.data.animation){const B=a.data;B.animation=(B.animation||[]).concat(g.data.animation)}}const _=g.features;if(_)for(let w=0;w<_.length;w++){const D=_[w];D&&D.ngInherit&&D(a),D===Mv&&(u=!1)}}l=Object.getPrototypeOf(l)}!function fb(a){let l=0,u=null;for(let f=a.length-1;f>=0;f--){const g=a[f];g.hostVars=l+=g.hostVars,g.hostAttrs=Di(g.hostAttrs,u=Di(u,g.hostAttrs))}}(f)}function Tm(a){return a===Qn?{}:a===X?[]:a}function pb(a,l){const u=a.viewQuery;a.viewQuery=u?(f,g)=>{l(f,g),u(f,g)}:l}function Dm(a,l){const u=a.contentQueries;a.contentQueries=u?(f,g,_)=>{l(f,g,_),u(f,g,_)}:l}function gb(a,l){const u=a.hostBindings;a.hostBindings=u?(f,g)=>{l(f,g),u(f,g)}:l}let mf=null;function Tc(){if(!mf){const a=Cn.Symbol;if(a&&a.iterator)mf=a.iterator;else{const l=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<l.length;++u){const f=l[u];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(mf=f)}}}return mf}function qd(a){return!!Ip(a)&&(Array.isArray(a)||!(a instanceof Map)&&Tc()in a)}function Ip(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function Ra(a,l,u){return a[l]=u}function Ks(a,l,u){return!Object.is(a[l],u)&&(a[l]=u,!0)}function Fl(a,l,u,f){const g=Ks(a,l,u);return Ks(a,l+1,f)||g}function Rp(a,l,u,f){const g=Je();return Ks(g,Bo(),l)&&(En(),function or(a,l,u,f,g,_){const w=Pr(a,l);fm(l[11],w,_,a.value,u,f,g)}(xe(),g,a,l,u,f)),Rp}function mu(a,l,u,f){return Ks(a,Bo(),u)?l+Oe(u)+f:bn}function Im(a,l,u,f,g,_,w,D){const x=Je(),k=En(),B=a+20,Y=k.firstCreatePass?function Yw(a,l,u,f,g,_,w,D,x){const k=l.consts,B=Xu(l,a,4,w||null,Bs(k,D));Ko(l,u,B,Bs(k,x)),gl(l,B);const Y=B.tViews=Hd(2,B,f,g,_,l.directiveRegistry,l.pipeRegistry,null,l.schemas,k);return null!==l.queries&&(l.queries.template(l,B),Y.queries=l.queries.embeddedTView(B)),B}(B,k,x,l,u,f,g,_,w):k.data[B];ys(Y,!1);const re=x[11].createComment("");Qg(k,x,re,Y),qs(re,x),$d(x,x[B]=vp(re,x,re,Y)),ca(Y)&&rf(k,x,Y),null!=w&&pp(x,Y,D)}function wb(a){return function ro(a,l){return a[l]}(function sc(){return Zt.lFrame.contextLView}(),20+a)}function bt(a,l=Bt.Default){const u=Je();return null===u?ct(a,l):cc($i(),u,be(a),l)}function Kt(){throw new Error("invalid")}function An(a,l,u){const f=Je();return Ks(f,Bo(),l)&&lo(En(),xe(),f,a,l,f[11],u,!1),An}function Pt(a,l,u,f,g){const w=g?"class":"style";ed(a,u,l.inputs[w],w,f)}function yn(a,l,u,f){const g=Je(),_=En(),w=20+a,D=g[11],x=g[w]=X_(D,l,function ir(){return Zt.lFrame.currentNamespace}()),k=_.firstCreatePass?function Vn(a,l,u,f,g,_,w){const D=l.consts,k=Xu(l,a,2,g,Bs(D,_));return Ko(l,u,k,Bs(D,w)),null!==k.attrs&&Ep(k,k.attrs,!1),null!==k.mergedAttrs&&Ep(k,k.mergedAttrs,!0),null!==l.queries&&l.queries.elementStart(l,k),k}(w,_,g,0,l,u,f):_.data[w];ys(k,!0);const B=k.mergedAttrs;null!==B&&dt(D,x,B);const Y=k.classes;null!==Y&&Ju(D,x,Y);const re=k.styles;return null!==re&&Xa(D,x,re),64!=(64&k.flags)&&Qg(_,g,x,k),0===function nc(){return Zt.lFrame.elementDepthCount}()&&qs(x,g),function Wc(){Zt.lFrame.elementDepthCount++}(),ca(k)&&(rf(_,g,k),cs(_,k,g)),null!==f&&pp(g,k),yn}function Hn(){let a=$i();Nu()?ss():(a=a.parent,ys(a,!1));const l=a;!function Fo(){Zt.lFrame.elementDepthCount--}();const u=En();return u.firstCreatePass&&(gl(u,a),wh(a)&&u.queries.elementEnd(a)),null!=l.classesWithoutHost&&function Mh(a){return 0!=(16&a.flags)}(l)&&Pt(u,l,Je(),l.classesWithoutHost,!0),null!=l.stylesWithoutHost&&function xg(a){return 0!=(32&a.flags)}(l)&&Pt(u,l,Je(),l.stylesWithoutHost,!1),Hn}function vr(a,l,u,f){return yn(a,l,u,f),Hn(),vr}function Ms(a,l,u){const f=Je(),g=En(),_=a+20,w=g.firstCreatePass?function Ar(a,l,u,f,g){const _=l.consts,w=Bs(_,f),D=Xu(l,a,8,"ng-container",w);return null!==w&&Ep(D,w,!0),Ko(l,u,D,Bs(_,g)),null!==l.queries&&l.queries.elementStart(l,D),D}(_,g,f,l,u):g.data[_];ys(w,!0);const D=f[_]=f[11].createComment("");return Qg(g,f,D,w),qs(D,f),ca(w)&&(rf(g,f,w),cs(g,w,f)),null!=u&&pp(f,w),Ms}function tl(){let a=$i();const l=En();return Nu()?ss():(a=a.parent,ys(a,!1)),l.firstCreatePass&&(gl(l,a),wh(a)&&l.queries.elementEnd(a)),tl}function nl(a,l,u){return Ms(a,l,u),tl(),nl}function Am(){return Je()}function Lp(a){return!!a&&"function"==typeof a.then}function tE(a){return!!a&&"function"==typeof a.subscribe}const Tt=tE;function rd(a,l,u,f){const g=Je(),_=En(),w=$i();return yu(_,g,g[11],w,a,l,!!u,f),rd}function xm(a,l){const u=$i(),f=Je(),g=En();return yu(g,f,wp(vo(g.data),u,f),u,a,l,!1),xm}function yu(a,l,u,f,g,_,w,D){const x=ca(f),B=a.firstCreatePass&&wv(a),Y=l[8],re=Ol(l);let _e=!0;if(3&f.type||D){const Et=Pr(f,l),jt=D?D(Et):Et,nt=re.length,en=D?Zn=>D(ai(Zn[f.index])):f.index;if(fi(u)){let Zn=null;if(!D&&x&&(Zn=function Bp(a,l,u,f){const g=a.cleanup;if(null!=g)for(let _=0;_<g.length-1;_+=2){const w=g[_];if(w===u&&g[_+1]===f){const D=l[7],x=g[_+2];return D.length>x?D[x]:null}"string"==typeof w&&(_+=2)}return null}(a,l,g,f.index)),null!==Zn)(Zn.__ngLastListenerFn__||Zn).__ngNextListenerFn__=_,Zn.__ngLastListenerFn__=_,_e=!1;else{_=sd(f,l,Y,_,!1);const rn=u.listen(jt,g,_);re.push(_,rn),B&&B.push(g,en,nt,nt+1)}}else _=sd(f,l,Y,_,!0),jt.addEventListener(g,_,w),re.push(_),B&&B.push(g,en,nt,w)}else _=sd(f,l,Y,_,!1);const Ge=f.outputs;let gt;if(_e&&null!==Ge&&(gt=Ge[g])){const Et=gt.length;if(Et)for(let jt=0;jt<Et;jt+=2){const Mc=l[gt[jt]][gt[jt+1]].subscribe(_),l_=re.length;re.push(_,Mc),B&&B.push(g,f.index,l_,-(l_+1))}}}function Rm(a,l,u,f){try{return!1!==u(f)}catch(g){return df(a,g),!1}}function sd(a,l,u,f,g){return function _(w){if(w===Function)return f;const D=2&a.flags?pr(a.index,l):l;0==(32&l[2])&&Wd(D);let x=Rm(l,0,f,w),k=_.__ngNextListenerFn__;for(;k;)x=Rm(l,0,k,w)&&x,k=k.__ngNextListenerFn__;return g&&!1===x&&(w.preventDefault(),w.returnValue=!1),x}}function nE(a=1){return function Vo(a){return(Zt.lFrame.contextLView=function Zf(a,l){for(;a>0;)l=l[15],a--;return l}(a,Zt.lFrame.contextLView))[8]}(a)}function Mm(a,l){let u=null;const f=function Ft(a){const l=a.attrs;if(null!=l){const u=l.indexOf(5);if(0==(1&u))return l[u+1]}return null}(a);for(let g=0;g<l.length;g++){const _=l[g];if("*"!==_){if(null===f?yc(a,_,!0):em(f,_))return g}else u=g}return u}function Sb(a){const l=Je()[16][6];if(!l.projection){const f=l.projection=wa(a?a.length:1,null),g=f.slice();let _=l.child;for(;null!==_;){const w=a?Mm(_,a):0;null!==w&&(g[w]?g[w].projectionNext=_:f[w]=_,g[w]=_),_=_.next}}}function bf(a,l=0,u){const f=Je(),g=En(),_=Xu(g,20+a,16,null,u||null);null===_.projection&&(_.projection=l),ss(),64!=(64&_.flags)&&function O0(a,l,u){z(l[11],0,l,u,vc(a,u,l),x0(u.parent||l[6],u,l))}(g,f,_)}function Fv(a,l,u){return Cf(a,"",l,"",u),Fv}function Cf(a,l,u,f,g){const _=Je(),w=mu(_,l,u,f);return w!==bn&&lo(En(),xe(),_,a,w,_[11],g,!1),Cf}function ur(a,l,u,f,g){const _=a[u+1],w=null===l;let D=f?Bi(_):bc(_),x=!1;for(;0!==D&&(!1===x||w);){const B=a[D+1];Ib(a[D],l)&&(x=!0,a[D+1]=f?im(B):uv(B)),D=f?Bi(B):bc(B)}x&&(a[u+1]=f?uv(_):im(_))}function Ib(a,l){return null===a||null==l||(Array.isArray(a)?a[1]:a)===l||!(!Array.isArray(a)||"string"!=typeof l)&&wl(a,l)>=0}const us={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function wf(a){return a.substring(us.key,us.keyEnd)}function aE(a,l){const u=us.textEnd;return u===l?-1:(l=us.keyEnd=function xb(a,l,u){for(;l<u&&a.charCodeAt(l)>32;)l++;return l}(a,us.key=l,u),dr(a,l,u))}function dr(a,l,u){for(;l<u&&a.charCodeAt(l)<=32;)l++;return l}function Rb(a,l,u){return Ic(a,l,u,!1),Rb}function Xd(a,l){return Ic(a,l,null,!0),Xd}function Vv(a){!function Ac(a,l,u,f){const g=En(),_=pa(2);g.firstUpdatePass&&mS(g,null,_,f);const w=Je();if(u!==bn&&Ks(w,_,u)){const D=g.data[nr()];if(dE(D,f)&&!co(g,_)){let x=f?D.classesWithoutHost:D.stylesWithoutHost;null!==x&&(u=Be(x,u||"")),Pt(g,D,w,u,f)}else!function Nm(a,l,u,f,g,_,w,D){g===bn&&(g=X);let x=0,k=0,B=0<g.length?g[0]:null,Y=0<_.length?_[0]:null;for(;null!==B||null!==Y;){const re=x<g.length?g[x+1]:void 0,_e=k<_.length?_[k+1]:void 0;let gt,Ge=null;B===Y?(x+=2,k+=2,re!==_e&&(Ge=Y,gt=_e)):null===Y||null!==B&&B<Y?(x+=2,Ge=B):(k+=2,Ge=Y,gt=_e),null!==Ge&&vS(a,l,u,f,Ge,gt,w,D),B=x<g.length?g[x]:null,Y=k<_.length?_[k]:null}}(g,D,w,w[11],w[_+1],w[_+1]=function Jx(a,l,u){if(null==u||""===u)return X;const f=[],g=Sa(u);if(Array.isArray(g))for(let _=0;_<g.length;_++)a(f,g[_],!0);else if("object"==typeof g)for(const _ in g)g.hasOwnProperty(_)&&a(f,_,g[_]);else"string"==typeof g&&l(f,g);return f}(a,l,u),f,_)}}(mr,Ll,a,!0)}function Ll(a,l){for(let u=function Bv(a){return function lE(a){us.key=0,us.keyEnd=0,us.value=0,us.valueEnd=0,us.textEnd=a.length}(a),aE(a,dr(a,0,us.textEnd))}(l);u>=0;u=aE(l,u))mr(a,wf(l),!0)}function Ic(a,l,u,f){const g=Je(),_=En(),w=pa(2);_.firstUpdatePass&&mS(_,a,w,f),l!==bn&&Ks(g,w,l)&&vS(_,_.data[nr()],g,g[11],a,g[w+1]=function th(a,l){return null==a||("string"==typeof l?a+=l:"object"==typeof a&&(a=Te(Sa(a)))),a}(l,u),f,w)}function co(a,l){return l>=a.expandoStartIndex}function mS(a,l,u,f){const g=a.data;if(null===g[u+1]){const _=g[nr()],w=co(a,u);dE(_,f)&&null===l&&!w&&(l=!1),l=function Yx(a,l,u,f){const g=vo(a);let _=f?l.residualClasses:l.residualStyles;if(null===g)0===(f?l.classBindings:l.styleBindings)&&(u=Hv(u=cE(null,a,l,u,f),l.attrs,f),_=null);else{const w=l.directiveStylingLast;if(-1===w||a[w]!==g)if(u=cE(g,a,l,u,f),null===_){let x=function Kx(a,l,u){const f=u?l.classBindings:l.styleBindings;if(0!==bc(f))return a[Bi(f)]}(a,l,f);void 0!==x&&Array.isArray(x)&&(x=cE(null,a,l,x[1],f),x=Hv(x,l.attrs,f),function _S(a,l,u,f){a[Bi(u?l.classBindings:l.styleBindings)]=f}(a,l,f,x))}else _=function Qx(a,l,u){let f;const g=l.directiveEnd;for(let _=1+l.directiveStylingLast;_<g;_++)f=Hv(f,a[_].hostAttrs,u);return Hv(f,l.attrs,u)}(a,l,f)}return void 0!==_&&(f?l.residualClasses=_:l.residualStyles=_),u}(g,_,l,f),function Xo(a,l,u,f,g,_){let w=_?l.classBindings:l.styleBindings,D=Bi(w),x=bc(w);a[f]=u;let B,k=!1;if(Array.isArray(u)){const Y=u;B=Y[1],(null===B||wl(Y,B)>0)&&(k=!0)}else B=u;if(g)if(0!==x){const re=Bi(a[D+1]);a[f+1]=Bd(re,D),0!==re&&(a[re+1]=nm(a[re+1],f)),a[D+1]=function Iw(a,l){return 131071&a|l<<17}(a[D+1],f)}else a[f+1]=Bd(D,0),0!==D&&(a[D+1]=nm(a[D+1],f)),D=f;else a[f+1]=Bd(x,0),0===D?D=f:a[x+1]=nm(a[x+1],f),x=f;k&&(a[f+1]=uv(a[f+1])),ur(a,B,f,!0),ur(a,B,f,!1),function pS(a,l,u,f,g){const _=g?a.residualClasses:a.residualStyles;null!=_&&"string"==typeof l&&wl(_,l)>=0&&(u[f+1]=im(u[f+1]))}(l,B,a,f,_),w=Bd(D,x),_?l.classBindings=w:l.styleBindings=w}(g,_,l,u,w,f)}}function cE(a,l,u,f,g){let _=null;const w=u.directiveEnd;let D=u.directiveStylingLast;for(-1===D?D=u.directiveStart:D++;D<w&&(_=l[D],f=Hv(f,_.hostAttrs,g),_!==a);)D++;return null!==a&&(u.directiveStylingLast=D),f}function Hv(a,l,u){const f=u?1:2;let g=-1;if(null!==l)for(let _=0;_<l.length;_++){const w=l[_];"number"==typeof w?g=w:g===f&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),mr(a,w,!!u||l[++_]))}return void 0===a?null:a}function vS(a,l,u,f,g,_,w,D){if(!(3&l.type))return;const x=a.data,k=x[D+1];jv(function P0(a){return 1==(1&a)}(k)?uE(x,l,u,g,bc(k),w):void 0)||(jv(_)||function lu(a){return 2==(2&a)}(k)&&(_=uE(x,null,u,g,D,w)),function Rl(a,l,u,f,g){const _=fi(a);if(l)g?_?a.addClass(u,f):u.classList.add(f):_?a.removeClass(u,f):u.classList.remove(f);else{let w=-1===f.indexOf("-")?void 0:mc.DashCase;if(null==g)_?a.removeStyle(u,f,w):u.style.removeProperty(f);else{const D="string"==typeof g&&g.endsWith("!important");D&&(g=g.slice(0,-10),w|=mc.Important),_?a.setStyle(u,f,g,w):u.style.setProperty(f,g,D?"important":"")}}}(f,w,Tr(nr(),u),g,_))}function uE(a,l,u,f,g,_){const w=null===l;let D;for(;g>0;){const x=a[g],k=Array.isArray(x),B=k?x[1]:x,Y=null===B;let re=u[g+1];re===bn&&(re=Y?X:void 0);let _e=Y?Ds(re,f):B===f?re:void 0;if(k&&!jv(_e)&&(_e=Ds(x,f)),jv(_e)&&(D=_e,w))return D;const Ge=a[g+1];g=w?Bi(Ge):bc(Ge)}if(null!==l){let x=_?l.residualClasses:l.residualStyles;null!=x&&(D=Ds(x,f))}return D}function jv(a){return void 0!==a}function dE(a,l){return 0!=(a.flags&(l?16:32))}function Vp(a,l=""){const u=Je(),f=En(),g=a+20,_=f.firstCreatePass?Xu(f,g,1,l,null):f.data[g],w=u[g]=Q_(u[11],l);Qg(f,u,w,_),ys(_,!1)}function hE(a){return km("",a,""),hE}function km(a,l,u){const f=Je(),g=mu(f,a,l,u);return g!==bn&&function Nl(a,l,u){const f=Tr(l,a);J_(a[11],f,u)}(f,nr(),g),km}function _E(a,l,u){const f=Je();return Ks(f,Bo(),l)&&lo(En(),xe(),f,a,l,f[11],u,!0),_E}function Fb(a,l,u){const f=Je();if(Ks(f,Bo(),l)){const _=En(),w=xe();lo(_,w,f,a,l,wp(vo(_.data),w,f),u,!0)}return Fb}const Ef=void 0;var $p=["en",[["a","p"],["AM","PM"],Ef],[["AM","PM"],Ef,Ef],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ef,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ef,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ef,"{1} 'at' {0}",Ef],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wv(a){const u=Math.floor(Math.abs(a)),f=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===f?1:5}];let Wp={};function Lb(a){const l=function OS(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=MS(l);if(u)return u;const f=l.split("-")[0];if(u=MS(f),u)return u;if("en"===f)return $p;throw new Error(`Missing locale data for the locale "${a}".`)}function Ub(a){return Lb(a)[yt.PluralCase]}function MS(a){return a in Wp||(Wp[a]=Cn.ng&&Cn.ng.common&&Cn.ng.common.locales&&Cn.ng.common.locales[a]),Wp[a]}var yt=(()=>((yt=yt||{})[yt.LocaleId=0]="LocaleId",yt[yt.DayPeriodsFormat=1]="DayPeriodsFormat",yt[yt.DayPeriodsStandalone=2]="DayPeriodsStandalone",yt[yt.DaysFormat=3]="DaysFormat",yt[yt.DaysStandalone=4]="DaysStandalone",yt[yt.MonthsFormat=5]="MonthsFormat",yt[yt.MonthsStandalone=6]="MonthsStandalone",yt[yt.Eras=7]="Eras",yt[yt.FirstDayOfWeek=8]="FirstDayOfWeek",yt[yt.WeekendRange=9]="WeekendRange",yt[yt.DateFormat=10]="DateFormat",yt[yt.TimeFormat=11]="TimeFormat",yt[yt.DateTimeFormat=12]="DateTimeFormat",yt[yt.NumberSymbols=13]="NumberSymbols",yt[yt.NumberFormats=14]="NumberFormats",yt[yt.CurrencyCode=15]="CurrencyCode",yt[yt.CurrencySymbol=16]="CurrencySymbol",yt[yt.CurrencyName=17]="CurrencyName",yt[yt.Currencies=18]="Currencies",yt[yt.Directionality=19]="Directionality",yt[yt.PluralCase=20]="PluralCase",yt[yt.ExtraData=21]="ExtraData",yt))();const NS=["zero","one","two","few","many"],Vb="en-US",Hb={marker:"element"},Um={marker:"ICU"};var hr=(()=>((hr=hr||{})[hr.SHIFT=2]="SHIFT",hr[hr.APPEND_EAGERLY=1]="APPEND_EAGERLY",hr[hr.COMMENT=2]="COMMENT",hr))();let kS=Vb;function zv(a,l,u){const f=l.insertBeforeIndex,g=Array.isArray(f)?f[0]:f;return null===g?R0(a,0,u):ai(u[g])}function Vm(a,l,u,f,g){const _=l.insertBeforeIndex;if(Array.isArray(_)){let w=f,D=null;if(3&l.type||(D=w,w=g),null!==w&&0==(2&l.flags))for(let x=1;x<_.length;x++)Yo(a,w,u[_[x]],D,!1)}}function Hm(a,l){if(a.push(l),a.length>1)for(let u=a.length-2;u>=0;u--){const f=a[u];qv(f)||PS(f,l)&&null===FS(f)&&LS(f,l.index)}}function qv(a){return!(64&a.type)}function PS(a,l){return qv(l)||a.index>l.index}function FS(a){const l=a.insertBeforeIndex;return Array.isArray(l)?l[0]:l}function LS(a,l){const u=a.insertBeforeIndex;Array.isArray(u)?u[0]=l:(M0(zv,Vm),a.insertBeforeIndex=l)}function Zv(a,l){const u=a.data[l];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function rR(a,l,u){const f=fp(a,u,64,null,null);return Hm(l,f),f}function jb(a,l){const u=l[a.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function VS(a){return a>>>17}function jm(a){return(131070&a)>>>1}let Kr=0,zp=0;function Gb(a,l,u,f){const g=u[11];let w,_=null;for(let D=0;D<l.length;D++){const x=l[D];if("string"==typeof x){const k=l[++D];null===u[k]&&(u[k]=Q_(g,x))}else if("number"==typeof x)switch(1&x){case 0:const k=VS(x);let B,Y;if(null===_&&(_=k,w=Yh(g,f)),k===_?(B=f,Y=w):(B=null,Y=ai(u[k])),null!==Y){const gt=jm(x);Yo(g,Y,u[gt],B,!1);const jt=Zv(a,gt);if(null!==jt&&"object"==typeof jt){const nt=jb(jt,u);null!==nt&&Gb(a,jt.create[nt],u,u[jt.anchorIdx])}}break;case 1:const _e=l[++D],Ge=l[++D];fm(g,Tr(x>>>1,u),null,null,_e,Ge,null)}else switch(x){case Um:const k=l[++D],B=l[++D];null===u[B]&&qs(u[B]=yw(g,k),u);break;case Hb:const Y=l[++D],re=l[++D];null===u[re]&&qs(u[re]=X_(g,Y,null),u)}}}function yE(a,l,u,f,g){for(let _=0;_<u.length;_++){const w=u[_],D=u[++_];if(w&g){let x="";for(let k=_+1;k<=_+D;k++){const B=u[k];if("string"==typeof B)x+=B;else if("number"==typeof B)if(B<0)x+=Oe(l[f-B]);else{const Y=B>>>2;switch(3&B){case 1:const re=u[++k],_e=u[++k],Ge=a.data[Y];"string"==typeof Ge?fm(l[11],l[Y],null,Ge,re,x,_e):lo(a,Ge,l,re,x,l[11],_e,!1);break;case 0:const gt=l[Y];null!==gt&&J_(l[11],gt,x);break;case 2:jS(a,Zv(a,Y),l,x);break;case 3:Gm(a,Zv(a,Y),f,l)}}}}else{const x=u[_+1];if(x>0&&3==(3&x)){const B=Zv(a,x>>>2);l[B.currentCaseLViewIndex]<0&&Gm(a,B,f,l)}}_+=D}}function Gm(a,l,u,f){let g=f[l.currentCaseLViewIndex];if(null!==g){let _=Kr;g<0&&(g=f[l.currentCaseLViewIndex]=~g,_=-1),yE(a,f,l.update[g],u,_)}}function jS(a,l,u,f){const g=function GS(a,l){let u=a.cases.indexOf(l);if(-1===u)switch(a.type){case 1:{const f=function Tf(a,l){const u=Ub(l)(parseInt(a,10)),f=NS[u];return void 0!==f?f:"other"}(l,function iR(){return kS}());u=a.cases.indexOf(f),-1===u&&"other"!==f&&(u=a.cases.indexOf("other"));break}case 0:u=a.cases.indexOf("other")}return-1===u?null:u}(l,f);if(jb(l,u)!==g&&(bE(a,l,u),u[l.currentCaseLViewIndex]=null===g?null:~g,null!==g)){const w=u[l.anchorIdx];w&&Gb(a,l.create[g],u,w)}}function bE(a,l,u){let f=jb(l,u);if(null!==f){const g=l.remove[f];for(let _=0;_<g.length;_++){const w=g[_];if(w>0){const D=Tr(w,u);null!==D&&sv(u[11],D)}else bE(a,Zv(a,~w),u)}}}function oR(){const a=[];let u,f,l=-1;function _(D,x){l=0;const k=jb(D,x);f=null!==k?D.remove[k]:X}function w(){if(l<f.length){const D=f[l++];return D>0?u[D]:(a.push(l,f),_(u[1].data[~D],u),w())}return 0===a.length?null:(f=a.pop(),l=a.pop(),w())}return function g(D,x){for(u=x;a.length;)a.pop();return _(D.value,x),w}}const Kv=/\ufffd(\d+):?\d*\ufffd/gi,aR=/\ufffd(\d+)\ufffd/,wE=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,lR=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,$m=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Wm=/\uE500/g;function zS(a,l,u,f,g,_,w){const D=Vd(a,f,1,null);let x=D<<hr.SHIFT,k=fl();l===k&&(k=null),null===k&&(x|=hr.APPEND_EAGERLY),w&&(x|=hr.COMMENT,function au(a){void 0===K_&&(K_=a())}(oR)),g.push(x,null===_?"":_);const B=fp(a,D,w?32:1,null===_?"":_,null);Hm(u,B);const Y=B.index;return ys(B,!1),null!==k&&l!==k&&function US(a,l){let u=a.insertBeforeIndex;null===u?(M0(zv,Vm),u=a.insertBeforeIndex=[null,l]):(function te(a,l,u){a!=l&&Lt(u,a,l,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(l))}(k,Y),B}function qS(a,l,u,f,g,_,w){const D=w.match(Kv),x=zS(a,l,u,_,f,D?null:w,!1);D&&zm(g,w,x.index,null,0,null)}function zm(a,l,u,f,g,_){const w=a.length,D=w+1;a.push(null,null);const x=w+2,k=l.split(Kv);let B=0;for(let Y=0;Y<k.length;Y++){const re=k[Y];if(1&Y){const _e=g+parseInt(re,10);a.push(-1-_e),B|=bu(_e)}else""!==re&&a.push(re)}return a.push(u<<2|(f?1:0)),f&&a.push(f,_),a[w]=B,a[D]=a.length-x,B}function bu(a){return 1<<Math.min(a,31)}function Jv(a){let l,_,u="",f=0,g=!1;for(;null!==(l=lR.exec(a));)g?l[0]===`\ufffd/*${_}\ufffd`&&(f=l.index,g=!1):(u+=a.substring(f,l.index+l[0].length),_=l[1],g=!0);return u+=a.substr(f),u}function QS(a,l,u,f,g,_){let w=0;const D={type:g.type,currentCaseLViewIndex:Vd(a,l,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function pR(a,l,u){a.push(bu(l.mainBinding),2,-1-l.mainBinding,u<<2|2)})(u,g,_),function BS(a,l,u){const f=a.data[l];null===f?a.data[l]=u:f.value=u}(a,_,D);const x=g.values;for(let k=0;k<x.length;k++){const B=x[k],Y=[];for(let re=0;re<B.length;re++){const _e=B[re];if("string"!=typeof _e){const Ge=Y.push(_e)-1;B[re]=`\x3c!--\ufffd${Ge}\ufffd--\x3e`}}w=hR(a,D,l,u,f,g.cases[k],B.join(""),Y)|w}w&&function gR(a,l,u){a.push(l,1,u<<2|3)}(u,w,_)}function dR(a){const l=[],u=[];let f=1,g=0;const _=EE(a=a.replace(wE,function(w,D,x){return f="select"===x?0:1,g=parseInt(D.substr(1),10),""}));for(let w=0;w<_.length;){let D=_[w++].trim();1===f&&(D=D.replace(/\s*(?:=)?(\w+)\s*/,"$1")),D.length&&l.push(D);const x=EE(_[w++]);l.length>u.length&&u.push(x)}return{type:f,mainBinding:g,cases:l,values:u}}function EE(a){if(!a)return[];let l=0;const u=[],f=[],g=/[{}]/g;let _;for(g.lastIndex=0;_=g.exec(a);){const D=_.index;if("}"==_[0]){if(u.pop(),0==u.length){const x=a.substring(l,D);wE.test(x)?f.push(dR(x)):f.push(x),l=D+1}}else{if(0==u.length){const x=a.substring(l,D);f.push(x),l=D+1}u.push("{")}}const w=a.substring(l);return f.push(w),f}function hR(a,l,u,f,g,_,w,D){const x=[],k=[],B=[];l.cases.push(_),l.create.push(x),l.remove.push(k),l.update.push(B);const re=rp(ko()).getInertBodyElement(w),_e=Gh(re)||re;return _e?JS(a,l,u,f,x,k,B,_e,g,D,0):0}function JS(a,l,u,f,g,_,w,D,x,k,B){let Y=0,re=D.firstChild;for(;re;){const _e=Vd(a,u,1,null);switch(re.nodeType){case Node.ELEMENT_NODE:const Ge=re,gt=Ge.tagName.toLowerCase();if(Si.hasOwnProperty(gt)){TE(g,Hb,gt,x,_e),a.data[_e]=gt;const en=Ge.attributes;for(let Zn=0;Zn<en.length;Zn++){const rn=en.item(Zn),Mc=rn.name.toLowerCase();rn.value.match(Kv)?gc.hasOwnProperty(Mc)&&zm(w,rn.value,_e,rn.name,0,So[Mc]?y:zo[Mc]?b:null):mR(g,_e,rn)}Y=JS(a,l,u,f,g,_,w,re,_e,k,B+1)|Y,XS(_,_e,B)}break;case Node.TEXT_NODE:const Et=re.textContent||"",jt=Et.match(Kv);TE(g,null,jt?"":Et,x,_e),XS(_,_e,B),jt&&(Y=zm(w,Et,_e,null,0,null)|Y);break;case Node.COMMENT_NODE:const nt=aR.exec(re.textContent||"");if(nt){const Zn=k[parseInt(nt[1],10)];TE(g,Um,"",x,_e),QS(a,u,f,x,Zn,_e),fR(_,_e,B)}}re=re.nextSibling}return Y}function XS(a,l,u){0===u&&a.push(l)}function fR(a,l,u){0===u&&(a.push(~l),a.push(l))}function TE(a,l,u,f,g){null!==l&&a.push(l),a.push(u,g,function sR(a,l,u){return a|l<<17|u<<1}(0,f,g))}function mR(a,l,u){a.push(l<<1|1,u.name,u.value)}function DE(a,l,u=-1){const f=En(),g=Je(),_=20+a,w=Bs(f.consts,l),D=fl();f.firstCreatePass&&function uR(a,l,u,f,g,_){const w=fl(),D=[],x=[],k=[[]];g=function KS(a,l){if(function YS(a){return-1===a}(l))return Jv(a);{const u=a.indexOf(`:${l}\ufffd`)+2+l.toString().length,f=a.search(new RegExp(`\ufffd\\/\\*\\d+:${l}\ufffd`));return Jv(a.substring(u,f))}}(g,_);const B=function cR(a){return a.replace(Wm," ")}(g).split($m);for(let Y=0;Y<B.length;Y++){let re=B[Y];if(0==(1&Y)){const _e=EE(re);for(let Ge=0;Ge<_e.length;Ge++){let gt=_e[Ge];if(0==(1&Ge)){const Et=gt;""!==Et&&qS(a,w,k[0],D,x,u,Et)}else{const Et=gt;if("object"!=typeof Et)throw new Error(`Unable to parse ICU expression in "${g}" message.`);QS(a,u,x,l,Et,zS(a,w,k[0],u,D,"",!0).index)}}}else{const _e=47===re.charCodeAt(0),gt=(re.charCodeAt(_e?1:0),20+Number.parseInt(re.substring(_e?2:1)));if(_e)k.shift(),ys(fl(),!1);else{const Et=rR(a,k[0],gt);k.unshift([]),ys(Et,!0)}}}a.data[f]={create:D,update:x}}(f,null===D?0:D.index,g,_,w,u);const x=f.data[_],B=bw(f,D===g[6]?null:D,g);(function ad(a,l,u,f){const g=a[11];for(let _=0;_<l.length;_++){const w=l[_++],D=l[_],x=(w&hr.COMMENT)===hr.COMMENT,k=(w&hr.APPEND_EAGERLY)===hr.APPEND_EAGERLY,B=w>>>hr.SHIFT;let Y=a[B];null===Y&&(Y=a[B]=x?g.createComment(D):Q_(g,D)),k&&null!==u&&Yo(g,u,Y,f,!1)}})(g,x.create,B,D&&8&D.type?g[D.index]:null),Ah(!0)}function Xv(a,l,u){DE(a,l,u),function Le(){Ah(!1)}()}function SE(a){return function HS(a){a&&(Kr|=1<<Math.min(zp,31)),zp++}(Ks(Je(),Bo(),a)),SE}function qm(a){!function Yv(a,l,u){if(zp>0){const f=a.data[u];yE(a,l,Array.isArray(f)?f:f.update,function _o(){return Zt.lFrame.bindingIndex}()-zp-1,Kr)}Kr=0,zp=0}(En(),Je(),a+20)}function nh(a,l,u,f,g){if(a=be(a),Array.isArray(a))for(let _=0;_<a.length;_++)nh(a[_],l,u,f,g);else{const _=En(),w=Je();let D=pf(a)?a:be(a.provide),x=ff(a);const k=$i(),B=1048575&k.providerIndexes,Y=k.directiveStart,re=k.providerIndexes>>20;if(pf(a)||!a.multi){const _e=new ma(x,g,bt),Ge=qb(D,l,g?B:B+re,Y);-1===Ge?(Hs(xn(k,w),_,D),Wb(_,a,l.length),l.push(D),k.directiveStart++,k.directiveEnd++,g&&(k.providerIndexes+=1048576),u.push(_e),w.push(_e)):(u[Ge]=_e,w[Ge]=_e)}else{const _e=qb(D,l,B+re,Y),Ge=qb(D,l,B,B+re),gt=_e>=0&&u[_e],Et=Ge>=0&&u[Ge];if(g&&!Et||!g&&!gt){Hs(xn(k,w),_,D);const jt=function AE(a,l,u,f,g){const _=new ma(a,u,bt);return _.multi=[],_.index=l,_.componentProviders=0,zb(_,g,f&&!u),_}(g?IE:uo,u.length,g,f,x);!g&&Et&&(u[Ge].providerFactory=jt),Wb(_,a,l.length,0),l.push(D),k.directiveStart++,k.directiveEnd++,g&&(k.providerIndexes+=1048576),u.push(jt),w.push(jt)}else Wb(_,a,_e>-1?_e:Ge,zb(u[g?Ge:_e],x,!g&&f));!g&&f&&Et&&u[Ge].componentProviders++}}}function Wb(a,l,u,f){const g=pf(l),_=function $w(a){return!!a.useClass}(l);if(g||_){const x=(_?be(l.useClass):l).prototype.ngOnDestroy;if(x){const k=a.destroyHooks||(a.destroyHooks=[]);if(!g&&l.multi){const B=k.indexOf(u);-1===B?k.push(u,[f,x]):k[B+1].push(f,x)}else k.push(u,x)}}}function zb(a,l,u){return u&&a.componentProviders++,a.multi.push(l)-1}function qb(a,l,u,f){for(let g=u;g<f;g++)if(l[g]===a)return g;return-1}function uo(a,l,u,f){return ey(this.multi,[])}function IE(a,l,u,f){const g=this.multi;let _;if(this.providerFactory){const w=this.providerFactory.componentProviders,D=Wa(u,u[1],this.providerFactory.index,f);_=D.slice(0,w),ey(g,_);for(let x=w;x<D.length;x++)_.push(D[x])}else _=[],ey(g,_);return _}function ey(a,l){for(let u=0;u<a.length;u++)l.push((0,a[u])());return l}function ih(a,l=[]){return u=>{u.providersResolver=(f,g)=>function wR(a,l,u){const f=En();if(f.firstCreatePass){const g=_s(a);nh(u,f.data,f.blueprint,g,!0),nh(l,f.data,f.blueprint,g,!1)}}(f,g?g(a):a,l)}}class sI{}class Zp{resolveComponentFactory(l){throw function oI(a){const l=Error(`No component factory found for ${Te(a)}. Did you add it to @NgModule.entryComponents?`);return l.ngComponent=a,l}(l)}}let rh=(()=>{class a{}return a.NULL=new Zp,a})();function ny(){return Yp($i(),Je())}function Yp(a,l){return new Kp(Pr(a,l))}let Kp=(()=>{class a{constructor(u){this.nativeElement=u}}return a.__NG_ELEMENT_ID__=ny,a})();function xE(a){return a instanceof Kp?a.nativeElement:a}class aI{}let lI=(()=>{class a{}return a.__NG_ELEMENT_ID__=()=>function RE(){const a=Je(),u=pr($i().index,a);return function cI(a){return a[11]}(ms(u)?u:a)}(),a})(),iy=(()=>{class a{}return a.\u0275prov=Ln({token:a,providedIn:"root",factory:()=>null}),a})();class Df{constructor(l){this.full=l,this.major=l.split(".")[0],this.minor=l.split(".")[1],this.patch=l.split(".").slice(2).join(".")}}const uI=new Df("13.3.3"),Zb={};function Yb(a,l,u,f,g=!1){for(;null!==u;){const _=l[u.index];if(null!==_&&f.push(ai(_)),Ls(_))for(let D=10;D<_.length;D++){const x=_[D],k=x[1].firstChild;null!==k&&Yb(x[1],x,k,f)}const w=u.type;if(8&w)Yb(a,l,u.child,f);else if(32&w){const D=$g(u,l);let x;for(;x=D();)f.push(x)}else if(16&w){const D=rv(l,u);if(Array.isArray(D))f.push(...D);else{const x=kd(l[16]);Yb(x[1],x,D,f,!0)}}u=g?u.projectionNext:u.next}return f}class ry{constructor(l,u){this._lView=l,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const l=this._lView,u=l[1];return Yb(u,l,u.firstChild,[])}get context(){return this._lView[8]}set context(l){this._lView[8]=l}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const l=this._lView[3];if(Ls(l)){const u=l[8],f=u?u.indexOf(this):-1;f>-1&&(Yg(l,f),Gs(u,f))}this._attachedToViewContainer=!1}Kg(this._lView[1],this._lView)}onDestroy(l){mp(this._lView[1],this._lView,null,l)}markForCheck(){Wd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){uf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function bp(a,l,u){pl(!0);try{uf(a,l,u)}finally{pl(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new at(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function I0(a,l){Xg(a,l,l[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(l){if(this._attachedToViewContainer)throw new at(902,"");this._appRef=l}}class TR extends ry{constructor(l){super(l),this._view=l}detectChanges(){fu(this._view)}checkNoChanges(){!function tb(a){pl(!0);try{fu(a)}finally{pl(!1)}}(this._view)}get context(){return null}}class Ym extends rh{constructor(l){super(),this.ngModule=l}resolveComponentFactory(l){const u=Gt(l);return new ME(u,this.ngModule)}}function Sf(a){const l=[];for(let u in a)a.hasOwnProperty(u)&&l.push({propName:a[u],templateName:u});return l}class ME extends sI{constructor(l,u){super(),this.componentDef=l,this.ngModule=u,this.componentType=l.type,this.selector=function Sw(a){return a.map(dp).join(",")}(l.selectors),this.ngContentSelectors=l.ngContentSelectors?l.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Sf(this.componentDef.inputs)}get outputs(){return Sf(this.componentDef.outputs)}create(l,u,f,g){const _=(g=g||this.ngModule)?function dI(a,l){return{get:(u,f,g)=>{const _=a.get(u,Zb,g);return _!==Zb||f===Zb?_:l.get(u,f,g)}}}(l,g.injector):l,w=_.get(aI,tc),D=_.get(iy,null),x=w.createRenderer(null,this.componentDef),k=this.componentDef.selectors[0][0]||"div",B=f?function sf(a,l,u){if(fi(a))return a.selectRootElement(l,u===gn.ShadowDom);let f="string"==typeof l?a.querySelector(l):l;return f.textContent="",f}(x,f,this.componentDef.encapsulation):X_(w.createRenderer(null,this.componentDef),k,function Qp(a){const l=a.toLowerCase();return"svg"===l?"svg":"math"===l?"math":null}(k)),Y=this.componentDef.onPush?576:528,re=function Rv(a,l){return{components:[],scheduler:a||Nd,clean:xa,playerHandler:l||null,flags:0}}(),_e=Hd(0,null,null,1,0,null,null,null,null,null),Ge=cu(null,_e,re,Y,null,null,w,x,D,_);let gt,Et;so(Ge);try{const jt=function ub(a,l,u,f,g,_){const w=u[1];u[20]=a;const x=Xu(w,20,2,"#host",null),k=x.mergedAttrs=l.hostAttrs;null!==k&&(Ep(x,k,!0),null!==a&&(dt(g,a,k),null!==x.classes&&Ju(g,a,x.classes),null!==x.styles&&Xa(g,a,x.styles)));const B=f.createRenderer(a,l),Y=cu(u,q0(l),null,l.onPush?64:16,u[20],x,f,B,_||null,null);return w.firstCreatePass&&(Hs(xn(x,u),w,l.type),Oi(w,x),vv(x,u.length,1)),$d(u,Y),u[20]=Y}(B,this.componentDef,Ge,w,x);if(B)if(f)dt(x,B,["ng-version",uI.full]);else{const{attrs:nt,classes:en}=function cv(a){const l=[],u=[];let f=1,g=2;for(;f<a.length;){let _=a[f];if("string"==typeof _)2===g?""!==_&&l.push(_,a[++f]):8===g&&u.push(_);else{if(!Pe(g))break;g=_}f++}return{attrs:l,classes:u}}(this.componentDef.selectors[0]);nt&&dt(x,B,nt),en&&en.length>0&&Ju(x,B,en.join(" "))}if(Et=pi(_e,20),void 0!==u){const nt=Et.projection=[];for(let en=0;en<this.ngContentSelectors.length;en++){const Zn=u[en];nt.push(null!=Zn?Array.from(Zn):null)}}gt=function Hr(a,l,u,f,g){const _=u[1],w=function K0(a,l,u){const f=$i();a.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),lf(a,f,l,Vd(a,l,1,null),u));const g=Wa(l,a,f.directiveStart,f);qs(g,l);const _=Pr(f,l);return _&&qs(_,l),g}(_,u,l);if(f.components.push(w),a[8]=w,g&&g.forEach(x=>x(w,l)),l.contentQueries){const x=$i();l.contentQueries(1,w,x.directiveStart)}const D=$i();return!_.firstCreatePass||null===l.hostBindings&&null===l.hostAttrs||(ue(D.index),_p(u[1],D,0,D.directiveStart,D.directiveEnd,l),Q0(l,w)),w}(jt,this.componentDef,Ge,re,[db]),uu(_e,Ge,null)}finally{ac()}return new Kb(this.componentType,gt,Yp(Et,Ge),Ge,Et)}}class Kb extends class rI{}{constructor(l,u,f,g,_){super(),this.location=f,this._rootLView=g,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new TR(g),this.componentType=l}get injector(){return new jo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(l){this.hostView.onDestroy(l)}}class Jp{}class Km{}const sh=new Map;class kE extends Jp{constructor(l,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ym(this);const f=Sn(l);this._bootstrapComponents=Al(f.bootstrap),this._r3Injector=Dv(l,u,[{provide:Jp,useValue:this},{provide:rh,useValue:this.componentFactoryResolver}],Te(l)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(l)}get(l,u=Pl.THROW_IF_NOT_FOUND,f=Bt.Default){return l===Pl||l===Jp||l===Zr?this:this._r3Injector.get(l,u,f)}destroy(){const l=this._r3Injector;!l.destroyed&&l.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(l){this.destroyCbs.push(l)}}class ld extends Km{constructor(l){super(),this.moduleType=l,null!==Sn(l)&&function il(a){const l=new Set;!function u(f){const g=Sn(f,!0),_=g.id;null!==_&&(function NE(a,l,u){if(l&&l!==u)throw new Error(`Duplicate module registered for ${a} - ${Te(l)} vs ${Te(l.name)}`)}(_,sh.get(_),f),sh.set(_,f));const w=Al(g.imports);for(const D of w)l.has(D)||(l.add(D),u(D))}(a)}(l)}create(l){return new kE(this.moduleType,l)}}function Xp(a,l,u){const f=Dr()+a,g=Je();return g[f]===bn?Ra(g,f,u?l.call(u):l()):function Ap(a,l){return a[l]}(g,f)}function PE(a,l,u,f){return function _I(a,l,u,f,g,_){const w=l+u;return Ks(a,w,g)?Ra(a,w+1,_?f.call(_,g):f(g)):oy(a,w+1)}(Je(),Dr(),a,l,u,f)}function If(a,l,u,f,g){return function vI(a,l,u,f,g,_,w){const D=l+u;return Fl(a,D,g,_)?Ra(a,D+2,w?f.call(w,g,_):f(g,_)):oy(a,D+2)}(Je(),Dr(),a,l,u,f,g)}function pI(a,l,u,f,g,_){return function yI(a,l,u,f,g,_,w,D){const x=l+u;return function xp(a,l,u,f,g){const _=Fl(a,l,u,f);return Ks(a,l+2,g)||_}(a,x,g,_,w)?Ra(a,x+3,D?f.call(D,g,_,w):f(g,_,w)):oy(a,x+3)}(Je(),Dr(),a,l,u,f,g,_)}function oy(a,l){const u=a[l];return u===bn?void 0:u}function uy(a){return l=>{setTimeout(a,void 0,l)}}const Rc=class EI extends o.x{constructor(l=!1){super(),this.__isAsync=l}emit(l){super.next(l)}subscribe(l,u,f){var g,_,w;let D=l,x=u||(()=>null),k=f;if(l&&"object"==typeof l){const Y=l;D=null===(g=Y.next)||void 0===g?void 0:g.bind(Y),x=null===(_=Y.error)||void 0===_?void 0:_.bind(Y),k=null===(w=Y.complete)||void 0===w?void 0:w.bind(Y)}this.__isAsync&&(x=uy(x),D&&(D=uy(D)),k&&(k=uy(k)));const B=super.subscribe({next:D,error:x,complete:k});return l instanceof P.w0&&l.add(B),B}};function dy(){return this._results[Tc()]()}class Jm{constructor(l=!1){this._emitDistinctChangesOnly=l,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Tc(),f=Jm.prototype;f[u]||(f[u]=dy)}get changes(){return this._changes||(this._changes=new Rc)}get(l){return this._results[l]}map(l){return this._results.map(l)}filter(l){return this._results.filter(l)}find(l){return this._results.find(l)}reduce(l,u){return this._results.reduce(l,u)}forEach(l){this._results.forEach(l)}some(l){return this._results.some(l)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(l,u){const f=this;f.dirty=!1;const g=Es(l);(this._changesDetected=!function Kf(a,l,u){if(a.length!==l.length)return!1;for(let f=0;f<a.length;f++){let g=a[f],_=l[f];if(u&&(g=u(g),_=u(_)),_!==g)return!1}return!0}(f._results,g,u))&&(f._results=g,f.length=g.length,f.last=g[this.length-1],f.first=g[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let ng=(()=>{class a{}return a.__NG_ELEMENT_ID__=TI,a})();const RR=ng,BE=class extends RR{constructor(l,u,f){super(),this._declarationLView=l,this._declarationTContainer=u,this.elementRef=f}createEmbeddedView(l){const u=this._declarationTContainer.tViews,f=cu(this._declarationLView,u,l,16,null,u.declTNode,null,null,null,null);f[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(f[19]=_.createEmbeddedView(u)),uu(u,f,l),new ry(f)}};function TI(){return Qb($i(),Je())}function Qb(a,l){return 4&a.type?new BE(l,a,Yp(a,l)):null}let hy=(()=>{class a{}return a.__NG_ELEMENT_ID__=DI,a})();function DI(){return jE($i(),Je())}const UE=hy,SI=class extends UE{constructor(l,u,f){super(),this._lContainer=l,this._hostTNode=u,this._hostLView=f}get element(){return Yp(this._hostTNode,this._hostLView)}get injector(){return new jo(this._hostTNode,this._hostLView)}get parentInjector(){const l=yl(this._hostTNode,this._hostLView);if(_l(l)){const u=bo(l,this._hostLView),f=ya(l);return new jo(u[1].data[f+8],u)}return new jo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(l){const u=VE(this._lContainer);return null!==u&&u[l]||null}get length(){return this._lContainer.length-10}createEmbeddedView(l,u,f){const g=l.createEmbeddedView(u||{});return this.insert(g,f),g}createComponent(l,u,f,g,_){const w=l&&!function js(a){return"function"==typeof a}(l);let D;if(w)D=u;else{const Y=u||{};D=Y.index,f=Y.injector,g=Y.projectableNodes,_=Y.ngModuleRef}const x=w?l:new ME(Gt(l)),k=f||this.parentInjector;if(!_&&null==x.ngModule){const re=(w?k:this.parentInjector).get(Jp,null);re&&(_=re)}const B=x.create(k,g,void 0,_);return this.insert(B.hostView,D),B}insert(l,u){const f=l._lView,g=f[1];if(function Gc(a){return Ls(a[3])}(f)){const B=this.indexOf(l);if(-1!==B)this.detach(B);else{const Y=f[3],re=new SI(Y,Y[6],Y[3]);re.detach(re.indexOf(l))}}const _=this._adjustIndex(u),w=this._lContainer;!function qg(a,l,u,f){const g=10+f,_=u.length;f>0&&(u[g-1][4]=l),f<_-10?(l[4]=u[g],Yc(u,10+f,l)):(u.push(l),l[4]=null),l[3]=u;const w=l[17];null!==w&&u!==w&&function _c(a,l){const u=a[9];l[16]!==l[3][3][16]&&(a[2]=!0),null===u?a[9]=[l]:u.push(l)}(w,l);const D=l[19];null!==D&&D.insertView(a),l[2]|=128}(g,f,w,_);const D=Jg(_,w),x=f[11],k=Yh(x,w[7]);return null!==k&&function S0(a,l,u,f,g,_){f[0]=g,f[6]=l,Xg(a,f,u,1,g,_)}(g,w[6],x,f,k,D),l.attachToViewContainerRef(),Yc(HE(w),_,l),l}move(l,u){return this.insert(l,u)}indexOf(l){const u=VE(this._lContainer);return null!==u?u.indexOf(l):-1}remove(l){const u=this._adjustIndex(l,-1),f=Yg(this._lContainer,u);f&&(Gs(HE(this._lContainer),u),Kg(f[1],f))}detach(l){const u=this._adjustIndex(l,-1),f=Yg(this._lContainer,u);return f&&null!=Gs(HE(this._lContainer),u)?new ry(f):null}_adjustIndex(l,u=0){return null==l?this.length+u:l}};function VE(a){return a[8]}function HE(a){return a[8]||(a[8]=[])}function jE(a,l){let u;const f=l[a.index];if(Ls(f))u=f;else{let g;if(8&a.type)g=ai(f);else{const _=l[11];g=_.createComment("");const w=Pr(a,l);Yo(_,Yh(_,w),g,function ww(a,l){return fi(a)?a.nextSibling(l):l.nextSibling}(_,w),!1)}l[a.index]=u=vp(f,l,g,a),$d(l,u)}return new SI(u,a,l)}class py{constructor(l){this.queryList=l,this.matches=null}clone(){return new py(this.queryList)}setDirty(){this.queryList.setDirty()}}class e_{constructor(l=[]){this.queries=l}createEmbeddedView(l){const u=l.queries;if(null!==u){const f=null!==l.contentQueries?l.contentQueries[0]:u.length,g=[];for(let _=0;_<f;_++){const w=u.getByIndex(_);g.push(this.queries[w.indexInDeclarationView].clone())}return new e_(g)}return null}insertView(l){this.dirtyQueriesWithMatches(l)}detachView(l){this.dirtyQueriesWithMatches(l)}dirtyQueriesWithMatches(l){for(let u=0;u<this.queries.length;u++)null!==tC(l,u).matches&&this.queries[u].setDirty()}}class GE{constructor(l,u,f=null){this.predicate=l,this.flags=u,this.read=f}}class Jb{constructor(l=[]){this.queries=l}elementStart(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(l,u)}elementEnd(l){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(l)}embeddedTView(l){let u=null;for(let f=0;f<this.length;f++){const g=null!==u?u.length:0,_=this.getByIndex(f).embeddedTView(l,g);_&&(_.indexInDeclarationView=f,null!==u?u.push(_):u=[_])}return null!==u?new Jb(u):null}template(l,u){for(let f=0;f<this.queries.length;f++)this.queries[f].template(l,u)}getByIndex(l){return this.queries[l]}get length(){return this.queries.length}track(l){this.queries.push(l)}}class Xb{constructor(l,u=-1){this.metadata=l,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(l,u){this.isApplyingToNode(u)&&this.matchTNode(l,u)}elementEnd(l){this._declarationNodeIndex===l.index&&(this._appliesToNextNode=!1)}template(l,u){this.elementStart(l,u)}embeddedTView(l,u){return this.isApplyingToNode(l)?(this.crossesNgTemplate=!0,this.addMatch(-l.index,u),new Xb(this.metadata)):null}isApplyingToNode(l){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let f=l.parent;for(;null!==f&&8&f.type&&f.index!==u;)f=f.parent;return u===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(l,u){const f=this.metadata.predicate;if(Array.isArray(f))for(let g=0;g<f.length;g++){const _=f[g];this.matchTNodeWithReadOption(l,u,OR(u,_)),this.matchTNodeWithReadOption(l,u,Sr(u,l,_,!1,!1))}else f===ng?4&u.type&&this.matchTNodeWithReadOption(l,u,-1):this.matchTNodeWithReadOption(l,u,Sr(u,l,f,!1,!1))}matchTNodeWithReadOption(l,u,f){if(null!==f){const g=this.metadata.read;if(null!==g)if(g===Kp||g===hy||g===ng&&4&u.type)this.addMatch(u.index,-2);else{const _=Sr(u,l,g,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,f)}}addMatch(l,u){null===this.matches?this.matches=[l,u]:this.matches.push(l,u)}}function OR(a,l){const u=a.localNames;if(null!==u)for(let f=0;f<u.length;f+=2)if(u[f]===l)return u[f+1];return null}function NR(a,l,u,f){return-1===u?function $E(a,l){return 11&a.type?Yp(a,l):4&a.type?Qb(a,l):null}(l,a):-2===u?function WE(a,l,u){return u===Kp?Yp(l,a):u===ng?Qb(l,a):u===hy?jE(l,a):void 0}(a,l,f):Wa(a,a[1],u,l)}function II(a,l,u,f){const g=l[19].queries[f];if(null===g.matches){const _=a.data,w=u.matches,D=[];for(let x=0;x<w.length;x+=2){const k=w[x];D.push(k<0?null:NR(l,_[k],w[x+1],u.metadata.read))}g.matches=D}return g.matches}function zE(a,l,u,f){const g=a.queries.getByIndex(u),_=g.matches;if(null!==_){const w=II(a,l,g,u);for(let D=0;D<_.length;D+=2){const x=_[D];if(x>0)f.push(w[D/2]);else{const k=_[D+1],B=l[-x];for(let Y=10;Y<B.length;Y++){const re=B[Y];re[17]===re[3]&&zE(re[1],re,k,f)}if(null!==B[9]){const Y=B[9];for(let re=0;re<Y.length;re++){const _e=Y[re];zE(_e[1],_e,k,f)}}}}}return f}function eC(a){const l=Je(),u=En(),f=Ga();Td(f+1);const g=tC(u,f);if(a.dirty&&li(l)===(2==(2&g.metadata.flags))){if(null===g.matches)a.reset([]);else{const _=g.crossesNgTemplate?zE(u,l,f,[]):II(u,l,g,f);a.reset(_,xE),a.notifyOnChanges()}return!0}return!1}function Xs(a,l,u){const f=En();f.firstCreatePass&&(MI(f,new GE(a,l,u),-1),2==(2&l)&&(f.staticViewQueries=!0)),RI(f,Je(),l)}function AI(a,l,u,f){const g=En();if(g.firstCreatePass){const _=$i();MI(g,new GE(l,u,f),_.index),function PR(a,l){const u=a.contentQueries||(a.contentQueries=[]);l!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,l)}(g,a),2==(2&u)&&(g.staticContentQueries=!0)}RI(g,Je(),u)}function xI(){return function kR(a,l){return a[19].queries[l].queryList}(Je(),Ga())}function RI(a,l,u){const f=new Jm(4==(4&u));mp(a,l,f,f.destroy),null===l[19]&&(l[19]=new e_),l[19].queries.push(new py(f))}function MI(a,l,u){null===a.queries&&(a.queries=new Jb),a.queries.track(new Xb(l,u))}function tC(a,l){return a.queries.getByIndex(l)}function qE(a,l){return Qb(a,l)}function n_(...a){}const dC=new Mi("Application Initializer");let nT=(()=>{class a{constructor(u){this.appInits=u,this.resolve=n_,this.reject=n_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,g)=>{this.resolve=f,this.reject=g})}runInitializers(){if(this.initialized)return;const u=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let g=0;g<this.appInits.length;g++){const _=this.appInits[g]();if(Lp(_))u.push(_);else if(Tt(_)){const w=new Promise((D,x)=>{_.subscribe({complete:D,error:x})});u.push(w)}}Promise.all(u).then(()=>{f()}).catch(g=>{this.reject(g)}),0===u.length&&f(),this.initialized=!0}}return a.\u0275fac=function(u){return new(u||a)(ct(dC,8))},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const hC=new Mi("AppId",{providedIn:"root",factory:function iT(){return`${yy()}${yy()}${yy()}`}});function yy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const fC=new Mi("Platform Initializer"),i_=new Mi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),oh=new Mi("appBootstrapListener");let r_=(()=>{class a{log(u){console.log(u)}warn(u){console.warn(u)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();const pC=new Mi("LocaleId",{providedIn:"root",factory:()=>Yt(pC,Bt.Optional|Bt.SkipSelf)||function s_(){return"undefined"!=typeof $localize&&$localize.locale||Vb}()}),o_=new Mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class rT{constructor(l,u){this.ngModuleFactory=l,this.componentFactories=u}}let sT=(()=>{class a{compileModuleSync(u){return new ld(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const f=this.compileModuleSync(u),_=Al(Sn(u).declarations).reduce((w,D)=>{const x=Gt(D);return x&&w.push(new ME(x)),w},[]);return new rT(f,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();const jR=(()=>Promise.resolve(0))();function by(a){"undefined"==typeof Zone?jR.then(()=>{a&&a.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",a)}class wu{constructor({enableLongStackTrace:l=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Rc(!1),this.onMicrotaskEmpty=new Rc(!1),this.onStable=new Rc(!1),this.onError=new Rc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const g=this;g._nesting=0,g._outer=g._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(g._inner=g._inner.fork(new Zone.TaskTrackingZoneSpec)),l&&Zone.longStackTraceZoneSpec&&(g._inner=g._inner.fork(Zone.longStackTraceZoneSpec)),g.shouldCoalesceEventChangeDetection=!f&&u,g.shouldCoalesceRunChangeDetection=f,g.lastRequestAnimationFrameId=-1,g.nativeRequestAnimationFrame=function aT(){let a=Cn.requestAnimationFrame,l=Cn.cancelAnimationFrame;if("undefined"!=typeof Zone&&a&&l){const u=a[Zone.__symbol__("OriginalDelegate")];u&&(a=u);const f=l[Zone.__symbol__("OriginalDelegate")];f&&(l=f)}return{nativeRequestAnimationFrame:a,nativeCancelAnimationFrame:l}}().nativeRequestAnimationFrame,function QI(a){const l=()=>{!function KI(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(Cn,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,gC(a),a.isCheckStableRunning=!0,lT(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),gC(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,f,g,_,w,D)=>{try{return cT(a),u.invokeTask(g,_,w,D)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||a.shouldCoalesceRunChangeDetection)&&l(),JI(a)}},onInvoke:(u,f,g,_,w,D,x)=>{try{return cT(a),u.invoke(g,_,w,D,x)}finally{a.shouldCoalesceRunChangeDetection&&l(),JI(a)}},onHasTask:(u,f,g,_)=>{u.hasTask(g,_),f===g&&("microTask"==_.change?(a._hasPendingMicrotasks=_.microTask,gC(a),lT(a)):"macroTask"==_.change&&(a.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,f,g,_)=>(u.handleError(g,_),a.runOutsideAngular(()=>a.onError.emit(_)),!1)})}(g)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(wu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(l,u,f){return this._inner.run(l,u,f)}runTask(l,u,f,g){const _=this._inner,w=_.scheduleEventTask("NgZoneEvent: "+g,l,YI,n_,n_);try{return _.runTask(w,u,f)}finally{_.cancelTask(w)}}runGuarded(l,u,f){return this._inner.runGuarded(l,u,f)}runOutsideAngular(l){return this._outer.run(l)}}const YI={};function lT(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function gC(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function cT(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function JI(a){a._nesting--,lT(a)}class GR{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Rc,this.onMicrotaskEmpty=new Rc,this.onStable=new Rc,this.onError=new Rc}run(l,u,f){return l.apply(u,f)}runGuarded(l,u,f){return l.apply(u,f)}runOutsideAngular(l){return l()}runTask(l,u,f,g){return l.apply(u,f)}}let XI=(()=>{class a{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wu.assertNotInAngularZone(),by(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())by(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(u)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,f,g){let _=-1;f&&f>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==_),u(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:g})}whenStable(u,f,g){if(g&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,f,g),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,f,g){return[]}}return a.\u0275fac=function(u){return new(u||a)(ct(wu))},a.\u0275prov=Ln({token:a,factory:a.\u0275fac}),a})(),$R=(()=>{class a{constructor(){this._applications=new Map,Cy.addToWindow(this)}registerApplication(u,f){this._applications.set(u,f)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,f=!0){return Cy.findTestabilityInTree(this,u,f)}}return a.\u0275fac=function(u){return new(u||a)},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();class uT{addToWindow(l){}findTestabilityInTree(l,u,f){return null}}function dT(a){Cy=a}let Eu,Cy=new uT;const pT=new Mi("AllowMultipleToken");class gT{constructor(l,u){this.name=l,this.token=u}}function t1(a,l,u=[]){const f=`Platform: ${l}`,g=new Mi(f);return(_=[])=>{let w=mC();if(!w||w.injector.get(pT,!1))if(a)a(u.concat(_).concat({provide:g,useValue:!0}));else{const D=u.concat(_).concat({provide:g,useValue:!0},{provide:Tv,useValue:"platform"});!function e1(a){if(Eu&&!Eu.destroyed&&!Eu.injector.get(pT,!1))throw new at(400,"");Eu=a.get(WR);const l=a.get(fC,null);l&&l.forEach(u=>u())}(Pl.create({providers:D,name:f}))}return function mT(a){const l=mC();if(!l)throw new at(401,"");return l}()}}function mC(){return Eu&&!Eu.destroyed?Eu:null}let WR=(()=>{class a{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,f){const D=function _T(a,l){let u;return u="noop"===a?new GR:("zone.js"===a?void 0:a)||new wu({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==l?void 0:l.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==l?void 0:l.ngZoneRunCoalescing)}),u}(f?f.ngZone:void 0,{ngZoneEventCoalescing:f&&f.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:f&&f.ngZoneRunCoalescing||!1}),x=[{provide:wu,useValue:D}];return D.run(()=>{const k=Pl.create({providers:x,parent:this.injector,name:u.moduleType.name}),B=u.create(k),Y=B.injector.get(Hg,null);if(!Y)throw new at(402,"");return D.runOutsideAngular(()=>{const re=D.onError.subscribe({next:_e=>{Y.handleError(_e)}});B.onDestroy(()=>{Ey(this._modules,B),re.unsubscribe()})}),function zR(a,l,u){try{const f=u();return Lp(f)?f.catch(g=>{throw l.runOutsideAngular(()=>a.handleError(g)),g}):f}catch(f){throw l.runOutsideAngular(()=>a.handleError(f)),f}}(Y,D,()=>{const re=B.injector.get(nT);return re.runInitializers(),re.donePromise.then(()=>(function Ni(a){(function Mt(a,l){null==a&&Lt(l,a,null,"!=")})(a,"Expected localeId to be defined"),"string"==typeof a&&(kS=a.toLowerCase().replace(/_/g,"-"))}(B.injector.get(pC,Vb)||Vb),this._moduleDoBootstrap(B),B))})})}bootstrapModule(u,f=[]){const g=_C({},f);return function hT(a,l,u){const f=new ld(u);return Promise.resolve(f)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,g))}_moduleDoBootstrap(u){const f=u.injector.get(wy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(g=>f.bootstrap(g));else{if(!u.instance.ngDoBootstrap)throw new at(403,"");u.instance.ngDoBootstrap(f)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new at(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return a.\u0275fac=function(u){return new(u||a)(ct(Pl))},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"platform"}),a})();function _C(a,l){return Array.isArray(l)?l.reduce(_C,a):Object.assign(Object.assign({},a),l)}let wy=(()=>{class a{constructor(u,f,g,_){this._zone=u,this._injector=f,this._exceptionHandler=g,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const w=new j.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),D=new j.y(x=>{let k;this._zone.runOutsideAngular(()=>{k=this._zone.onStable.subscribe(()=>{wu.assertNotInAngularZone(),by(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const B=this._zone.onUnstable.subscribe(()=>{wu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{k.unsubscribe(),B.unsubscribe()}});this.isStable=(0,we.T)(w,D.pipe((0,Se.B)()))}bootstrap(u,f){if(!this._initStatus.done)throw new at(405,"");let g;g=u instanceof sI?u:this._injector.get(rh).resolveComponentFactory(u),this.componentTypes.push(g.componentType);const _=function fT(a){return a.isBoundToModule}(g)?void 0:this._injector.get(Jp),D=g.create(Pl.NULL,[],f||g.selector,_),x=D.location.nativeElement,k=D.injector.get(XI,null),B=k&&D.injector.get($R);return k&&B&&B.registerApplication(x,k),D.onDestroy(()=>{this.detachView(D.hostView),Ey(this.components,D),B&&B.unregisterApplication(x)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new at(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const f=u;this._views.push(f),f.attachToAppRef(this)}detachView(u){const f=u;Ey(this._views,f),f.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(oh,[]).concat(this._bootstrapListeners).forEach(g=>g(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return a.\u0275fac=function(u){return new(u||a)(ct(wu),ct(Pl),ct(Hg),ct(nT))},a.\u0275prov=Ln({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();function Ey(a,l){const u=a.indexOf(l);u>-1&&a.splice(u,1)}let vC=!0,r1=!1;function vT(){return r1=!0,vC}function ah(){if(r1)throw new Error("Cannot enable prod mode after platform setup.");vC=!1}let qR=(()=>{class a{}return a.__NG_ELEMENT_ID__=ZR,a})();function ZR(a){return function yT(a,l,u){if(Lc(a)&&!u){const f=pr(a.index,l);return new ry(f,f)}return 47&a.type?new ry(l[16],l):null}($i(),Je(),16==(16&a))}class Ay{constructor(){}supports(l){return qd(l)}create(l){return new JR(l)}}const QR=(a,l)=>l;class JR{constructor(l){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=l||QR}forEachItem(l){let u;for(u=this._itHead;null!==u;u=u._next)l(u)}forEachOperation(l){let u=this._itHead,f=this._removalsHead,g=0,_=null;for(;u||f;){const w=!f||u&&u.currentIndex<CC(f,g,_)?u:f,D=CC(w,g,_),x=w.currentIndex;if(w===f)g--,f=f._nextRemoved;else if(u=u._next,null==w.previousIndex)g++;else{_||(_=[]);const k=D-g,B=x-g;if(k!=B){for(let re=0;re<k;re++){const _e=re<_.length?_[re]:_[re]=0,Ge=_e+re;B<=Ge&&Ge<k&&(_[re]=_e+1)}_[w.previousIndex]=B-k}}D!==x&&l(w,D,x)}}forEachPreviousItem(l){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachMovedItem(l){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}forEachIdentityChange(l){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)l(u)}diff(l){if(null==l&&(l=[]),!qd(l))throw new at(900,"");return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let g,_,w,u=this._itHead,f=!1;if(Array.isArray(l)){this.length=l.length;for(let D=0;D<this.length;D++)_=l[D],w=this._trackByFn(D,_),null!==u&&Object.is(u.trackById,w)?(f&&(u=this._verifyReinsertion(u,_,w,D)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,w,D),f=!0),u=u._next}else g=0,function vb(a,l){if(Array.isArray(a))for(let u=0;u<a.length;u++)l(a[u]);else{const u=a[Tc()]();let f;for(;!(f=u.next()).done;)l(f.value)}}(l,D=>{w=this._trackByFn(g,D),null!==u&&Object.is(u.trackById,w)?(f&&(u=this._verifyReinsertion(u,D,w,g)),Object.is(u.item,D)||this._addIdentityChange(u,D)):(u=this._mismatch(u,D,w,g),f=!0),u=u._next,g++}),this.length=g;return this._truncate(u),this.collection=l,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let l;for(l=this._previousItHead=this._itHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._additionsHead;null!==l;l=l._nextAdded)l.previousIndex=l.currentIndex;for(this._additionsHead=this._additionsTail=null,l=this._movesHead;null!==l;l=l._nextMoved)l.previousIndex=l.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(l,u,f,g){let _;return null===l?_=this._itTail:(_=l._prev,this._remove(l)),null!==(l=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._reinsertAfter(l,_,g)):null!==(l=null===this._linkedRecords?null:this._linkedRecords.get(f,g))?(Object.is(l.item,u)||this._addIdentityChange(l,u),this._moveAfter(l,_,g)):l=this._addAfter(new XR(u,f),_,g),l}_verifyReinsertion(l,u,f,g){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==_?l=this._reinsertAfter(_,l._prev,g):l.currentIndex!=g&&(l.currentIndex=g,this._addToMoves(l,g)),l}_truncate(l){for(;null!==l;){const u=l._next;this._addToRemovals(this._unlink(l)),l=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(l,u,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(l);const g=l._prevRemoved,_=l._nextRemoved;return null===g?this._removalsHead=_:g._nextRemoved=_,null===_?this._removalsTail=g:_._prevRemoved=g,this._insertAfter(l,u,f),this._addToMoves(l,f),l}_moveAfter(l,u,f){return this._unlink(l),this._insertAfter(l,u,f),this._addToMoves(l,f),l}_addAfter(l,u,f){return this._insertAfter(l,u,f),this._additionsTail=null===this._additionsTail?this._additionsHead=l:this._additionsTail._nextAdded=l,l}_insertAfter(l,u,f){const g=null===u?this._itHead:u._next;return l._next=g,l._prev=u,null===g?this._itTail=l:g._prev=l,null===u?this._itHead=l:u._next=l,null===this._linkedRecords&&(this._linkedRecords=new DT),this._linkedRecords.put(l),l.currentIndex=f,l}_remove(l){return this._addToRemovals(this._unlink(l))}_unlink(l){null!==this._linkedRecords&&this._linkedRecords.remove(l);const u=l._prev,f=l._next;return null===u?this._itHead=f:u._next=f,null===f?this._itTail=u:f._prev=u,l}_addToMoves(l,u){return l.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=l:this._movesTail._nextMoved=l),l}_addToRemovals(l){return null===this._unlinkedRecords&&(this._unlinkedRecords=new DT),this._unlinkedRecords.put(l),l.currentIndex=null,l._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=l,l._prevRemoved=null):(l._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=l),l}_addIdentityChange(l,u){return l.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=l:this._identityChangesTail._nextIdentityChange=l,l}}class XR{constructor(l,u){this.item=l,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class eM{constructor(){this._head=null,this._tail=null}add(l){null===this._head?(this._head=this._tail=l,l._nextDup=null,l._prevDup=null):(this._tail._nextDup=l,l._prevDup=this._tail,l._nextDup=null,this._tail=l)}get(l,u){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===u||u<=f.currentIndex)&&Object.is(f.trackById,l))return f;return null}remove(l){const u=l._prevDup,f=l._nextDup;return null===u?this._head=f:u._nextDup=f,null===f?this._tail=u:f._prevDup=u,null===this._head}}class DT{constructor(){this.map=new Map}put(l){const u=l.trackById;let f=this.map.get(u);f||(f=new eM,this.map.set(u,f)),f.add(l)}get(l,u){const g=this.map.get(l);return g?g.get(l,u):null}remove(l){const u=l.trackById;return this.map.get(u).remove(l)&&this.map.delete(u),l}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function CC(a,l,u){const f=a.previousIndex;if(null===f)return f;let g=0;return u&&f<u.length&&(g=u[f]),f+l+g}class ST{constructor(){}supports(l){return l instanceof Map||Ip(l)}create(){return new IT}}class IT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(l){let u;for(u=this._mapHead;null!==u;u=u._next)l(u)}forEachPreviousItem(l){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)l(u)}forEachChangedItem(l){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)l(u)}forEachAddedItem(l){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)l(u)}forEachRemovedItem(l){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)l(u)}diff(l){if(l){if(!(l instanceof Map||Ip(l)))throw new at(900,"")}else l=new Map;return this.check(l)?this:null}onDestroy(){}check(l){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(l,(f,g)=>{if(u&&u.key===g)this._maybeAddToChanges(u,f),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(g,f);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let f=u;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(l,u){if(l){const f=l._prev;return u._next=l,u._prev=f,l._prev=u,f&&(f._next=u),l===this._mapHead&&(this._mapHead=u),this._appendAfter=l,l}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(l,u){if(this._records.has(l)){const g=this._records.get(l);this._maybeAddToChanges(g,u);const _=g._prev,w=g._next;return _&&(_._next=w),w&&(w._prev=_),g._next=null,g._prev=null,g}const f=new AT(l);return this._records.set(l,f),f.currentValue=u,this._addToAdditions(f),f}_reset(){if(this.isDirty){let l;for(this._previousMapHead=this._mapHead,l=this._previousMapHead;null!==l;l=l._next)l._nextPrevious=l._next;for(l=this._changesHead;null!==l;l=l._nextChanged)l.previousValue=l.currentValue;for(l=this._additionsHead;null!=l;l=l._nextAdded)l.previousValue=l.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(l,u){Object.is(u,l.currentValue)||(l.previousValue=l.currentValue,l.currentValue=u,this._addToChanges(l))}_addToAdditions(l){null===this._additionsHead?this._additionsHead=this._additionsTail=l:(this._additionsTail._nextAdded=l,this._additionsTail=l)}_addToChanges(l){null===this._changesHead?this._changesHead=this._changesTail=l:(this._changesTail._nextChanged=l,this._changesTail=l)}_forEach(l,u){l instanceof Map?l.forEach(u):Object.keys(l).forEach(f=>u(l[f],f))}}class AT{constructor(l){this.key=l,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function wC(){return new a_([new Ay])}let a_=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(null!=f){const g=f.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||wC()),deps:[[a,new zs,new sr]]}}find(u){const f=this.factories.find(g=>g.supports(u));if(null!=f)return f;throw new at(901,"")}}return a.\u0275prov=Ln({token:a,providedIn:"root",factory:wC}),a})();function xT(){return new xy([new ST])}let xy=(()=>{class a{constructor(u){this.factories=u}static create(u,f){if(f){const g=f.factories.slice();u=u.concat(g)}return new a(u)}static extend(u){return{provide:a,useFactory:f=>a.create(u,f||xT()),deps:[[a,new zs,new sr]]}}find(u){const f=this.factories.find(_=>_.supports(u));if(f)return f;throw new at(901,"")}}return a.\u0275prov=Ln({token:a,providedIn:"root",factory:xT}),a})();const tM=t1(null,"core",[]);let nM=(()=>{class a{constructor(u){}}return a.\u0275fac=function(u){return new(u||a)(ct(wy))},a.\u0275mod=Ie({type:a}),a.\u0275inj=$n({}),a})()},3942:(wt,He,W)=>{"use strict";W.d(He,{Z:()=>at});var o=W(2090),P=W(4859),j=W(9681),we=W(1877);class Se{constructor(Oe,We){this._delegate=Oe,this.firebase=We,(0,j._addComponent)(Oe,new P.wA("app-compat",()=>this,"PUBLIC")),this.container=Oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Oe){this._delegate.automaticDataCollectionEnabled=Oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Oe=>{this._delegate.checkDestroyed(),Oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,j.deleteApp)(this._delegate)))}_getService(Oe,We=j._DEFAULT_ENTRY_NAME){var ut;this._delegate.checkDestroyed();const ft=this._delegate.container.getProvider(Oe);return!ft.isInitialized()&&"EXPLICIT"===(null===(ut=ft.getComponent())||void 0===ut?void 0:ut.instantiationMode)&&ft.initialize(),ft.getImmediate({identifier:We})}_removeServiceInstance(Oe,We=j._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Oe).clearInstance(We)}_addComponent(Oe){(0,j._addComponent)(this._delegate,Oe)}_addOrOverwriteComponent(Oe){(0,j._addOrOverwriteComponent)(this._delegate,Oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new o.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ne=function Be(){const lt=function Te(lt){const Oe={},We={__esModule:!0,initializeApp:function ze(ye,Me={}){const te=j.initializeApp(ye,Me);if((0,o.r3)(Oe,te.name))return Oe[te.name];const ge=new lt(te,We);return Oe[te.name]=ge,ge},app:ft,registerVersion:j.registerVersion,setLogLevel:j.setLogLevel,onLog:j.onLog,apps:null,SDK_VERSION:j.SDK_VERSION,INTERNAL:{registerComponent:function Ue(ye){const Me=ye.name,te=Me.replace("-compat","");if(j._registerComponent(ye)&&"PUBLIC"===ye.type){const ge=(De=ft())=>{if("function"!=typeof De[te])throw ve.create("invalid-app-argument",{appName:Me});return De[te]()};void 0!==ye.serviceProps&&(0,o.ZB)(ge,ye.serviceProps),We[te]=ge,lt.prototype[te]=function(...De){return this._getService.bind(this,Me).apply(this,ye.multipleInstances?De:[])}}return"PUBLIC"===ye.type?We[te]:null},removeApp:function ut(ye){delete Oe[ye]},useAsService:function _t(ye,Me){return"serverAuth"===Me?null:Me},modularAPIs:j}};function ft(ye){if(!(0,o.r3)(Oe,ye=ye||j._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:ye});return Oe[ye]}return We.default=We,Object.defineProperty(We,"apps",{get:function Ze(){return Object.keys(Oe).map(ye=>Oe[ye])}}),ft.App=lt,We}(Se);return lt.INTERNAL=Object.assign(Object.assign({},lt.INTERNAL),{createFirebaseNamespace:Be,extendNamespace:function Oe(We){(0,o.ZB)(lt,We)},createSubscribe:o.ne,ErrorFactory:o.LL,deepExtend:o.ZB}),lt}(),ee=new we.Yd("@firebase/app-compat");if((0,o.jU)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const lt=self.firebase.SDK_VERSION;lt&&lt.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const at=ne;!function Qe(lt){(0,j.registerVersion)("@firebase/app-compat","0.1.25",lt)}()},9681:(wt,He,W)=>{"use strict";W.r(He),W.d(He,{FirebaseError:()=>we.ZR,SDK_VERSION:()=>ks,_DEFAULT_ENTRY_NAME:()=>Mt,_addComponent:()=>Cr,_addOrOverwriteComponent:()=>Ln,_apps:()=>Qi,_clearComponents:()=>es,_components:()=>Gn,_getProvider:()=>$n,_registerComponent:()=>Dn,_removeServiceInstance:()=>hi,deleteApp:()=>Bt,getApp:()=>xi,getApps:()=>Oo,initializeApp:()=>Ji,onLog:()=>Mn,registerVersion:()=>Ii,setLogLevel:()=>bi});var o=W(5861),P=W(4859),j=W(1877),we=W(2090),Se=W(8766);class Re{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function ve(ie){const pe=ie.getComponent();return"VERSION"===(null==pe?void 0:pe.type)}(rt)){const It=rt.getImmediate();return`${It.library}/${It.version}`}return null}).filter(rt=>rt).join(" ")}}const Te="@firebase/app",ne=new j.Yd("@firebase/app"),Mt="[DEFAULT]",Lt={[Te]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qi=new Map,Gn=new Map;function Cr(ie,pe){try{ie.container.addComponent(pe)}catch(rt){ne.debug(`Component ${pe.name} failed to register with FirebaseApp ${ie.name}`,rt)}}function Ln(ie,pe){ie.container.addOrOverwriteComponent(pe)}function Dn(ie){const pe=ie.name;if(Gn.has(pe))return ne.debug(`There were multiple attempts to register component ${pe}.`),!1;Gn.set(pe,ie);for(const rt of Qi.values())Cr(rt,ie);return!0}function $n(ie,pe){const rt=ie.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),ie.container.getProvider(pe)}function hi(ie,pe,rt=Mt){$n(ie,pe).clearInstance(rt)}function es(){Gn.clear()}const yi=new we.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Ns{constructor(pe,rt,It){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=It,this.container.addComponent(new P.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw yi.create("app-deleted",{appName:this._name})}}const ks="9.8.1";function Ji(ie,pe={}){"object"!=typeof pe&&(pe={name:pe});const rt=Object.assign({name:Mt,automaticDataCollectionEnabled:!1},pe),It=rt.name;if("string"!=typeof It||!It)throw yi.create("bad-app-name",{appName:String(It)});const qt=Qi.get(It);if(qt){if((0,we.vZ)(ie,qt.options)&&(0,we.vZ)(rt,qt.config))return qt;throw yi.create("duplicate-app",{appName:It})}const mn=new P.H0(It);for(const Qt of Gn.values())mn.addComponent(Qt);const ni=new Ns(ie,rt,mn);return Qi.set(It,ni),ni}function xi(ie=Mt){const pe=Qi.get(ie);if(!pe)throw yi.create("no-app",{appName:ie});return pe}function Oo(){return Array.from(Qi.values())}function Bt(ie){return ns.apply(this,arguments)}function ns(){return(ns=(0,o.Z)(function*(ie){const pe=ie.name;Qi.has(pe)&&(Qi.delete(pe),yield Promise.all(ie.container.getProviders().map(rt=>rt.delete())),ie.isDeleted=!0)})).apply(this,arguments)}function Ii(ie,pe,rt){var It;let qt=null!==(It=Lt[ie])&&void 0!==It?It:ie;rt&&(qt+=`-${rt}`);const mn=qt.match(/\s|\//),ni=pe.match(/\s|\//);if(mn||ni){const Qt=[`Unable to register library "${qt}" with version "${pe}":`];return mn&&Qt.push(`library name "${qt}" contains illegal characters (whitespace or "/")`),mn&&ni&&Qt.push("and"),ni&&Qt.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void ne.warn(Qt.join(" "))}Dn(new P.wA(`${qt}-version`,()=>({library:qt,version:pe}),"VERSION"))}function Mn(ie,pe){if(null!==ie&&"function"!=typeof ie)throw yi.create("invalid-log-argument");(0,j.Am)(ie,pe)}function bi(ie){(0,j.Ub)(ie)}const Ai="firebase-heartbeat-store";let ji=null;function sa(){return ji||(ji=(0,Se.X3)("firebase-heartbeat-database",1,{upgrade:(ie,pe)=>{0===pe&&ie.createObjectStore(Ai)}}).catch(ie=>{throw yi.create("storage-open",{originalErrorMessage:ie.message})})),ji}function Ut(){return(Ut=(0,o.Z)(function*(ie){try{return(yield sa()).transaction(Ai).objectStore(Ai).get(gs(ie))}catch(pe){throw yi.create("storage-get",{originalErrorMessage:pe.message})}})).apply(this,arguments)}function Nt(ie,pe){return ps.apply(this,arguments)}function ps(){return(ps=(0,o.Z)(function*(ie,pe){try{const It=(yield sa()).transaction(Ai,"readwrite");return yield It.objectStore(Ai).put(pe,gs(ie)),It.done}catch(rt){throw yi.create("storage-set",{originalErrorMessage:rt.message})}})).apply(this,arguments)}function gs(ie){return`${ie.name}!${ie.options.appId}`}class Pi{constructor(pe){this.container=pe,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new se(rt),this._heartbeatsCachePromise=this._storage.read().then(It=>(this._heartbeatsCache=It,It))}triggerHeartbeat(){var pe=this;return(0,o.Z)(function*(){const It=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),qt=Qn();if(null===pe._heartbeatsCache&&(pe._heartbeatsCache=yield pe._heartbeatsCachePromise),pe._heartbeatsCache.lastSentHeartbeatDate!==qt&&!pe._heartbeatsCache.heartbeats.some(mn=>mn.date===qt))return pe._heartbeatsCache.heartbeats.push({date:qt,agent:It}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(mn=>{const ni=new Date(mn.date).valueOf();return Date.now()-ni<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,o.Z)(function*(){if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null===pe._heartbeatsCache||0===pe._heartbeatsCache.heartbeats.length)return"";const rt=Qn(),{heartbeatsToSend:It,unsentEntries:qt}=function X(ie,pe=1024){const rt=[];let It=ie.slice();for(const qt of ie){const mn=rt.find(ni=>ni.agent===qt.agent);if(mn){if(mn.dates.push(qt.date),le(rt)>pe){mn.dates.pop();break}}else if(rt.push({agent:qt.agent,dates:[qt.date]}),le(rt)>pe){rt.pop();break}It=It.slice(1)}return{heartbeatsToSend:rt,unsentEntries:It}}(pe._heartbeatsCache.heartbeats),mn=(0,we.L)(JSON.stringify({version:2,heartbeats:It}));return pe._heartbeatsCache.lastSentHeartbeatDate=rt,qt.length>0?(pe._heartbeatsCache.heartbeats=qt,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),mn})()}}function Qn(){return(new Date).toISOString().substring(0,10)}class se{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,o.Z)(function*(){return!!(0,we.hl)()&&(0,we.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,o.Z)(function*(){return(yield pe._canUseIndexedDBPromise)&&(yield function gn(ie){return Ut.apply(this,arguments)}(pe.app))||{heartbeats:[]}})()}overwrite(pe){var rt=this;return(0,o.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const mn=yield rt.read();return Nt(rt.app,{lastSentHeartbeatDate:null!==(It=pe.lastSentHeartbeatDate)&&void 0!==It?It:mn.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var rt=this;return(0,o.Z)(function*(){var It;if(yield rt._canUseIndexedDBPromise){const mn=yield rt.read();return Nt(rt.app,{lastSentHeartbeatDate:null!==(It=pe.lastSentHeartbeatDate)&&void 0!==It?It:mn.lastSentHeartbeatDate,heartbeats:[...mn.heartbeats,...pe.heartbeats]})}})()}}function le(ie){return(0,we.L)(JSON.stringify({version:2,heartbeats:ie})).length}!function je(ie){Dn(new P.wA("platform-logger",pe=>new Re(pe),"PRIVATE")),Dn(new P.wA("heartbeat",pe=>new Pi(pe),"PRIVATE")),Ii(Te,"0.7.24",ie),Ii(Te,"0.7.24","esm2017"),Ii("fire-js","")}("")},4859:(wt,He,W)=>{"use strict";W.d(He,{H0:()=>Te,wA:()=>j,zt:()=>Se});var o=W(5861),P=W(2090);class j{constructor(ne,ee,be){this.name=ne,this.instanceFactory=ee,this.type=be,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ne){return this.instantiationMode=ne,this}setMultipleInstances(ne){return this.multipleInstances=ne,this}setServiceProps(ne){return this.serviceProps=ne,this}setInstanceCreatedCallback(ne){return this.onInstanceCreated=ne,this}}const we="[DEFAULT]";class Se{constructor(ne,ee){this.name=ne,this.container=ee,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ne){const ee=this.normalizeInstanceIdentifier(ne);if(!this.instancesDeferred.has(ee)){const be=new P.BH;if(this.instancesDeferred.set(ee,be),this.isInitialized(ee)||this.shouldAutoInitialize())try{const mt=this.getOrInitializeService({instanceIdentifier:ee});mt&&be.resolve(mt)}catch(mt){}}return this.instancesDeferred.get(ee).promise}getImmediate(ne){var ee;const be=this.normalizeInstanceIdentifier(null==ne?void 0:ne.identifier),mt=null!==(ee=null==ne?void 0:ne.optional)&&void 0!==ee&&ee;if(!this.isInitialized(be)&&!this.shouldAutoInitialize()){if(mt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:be})}catch(Qe){if(mt)return null;throw Qe}}getComponent(){return this.component}setComponent(ne){if(ne.name!==this.name)throw Error(`Mismatching Component ${ne.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ne,this.shouldAutoInitialize()){if(function ve(Be){return"EAGER"===Be.instantiationMode}(ne))try{this.getOrInitializeService({instanceIdentifier:we})}catch(ee){}for(const[ee,be]of this.instancesDeferred.entries()){const mt=this.normalizeInstanceIdentifier(ee);try{const Qe=this.getOrInitializeService({instanceIdentifier:mt});be.resolve(Qe)}catch(Qe){}}}}clearInstance(ne=we){this.instancesDeferred.delete(ne),this.instancesOptions.delete(ne),this.instances.delete(ne)}delete(){var ne=this;return(0,o.Z)(function*(){const ee=Array.from(ne.instances.values());yield Promise.all([...ee.filter(be=>"INTERNAL"in be).map(be=>be.INTERNAL.delete()),...ee.filter(be=>"_delete"in be).map(be=>be._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ne=we){return this.instances.has(ne)}getOptions(ne=we){return this.instancesOptions.get(ne)||{}}initialize(ne={}){const{options:ee={}}=ne,be=this.normalizeInstanceIdentifier(ne.instanceIdentifier);if(this.isInitialized(be))throw Error(`${this.name}(${be}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const mt=this.getOrInitializeService({instanceIdentifier:be,options:ee});for(const[Qe,at]of this.instancesDeferred.entries())be===this.normalizeInstanceIdentifier(Qe)&&at.resolve(mt);return mt}onInit(ne,ee){var be;const mt=this.normalizeInstanceIdentifier(ee),Qe=null!==(be=this.onInitCallbacks.get(mt))&&void 0!==be?be:new Set;Qe.add(ne),this.onInitCallbacks.set(mt,Qe);const at=this.instances.get(mt);return at&&ne(at,mt),()=>{Qe.delete(ne)}}invokeOnInitCallbacks(ne,ee){const be=this.onInitCallbacks.get(ee);if(be)for(const mt of be)try{mt(ne,ee)}catch(Qe){}}getOrInitializeService({instanceIdentifier:ne,options:ee={}}){let be=this.instances.get(ne);if(!be&&this.component&&(be=this.component.instanceFactory(this.container,{instanceIdentifier:(Be=ne,Be===we?void 0:Be),options:ee}),this.instances.set(ne,be),this.instancesOptions.set(ne,ee),this.invokeOnInitCallbacks(be,ne),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ne,be)}catch(mt){}var Be;return be||null}normalizeInstanceIdentifier(ne=we){return this.component?this.component.multipleInstances?ne:we:ne}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(ne){this.name=ne,this.providers=new Map}addComponent(ne){const ee=this.getProvider(ne.name);if(ee.isComponentSet())throw new Error(`Component ${ne.name} has already been registered with ${this.name}`);ee.setComponent(ne)}addOrOverwriteComponent(ne){this.getProvider(ne.name).isComponentSet()&&this.providers.delete(ne.name),this.addComponent(ne)}getProvider(ne){if(this.providers.has(ne))return this.providers.get(ne);const ee=new Se(ne,this);return this.providers.set(ne,ee),ee}getProviders(){return Array.from(this.providers.values())}}},1877:(wt,He,W)=>{"use strict";W.d(He,{Am:()=>Be,Ub:()=>Te,Yd:()=>ve,in:()=>P});const o=[];var P=(()=>{return(ne=P||(P={}))[ne.DEBUG=0]="DEBUG",ne[ne.VERBOSE=1]="VERBOSE",ne[ne.INFO=2]="INFO",ne[ne.WARN=3]="WARN",ne[ne.ERROR=4]="ERROR",ne[ne.SILENT=5]="SILENT",P;var ne})();const j={debug:P.DEBUG,verbose:P.VERBOSE,info:P.INFO,warn:P.WARN,error:P.ERROR,silent:P.SILENT},we=P.INFO,Se={[P.DEBUG]:"log",[P.VERBOSE]:"log",[P.INFO]:"info",[P.WARN]:"warn",[P.ERROR]:"error"},Re=(ne,ee,...be)=>{if(ee<ne.logLevel)return;const mt=(new Date).toISOString(),Qe=Se[ee];if(!Qe)throw new Error(`Attempted to log a message with an invalid logType (value: ${ee})`);console[Qe](`[${mt}]  ${ne.name}:`,...be)};class ve{constructor(ee){this.name=ee,this._logLevel=we,this._logHandler=Re,this._userLogHandler=null,o.push(this)}get logLevel(){return this._logLevel}set logLevel(ee){if(!(ee in P))throw new TypeError(`Invalid value "${ee}" assigned to \`logLevel\``);this._logLevel=ee}setLogLevel(ee){this._logLevel="string"==typeof ee?j[ee]:ee}get logHandler(){return this._logHandler}set logHandler(ee){if("function"!=typeof ee)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ee}get userLogHandler(){return this._userLogHandler}set userLogHandler(ee){this._userLogHandler=ee}debug(...ee){this._userLogHandler&&this._userLogHandler(this,P.DEBUG,...ee),this._logHandler(this,P.DEBUG,...ee)}log(...ee){this._userLogHandler&&this._userLogHandler(this,P.VERBOSE,...ee),this._logHandler(this,P.VERBOSE,...ee)}info(...ee){this._userLogHandler&&this._userLogHandler(this,P.INFO,...ee),this._logHandler(this,P.INFO,...ee)}warn(...ee){this._userLogHandler&&this._userLogHandler(this,P.WARN,...ee),this._logHandler(this,P.WARN,...ee)}error(...ee){this._userLogHandler&&this._userLogHandler(this,P.ERROR,...ee),this._logHandler(this,P.ERROR,...ee)}}function Te(ne){o.forEach(ee=>{ee.setLogLevel(ne)})}function Be(ne,ee){for(const be of o){let mt=null;ee&&ee.level&&(mt=j[ee.level]),be.userLogHandler=null===ne?null:(Qe,at,...lt)=>{const Oe=lt.map(We=>{if(null==We)return null;if("string"==typeof We)return We;if("number"==typeof We||"boolean"==typeof We)return We.toString();if(We instanceof Error)return We.message;try{return JSON.stringify(We)}catch(ut){return null}}).filter(We=>We).join(" ");at>=(null!=mt?mt:Qe.logLevel)&&ne({level:P[at].toLowerCase(),message:Oe,args:lt,type:Qe.name})}}}},8766:(wt,He,W)=>{"use strict";W.d(He,{Lj:()=>ze,X3:()=>ft});var o=W(5861);let j,we;const ve=new WeakMap,Te=new WeakMap,Be=new WeakMap,ne=new WeakMap,ee=new WeakMap;let Qe={get(Me,te,ge){if(Me instanceof IDBTransaction){if("done"===te)return Te.get(Me);if("objectStoreNames"===te)return Me.objectStoreNames||Be.get(Me);if("store"===te)return ge.objectStoreNames[1]?void 0:ge.objectStore(ge.objectStoreNames[0])}return We(Me[te])},set:(Me,te,ge)=>(Me[te]=ge,!0),has:(Me,te)=>Me instanceof IDBTransaction&&("done"===te||"store"===te)||te in Me};function Oe(Me){return"function"==typeof Me?function lt(Me){return Me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Re(){return we||(we=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Me)?function(...te){return Me.apply(ut(this),te),We(ve.get(this))}:function(...te){return We(Me.apply(ut(this),te))}:function(te,...ge){const De=Me.call(ut(this),te,...ge);return Be.set(De,te.sort?te.sort():[te]),We(De)}}(Me):(Me instanceof IDBTransaction&&function mt(Me){if(Te.has(Me))return;const te=new Promise((ge,De)=>{const Ae=()=>{Me.removeEventListener("complete",it),Me.removeEventListener("error",Ce),Me.removeEventListener("abort",Ce)},it=()=>{ge(),Ae()},Ce=()=>{De(Me.error||new DOMException("AbortError","AbortError")),Ae()};Me.addEventListener("complete",it),Me.addEventListener("error",Ce),Me.addEventListener("abort",Ce)});Te.set(Me,te)}(Me),((Me,te)=>te.some(ge=>Me instanceof ge))(Me,function Se(){return j||(j=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Me,Qe):Me)}function We(Me){if(Me instanceof IDBRequest)return function be(Me){const te=new Promise((ge,De)=>{const Ae=()=>{Me.removeEventListener("success",it),Me.removeEventListener("error",Ce)},it=()=>{ge(We(Me.result)),Ae()},Ce=()=>{De(Me.error),Ae()};Me.addEventListener("success",it),Me.addEventListener("error",Ce)});return te.then(ge=>{ge instanceof IDBCursor&&ve.set(ge,Me)}).catch(()=>{}),ee.set(te,Me),te}(Me);if(ne.has(Me))return ne.get(Me);const te=Oe(Me);return te!==Me&&(ne.set(Me,te),ee.set(te,Me)),te}const ut=Me=>ee.get(Me);function ft(Me,te,{blocked:ge,upgrade:De,blocking:Ae,terminated:it}={}){const Ce=indexedDB.open(Me,te),Vt=We(Ce);return De&&Ce.addEventListener("upgradeneeded",tn=>{De(We(Ce.result),tn.oldVersion,tn.newVersion,We(Ce.transaction))}),ge&&Ce.addEventListener("blocked",()=>ge()),Vt.then(tn=>{it&&tn.addEventListener("close",()=>it()),Ae&&tn.addEventListener("versionchange",()=>Ae())}).catch(()=>{}),Vt}function ze(Me,{blocked:te}={}){const ge=indexedDB.deleteDatabase(Me);return te&&ge.addEventListener("blocked",()=>te()),We(ge).then(()=>{})}const Ze=["get","getKey","getAll","getAllKeys","count"],Ue=["put","add","delete","clear"],_t=new Map;function ye(Me,te){if(!(Me instanceof IDBDatabase)||te in Me||"string"!=typeof te)return;if(_t.get(te))return _t.get(te);const ge=te.replace(/FromIndex$/,""),De=te!==ge,Ae=Ue.includes(ge);if(!(ge in(De?IDBIndex:IDBObjectStore).prototype)||!Ae&&!Ze.includes(ge))return;const it=function(){var Ce=(0,o.Z)(function*(Vt,...tn){const Ki=this.transaction(Vt,Ae?"readwrite":"readonly");let Mt=Ki.store;return De&&(Mt=Mt.index(tn.shift())),(yield Promise.all([Mt[ge](...tn),Ae&&Ki.done]))[0]});return function(tn){return Ce.apply(this,arguments)}}();return _t.set(te,it),it}!function at(Me){Qe=Me(Qe)}(Me=>p3(f3({},Me),{get:(te,ge,De)=>ye(te,ge)||Me.get(te,ge,De),has:(te,ge)=>!!ye(te,ge)||Me.has(te,ge)}))},5861:(wt,He,W)=>{"use strict";function o(j,we,Se,Re,ve,Te,Be){try{var ne=j[Te](Be),ee=ne.value}catch(be){return void Se(be)}ne.done?we(ee):Promise.resolve(ee).then(Re,ve)}function P(j){return function(){var we=this,Se=arguments;return new Promise(function(Re,ve){var Te=j.apply(we,Se);function Be(ee){o(Te,Re,ve,Be,ne,"next",ee)}function ne(ee){o(Te,Re,ve,Be,ne,"throw",ee)}Be(void 0)})}}W.d(He,{Z:()=>P})}},wt=>{wt(wt.s=7115)}]);